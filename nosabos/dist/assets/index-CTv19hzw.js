function _mergeNamespaces(n,e){for(var s=0;s<e.length;s++){const o=e[s];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in n)){const c=Object.getOwnPropertyDescriptor(o,a);c&&Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(o,a,c){var u=null;if(c!==void 0&&(u=""+c),a.key!==void 0&&(u=""+a.key),"key"in a){c={};for(var h in a)h!=="key"&&(c[h]=a[h])}else c=a;return a=c.ref,{$$typeof:n,type:o,key:u,ref:a!==void 0?a:null,props:c}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=s,reactJsxRuntime_production.jsxs=s,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function T(An){return An===null||typeof An!="object"?null:(An=b&&An[b]||An["@@iterator"],typeof An=="function"?An:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,w={};function D(An,Vn,Bn){this.props=An,this.context=Vn,this.refs=w,this.updater=Bn||A}D.prototype.isReactComponent={},D.prototype.setState=function(An,Vn){if(typeof An!="object"&&typeof An!="function"&&An!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,An,Vn,"setState")},D.prototype.forceUpdate=function(An){this.updater.enqueueForceUpdate(this,An,"forceUpdate")};function fn(){}fn.prototype=D.prototype;function yn(An,Vn,Bn){this.props=An,this.context=Vn,this.refs=w,this.updater=Bn||A}var pn=yn.prototype=new fn;pn.constructor=yn,R(pn,D.prototype),pn.isPureReactComponent=!0;var wn=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},bn=Object.prototype.hasOwnProperty;function wt(An,Vn,Bn,Ln,Xn,er){return Bn=er.ref,{$$typeof:n,type:An,key:Vn,ref:Bn!==void 0?Bn:null,props:er}}function jt(An,Vn){return wt(An.type,Vn,void 0,void 0,void 0,An.props)}function ln(An){return typeof An=="object"&&An!==null&&An.$$typeof===n}function vn(An){var Vn={"=":"=0",":":"=2"};return"$"+An.replace(/[=:]/g,function(Bn){return Vn[Bn]})}var dn=/\/+/g;function mn(An,Vn){return typeof An=="object"&&An!==null&&An.key!=null?vn(""+An.key):Vn.toString(36)}function zt(){}function $n(An){switch(An.status){case"fulfilled":return An.value;case"rejected":throw An.reason;default:switch(typeof An.status=="string"?An.then(zt,zt):(An.status="pending",An.then(function(Vn){An.status==="pending"&&(An.status="fulfilled",An.value=Vn)},function(Vn){An.status==="pending"&&(An.status="rejected",An.reason=Vn)})),An.status){case"fulfilled":return An.value;case"rejected":throw An.reason}}throw An}function Sn(An,Vn,Bn,Ln,Xn){var er=typeof An;(er==="undefined"||er==="boolean")&&(An=null);var rr=!1;if(An===null)rr=!0;else switch(er){case"bigint":case"string":case"number":rr=!0;break;case"object":switch(An.$$typeof){case n:case e:rr=!0;break;case _:return rr=An._init,Sn(rr(An._payload),Vn,Bn,Ln,Xn)}}if(rr)return Xn=Xn(An),rr=Ln===""?"."+mn(An,0):Ln,wn(Xn)?(Bn="",rr!=null&&(Bn=rr.replace(dn,"$&/")+"/"),Sn(Xn,Vn,Bn,"",function(pr){return pr})):Xn!=null&&(ln(Xn)&&(Xn=jt(Xn,Bn+(Xn.key==null||An&&An.key===Xn.key?"":(""+Xn.key).replace(dn,"$&/")+"/")+rr)),Vn.push(Xn)),1;rr=0;var cr=Ln===""?".":Ln+":";if(wn(An))for(var ar=0;ar<An.length;ar++)Ln=An[ar],er=cr+mn(Ln,ar),rr+=Sn(Ln,Vn,Bn,er,Xn);else if(ar=T(An),typeof ar=="function")for(An=ar.call(An),ar=0;!(Ln=An.next()).done;)Ln=Ln.value,er=cr+mn(Ln,ar++),rr+=Sn(Ln,Vn,Bn,er,Xn);else if(er==="object"){if(typeof An.then=="function")return Sn($n(An),Vn,Bn,Ln,Xn);throw Vn=String(An),Error("Objects are not valid as a React child (found: "+(Vn==="[object Object]"?"object with keys {"+Object.keys(An).join(", ")+"}":Vn)+"). If you meant to render a collection of children, use an array instead.")}return rr}function En(An,Vn,Bn){if(An==null)return An;var Ln=[],Xn=0;return Sn(An,Ln,"","",function(er){return Vn.call(Bn,er,Xn++)}),Ln}function Cn(An){if(An._status===-1){var Vn=An._result;Vn=Vn(),Vn.then(function(Bn){(An._status===0||An._status===-1)&&(An._status=1,An._result=Bn)},function(Bn){(An._status===0||An._status===-1)&&(An._status=2,An._result=Bn)}),An._status===-1&&(An._status=0,An._result=Vn)}if(An._status===1)return An._result.default;throw An._result}var On=typeof reportError=="function"?reportError:function(An){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Vn=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof An=="object"&&An!==null&&typeof An.message=="string"?String(An.message):String(An),error:An});if(!window.dispatchEvent(Vn))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",An);return}console.error(An)};function Fn(){}return react_production.Children={map:En,forEach:function(An,Vn,Bn){En(An,function(){Vn.apply(this,arguments)},Bn)},count:function(An){var Vn=0;return En(An,function(){Vn++}),Vn},toArray:function(An){return En(An,function(Vn){return Vn})||[]},only:function(An){if(!ln(An))throw Error("React.Children.only expected to receive a single React element child.");return An}},react_production.Component=D,react_production.Fragment=s,react_production.Profiler=a,react_production.PureComponent=yn,react_production.StrictMode=o,react_production.Suspense=m,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(An){return V.H.useMemoCache(An)}},react_production.cache=function(An){return function(){return An.apply(null,arguments)}},react_production.cloneElement=function(An,Vn,Bn){if(An==null)throw Error("The argument must be a React element, but you passed "+An+".");var Ln=R({},An.props),Xn=An.key,er=void 0;if(Vn!=null)for(rr in Vn.ref!==void 0&&(er=void 0),Vn.key!==void 0&&(Xn=""+Vn.key),Vn)!bn.call(Vn,rr)||rr==="key"||rr==="__self"||rr==="__source"||rr==="ref"&&Vn.ref===void 0||(Ln[rr]=Vn[rr]);var rr=arguments.length-2;if(rr===1)Ln.children=Bn;else if(1<rr){for(var cr=Array(rr),ar=0;ar<rr;ar++)cr[ar]=arguments[ar+2];Ln.children=cr}return wt(An.type,Xn,void 0,void 0,er,Ln)},react_production.createContext=function(An){return An={$$typeof:u,_currentValue:An,_currentValue2:An,_threadCount:0,Provider:null,Consumer:null},An.Provider=An,An.Consumer={$$typeof:c,_context:An},An},react_production.createElement=function(An,Vn,Bn){var Ln,Xn={},er=null;if(Vn!=null)for(Ln in Vn.key!==void 0&&(er=""+Vn.key),Vn)bn.call(Vn,Ln)&&Ln!=="key"&&Ln!=="__self"&&Ln!=="__source"&&(Xn[Ln]=Vn[Ln]);var rr=arguments.length-2;if(rr===1)Xn.children=Bn;else if(1<rr){for(var cr=Array(rr),ar=0;ar<rr;ar++)cr[ar]=arguments[ar+2];Xn.children=cr}if(An&&An.defaultProps)for(Ln in rr=An.defaultProps,rr)Xn[Ln]===void 0&&(Xn[Ln]=rr[Ln]);return wt(An,er,void 0,void 0,null,Xn)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(An){return{$$typeof:h,render:An}},react_production.isValidElement=ln,react_production.lazy=function(An){return{$$typeof:_,_payload:{_status:-1,_result:An},_init:Cn}},react_production.memo=function(An,Vn){return{$$typeof:g,type:An,compare:Vn===void 0?null:Vn}},react_production.startTransition=function(An){var Vn=V.T,Bn={};V.T=Bn;try{var Ln=An(),Xn=V.S;Xn!==null&&Xn(Bn,Ln),typeof Ln=="object"&&Ln!==null&&typeof Ln.then=="function"&&Ln.then(Fn,On)}catch(er){On(er)}finally{V.T=Vn}},react_production.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},react_production.use=function(An){return V.H.use(An)},react_production.useActionState=function(An,Vn,Bn){return V.H.useActionState(An,Vn,Bn)},react_production.useCallback=function(An,Vn){return V.H.useCallback(An,Vn)},react_production.useContext=function(An){return V.H.useContext(An)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(An,Vn){return V.H.useDeferredValue(An,Vn)},react_production.useEffect=function(An,Vn,Bn){var Ln=V.H;if(typeof Bn=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ln.useEffect(An,Vn)},react_production.useId=function(){return V.H.useId()},react_production.useImperativeHandle=function(An,Vn,Bn){return V.H.useImperativeHandle(An,Vn,Bn)},react_production.useInsertionEffect=function(An,Vn){return V.H.useInsertionEffect(An,Vn)},react_production.useLayoutEffect=function(An,Vn){return V.H.useLayoutEffect(An,Vn)},react_production.useMemo=function(An,Vn){return V.H.useMemo(An,Vn)},react_production.useOptimistic=function(An,Vn){return V.H.useOptimistic(An,Vn)},react_production.useReducer=function(An,Vn,Bn){return V.H.useReducer(An,Vn,Bn)},react_production.useRef=function(An){return V.H.useRef(An)},react_production.useState=function(An){return V.H.useState(An)},react_production.useSyncExternalStore=function(An,Vn,Bn){return V.H.useSyncExternalStore(An,Vn,Bn)},react_production.useTransition=function(){return V.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(n){function e(En,Cn){var On=En.length;En.push(Cn);e:for(;0<On;){var Fn=On-1>>>1,An=En[Fn];if(0<a(An,Cn))En[Fn]=Cn,En[On]=An,On=Fn;else break e}}function s(En){return En.length===0?null:En[0]}function o(En){if(En.length===0)return null;var Cn=En[0],On=En.pop();if(On!==Cn){En[0]=On;e:for(var Fn=0,An=En.length,Vn=An>>>1;Fn<Vn;){var Bn=2*(Fn+1)-1,Ln=En[Bn],Xn=Bn+1,er=En[Xn];if(0>a(Ln,On))Xn<An&&0>a(er,Ln)?(En[Fn]=er,En[Xn]=On,Fn=Xn):(En[Fn]=Ln,En[Bn]=On,Fn=Bn);else if(Xn<An&&0>a(er,On))En[Fn]=er,En[Xn]=On,Fn=Xn;else break e}}return Cn}function a(En,Cn){var On=En.sortIndex-Cn.sortIndex;return On!==0?On:En.id-Cn.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var m=[],g=[],_=1,b=null,T=3,A=!1,R=!1,w=!1,D=!1,fn=typeof setTimeout=="function"?setTimeout:null,yn=typeof clearTimeout=="function"?clearTimeout:null,pn=typeof setImmediate<"u"?setImmediate:null;function wn(En){for(var Cn=s(g);Cn!==null;){if(Cn.callback===null)o(g);else if(Cn.startTime<=En)o(g),Cn.sortIndex=Cn.expirationTime,e(m,Cn);else break;Cn=s(g)}}function V(En){if(w=!1,wn(En),!R)if(s(m)!==null)R=!0,bn||(bn=!0,mn());else{var Cn=s(g);Cn!==null&&Sn(V,Cn.startTime-En)}}var bn=!1,wt=-1,jt=5,ln=-1;function vn(){return D?!0:!(n.unstable_now()-ln<jt)}function dn(){if(D=!1,bn){var En=n.unstable_now();ln=En;var Cn=!0;try{e:{R=!1,w&&(w=!1,yn(wt),wt=-1),A=!0;var On=T;try{t:{for(wn(En),b=s(m);b!==null&&!(b.expirationTime>En&&vn());){var Fn=b.callback;if(typeof Fn=="function"){b.callback=null,T=b.priorityLevel;var An=Fn(b.expirationTime<=En);if(En=n.unstable_now(),typeof An=="function"){b.callback=An,wn(En),Cn=!0;break t}b===s(m)&&o(m),wn(En)}else o(m);b=s(m)}if(b!==null)Cn=!0;else{var Vn=s(g);Vn!==null&&Sn(V,Vn.startTime-En),Cn=!1}}break e}finally{b=null,T=On,A=!1}Cn=void 0}}finally{Cn?mn():bn=!1}}}var mn;if(typeof pn=="function")mn=function(){pn(dn)};else if(typeof MessageChannel<"u"){var zt=new MessageChannel,$n=zt.port2;zt.port1.onmessage=dn,mn=function(){$n.postMessage(null)}}else mn=function(){fn(dn,0)};function Sn(En,Cn){wt=fn(function(){En(n.unstable_now())},Cn)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(En){En.callback=null},n.unstable_forceFrameRate=function(En){0>En||125<En?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):jt=0<En?Math.floor(1e3/En):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(En){switch(T){case 1:case 2:case 3:var Cn=3;break;default:Cn=T}var On=T;T=Cn;try{return En()}finally{T=On}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(En,Cn){switch(En){case 1:case 2:case 3:case 4:case 5:break;default:En=3}var On=T;T=En;try{return Cn()}finally{T=On}},n.unstable_scheduleCallback=function(En,Cn,On){var Fn=n.unstable_now();switch(typeof On=="object"&&On!==null?(On=On.delay,On=typeof On=="number"&&0<On?Fn+On:Fn):On=Fn,En){case 1:var An=-1;break;case 2:An=250;break;case 5:An=1073741823;break;case 4:An=1e4;break;default:An=5e3}return An=On+An,En={id:_++,callback:Cn,priorityLevel:En,startTime:On,expirationTime:An,sortIndex:-1},On>Fn?(En.sortIndex=On,e(g,En),s(m)===null&&En===s(g)&&(w?(yn(wt),wt=-1):w=!0,Sn(V,On-Fn))):(En.sortIndex=An,e(m,En),R||A||(R=!0,bn||(bn=!0,mn()))),En},n.unstable_shouldYield=vn,n.unstable_wrapCallback=function(En){var Cn=T;return function(){var On=T;T=Cn;try{return En.apply(this,arguments)}finally{T=On}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var n=requireReact();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(m,g,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:g,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,reactDom_production.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(m,g,null,_)},reactDom_production.flushSync=function(m){var g=u.T,_=o.p;try{if(u.T=null,o.p=2,m)return m()}finally{u.T=g,o.p=_,o.d.f()}},reactDom_production.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(m,g))},reactDom_production.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},reactDom_production.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,b=h(_,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?o.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:A}):_==="script"&&o.d.X(m,{crossOrigin:b,integrity:T,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},reactDom_production.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=h(g.as,g.crossOrigin);o.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(m)},reactDom_production.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,b=h(_,g.crossOrigin);o.d.L(m,_,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},reactDom_production.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=h(g.as,g.crossOrigin);o.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(m)},reactDom_production.requestFormReset=function(m){o.d.r(m)},reactDom_production.unstable_batchedUpdates=function(m,g){return m(g)},reactDom_production.useFormState=function(m,g,_){return u.H.useFormState(m,g,_)},reactDom_production.useFormStatus=function(){return u.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var n=requireScheduler(),e=requireReact(),s=requireReactDom();function o(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function c(l){var f=l,p=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(p=f.return),l=f.return;while(l)}return f.tag===3?p:null}function u(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function h(l){if(c(l)!==l)throw Error(o(188))}function m(l){var f=l.alternate;if(!f){if(f=c(l),f===null)throw Error(o(188));return f!==l?null:l}for(var p=l,y=f;;){var v=p.return;if(v===null)break;var S=v.alternate;if(S===null){if(y=v.return,y!==null){p=y;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===p)return h(v),l;if(S===y)return h(v),f;S=S.sibling}throw Error(o(188))}if(p.return!==y.return)p=v,y=S;else{for(var Wt=!1,Tn=v.child;Tn;){if(Tn===p){Wt=!0,p=v,y=S;break}if(Tn===y){Wt=!0,y=v,p=S;break}Tn=Tn.sibling}if(!Wt){for(Tn=S.child;Tn;){if(Tn===p){Wt=!0,p=S,y=v;break}if(Tn===y){Wt=!0,y=S,p=v;break}Tn=Tn.sibling}if(!Wt)throw Error(o(189))}}if(p.alternate!==y)throw Error(o(190))}if(p.tag!==3)throw Error(o(188));return p.stateNode.current===p?l:f}function g(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=g(l),f!==null)return f;l=l.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),fn=Symbol.for("react.provider"),yn=Symbol.for("react.consumer"),pn=Symbol.for("react.context"),wn=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),bn=Symbol.for("react.suspense_list"),wt=Symbol.for("react.memo"),jt=Symbol.for("react.lazy"),ln=Symbol.for("react.activity"),vn=Symbol.for("react.memo_cache_sentinel"),dn=Symbol.iterator;function mn(l){return l===null||typeof l!="object"?null:(l=dn&&l[dn]||l["@@iterator"],typeof l=="function"?l:null)}var zt=Symbol.for("react.client.reference");function $n(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===zt?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case R:return"Fragment";case D:return"Profiler";case w:return"StrictMode";case V:return"Suspense";case bn:return"SuspenseList";case ln:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case A:return"Portal";case pn:return(l.displayName||"Context")+".Provider";case yn:return(l._context.displayName||"Context")+".Consumer";case wn:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case wt:return f=l.displayName||null,f!==null?f:$n(l.type)||"Memo";case jt:f=l._payload,l=l._init;try{return $n(l(f))}catch{}}return null}var Sn=Array.isArray,En=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Cn=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,On={pending:!1,data:null,method:null,action:null},Fn=[],An=-1;function Vn(l){return{current:l}}function Bn(l){0>An||(l.current=Fn[An],Fn[An]=null,An--)}function Ln(l,f){An++,Fn[An]=l.current,l.current=f}var Xn=Vn(null),er=Vn(null),rr=Vn(null),cr=Vn(null);function ar(l,f){switch(Ln(rr,f),Ln(er,l),Ln(Xn,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?Qp(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=Qp(f),l=Zp(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Bn(Xn),Ln(Xn,l)}function pr(){Bn(Xn),Bn(er),Bn(rr)}function _r(l){l.memoizedState!==null&&Ln(cr,l);var f=Xn.current,p=Zp(f,l.type);f!==p&&(Ln(er,l),Ln(Xn,p))}function jr(l){er.current===l&&(Bn(Xn),Bn(er)),cr.current===l&&(Bn(cr),Jl._currentValue=On)}var Sr=Object.prototype.hasOwnProperty,Tr=n.unstable_scheduleCallback,sr=n.unstable_cancelCallback,Ar=n.unstable_shouldYield,qr=n.unstable_requestPaint,Vr=n.unstable_now,ui=n.unstable_getCurrentPriorityLevel,si=n.unstable_ImmediatePriority,ni=n.unstable_UserBlockingPriority,pi=n.unstable_NormalPriority,ii=n.unstable_LowPriority,di=n.unstable_IdlePriority,Zi=n.log,Ei=n.unstable_setDisableYieldValue,Ur=null,gn=null;function P(l){if(typeof Zi=="function"&&Ei(l),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(Ur,l)}catch{}}var C=Math.clz32?Math.clz32:Hn,xn=Math.log,kn=Math.LN2;function Hn(l){return l>>>=0,l===0?32:31-(xn(l)/kn|0)|0}var Qn=256,hr=4194304;function Zn(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function or(l,f,p){var y=l.pendingLanes;if(y===0)return 0;var v=0,S=l.suspendedLanes,Wt=l.pingedLanes;l=l.warmLanes;var Tn=y&134217727;return Tn!==0?(y=Tn&~S,y!==0?v=Zn(y):(Wt&=Tn,Wt!==0?v=Zn(Wt):p||(p=Tn&~l,p!==0&&(v=Zn(p))))):(Tn=y&~S,Tn!==0?v=Zn(Tn):Wt!==0?v=Zn(Wt):p||(p=y&~l,p!==0&&(v=Zn(p)))),v===0?0:f!==0&&f!==v&&(f&S)===0&&(S=v&-v,p=f&-f,S>=p||S===32&&(p&4194048)!==0)?f:v}function ur(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function fr(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fr(){var l=Qn;return Qn<<=1,(Qn&4194048)===0&&(Qn=256),l}function vr(){var l=hr;return hr<<=1,(hr&62914560)===0&&(hr=4194304),l}function Mr(l){for(var f=[],p=0;31>p;p++)f.push(l);return f}function Pr(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Rr(l,f,p,y,v,S){var Wt=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var Tn=l.entanglements,Dn=l.expirationTimes,qn=l.hiddenUpdates;for(p=Wt&~p;0<p;){var Jn=31-C(p),nr=1<<Jn;Tn[Jn]=0,Dn[Jn]=-1;var Gn=qn[Jn];if(Gn!==null)for(qn[Jn]=null,Jn=0;Jn<Gn.length;Jn++){var Wn=Gn[Jn];Wn!==null&&(Wn.lane&=-536870913)}p&=~nr}y!==0&&Si(l,y,0),S!==0&&v===0&&l.tag!==0&&(l.suspendedLanes|=S&~(Wt&~f))}function Si(l,f,p){l.pendingLanes|=f,l.suspendedLanes&=~f;var y=31-C(f);l.entangledLanes|=f,l.entanglements[y]=l.entanglements[y]|1073741824|p&4194090}function vi(l,f){var p=l.entangledLanes|=f;for(l=l.entanglements;p;){var y=31-C(p),v=1<<y;v&f|l[y]&f&&(l[y]|=f),p&=~v}}function Ai(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Ji(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function ki(){var l=Cn.p;return l!==0?l:(l=window.event,l===void 0?32:ym(l.type))}function oi(l,f){var p=Cn.p;try{return Cn.p=l,f()}finally{Cn.p=p}}var Er=Math.random().toString(36).slice(2),$r="__reactFiber$"+Er,ei="__reactProps$"+Er,mi="__reactContainer$"+Er,is="__reactEvents$"+Er,js="__reactListeners$"+Er,Us="__reactHandles$"+Er,Pa="__reactResources$"+Er,eo="__reactMarker$"+Er;function zs(l){delete l[$r],delete l[ei],delete l[is],delete l[js],delete l[Us]}function Ds(l){var f=l[$r];if(f)return f;for(var p=l.parentNode;p;){if(f=p[mi]||p[$r]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(l=nm(l);l!==null;){if(p=l[$r])return p;l=nm(l)}return f}l=p,p=l.parentNode}return null}function Li(l){if(l=l[$r]||l[mi]){var f=l.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return l}return null}function Ts(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(o(33))}function Fi(l){var f=l[Pa];return f||(f=l[Pa]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function fi(l){l[eo]=!0}var na=new Set,Ro={};function ss(l,f){os(l,f),os(l+"Capture",f)}function os(l,f){for(Ro[l]=f,l=0;l<f.length;l++)na.add(f[l])}var Ca=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),to={},$s={};function Va(l){return Sr.call($s,l)?!0:Sr.call(to,l)?!1:Ca.test(l)?$s[l]=!0:(to[l]=!0,!1)}function as(l,f,p){if(Va(f))if(p===null)l.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var y=f.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+p)}}function ls(l,f,p){if(p===null)l.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+p)}}function Ri(l,f,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(f,p,""+y)}}var no,ka;function xs(l){if(no===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);no=f&&f[1]||"",ka=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+no+l+ka}var wo=!1;function Io(l,f){if(!l||wo)return"";wo=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(f){var nr=function(){throw Error()};if(Object.defineProperty(nr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nr,[])}catch(Wn){var Gn=Wn}Reflect.construct(l,[],nr)}else{try{nr.call()}catch(Wn){Gn=Wn}l.call(nr.prototype)}}else{try{throw Error()}catch(Wn){Gn=Wn}(nr=l())&&typeof nr.catch=="function"&&nr.catch(function(){})}}catch(Wn){if(Wn&&Gn&&typeof Wn.stack=="string")return[Wn.stack,Gn.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=y.DetermineComponentFrameRoot(),Wt=S[0],Tn=S[1];if(Wt&&Tn){var Dn=Wt.split(`
`),qn=Tn.split(`
`);for(v=y=0;y<Dn.length&&!Dn[y].includes("DetermineComponentFrameRoot");)y++;for(;v<qn.length&&!qn[v].includes("DetermineComponentFrameRoot");)v++;if(y===Dn.length||v===qn.length)for(y=Dn.length-1,v=qn.length-1;1<=y&&0<=v&&Dn[y]!==qn[v];)v--;for(;1<=y&&0<=v;y--,v--)if(Dn[y]!==qn[v]){if(y!==1||v!==1)do if(y--,v--,0>v||Dn[y]!==qn[v]){var Jn=`
`+Dn[y].replace(" at new "," at ");return l.displayName&&Jn.includes("<anonymous>")&&(Jn=Jn.replace("<anonymous>",l.displayName)),Jn}while(1<=y&&0<=v);break}}}finally{wo=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?xs(p):""}function ra(l){switch(l.tag){case 26:case 27:case 5:return xs(l.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 15:return Io(l.type,!1);case 11:return Io(l.type.render,!1);case 1:return Io(l.type,!0);case 31:return xs("Activity");default:return""}}function Po(l){try{var f="";do f+=ra(l),l=l.return;while(l);return f}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ji(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ia(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function fl(l){var f=ia(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,f),y=""+l[f];if(!l.hasOwnProperty(f)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var v=p.get,S=p.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return v.call(this)},set:function(Wt){y=""+Wt,S.call(this,Wt)}}),Object.defineProperty(l,f,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(Wt){y=""+Wt},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function Co(l){l._valueTracker||(l._valueTracker=fl(l))}function sa(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var p=f.getValue(),y="";return l&&(y=ia(l)?l.checked?"true":"false":l.value),l=y,l!==p?(f.setValue(l),!0):!1}function ro(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Vo=/[\n"\\]/g;function ai(l){return l.replace(Vo,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Ki(l,f,p,y,v,S,Wt,Tn){l.name="",Wt!=null&&typeof Wt!="function"&&typeof Wt!="symbol"&&typeof Wt!="boolean"?l.type=Wt:l.removeAttribute("type"),f!=null?Wt==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+ji(f)):l.value!==""+ji(f)&&(l.value=""+ji(f)):Wt!=="submit"&&Wt!=="reset"||l.removeAttribute("value"),f!=null?Ms(l,Wt,ji(f)):p!=null?Ms(l,Wt,ji(p)):y!=null&&l.removeAttribute("value"),v==null&&S!=null&&(l.defaultChecked=!!S),v!=null&&(l.checked=v&&typeof v!="function"&&typeof v!="symbol"),Tn!=null&&typeof Tn!="function"&&typeof Tn!="symbol"&&typeof Tn!="boolean"?l.name=""+ji(Tn):l.removeAttribute("name")}function io(l,f,p,y,v,S,Wt,Tn){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(l.type=S),f!=null||p!=null){if(!(S!=="submit"&&S!=="reset"||f!=null))return;p=p!=null?""+ji(p):"",f=f!=null?""+ji(f):p,Tn||f===l.value||(l.value=f),l.defaultValue=f}y=y??v,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=Tn?l.checked:!!y,l.defaultChecked=!!y,Wt!=null&&typeof Wt!="function"&&typeof Wt!="symbol"&&typeof Wt!="boolean"&&(l.name=Wt)}function Ms(l,f,p){f==="number"&&ro(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Ns(l,f,p,y){if(l=l.options,f){f={};for(var v=0;v<p.length;v++)f["$"+p[v]]=!0;for(p=0;p<l.length;p++)v=f.hasOwnProperty("$"+l[p].value),l[p].selected!==v&&(l[p].selected=v),v&&y&&(l[p].defaultSelected=!0)}else{for(p=""+ji(p),f=null,v=0;v<l.length;v++){if(l[v].value===p){l[v].selected=!0,y&&(l[v].defaultSelected=!0);return}f!==null||l[v].disabled||(f=l[v])}f!==null&&(f.selected=!0)}}function Kr(l,f,p){if(f!=null&&(f=""+ji(f),f!==l.value&&(l.value=f),p==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=p!=null?""+ji(p):""}function so(l,f,p,y){if(f==null){if(y!=null){if(p!=null)throw Error(o(92));if(Sn(y)){if(1<y.length)throw Error(o(93));y=y[0]}p=y}p==null&&(p=""),f=p}p=ji(f),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y)}function Yi(l,f){if(f){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=f;return}}l.textContent=f}var oo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Da(l,f,p){var y=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":y?l.setProperty(f,p):typeof p!="number"||p===0||oo.has(f)?f==="float"?l.cssFloat=p:l[f]=(""+p).trim():l[f]=p+"px"}function oa(l,f,p){if(f!=null&&typeof f!="object")throw Error(o(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||f!=null&&f.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var v in f)y=f[v],f.hasOwnProperty(v)&&p[v]!==y&&Da(l,v,y)}else for(var S in f)f.hasOwnProperty(S)&&Da(l,S,f[S])}function ao(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(l){return pl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var es=null;function Gi(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var cs=null,us=null;function aa(l){var f=Li(l);if(f&&(l=f.stateNode)){var p=l[ei]||null;e:switch(l=f.stateNode,f.type){case"input":if(Ki(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ai(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var y=p[f];if(y!==l&&y.form===l.form){var v=y[ei]||null;if(!v)throw Error(o(90));Ki(y,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(f=0;f<p.length;f++)y=p[f],y.form===l.form&&sa(y)}break e;case"textarea":Kr(l,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&Ns(l,!!p.multiple,f,!1)}}}var ds=!1;function Do(l,f,p){if(ds)return l(f,p);ds=!0;try{var y=l(f);return y}finally{if(ds=!1,(cs!==null||us!==null)&&(Kc(),cs&&(f=cs,l=us,us=cs=null,aa(f),l)))for(f=0;f<l.length;f++)aa(l[f])}}function Hs(l,f){var p=l.stateNode;if(p===null)return null;var y=p[ei]||null;if(y===null)return null;p=y[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(o(231,f,typeof p));return p}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Di=!1;if(wi)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){Di=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Di=!1}var fs=null,qs=null,Ss=null;function la(){if(Ss)return Ss;var l,f=qs,p=f.length,y,v="value"in fs?fs.value:fs.textContent,S=v.length;for(l=0;l<p&&f[l]===v[l];l++);var Wt=p-l;for(y=1;y<=Wt&&f[p-y]===v[S-y];y++);return Ss=v.slice(l,1<y?1-y:void 0)}function As(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function hs(){return!0}function ca(){return!1}function In(l){function f(p,y,v,S,Wt){this._reactName=p,this._targetInst=v,this.type=y,this.nativeEvent=S,this.target=Wt,this.currentTarget=null;for(var Tn in l)l.hasOwnProperty(Tn)&&(p=l[Tn],this[Tn]=p?p(S):S[Tn]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?hs:ca,this.isPropagationStopped=ca,this}return _(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),f}var Mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kn=In(Mn),lr=_({},Mn,{view:0,detail:0}),wr=In(lr),Nr,Gr,xr,zr=_({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:da,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==xr&&(xr&&l.type==="mousemove"?(Nr=l.screenX-xr.screenX,Gr=l.screenY-xr.screenY):Gr=Nr=0,xr=l),Nr)},movementY:function(l){return"movementY"in l?l.movementY:Gr}}),li=In(zr),$i=_({},zr,{dataTransfer:0}),co=In($i),Bs=_({},lr,{relatedTarget:0}),Gs=In(Bs),$o=_({},Mn,{animationName:0,elapsedTime:0,pseudoElement:0}),$a=In($o),ic=_({},Mn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Ma=In(ic),gu=_({},Mn,{data:0}),ml=In(gu),ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gl(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=oc[l])?!!f[l]:!1}function da(){return gl}var ac=_({},lr,{key:function(l){if(l.key){var f=ua[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=As(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?sc[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:da,charCode:function(l){return l.type==="keypress"?As(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?As(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Na=In(ac),lc=_({},zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yl=In(lc),uo=_({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:da}),cc=In(uo),uc=_({},Mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),dc=In(uc),fc=_({},zr,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Ba=In(fc),Xi=_({},Mn,{newState:0,oldState:0}),hc=In(Xi),pc=[9,13,27,32],Ws=wi&&"CompositionEvent"in window,E=null;wi&&"documentMode"in document&&(E=document.documentMode);var I=wi&&"TextEvent"in window&&!E,Gt=wi&&(!Ws||E&&8<E&&11>=E),Rn=" ",Un=!1;function Yn(l,f){switch(l){case"keyup":return pc.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ir(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Br=!1;function Ii(l,f){switch(l){case"compositionend":return ir(f);case"keypress":return f.which!==32?null:(Un=!0,Rn);case"textInput":return l=f.data,l===Rn&&Un?null:l;default:return null}}function Or(l,f){if(Br)return l==="compositionend"||!Ws&&Yn(l,f)?(l=la(),Ss=qs=fs=null,Br=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Gt&&f.locale!=="ko"?null:f.data;default:return null}}var Mi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pi(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!Mi[l.type]:f==="textarea"}function fo(l,f,p,y){cs?us?us.push(y):us=[y]:cs=y,f=eu(f,"onChange"),0<f.length&&(p=new Kn("onChange","change",null,p,y),l.push({event:p,listeners:f}))}var Ui=null,Ks=null;function _l(l){Gp(l,0)}function mc(l){var f=Ts(l);if(sa(f))return l}function df(l,f){if(l==="change")return f}var ff=!1;if(wi){var yu;if(wi){var _u="oninput"in document;if(!_u){var hf=document.createElement("div");hf.setAttribute("oninput","return;"),_u=typeof hf.oninput=="function"}yu=_u}else yu=!1;ff=yu&&(!document.documentMode||9<document.documentMode)}function pf(){Ui&&(Ui.detachEvent("onpropertychange",mf),Ks=Ui=null)}function mf(l){if(l.propertyName==="value"&&mc(Ks)){var f=[];fo(f,Ks,l,Gi(l)),Do(_l,f)}}function Um(l,f,p){l==="focusin"?(pf(),Ui=f,Ks=p,Ui.attachEvent("onpropertychange",mf)):l==="focusout"&&pf()}function zm(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return mc(Ks)}function Hm(l,f){if(l==="click")return mc(f)}function qm(l,f){if(l==="input"||l==="change")return mc(f)}function Gm(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var ps=typeof Object.is=="function"?Object.is:Gm;function bl(l,f){if(ps(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var p=Object.keys(l),y=Object.keys(f);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var v=p[y];if(!Sr.call(f,v)||!ps(l[v],f[v]))return!1}return!0}function gf(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function yf(l,f){var p=gf(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=f&&y>=f)return{node:p,offset:f-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=gf(p)}}function _f(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?_f(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function bf(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=ro(l.document);f instanceof l.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)l=f.contentWindow;else break;f=ro(l.document)}return f}function bu(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var Wm=wi&&"documentMode"in document&&11>=document.documentMode,Oa=null,Eu=null,El=null,vu=!1;function Ef(l,f,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;vu||Oa==null||Oa!==ro(y)||(y=Oa,"selectionStart"in y&&bu(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),El&&bl(El,y)||(El=y,y=eu(Eu,"onSelect"),0<y.length&&(f=new Kn("onSelect","select",null,f,p),l.push({event:f,listeners:y}),f.target=Oa)))}function fa(l,f){var p={};return p[l.toLowerCase()]=f.toLowerCase(),p["Webkit"+l]="webkit"+f,p["Moz"+l]="moz"+f,p}var La={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionrun:fa("Transition","TransitionRun"),transitionstart:fa("Transition","TransitionStart"),transitioncancel:fa("Transition","TransitionCancel"),transitionend:fa("Transition","TransitionEnd")},Tu={},vf={};wi&&(vf=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function ha(l){if(Tu[l])return Tu[l];if(!La[l])return l;var f=La[l],p;for(p in f)if(f.hasOwnProperty(p)&&p in vf)return Tu[l]=f[p];return l}var Tf=ha("animationend"),xf=ha("animationiteration"),Sf=ha("animationstart"),Km=ha("transitionrun"),Ym=ha("transitionstart"),Xm=ha("transitioncancel"),Af=ha("transitionend"),Rf=new Map,xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xu.push("scrollEnd");function Os(l,f){Rf.set(l,f),ss(f,[l])}var wf=new WeakMap;function Rs(l,f){if(typeof l=="object"&&l!==null){var p=wf.get(l);return p!==void 0?p:(f={value:l,source:f,stack:Po(f)},wf.set(l,f),f)}return{value:l,source:f,stack:Po(f)}}var ws=[],Fa=0,Su=0;function gc(){for(var l=Fa,f=Su=Fa=0;f<l;){var p=ws[f];ws[f++]=null;var y=ws[f];ws[f++]=null;var v=ws[f];ws[f++]=null;var S=ws[f];if(ws[f++]=null,y!==null&&v!==null){var Wt=y.pending;Wt===null?v.next=v:(v.next=Wt.next,Wt.next=v),y.pending=v}S!==0&&If(p,v,S)}}function yc(l,f,p,y){ws[Fa++]=l,ws[Fa++]=f,ws[Fa++]=p,ws[Fa++]=y,Su|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function Au(l,f,p,y){return yc(l,f,p,y),_c(l)}function ja(l,f){return yc(l,null,null,f),_c(l)}function If(l,f,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var v=!1,S=l.return;S!==null;)S.childLanes|=p,y=S.alternate,y!==null&&(y.childLanes|=p),S.tag===22&&(l=S.stateNode,l===null||l._visibility&1||(v=!0)),l=S,S=S.return;return l.tag===3?(S=l.stateNode,v&&f!==null&&(v=31-C(p),l=S.hiddenUpdates,y=l[v],y===null?l[v]=[f]:y.push(f),f.lane=p|536870912),S):null}function _c(l){if(50<ql)throw ql=0,kd=null,Error(o(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var Ua={};function Qm(l,f,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(l,f,p,y){return new Qm(l,f,p,y)}function Ru(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ho(l,f){var p=l.alternate;return p===null?(p=gs(l.tag,f,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=f,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,f=l.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function Pf(l,f){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,f=p.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function bc(l,f,p,y,v,S){var Wt=0;if(y=l,typeof l=="function")Ru(l)&&(Wt=1);else if(typeof l=="string")Wt=Jg(l,p,Xn.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case ln:return l=gs(31,p,f,v),l.elementType=ln,l.lanes=S,l;case R:return pa(p.children,v,S,f);case w:Wt=8,v|=24;break;case D:return l=gs(12,p,f,v|2),l.elementType=D,l.lanes=S,l;case V:return l=gs(13,p,f,v),l.elementType=V,l.lanes=S,l;case bn:return l=gs(19,p,f,v),l.elementType=bn,l.lanes=S,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case fn:case pn:Wt=10;break e;case yn:Wt=9;break e;case wn:Wt=11;break e;case wt:Wt=14;break e;case jt:Wt=16,y=null;break e}Wt=29,p=Error(o(130,l===null?"null":typeof l,"")),y=null}return f=gs(Wt,p,f,v),f.elementType=l,f.type=y,f.lanes=S,f}function pa(l,f,p,y){return l=gs(7,l,y,f),l.lanes=p,l}function wu(l,f,p){return l=gs(6,l,null,f),l.lanes=p,l}function Iu(l,f,p){return f=gs(4,l.children!==null?l.children:[],l.key,f),f.lanes=p,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var za=[],Ha=0,Ec=null,vc=0,Is=[],Ps=0,ma=null,po=1,mo="";function ga(l,f){za[Ha++]=vc,za[Ha++]=Ec,Ec=l,vc=f}function Cf(l,f,p){Is[Ps++]=po,Is[Ps++]=mo,Is[Ps++]=ma,ma=l;var y=po;l=mo;var v=32-C(y)-1;y&=~(1<<v),p+=1;var S=32-C(f)+v;if(30<S){var Wt=v-v%5;S=(y&(1<<Wt)-1).toString(32),y>>=Wt,v-=Wt,po=1<<32-C(f)+v|p<<v|y,mo=S+l}else po=1<<S|p<<v|y,mo=l}function Pu(l){l.return!==null&&(ga(l,1),Cf(l,1,0))}function Cu(l){for(;l===Ec;)Ec=za[--Ha],za[Ha]=null,vc=za[--Ha],za[Ha]=null;for(;l===ma;)ma=Is[--Ps],Is[Ps]=null,mo=Is[--Ps],Is[Ps]=null,po=Is[--Ps],Is[Ps]=null}var Qi=null,gi=null,Wr=!1,ya=null,Ys=!1,Vu=Error(o(519));function ba(l){var f=Error(o(418,""));throw xl(Rs(f,l)),Vu}function Vf(l){var f=l.stateNode,p=l.type,y=l.memoizedProps;switch(f[$r]=l,f[ei]=y,p){case"dialog":Dr("cancel",f),Dr("close",f);break;case"iframe":case"object":case"embed":Dr("load",f);break;case"video":case"audio":for(p=0;p<Wl.length;p++)Dr(Wl[p],f);break;case"source":Dr("error",f);break;case"img":case"image":case"link":Dr("error",f),Dr("load",f);break;case"details":Dr("toggle",f);break;case"input":Dr("invalid",f),io(f,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Co(f);break;case"select":Dr("invalid",f);break;case"textarea":Dr("invalid",f),so(f,y.value,y.defaultValue,y.children),Co(f)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||y.suppressHydrationWarning===!0||Xp(f.textContent,p)?(y.popover!=null&&(Dr("beforetoggle",f),Dr("toggle",f)),y.onScroll!=null&&Dr("scroll",f),y.onScrollEnd!=null&&Dr("scrollend",f),y.onClick!=null&&(f.onclick=tu),f=!0):f=!1,f||ba(l)}function kf(l){for(Qi=l.return;Qi;)switch(Qi.tag){case 5:case 13:Ys=!1;return;case 27:case 3:Ys=!0;return;default:Qi=Qi.return}}function vl(l){if(l!==Qi)return!1;if(!Wr)return kf(l),Wr=!0,!1;var f=l.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||Kd(l.type,l.memoizedProps)),p=!p),p&&gi&&ba(l),kf(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));e:{for(l=l.nextSibling,f=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(f===0){gi=Fs(l.nextSibling);break e}f--}else p!=="$"&&p!=="$!"&&p!=="$?"||f++;l=l.nextSibling}gi=null}}else f===27?(f=gi,Xo(l.type)?(l=Zd,Zd=null,gi=l):gi=f):gi=Qi?Fs(l.stateNode.nextSibling):null;return!0}function Tl(){gi=Qi=null,Wr=!1}function Df(){var l=ya;return l!==null&&(rs===null?rs=l:rs.push.apply(rs,l),ya=null),l}function xl(l){ya===null?ya=[l]:ya.push(l)}var ku=Vn(null),Ea=null,go=null;function Mo(l,f,p){Ln(ku,f._currentValue),f._currentValue=p}function yo(l){l._currentValue=ku.current,Bn(ku)}function Du(l,f,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,y!==null&&(y.childLanes|=f)):y!==null&&(y.childLanes&f)!==f&&(y.childLanes|=f),l===p)break;l=l.return}}function $u(l,f,p,y){var v=l.child;for(v!==null&&(v.return=l);v!==null;){var S=v.dependencies;if(S!==null){var Wt=v.child;S=S.firstContext;e:for(;S!==null;){var Tn=S;S=v;for(var Dn=0;Dn<f.length;Dn++)if(Tn.context===f[Dn]){S.lanes|=p,Tn=S.alternate,Tn!==null&&(Tn.lanes|=p),Du(S.return,p,l),y||(Wt=null);break e}S=Tn.next}}else if(v.tag===18){if(Wt=v.return,Wt===null)throw Error(o(341));Wt.lanes|=p,S=Wt.alternate,S!==null&&(S.lanes|=p),Du(Wt,p,l),Wt=null}else Wt=v.child;if(Wt!==null)Wt.return=v;else for(Wt=v;Wt!==null;){if(Wt===l){Wt=null;break}if(v=Wt.sibling,v!==null){v.return=Wt.return,Wt=v;break}Wt=Wt.return}v=Wt}}function Sl(l,f,p,y){l=null;for(var v=f,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var Wt=v.alternate;if(Wt===null)throw Error(o(387));if(Wt=Wt.memoizedProps,Wt!==null){var Tn=v.type;ps(v.pendingProps.value,Wt.value)||(l!==null?l.push(Tn):l=[Tn])}}else if(v===cr.current){if(Wt=v.alternate,Wt===null)throw Error(o(387));Wt.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(l!==null?l.push(Jl):l=[Jl])}v=v.return}l!==null&&$u(f,l,p,y),f.flags|=262144}function Tc(l){for(l=l.firstContext;l!==null;){if(!ps(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function va(l){Ea=l,go=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Wi(l){return $f(Ea,l)}function xc(l,f){return Ea===null&&va(l),$f(l,f)}function $f(l,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},go===null){if(l===null)throw Error(o(308));go=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else go=go.next=f;return p}var Zm=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){f.aborted=!0,l.forEach(function(p){return p()})}},Jm=n.unstable_scheduleCallback,eg=n.unstable_NormalPriority,Ci={$$typeof:pn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mu(){return{controller:new Zm,data:new Map,refCount:0}}function Al(l){l.refCount--,l.refCount===0&&Jm(eg,function(){l.controller.abort()})}var Rl=null,Nu=0,qa=0,Ga=null;function tg(l,f){if(Rl===null){var p=Rl=[];Nu=0,qa=Ld(),Ga={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Nu++,f.then(Mf,Mf),f}function Mf(){if(--Nu===0&&Rl!==null){Ga!==null&&(Ga.status="fulfilled");var l=Rl;Rl=null,qa=0,Ga=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function ng(l,f){var p=[],y={status:"pending",value:null,reason:null,then:function(v){p.push(v)}};return l.then(function(){y.status="fulfilled",y.value=f;for(var v=0;v<p.length;v++)(0,p[v])(f)},function(v){for(y.status="rejected",y.reason=v,v=0;v<p.length;v++)(0,p[v])(void 0)}),y}var Nf=En.S;En.S=function(l,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&tg(l,f),Nf!==null&&Nf(l,f)};var Ta=Vn(null);function Bu(){var l=Ta.current;return l!==null?l:ri.pooledCache}function Sc(l,f){f===null?Ln(Ta,Ta.current):Ln(Ta,f.pool)}function Bf(){var l=Bu();return l===null?null:{parent:Ci._currentValue,pool:l}}var wl=Error(o(460)),Of=Error(o(474)),Ac=Error(o(542)),Ou={then:function(){}};function Lf(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Rc(){}function Ff(l,f,p){switch(p=l[p],p===void 0?l.push(f):p!==f&&(f.then(Rc,Rc),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,Uf(l),l;default:if(typeof f.status=="string")f.then(Rc,Rc);else{if(l=ri,l!==null&&100<l.shellSuspendCounter)throw Error(o(482));l=f,l.status="pending",l.then(function(y){if(f.status==="pending"){var v=f;v.status="fulfilled",v.value=y}},function(y){if(f.status==="pending"){var v=f;v.status="rejected",v.reason=y}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,Uf(l),l}throw Il=f,wl}}var Il=null;function jf(){if(Il===null)throw Error(o(459));var l=Il;return Il=null,l}function Uf(l){if(l===wl||l===Ac)throw Error(o(483))}var No=!1;function Lu(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fu(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Bo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Oo(l,f,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Yr&2)!==0){var v=y.pending;return v===null?f.next=f:(f.next=v.next,v.next=f),y.pending=f,f=_c(l),If(l,null,p),f}return yc(l,y,f,p),_c(l)}function Pl(l,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var y=f.lanes;y&=l.pendingLanes,p|=y,f.lanes=p,vi(l,p)}}function ju(l,f){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var v=null,S=null;if(p=p.firstBaseUpdate,p!==null){do{var Wt={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};S===null?v=S=Wt:S=S.next=Wt,p=p.next}while(p!==null);S===null?v=S=f:S=S.next=f}else v=S=f;p={baseState:y.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=f}var Uu=!1;function Cl(){if(Uu){var l=Ga;if(l!==null)throw l}}function Vl(l,f,p,y){Uu=!1;var v=l.updateQueue;No=!1;var S=v.firstBaseUpdate,Wt=v.lastBaseUpdate,Tn=v.shared.pending;if(Tn!==null){v.shared.pending=null;var Dn=Tn,qn=Dn.next;Dn.next=null,Wt===null?S=qn:Wt.next=qn,Wt=Dn;var Jn=l.alternate;Jn!==null&&(Jn=Jn.updateQueue,Tn=Jn.lastBaseUpdate,Tn!==Wt&&(Tn===null?Jn.firstBaseUpdate=qn:Tn.next=qn,Jn.lastBaseUpdate=Dn))}if(S!==null){var nr=v.baseState;Wt=0,Jn=qn=Dn=null,Tn=S;do{var Gn=Tn.lane&-536870913,Wn=Gn!==Tn.lane;if(Wn?(Lr&Gn)===Gn:(y&Gn)===Gn){Gn!==0&&Gn===qa&&(Uu=!0),Jn!==null&&(Jn=Jn.next={lane:0,tag:Tn.tag,payload:Tn.payload,callback:null,next:null});e:{var br=l,gr=Tn;Gn=f;var Jr=p;switch(gr.tag){case 1:if(br=gr.payload,typeof br=="function"){nr=br.call(Jr,nr,Gn);break e}nr=br;break e;case 3:br.flags=br.flags&-65537|128;case 0:if(br=gr.payload,Gn=typeof br=="function"?br.call(Jr,nr,Gn):br,Gn==null)break e;nr=_({},nr,Gn);break e;case 2:No=!0}}Gn=Tn.callback,Gn!==null&&(l.flags|=64,Wn&&(l.flags|=8192),Wn=v.callbacks,Wn===null?v.callbacks=[Gn]:Wn.push(Gn))}else Wn={lane:Gn,tag:Tn.tag,payload:Tn.payload,callback:Tn.callback,next:null},Jn===null?(qn=Jn=Wn,Dn=nr):Jn=Jn.next=Wn,Wt|=Gn;if(Tn=Tn.next,Tn===null){if(Tn=v.shared.pending,Tn===null)break;Wn=Tn,Tn=Wn.next,Wn.next=null,v.lastBaseUpdate=Wn,v.shared.pending=null}}while(!0);Jn===null&&(Dn=nr),v.baseState=Dn,v.firstBaseUpdate=qn,v.lastBaseUpdate=Jn,S===null&&(v.shared.lanes=0),Go|=Wt,l.lanes=Wt,l.memoizedState=nr}}function zf(l,f){if(typeof l!="function")throw Error(o(191,l));l.call(f)}function Hf(l,f){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)zf(p[l],f)}var Wa=Vn(null),wc=Vn(0);function qf(l,f){l=So,Ln(wc,l),Ln(Wa,f),So=l|f.baseLanes}function zu(){Ln(wc,So),Ln(Wa,Wa.current)}function Hu(){So=wc.current,Bn(Wa),Bn(wc)}var Lo=0,Ir=null,Qr=null,Ti=null,Ic=!1,Ka=!1,xa=!1,Pc=0,kl=0,Ya=null,rg=0;function _i(){throw Error(o(321))}function qu(l,f){if(f===null)return!1;for(var p=0;p<f.length&&p<l.length;p++)if(!ps(l[p],f[p]))return!1;return!0}function Gu(l,f,p,y,v,S){return Lo=S,Ir=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,En.H=l===null||l.memoizedState===null?Ph:Ch,xa=!1,S=p(y,v),xa=!1,Ka&&(S=Wf(f,p,y,v)),Gf(l),S}function Gf(l){En.H=Mc;var f=Qr!==null&&Qr.next!==null;if(Lo=0,Ti=Qr=Ir=null,Ic=!1,kl=0,Ya=null,f)throw Error(o(300));l===null||Ni||(l=l.dependencies,l!==null&&Tc(l)&&(Ni=!0))}function Wf(l,f,p,y){Ir=l;var v=0;do{if(Ka&&(Ya=null),kl=0,Ka=!1,25<=v)throw Error(o(301));if(v+=1,Ti=Qr=null,l.updateQueue!=null){var S=l.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}En.H=ug,S=f(p,y)}while(Ka);return S}function ig(){var l=En.H,f=l.useState()[0];return f=typeof f.then=="function"?Dl(f):f,l=l.useState()[0],(Qr!==null?Qr.memoizedState:null)!==l&&(Ir.flags|=1024),f}function Wu(){var l=Pc!==0;return Pc=0,l}function Ku(l,f,p){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~p}function Yu(l){if(Ic){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Ic=!1}Lo=0,Ti=Qr=Ir=null,Ka=!1,kl=Pc=0,Ya=null}function ts(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ti===null?Ir.memoizedState=Ti=l:Ti=Ti.next=l,Ti}function xi(){if(Qr===null){var l=Ir.alternate;l=l!==null?l.memoizedState:null}else l=Qr.next;var f=Ti===null?Ir.memoizedState:Ti.next;if(f!==null)Ti=f,Qr=l;else{if(l===null)throw Ir.alternate===null?Error(o(467)):Error(o(310));Qr=l,l={memoizedState:Qr.memoizedState,baseState:Qr.baseState,baseQueue:Qr.baseQueue,queue:Qr.queue,next:null},Ti===null?Ir.memoizedState=Ti=l:Ti=Ti.next=l}return Ti}function Xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(l){var f=kl;return kl+=1,Ya===null&&(Ya=[]),l=Ff(Ya,l,f),f=Ir,(Ti===null?f.memoizedState:Ti.next)===null&&(f=f.alternate,En.H=f===null||f.memoizedState===null?Ph:Ch),l}function Cc(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Dl(l);if(l.$$typeof===pn)return Wi(l)}throw Error(o(438,String(l)))}function Qu(l){var f=null,p=Ir.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var y=Ir.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(f={data:y.data.map(function(v){return v.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=Xu(),Ir.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(l),y=0;y<l;y++)p[y]=vn;return f.index++,p}function _o(l,f){return typeof f=="function"?f(l):f}function Vc(l){var f=xi();return Zu(f,Qr,l)}function Zu(l,f,p){var y=l.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=p;var v=l.baseQueue,S=y.pending;if(S!==null){if(v!==null){var Wt=v.next;v.next=S.next,S.next=Wt}f.baseQueue=v=S,y.pending=null}if(S=l.baseState,v===null)l.memoizedState=S;else{f=v.next;var Tn=Wt=null,Dn=null,qn=f,Jn=!1;do{var nr=qn.lane&-536870913;if(nr!==qn.lane?(Lr&nr)===nr:(Lo&nr)===nr){var Gn=qn.revertLane;if(Gn===0)Dn!==null&&(Dn=Dn.next={lane:0,revertLane:0,action:qn.action,hasEagerState:qn.hasEagerState,eagerState:qn.eagerState,next:null}),nr===qa&&(Jn=!0);else if((Lo&Gn)===Gn){qn=qn.next,Gn===qa&&(Jn=!0);continue}else nr={lane:0,revertLane:qn.revertLane,action:qn.action,hasEagerState:qn.hasEagerState,eagerState:qn.eagerState,next:null},Dn===null?(Tn=Dn=nr,Wt=S):Dn=Dn.next=nr,Ir.lanes|=Gn,Go|=Gn;nr=qn.action,xa&&p(S,nr),S=qn.hasEagerState?qn.eagerState:p(S,nr)}else Gn={lane:nr,revertLane:qn.revertLane,action:qn.action,hasEagerState:qn.hasEagerState,eagerState:qn.eagerState,next:null},Dn===null?(Tn=Dn=Gn,Wt=S):Dn=Dn.next=Gn,Ir.lanes|=nr,Go|=nr;qn=qn.next}while(qn!==null&&qn!==f);if(Dn===null?Wt=S:Dn.next=Tn,!ps(S,l.memoizedState)&&(Ni=!0,Jn&&(p=Ga,p!==null)))throw p;l.memoizedState=S,l.baseState=Wt,l.baseQueue=Dn,y.lastRenderedState=S}return v===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Ju(l){var f=xi(),p=f.queue;if(p===null)throw Error(o(311));p.lastRenderedReducer=l;var y=p.dispatch,v=p.pending,S=f.memoizedState;if(v!==null){p.pending=null;var Wt=v=v.next;do S=l(S,Wt.action),Wt=Wt.next;while(Wt!==v);ps(S,f.memoizedState)||(Ni=!0),f.memoizedState=S,f.baseQueue===null&&(f.baseState=S),p.lastRenderedState=S}return[S,y]}function Kf(l,f,p){var y=Ir,v=xi(),S=Wr;if(S){if(p===void 0)throw Error(o(407));p=p()}else p=f();var Wt=!ps((Qr||v).memoizedState,p);Wt&&(v.memoizedState=p,Ni=!0),v=v.queue;var Tn=Qf.bind(null,y,v,l);if($l(2048,8,Tn,[l]),v.getSnapshot!==f||Wt||Ti!==null&&Ti.memoizedState.tag&1){if(y.flags|=2048,Xa(9,kc(),Xf.bind(null,y,v,p,f),null),ri===null)throw Error(o(349));S||(Lo&124)!==0||Yf(y,f,p)}return p}function Yf(l,f,p){l.flags|=16384,l={getSnapshot:f,value:p},f=Ir.updateQueue,f===null?(f=Xu(),Ir.updateQueue=f,f.stores=[l]):(p=f.stores,p===null?f.stores=[l]:p.push(l))}function Xf(l,f,p,y){f.value=p,f.getSnapshot=y,Zf(f)&&Jf(l)}function Qf(l,f,p){return p(function(){Zf(f)&&Jf(l)})}function Zf(l){var f=l.getSnapshot;l=l.value;try{var p=f();return!ps(l,p)}catch{return!0}}function Jf(l){var f=ja(l,2);f!==null&&vs(f,l,2)}function ed(l){var f=ts();if(typeof l=="function"){var p=l;if(l=p(),xa){P(!0);try{p()}finally{P(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:l},f}function eh(l,f,p,y){return l.baseState=p,Zu(l,Qr,typeof y=="function"?y:_o)}function sg(l,f,p,y,v){if($c(l))throw Error(o(485));if(l=f.action,l!==null){var S={payload:v,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Wt){S.listeners.push(Wt)}};En.T!==null?p(!0):S.isTransition=!1,y(S),p=f.pending,p===null?(S.next=f.pending=S,th(f,S)):(S.next=p.next,f.pending=p.next=S)}}function th(l,f){var p=f.action,y=f.payload,v=l.state;if(f.isTransition){var S=En.T,Wt={};En.T=Wt;try{var Tn=p(v,y),Dn=En.S;Dn!==null&&Dn(Wt,Tn),nh(l,f,Tn)}catch(qn){td(l,f,qn)}finally{En.T=S}}else try{S=p(v,y),nh(l,f,S)}catch(qn){td(l,f,qn)}}function nh(l,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){rh(l,f,y)},function(y){return td(l,f,y)}):rh(l,f,p)}function rh(l,f,p){f.status="fulfilled",f.value=p,ih(f),l.state=p,f=l.pending,f!==null&&(p=f.next,p===f?l.pending=null:(p=p.next,f.next=p,th(l,p)))}function td(l,f,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do f.status="rejected",f.reason=p,ih(f),f=f.next;while(f!==y)}l.action=null}function ih(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function sh(l,f){return f}function oh(l,f){if(Wr){var p=ri.formState;if(p!==null){e:{var y=Ir;if(Wr){if(gi){t:{for(var v=gi,S=Ys;v.nodeType!==8;){if(!S){v=null;break t}if(v=Fs(v.nextSibling),v===null){v=null;break t}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){gi=Fs(v.nextSibling),y=v.data==="F!";break e}}ba(y)}y=!1}y&&(f=p[0])}}return p=ts(),p.memoizedState=p.baseState=f,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sh,lastRenderedState:f},p.queue=y,p=Rh.bind(null,Ir,y),y.dispatch=p,y=ed(!1),S=ad.bind(null,Ir,!1,y.queue),y=ts(),v={state:f,dispatch:null,action:l,pending:null},y.queue=v,p=sg.bind(null,Ir,v,S,p),v.dispatch=p,y.memoizedState=l,[f,p,!1]}function ah(l){var f=xi();return lh(f,Qr,l)}function lh(l,f,p){if(f=Zu(l,f,sh)[0],l=Vc(_o)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var y=Dl(f)}catch(Wt){throw Wt===wl?Ac:Wt}else y=f;f=xi();var v=f.queue,S=v.dispatch;return p!==f.memoizedState&&(Ir.flags|=2048,Xa(9,kc(),og.bind(null,v,p),null)),[y,S,l]}function og(l,f){l.action=f}function ch(l){var f=xi(),p=Qr;if(p!==null)return lh(f,p,l);xi(),f=f.memoizedState,p=xi();var y=p.queue.dispatch;return p.memoizedState=l,[f,y,!1]}function Xa(l,f,p,y){return l={tag:l,create:p,deps:y,inst:f,next:null},f=Ir.updateQueue,f===null&&(f=Xu(),Ir.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,f.lastEffect=l),l}function kc(){return{destroy:void 0,resource:void 0}}function uh(){return xi().memoizedState}function Dc(l,f,p,y){var v=ts();y=y===void 0?null:y,Ir.flags|=l,v.memoizedState=Xa(1|f,kc(),p,y)}function $l(l,f,p,y){var v=xi();y=y===void 0?null:y;var S=v.memoizedState.inst;Qr!==null&&y!==null&&qu(y,Qr.memoizedState.deps)?v.memoizedState=Xa(f,S,p,y):(Ir.flags|=l,v.memoizedState=Xa(1|f,S,p,y))}function dh(l,f){Dc(8390656,8,l,f)}function fh(l,f){$l(2048,8,l,f)}function hh(l,f){return $l(4,2,l,f)}function ph(l,f){return $l(4,4,l,f)}function mh(l,f){if(typeof f=="function"){l=l();var p=f(l);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function gh(l,f,p){p=p!=null?p.concat([l]):null,$l(4,4,mh.bind(null,f,l),p)}function nd(){}function yh(l,f){var p=xi();f=f===void 0?null:f;var y=p.memoizedState;return f!==null&&qu(f,y[1])?y[0]:(p.memoizedState=[l,f],l)}function _h(l,f){var p=xi();f=f===void 0?null:f;var y=p.memoizedState;if(f!==null&&qu(f,y[1]))return y[0];if(y=l(),xa){P(!0);try{l()}finally{P(!1)}}return p.memoizedState=[y,f],y}function rd(l,f,p){return p===void 0||(Lo&1073741824)!==0?l.memoizedState=f:(l.memoizedState=p,l=Tp(),Ir.lanes|=l,Go|=l,p)}function bh(l,f,p,y){return ps(p,f)?p:Wa.current!==null?(l=rd(l,p,y),ps(l,f)||(Ni=!0),l):(Lo&42)===0?(Ni=!0,l.memoizedState=p):(l=Tp(),Ir.lanes|=l,Go|=l,f)}function Eh(l,f,p,y,v){var S=Cn.p;Cn.p=S!==0&&8>S?S:8;var Wt=En.T,Tn={};En.T=Tn,ad(l,!1,f,p);try{var Dn=v(),qn=En.S;if(qn!==null&&qn(Tn,Dn),Dn!==null&&typeof Dn=="object"&&typeof Dn.then=="function"){var Jn=ng(Dn,y);Ml(l,f,Jn,Es(l))}else Ml(l,f,y,Es(l))}catch(nr){Ml(l,f,{then:function(){},status:"rejected",reason:nr},Es())}finally{Cn.p=S,En.T=Wt}}function ag(){}function sd(l,f,p,y){if(l.tag!==5)throw Error(o(476));var v=Th(l).queue;Eh(l,v,f,On,p===null?ag:function(){return xh(l),p(y)})}function Th(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:On,baseState:On,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:On},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:p},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function xh(l){var f=Th(l).next.queue;Ml(l,f,{},Es())}function od(){return Wi(Jl)}function Sh(){return xi().memoizedState}function Ah(){return xi().memoizedState}function lg(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var p=Es();l=Bo(p);var y=Oo(f,l,p);y!==null&&(vs(y,f,p),Pl(y,f,p)),f={cache:Mu()},l.payload=f;return}f=f.return}}function cg(l,f,p){var y=Es();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},$c(l)?wh(f,p):(p=Au(l,f,p,y),p!==null&&(vs(p,l,y),Ih(p,f,y)))}function Rh(l,f,p){var y=Es();Ml(l,f,p,y)}function Ml(l,f,p,y){var v={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if($c(l))wh(f,v);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=f.lastRenderedReducer,S!==null))try{var Wt=f.lastRenderedState,Tn=S(Wt,p);if(v.hasEagerState=!0,v.eagerState=Tn,ps(Tn,Wt))return yc(l,f,v,0),ri===null&&gc(),!1}catch{}finally{}if(p=Au(l,f,v,y),p!==null)return vs(p,l,y),Ih(p,f,y),!0}return!1}function ad(l,f,p,y){if(y={lane:2,revertLane:Ld(),action:y,hasEagerState:!1,eagerState:null,next:null},$c(l)){if(f)throw Error(o(479))}else f=Au(l,p,y,2),f!==null&&vs(f,l,2)}function $c(l){var f=l.alternate;return l===Ir||f!==null&&f===Ir}function wh(l,f){Ka=Ic=!0;var p=l.pending;p===null?f.next=f:(f.next=p.next,p.next=f),l.pending=f}function Ih(l,f,p){if((p&4194048)!==0){var y=f.lanes;y&=l.pendingLanes,p|=y,f.lanes=p,vi(l,p)}}var Mc={readContext:Wi,use:Cc,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useLayoutEffect:_i,useInsertionEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useSyncExternalStore:_i,useId:_i,useHostTransitionStatus:_i,useFormState:_i,useActionState:_i,useOptimistic:_i,useMemoCache:_i,useCacheRefresh:_i},Ph={readContext:Wi,use:Cc,useCallback:function(l,f){return ts().memoizedState=[l,f===void 0?null:f],l},useContext:Wi,useEffect:dh,useImperativeHandle:function(l,f,p){p=p!=null?p.concat([l]):null,Dc(4194308,4,mh.bind(null,f,l),p)},useLayoutEffect:function(l,f){return Dc(4194308,4,l,f)},useInsertionEffect:function(l,f){Dc(4,2,l,f)},useMemo:function(l,f){var p=ts();f=f===void 0?null:f;var y=l();if(xa){P(!0);try{l()}finally{P(!1)}}return p.memoizedState=[y,f],y},useReducer:function(l,f,p){var y=ts();if(p!==void 0){var v=p(f);if(xa){P(!0);try{p(f)}finally{P(!1)}}}else v=f;return y.memoizedState=y.baseState=v,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:v},y.queue=l,l=l.dispatch=cg.bind(null,Ir,l),[y.memoizedState,l]},useRef:function(l){var f=ts();return l={current:l},f.memoizedState=l},useState:function(l){l=ed(l);var f=l.queue,p=Rh.bind(null,Ir,f);return f.dispatch=p,[l.memoizedState,p]},useDebugValue:nd,useDeferredValue:function(l,f){var p=ts();return rd(p,l,f)},useTransition:function(){var l=ed(!1);return l=Eh.bind(null,Ir,l.queue,!0,!1),ts().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,p){var y=Ir,v=ts();if(Wr){if(p===void 0)throw Error(o(407));p=p()}else{if(p=f(),ri===null)throw Error(o(349));(Lr&124)!==0||Yf(y,f,p)}v.memoizedState=p;var S={value:p,getSnapshot:f};return v.queue=S,dh(Qf.bind(null,y,S,l),[l]),y.flags|=2048,Xa(9,kc(),Xf.bind(null,y,S,p,f),null),p},useId:function(){var l=ts(),f=ri.identifierPrefix;if(Wr){var p=mo,y=po;p=(y&~(1<<32-C(y)-1)).toString(32)+p,f=""+f+"R"+p,p=Pc++,0<p&&(f+="H"+p.toString(32)),f+=""}else p=rg++,f=""+f+"r"+p.toString(32)+"";return l.memoizedState=f},useHostTransitionStatus:od,useFormState:oh,useActionState:oh,useOptimistic:function(l){var f=ts();f.memoizedState=f.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=ad.bind(null,Ir,!0,p),p.dispatch=f,[l,f]},useMemoCache:Qu,useCacheRefresh:function(){return ts().memoizedState=lg.bind(null,Ir)}},Ch={readContext:Wi,use:Cc,useCallback:yh,useContext:Wi,useEffect:fh,useImperativeHandle:gh,useInsertionEffect:hh,useLayoutEffect:ph,useMemo:_h,useReducer:Vc,useRef:uh,useState:function(){return Vc(_o)},useDebugValue:nd,useDeferredValue:function(l,f){var p=xi();return bh(p,Qr.memoizedState,l,f)},useTransition:function(){var l=Vc(_o)[0],f=xi().memoizedState;return[typeof l=="boolean"?l:Dl(l),f]},useSyncExternalStore:Kf,useId:Sh,useHostTransitionStatus:od,useFormState:ah,useActionState:ah,useOptimistic:function(l,f){var p=xi();return eh(p,Qr,l,f)},useMemoCache:Qu,useCacheRefresh:Ah},ug={readContext:Wi,use:Cc,useCallback:yh,useContext:Wi,useEffect:fh,useImperativeHandle:gh,useInsertionEffect:hh,useLayoutEffect:ph,useMemo:_h,useReducer:Ju,useRef:uh,useState:function(){return Ju(_o)},useDebugValue:nd,useDeferredValue:function(l,f){var p=xi();return Qr===null?rd(p,l,f):bh(p,Qr.memoizedState,l,f)},useTransition:function(){var l=Ju(_o)[0],f=xi().memoizedState;return[typeof l=="boolean"?l:Dl(l),f]},useSyncExternalStore:Kf,useId:Sh,useHostTransitionStatus:od,useFormState:ch,useActionState:ch,useOptimistic:function(l,f){var p=xi();return Qr!==null?eh(p,Qr,l,f):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:Qu,useCacheRefresh:Ah},Qa=null,Nl=0;function Nc(l){var f=Nl;return Nl+=1,Qa===null&&(Qa=[]),Ff(Qa,l,f)}function Bl(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function Bc(l,f){throw f.$$typeof===b?Error(o(525)):(l=Object.prototype.toString.call(f),Error(o(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function Vh(l){var f=l._init;return f(l._payload)}function kh(l){function f(jn,Nn){if(l){var zn=jn.deletions;zn===null?(jn.deletions=[Nn],jn.flags|=16):zn.push(Nn)}}function p(jn,Nn){if(!l)return null;for(;Nn!==null;)f(jn,Nn),Nn=Nn.sibling;return null}function y(jn){for(var Nn=new Map;jn!==null;)jn.key!==null?Nn.set(jn.key,jn):Nn.set(jn.index,jn),jn=jn.sibling;return Nn}function v(jn,Nn){return jn=ho(jn,Nn),jn.index=0,jn.sibling=null,jn}function S(jn,Nn,zn){return jn.index=zn,l?(zn=jn.alternate,zn!==null?(zn=zn.index,zn<Nn?(jn.flags|=67108866,Nn):zn):(jn.flags|=67108866,Nn)):(jn.flags|=1048576,Nn)}function Wt(jn){return l&&jn.alternate===null&&(jn.flags|=67108866),jn}function Tn(jn,Nn,zn,tr){return Nn===null||Nn.tag!==6?(Nn=wu(zn,jn.mode,tr),Nn.return=jn,Nn):(Nn=v(Nn,zn),Nn.return=jn,Nn)}function Dn(jn,Nn,zn,tr){var dr=zn.type;return dr===R?Jn(jn,Nn,zn.props.children,tr,zn.key):Nn!==null&&(Nn.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===jt&&Vh(dr)===Nn.type)?(Nn=v(Nn,zn.props),Bl(Nn,zn),Nn.return=jn,Nn):(Nn=bc(zn.type,zn.key,zn.props,null,jn.mode,tr),Bl(Nn,zn),Nn.return=jn,Nn)}function qn(jn,Nn,zn,tr){return Nn===null||Nn.tag!==4||Nn.stateNode.containerInfo!==zn.containerInfo||Nn.stateNode.implementation!==zn.implementation?(Nn=Iu(zn,jn.mode,tr),Nn.return=jn,Nn):(Nn=v(Nn,zn.children||[]),Nn.return=jn,Nn)}function Jn(jn,Nn,zn,tr,dr){return Nn===null||Nn.tag!==7?(Nn=pa(zn,jn.mode,tr,dr),Nn.return=jn,Nn):(Nn=v(Nn,zn),Nn.return=jn,Nn)}function nr(jn,Nn,zn){if(typeof Nn=="string"&&Nn!==""||typeof Nn=="number"||typeof Nn=="bigint")return Nn=wu(""+Nn,jn.mode,zn),Nn.return=jn,Nn;if(typeof Nn=="object"&&Nn!==null){switch(Nn.$$typeof){case T:return zn=bc(Nn.type,Nn.key,Nn.props,null,jn.mode,zn),Bl(zn,Nn),zn.return=jn,zn;case A:return Nn=Iu(Nn,jn.mode,zn),Nn.return=jn,Nn;case jt:var tr=Nn._init;return Nn=tr(Nn._payload),nr(jn,Nn,zn)}if(Sn(Nn)||mn(Nn))return Nn=pa(Nn,jn.mode,zn,null),Nn.return=jn,Nn;if(typeof Nn.then=="function")return nr(jn,Nc(Nn),zn);if(Nn.$$typeof===pn)return nr(jn,xc(jn,Nn),zn);Bc(jn,Nn)}return null}function Gn(jn,Nn,zn,tr){var dr=Nn!==null?Nn.key:null;if(typeof zn=="string"&&zn!==""||typeof zn=="number"||typeof zn=="bigint")return dr!==null?null:Tn(jn,Nn,""+zn,tr);if(typeof zn=="object"&&zn!==null){switch(zn.$$typeof){case T:return zn.key===dr?Dn(jn,Nn,zn,tr):null;case A:return zn.key===dr?qn(jn,Nn,zn,tr):null;case jt:return dr=zn._init,zn=dr(zn._payload),Gn(jn,Nn,zn,tr)}if(Sn(zn)||mn(zn))return dr!==null?null:Jn(jn,Nn,zn,tr,null);if(typeof zn.then=="function")return Gn(jn,Nn,Nc(zn),tr);if(zn.$$typeof===pn)return Gn(jn,Nn,xc(jn,zn),tr);Bc(jn,zn)}return null}function Wn(jn,Nn,zn,tr,dr){if(typeof tr=="string"&&tr!==""||typeof tr=="number"||typeof tr=="bigint")return jn=jn.get(zn)||null,Tn(Nn,jn,""+tr,dr);if(typeof tr=="object"&&tr!==null){switch(tr.$$typeof){case T:return jn=jn.get(tr.key===null?zn:tr.key)||null,Dn(Nn,jn,tr,dr);case A:return jn=jn.get(tr.key===null?zn:tr.key)||null,qn(Nn,jn,tr,dr);case jt:var Cr=tr._init;return tr=Cr(tr._payload),Wn(jn,Nn,zn,tr,dr)}if(Sn(tr)||mn(tr))return jn=jn.get(zn)||null,Jn(Nn,jn,tr,dr,null);if(typeof tr.then=="function")return Wn(jn,Nn,zn,Nc(tr),dr);if(tr.$$typeof===pn)return Wn(jn,Nn,zn,xc(Nn,tr),dr);Bc(Nn,tr)}return null}function br(jn,Nn,zn,tr){for(var dr=null,Cr=null,mr=Nn,yr=Nn=0,Oi=null;mr!==null&&yr<zn.length;yr++){mr.index>yr?(Oi=mr,mr=null):Oi=mr.sibling;var Hr=Gn(jn,mr,zn[yr],tr);if(Hr===null){mr===null&&(mr=Oi);break}l&&mr&&Hr.alternate===null&&f(jn,mr),Nn=S(Hr,Nn,yr),Cr===null?dr=Hr:Cr.sibling=Hr,Cr=Hr,mr=Oi}if(yr===zn.length)return p(jn,mr),Wr&&ga(jn,yr),dr;if(mr===null){for(;yr<zn.length;yr++)mr=nr(jn,zn[yr],tr),mr!==null&&(Nn=S(mr,Nn,yr),Cr===null?dr=mr:Cr.sibling=mr,Cr=mr);return Wr&&ga(jn,yr),dr}for(mr=y(mr);yr<zn.length;yr++)Oi=Wn(mr,jn,yr,zn[yr],tr),Oi!==null&&(l&&Oi.alternate!==null&&mr.delete(Oi.key===null?yr:Oi.key),Nn=S(Oi,Nn,yr),Cr===null?dr=Oi:Cr.sibling=Oi,Cr=Oi);return l&&mr.forEach(function(ta){return f(jn,ta)}),Wr&&ga(jn,yr),dr}function gr(jn,Nn,zn,tr){if(zn==null)throw Error(o(151));for(var dr=null,Cr=null,mr=Nn,yr=Nn=0,Oi=null,Hr=zn.next();mr!==null&&!Hr.done;yr++,Hr=zn.next()){mr.index>yr?(Oi=mr,mr=null):Oi=mr.sibling;var ta=Gn(jn,mr,Hr.value,tr);if(ta===null){mr===null&&(mr=Oi);break}l&&mr&&ta.alternate===null&&f(jn,mr),Nn=S(ta,Nn,yr),Cr===null?dr=ta:Cr.sibling=ta,Cr=ta,mr=Oi}if(Hr.done)return p(jn,mr),Wr&&ga(jn,yr),dr;if(mr===null){for(;!Hr.done;yr++,Hr=zn.next())Hr=nr(jn,Hr.value,tr),Hr!==null&&(Nn=S(Hr,Nn,yr),Cr===null?dr=Hr:Cr.sibling=Hr,Cr=Hr);return Wr&&ga(jn,yr),dr}for(mr=y(mr);!Hr.done;yr++,Hr=zn.next())Hr=Wn(mr,jn,yr,Hr.value,tr),Hr!==null&&(l&&Hr.alternate!==null&&mr.delete(Hr.key===null?yr:Hr.key),Nn=S(Hr,Nn,yr),Cr===null?dr=Hr:Cr.sibling=Hr,Cr=Hr);return l&&mr.forEach(function(dy){return f(jn,dy)}),Wr&&ga(jn,yr),dr}function Jr(jn,Nn,zn,tr){if(typeof zn=="object"&&zn!==null&&zn.type===R&&zn.key===null&&(zn=zn.props.children),typeof zn=="object"&&zn!==null){switch(zn.$$typeof){case T:e:{for(var dr=zn.key;Nn!==null;){if(Nn.key===dr){if(dr=zn.type,dr===R){if(Nn.tag===7){p(jn,Nn.sibling),tr=v(Nn,zn.props.children),tr.return=jn,jn=tr;break e}}else if(Nn.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===jt&&Vh(dr)===Nn.type){p(jn,Nn.sibling),tr=v(Nn,zn.props),Bl(tr,zn),tr.return=jn,jn=tr;break e}p(jn,Nn);break}else f(jn,Nn);Nn=Nn.sibling}zn.type===R?(tr=pa(zn.props.children,jn.mode,tr,zn.key),tr.return=jn,jn=tr):(tr=bc(zn.type,zn.key,zn.props,null,jn.mode,tr),Bl(tr,zn),tr.return=jn,jn=tr)}return Wt(jn);case A:e:{for(dr=zn.key;Nn!==null;){if(Nn.key===dr)if(Nn.tag===4&&Nn.stateNode.containerInfo===zn.containerInfo&&Nn.stateNode.implementation===zn.implementation){p(jn,Nn.sibling),tr=v(Nn,zn.children||[]),tr.return=jn,jn=tr;break e}else{p(jn,Nn);break}else f(jn,Nn);Nn=Nn.sibling}tr=Iu(zn,jn.mode,tr),tr.return=jn,jn=tr}return Wt(jn);case jt:return dr=zn._init,zn=dr(zn._payload),Jr(jn,Nn,zn,tr)}if(Sn(zn))return br(jn,Nn,zn,tr);if(mn(zn)){if(dr=mn(zn),typeof dr!="function")throw Error(o(150));return zn=dr.call(zn),gr(jn,Nn,zn,tr)}if(typeof zn.then=="function")return Jr(jn,Nn,Nc(zn),tr);if(zn.$$typeof===pn)return Jr(jn,Nn,xc(jn,zn),tr);Bc(jn,zn)}return typeof zn=="string"&&zn!==""||typeof zn=="number"||typeof zn=="bigint"?(zn=""+zn,Nn!==null&&Nn.tag===6?(p(jn,Nn.sibling),tr=v(Nn,zn),tr.return=jn,jn=tr):(p(jn,Nn),tr=wu(zn,jn.mode,tr),tr.return=jn,jn=tr),Wt(jn)):p(jn,Nn)}return function(jn,Nn,zn,tr){try{Nl=0;var dr=Jr(jn,Nn,zn,tr);return Qa=null,dr}catch(mr){if(mr===wl||mr===Ac)throw mr;var Cr=gs(29,mr,null,jn.mode);return Cr.lanes=tr,Cr.return=jn,Cr}finally{}}}var Za=kh(!0),Dh=kh(!1),Cs=Vn(null),Xs=null;function Fo(l){var f=l.alternate;Ln(Vi,Vi.current&1),Ln(Cs,l),Xs===null&&(f===null||Wa.current!==null||f.memoizedState!==null)&&(Xs=l)}function $h(l){if(l.tag===22){if(Ln(Vi,Vi.current),Ln(Cs,l),Xs===null){var f=l.alternate;f!==null&&f.memoizedState!==null&&(Xs=l)}}else jo()}function jo(){Ln(Vi,Vi.current),Ln(Cs,Cs.current)}function bo(l){Bn(Cs),Xs===l&&(Xs=null),Bn(Vi)}var Vi=Vn(0);function Oc(l){for(var f=l;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||Qd(p)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function ld(l,f,p,y){f=l.memoizedState,p=p(y,f),p=p==null?f:_({},f,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var cd={enqueueSetState:function(l,f,p){l=l._reactInternals;var y=Es(),v=Bo(y);v.payload=f,p!=null&&(v.callback=p),f=Oo(l,v,y),f!==null&&(vs(f,l,y),Pl(f,l,y))},enqueueReplaceState:function(l,f,p){l=l._reactInternals;var y=Es(),v=Bo(y);v.tag=1,v.payload=f,p!=null&&(v.callback=p),f=Oo(l,v,y),f!==null&&(vs(f,l,y),Pl(f,l,y))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var p=Es(),y=Bo(p);y.tag=2,f!=null&&(y.callback=f),f=Oo(l,y,p),f!==null&&(vs(f,l,p),Pl(f,l,p))}};function Mh(l,f,p,y,v,S,Wt){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,S,Wt):f.prototype&&f.prototype.isPureReactComponent?!bl(p,y)||!bl(v,S):!0}function Nh(l,f,p,y){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,y),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,y),f.state!==l&&cd.enqueueReplaceState(f,f.state,null)}function Sa(l,f){var p=f;if("ref"in f){p={};for(var y in f)y!=="ref"&&(p[y]=f[y])}if(l=l.defaultProps){p===f&&(p=_({},p));for(var v in l)p[v]===void 0&&(p[v]=l[v])}return p}var Lc=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Bh(l){Lc(l)}function Oh(l){console.error(l)}function Lh(l){Lc(l)}function Fc(l,f){try{var p=l.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(y){setTimeout(function(){throw y})}}function Fh(l,f,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function ud(l,f,p){return p=Bo(p),p.tag=3,p.payload={element:null},p.callback=function(){Fc(l,f)},p}function jh(l){return l=Bo(l),l.tag=3,l}function Uh(l,f,p,y){var v=p.type.getDerivedStateFromError;if(typeof v=="function"){var S=y.value;l.payload=function(){return v(S)},l.callback=function(){Fh(f,p,y)}}var Wt=p.stateNode;Wt!==null&&typeof Wt.componentDidCatch=="function"&&(l.callback=function(){Fh(f,p,y),typeof v!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var Tn=y.stack;this.componentDidCatch(y.value,{componentStack:Tn!==null?Tn:""})})}function dg(l,f,p,y,v){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(f=p.alternate,f!==null&&Sl(f,p,v,!0),p=Cs.current,p!==null){switch(p.tag){case 13:return Xs===null?$d():p.alternate===null&&yi===0&&(yi=3),p.flags&=-257,p.flags|=65536,p.lanes=v,y===Ou?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([y]):f.add(y),Nd(l,y,v)),!1;case 22:return p.flags|=65536,y===Ou?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([y]):p.add(y)),Nd(l,y,v)),!1}throw Error(o(435,p.tag))}return Nd(l,y,v),$d(),!1}if(Wr)return f=Cs.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=v,y!==Vu&&(l=Error(o(422),{cause:y}),xl(Rs(l,p)))):(y!==Vu&&(f=Error(o(423),{cause:y}),xl(Rs(f,p))),l=l.current.alternate,l.flags|=65536,v&=-v,l.lanes|=v,y=Rs(y,p),v=ud(l.stateNode,y,v),ju(l,v),yi!==4&&(yi=2)),!1;var S=Error(o(520),{cause:y});if(S=Rs(S,p),Hl===null?Hl=[S]:Hl.push(S),yi!==4&&(yi=2),f===null)return!0;y=Rs(y,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,l=v&-v,p.lanes|=l,l=ud(p.stateNode,y,l),ju(p,l),!1;case 1:if(f=p.type,S=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Wo===null||!Wo.has(S))))return p.flags|=65536,v&=-v,p.lanes|=v,v=jh(v),Uh(v,l,p,y),ju(p,v),!1}p=p.return}while(p!==null);return!1}var zh=Error(o(461)),Ni=!1;function zi(l,f,p,y){f.child=l===null?Dh(f,null,p,y):Za(f,l.child,p,y)}function Hh(l,f,p,y,v){p=p.render;var S=f.ref;if("ref"in y){var Wt={};for(var Tn in y)Tn!=="ref"&&(Wt[Tn]=y[Tn])}else Wt=y;return va(f),y=Gu(l,f,p,Wt,S,v),Tn=Wu(),l!==null&&!Ni?(Ku(l,f,v),Eo(l,f,v)):(Wr&&Tn&&Pu(f),f.flags|=1,zi(l,f,y,v),f.child)}function qh(l,f,p,y,v){if(l===null){var S=p.type;return typeof S=="function"&&!Ru(S)&&S.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=S,Gh(l,f,S,y,v)):(l=bc(p.type,null,y,f,f.mode,v),l.ref=f.ref,l.return=f,f.child=l)}if(S=l.child,!_d(l,v)){var Wt=S.memoizedProps;if(p=p.compare,p=p!==null?p:bl,p(Wt,y)&&l.ref===f.ref)return Eo(l,f,v)}return f.flags|=1,l=ho(S,y),l.ref=f.ref,l.return=f,f.child=l}function Gh(l,f,p,y,v){if(l!==null){var S=l.memoizedProps;if(bl(S,y)&&l.ref===f.ref)if(Ni=!1,f.pendingProps=y=S,_d(l,v))(l.flags&131072)!==0&&(Ni=!0);else return f.lanes=l.lanes,Eo(l,f,v)}return dd(l,f,p,y,v)}function Wh(l,f,p){var y=f.pendingProps,v=y.children,S=l!==null?l.memoizedState:null;if(y.mode==="hidden"){if((f.flags&128)!==0){if(y=S!==null?S.baseLanes|p:p,l!==null){for(v=f.child=l.child,S=0;v!==null;)S=S|v.lanes|v.childLanes,v=v.sibling;f.childLanes=S&~y}else f.childLanes=0,f.child=null;return Kh(l,f,y,p)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&Sc(f,S!==null?S.cachePool:null),S!==null?qf(f,S):zu(),$h(f);else return f.lanes=f.childLanes=536870912,Kh(l,f,S!==null?S.baseLanes|p:p,p)}else S!==null?(Sc(f,S.cachePool),qf(f,S),jo(),f.memoizedState=null):(l!==null&&Sc(f,null),zu(),jo());return zi(l,f,v,p),f.child}function Kh(l,f,p,y){var v=Bu();return v=v===null?null:{parent:Ci._currentValue,pool:v},f.memoizedState={baseLanes:p,cachePool:v},l!==null&&Sc(f,null),zu(),$h(f),l!==null&&Sl(l,f,y,!0),null}function jc(l,f){var p=f.ref;if(p===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(o(284));(l===null||l.ref!==p)&&(f.flags|=4194816)}}function dd(l,f,p,y,v){return va(f),p=Gu(l,f,p,y,void 0,v),y=Wu(),l!==null&&!Ni?(Ku(l,f,v),Eo(l,f,v)):(Wr&&y&&Pu(f),f.flags|=1,zi(l,f,p,v),f.child)}function Yh(l,f,p,y,v,S){return va(f),f.updateQueue=null,p=Wf(f,y,p,v),Gf(l),y=Wu(),l!==null&&!Ni?(Ku(l,f,S),Eo(l,f,S)):(Wr&&y&&Pu(f),f.flags|=1,zi(l,f,p,S),f.child)}function Xh(l,f,p,y,v){if(va(f),f.stateNode===null){var S=Ua,Wt=p.contextType;typeof Wt=="object"&&Wt!==null&&(S=Wi(Wt)),S=new p(y,S),f.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=cd,f.stateNode=S,S._reactInternals=f,S=f.stateNode,S.props=y,S.state=f.memoizedState,S.refs={},Lu(f),Wt=p.contextType,S.context=typeof Wt=="object"&&Wt!==null?Wi(Wt):Ua,S.state=f.memoizedState,Wt=p.getDerivedStateFromProps,typeof Wt=="function"&&(ld(f,p,Wt,y),S.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(Wt=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),Wt!==S.state&&cd.enqueueReplaceState(S,S.state,null),Vl(f,y,S,v),Cl(),S.state=f.memoizedState),typeof S.componentDidMount=="function"&&(f.flags|=4194308),y=!0}else if(l===null){S=f.stateNode;var Tn=f.memoizedProps,Dn=Sa(p,Tn);S.props=Dn;var qn=S.context,Jn=p.contextType;Wt=Ua,typeof Jn=="object"&&Jn!==null&&(Wt=Wi(Jn));var nr=p.getDerivedStateFromProps;Jn=typeof nr=="function"||typeof S.getSnapshotBeforeUpdate=="function",Tn=f.pendingProps!==Tn,Jn||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(Tn||qn!==Wt)&&Nh(f,S,y,Wt),No=!1;var Gn=f.memoizedState;S.state=Gn,Vl(f,y,S,v),Cl(),qn=f.memoizedState,Tn||Gn!==qn||No?(typeof nr=="function"&&(ld(f,p,nr,y),qn=f.memoizedState),(Dn=No||Mh(f,p,Dn,y,Gn,qn,Wt))?(Jn||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(f.flags|=4194308)):(typeof S.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=y,f.memoizedState=qn),S.props=y,S.state=qn,S.context=Wt,y=Dn):(typeof S.componentDidMount=="function"&&(f.flags|=4194308),y=!1)}else{S=f.stateNode,Fu(l,f),Wt=f.memoizedProps,Jn=Sa(p,Wt),S.props=Jn,nr=f.pendingProps,Gn=S.context,qn=p.contextType,Dn=Ua,typeof qn=="object"&&qn!==null&&(Dn=Wi(qn)),Tn=p.getDerivedStateFromProps,(qn=typeof Tn=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(Wt!==nr||Gn!==Dn)&&Nh(f,S,y,Dn),No=!1,Gn=f.memoizedState,S.state=Gn,Vl(f,y,S,v),Cl();var Wn=f.memoizedState;Wt!==nr||Gn!==Wn||No||l!==null&&l.dependencies!==null&&Tc(l.dependencies)?(typeof Tn=="function"&&(ld(f,p,Tn,y),Wn=f.memoizedState),(Jn=No||Mh(f,p,Jn,y,Gn,Wn,Dn)||l!==null&&l.dependencies!==null&&Tc(l.dependencies))?(qn||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(y,Wn,Dn),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(y,Wn,Dn)),typeof S.componentDidUpdate=="function"&&(f.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof S.componentDidUpdate!="function"||Wt===l.memoizedProps&&Gn===l.memoizedState||(f.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||Wt===l.memoizedProps&&Gn===l.memoizedState||(f.flags|=1024),f.memoizedProps=y,f.memoizedState=Wn),S.props=y,S.state=Wn,S.context=Dn,y=Jn):(typeof S.componentDidUpdate!="function"||Wt===l.memoizedProps&&Gn===l.memoizedState||(f.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||Wt===l.memoizedProps&&Gn===l.memoizedState||(f.flags|=1024),y=!1)}return S=y,jc(l,f),y=(f.flags&128)!==0,S||y?(S=f.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:S.render(),f.flags|=1,l!==null&&y?(f.child=Za(f,l.child,null,v),f.child=Za(f,null,p,v)):zi(l,f,p,v),f.memoizedState=S.state,l=f.child):l=Eo(l,f,v),l}function Qh(l,f,p,y){return Tl(),f.flags|=256,zi(l,f,p,y),f.child}var fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hd(l){return{baseLanes:l,cachePool:Bf()}}function pd(l,f,p){return l=l!==null?l.childLanes&~p:0,f&&(l|=Vs),l}function Zh(l,f,p){var y=f.pendingProps,v=!1,S=(f.flags&128)!==0,Wt;if((Wt=S)||(Wt=l!==null&&l.memoizedState===null?!1:(Vi.current&2)!==0),Wt&&(v=!0,f.flags&=-129),Wt=(f.flags&32)!==0,f.flags&=-33,l===null){if(Wr){if(v?Fo(f):jo(),Wr){var Tn=gi,Dn;if(Dn=Tn){e:{for(Dn=Tn,Tn=Ys;Dn.nodeType!==8;){if(!Tn){Tn=null;break e}if(Dn=Fs(Dn.nextSibling),Dn===null){Tn=null;break e}}Tn=Dn}Tn!==null?(f.memoizedState={dehydrated:Tn,treeContext:ma!==null?{id:po,overflow:mo}:null,retryLane:536870912,hydrationErrors:null},Dn=gs(18,null,null,0),Dn.stateNode=Tn,Dn.return=f,f.child=Dn,Qi=f,gi=null,Dn=!0):Dn=!1}Dn||ba(f)}if(Tn=f.memoizedState,Tn!==null&&(Tn=Tn.dehydrated,Tn!==null))return Qd(Tn)?f.lanes=32:f.lanes=536870912,null;bo(f)}return Tn=y.children,y=y.fallback,v?(jo(),v=f.mode,Tn=Uc({mode:"hidden",children:Tn},v),y=pa(y,v,p,null),Tn.return=f,y.return=f,Tn.sibling=y,f.child=Tn,v=f.child,v.memoizedState=hd(p),v.childLanes=pd(l,Wt,p),f.memoizedState=fd,y):(Fo(f),md(f,Tn))}if(Dn=l.memoizedState,Dn!==null&&(Tn=Dn.dehydrated,Tn!==null)){if(S)f.flags&256?(Fo(f),f.flags&=-257,f=gd(l,f,p)):f.memoizedState!==null?(jo(),f.child=l.child,f.flags|=128,f=null):(jo(),v=y.fallback,Tn=f.mode,y=Uc({mode:"visible",children:y.children},Tn),v=pa(v,Tn,p,null),v.flags|=2,y.return=f,v.return=f,y.sibling=v,f.child=y,Za(f,l.child,null,p),y=f.child,y.memoizedState=hd(p),y.childLanes=pd(l,Wt,p),f.memoizedState=fd,f=v);else if(Fo(f),Qd(Tn)){if(Wt=Tn.nextSibling&&Tn.nextSibling.dataset,Wt)var qn=Wt.dgst;Wt=qn,y=Error(o(419)),y.stack="",y.digest=Wt,xl({value:y,source:null,stack:null}),f=gd(l,f,p)}else if(Ni||Sl(l,f,p,!1),Wt=(p&l.childLanes)!==0,Ni||Wt){if(Wt=ri,Wt!==null&&(y=p&-p,y=(y&42)!==0?1:Ai(y),y=(y&(Wt.suspendedLanes|p))!==0?0:y,y!==0&&y!==Dn.retryLane))throw Dn.retryLane=y,ja(l,y),vs(Wt,l,y),zh;Tn.data==="$?"||$d(),f=gd(l,f,p)}else Tn.data==="$?"?(f.flags|=192,f.child=l.child,f=null):(l=Dn.treeContext,gi=Fs(Tn.nextSibling),Qi=f,Wr=!0,ya=null,Ys=!1,l!==null&&(Is[Ps++]=po,Is[Ps++]=mo,Is[Ps++]=ma,po=l.id,mo=l.overflow,ma=f),f=md(f,y.children),f.flags|=4096);return f}return v?(jo(),v=y.fallback,Tn=f.mode,Dn=l.child,qn=Dn.sibling,y=ho(Dn,{mode:"hidden",children:y.children}),y.subtreeFlags=Dn.subtreeFlags&65011712,qn!==null?v=ho(qn,v):(v=pa(v,Tn,p,null),v.flags|=2),v.return=f,y.return=f,y.sibling=v,f.child=y,y=v,v=f.child,Tn=l.child.memoizedState,Tn===null?Tn=hd(p):(Dn=Tn.cachePool,Dn!==null?(qn=Ci._currentValue,Dn=Dn.parent!==qn?{parent:qn,pool:qn}:Dn):Dn=Bf(),Tn={baseLanes:Tn.baseLanes|p,cachePool:Dn}),v.memoizedState=Tn,v.childLanes=pd(l,Wt,p),f.memoizedState=fd,y):(Fo(f),p=l.child,l=p.sibling,p=ho(p,{mode:"visible",children:y.children}),p.return=f,p.sibling=null,l!==null&&(Wt=f.deletions,Wt===null?(f.deletions=[l],f.flags|=16):Wt.push(l)),f.child=p,f.memoizedState=null,p)}function md(l,f){return f=Uc({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function Uc(l,f){return l=gs(22,l,null,f),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function gd(l,f,p){return Za(f,l.child,null,p),l=md(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function Jh(l,f,p){l.lanes|=f;var y=l.alternate;y!==null&&(y.lanes|=f),Du(l.return,f,p)}function yd(l,f,p,y,v){var S=l.memoizedState;S===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:v}:(S.isBackwards=f,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=p,S.tailMode=v)}function ep(l,f,p){var y=f.pendingProps,v=y.revealOrder,S=y.tail;if(zi(l,f,y.children,p),y=Vi.current,(y&2)!==0)y=y&1|2,f.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Jh(l,p,f);else if(l.tag===19)Jh(l,p,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch(Ln(Vi,y),v){case"forwards":for(p=f.child,v=null;p!==null;)l=p.alternate,l!==null&&Oc(l)===null&&(v=p),p=p.sibling;p=v,p===null?(v=f.child,f.child=null):(v=p.sibling,p.sibling=null),yd(f,!1,v,p,S);break;case"backwards":for(p=null,v=f.child,f.child=null;v!==null;){if(l=v.alternate,l!==null&&Oc(l)===null){f.child=v;break}l=v.sibling,v.sibling=p,p=v,v=l}yd(f,!0,p,null,S);break;case"together":yd(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Eo(l,f,p){if(l!==null&&(f.dependencies=l.dependencies),Go|=f.lanes,(p&f.childLanes)===0)if(l!==null){if(Sl(l,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(o(153));if(f.child!==null){for(l=f.child,p=ho(l,l.pendingProps),f.child=p,p.return=f;l.sibling!==null;)l=l.sibling,p=p.sibling=ho(l,l.pendingProps),p.return=f;p.sibling=null}return f.child}function _d(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&Tc(l)))}function fg(l,f,p){switch(f.tag){case 3:ar(f,f.stateNode.containerInfo),Mo(f,Ci,l.memoizedState.cache),Tl();break;case 27:case 5:_r(f);break;case 4:ar(f,f.stateNode.containerInfo);break;case 10:Mo(f,f.type,f.memoizedProps.value);break;case 13:var y=f.memoizedState;if(y!==null)return y.dehydrated!==null?(Fo(f),f.flags|=128,null):(p&f.child.childLanes)!==0?Zh(l,f,p):(Fo(f),l=Eo(l,f,p),l!==null?l.sibling:null);Fo(f);break;case 19:var v=(l.flags&128)!==0;if(y=(p&f.childLanes)!==0,y||(Sl(l,f,p,!1),y=(p&f.childLanes)!==0),v){if(y)return ep(l,f,p);f.flags|=128}if(v=f.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ln(Vi,Vi.current),y)break;return null;case 22:case 23:return f.lanes=0,Wh(l,f,p);case 24:Mo(f,Ci,l.memoizedState.cache)}return Eo(l,f,p)}function tp(l,f,p){if(l!==null)if(l.memoizedProps!==f.pendingProps)Ni=!0;else{if(!_d(l,p)&&(f.flags&128)===0)return Ni=!1,fg(l,f,p);Ni=(l.flags&131072)!==0}else Ni=!1,Wr&&(f.flags&1048576)!==0&&Cf(f,vc,f.index);switch(f.lanes=0,f.tag){case 16:e:{l=f.pendingProps;var y=f.elementType,v=y._init;if(y=v(y._payload),f.type=y,typeof y=="function")Ru(y)?(l=Sa(y,l),f.tag=1,f=Xh(null,f,y,l,p)):(f.tag=0,f=dd(null,f,y,l,p));else{if(y!=null){if(v=y.$$typeof,v===wn){f.tag=11,f=Hh(null,f,y,l,p);break e}else if(v===wt){f.tag=14,f=qh(null,f,y,l,p);break e}}throw f=$n(y)||y,Error(o(306,f,""))}}return f;case 0:return dd(l,f,f.type,f.pendingProps,p);case 1:return y=f.type,v=Sa(y,f.pendingProps),Xh(l,f,y,v,p);case 3:e:{if(ar(f,f.stateNode.containerInfo),l===null)throw Error(o(387));y=f.pendingProps;var S=f.memoizedState;v=S.element,Fu(l,f),Vl(f,y,null,p);var Wt=f.memoizedState;if(y=Wt.cache,Mo(f,Ci,y),y!==S.cache&&$u(f,[Ci],p,!0),Cl(),y=Wt.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:Wt.cache},f.updateQueue.baseState=S,f.memoizedState=S,f.flags&256){f=Qh(l,f,y,p);break e}else if(y!==v){v=Rs(Error(o(424)),f),xl(v),f=Qh(l,f,y,p);break e}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(gi=Fs(l.firstChild),Qi=f,Wr=!0,ya=null,Ys=!0,p=Dh(f,null,y,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Tl(),y===v){f=Eo(l,f,p);break e}zi(l,f,y,p)}f=f.child}return f;case 26:return jc(l,f),l===null?(p=om(f.type,null,f.pendingProps,null))?f.memoizedState=p:Wr||(p=f.type,l=f.pendingProps,y=nu(rr.current).createElement(p),y[$r]=f,y[ei]=l,qi(y,p,l),fi(y),f.stateNode=y):f.memoizedState=om(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return _r(f),l===null&&Wr&&(y=f.stateNode=rm(f.type,f.pendingProps,rr.current),Qi=f,Ys=!0,v=gi,Xo(f.type)?(Zd=v,gi=Fs(y.firstChild)):gi=v),zi(l,f,f.pendingProps.children,p),jc(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&Wr&&((v=y=gi)&&(y=Fg(y,f.type,f.pendingProps,Ys),y!==null?(f.stateNode=y,Qi=f,gi=Fs(y.firstChild),Ys=!1,v=!0):v=!1),v||ba(f)),_r(f),v=f.type,S=f.pendingProps,Wt=l!==null?l.memoizedProps:null,y=S.children,Kd(v,S)?y=null:Wt!==null&&Kd(v,Wt)&&(f.flags|=32),f.memoizedState!==null&&(v=Gu(l,f,ig,null,null,p),Jl._currentValue=v),jc(l,f),zi(l,f,y,p),f.child;case 6:return l===null&&Wr&&((l=p=gi)&&(p=jg(p,f.pendingProps,Ys),p!==null?(f.stateNode=p,Qi=f,gi=null,l=!0):l=!1),l||ba(f)),null;case 13:return Zh(l,f,p);case 4:return ar(f,f.stateNode.containerInfo),y=f.pendingProps,l===null?f.child=Za(f,null,y,p):zi(l,f,y,p),f.child;case 11:return Hh(l,f,f.type,f.pendingProps,p);case 7:return zi(l,f,f.pendingProps,p),f.child;case 8:return zi(l,f,f.pendingProps.children,p),f.child;case 12:return zi(l,f,f.pendingProps.children,p),f.child;case 10:return y=f.pendingProps,Mo(f,f.type,y.value),zi(l,f,y.children,p),f.child;case 9:return v=f.type._context,y=f.pendingProps.children,va(f),v=Wi(v),y=y(v),f.flags|=1,zi(l,f,y,p),f.child;case 14:return qh(l,f,f.type,f.pendingProps,p);case 15:return Gh(l,f,f.type,f.pendingProps,p);case 19:return ep(l,f,p);case 31:return y=f.pendingProps,p=f.mode,y={mode:y.mode,children:y.children},l===null?(p=Uc(y,p),p.ref=f.ref,f.child=p,p.return=f,f=p):(p=ho(l.child,y),p.ref=f.ref,f.child=p,p.return=f,f=p),f;case 22:return Wh(l,f,p);case 24:return va(f),y=Wi(Ci),l===null?(v=Bu(),v===null&&(v=ri,S=Mu(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=p),v=S),f.memoizedState={parent:y,cache:v},Lu(f),Mo(f,Ci,v)):((l.lanes&p)!==0&&(Fu(l,f),Vl(f,null,null,p),Cl()),v=l.memoizedState,S=f.memoizedState,v.parent!==y?(v={parent:y,cache:y},f.memoizedState=v,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=v),Mo(f,Ci,y)):(y=S.cache,Mo(f,Ci,y),y!==v.cache&&$u(f,[Ci],p,!0))),zi(l,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(o(156,f.tag))}function vo(l){l.flags|=4}function np(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!dm(f)){if(f=Cs.current,f!==null&&((Lr&4194048)===Lr?Xs!==null:(Lr&62914560)!==Lr&&(Lr&536870912)===0||f!==Xs))throw Il=Ou,Of;l.flags|=8192}}function zc(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?vr():536870912,l.lanes|=f,nl|=f)}function Ol(l,f){if(!Wr)switch(l.tailMode){case"hidden":f=l.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function hi(l){var f=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(f)for(var v=l.child;v!==null;)p|=v.lanes|v.childLanes,y|=v.subtreeFlags&65011712,y|=v.flags&65011712,v.return=l,v=v.sibling;else for(v=l.child;v!==null;)p|=v.lanes|v.childLanes,y|=v.subtreeFlags,y|=v.flags,v.return=l,v=v.sibling;return l.subtreeFlags|=y,l.childLanes=p,f}function hg(l,f,p){var y=f.pendingProps;switch(Cu(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(f),null;case 1:return hi(f),null;case 3:return p=f.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),yo(Ci),pr(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(vl(f)?vo(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Df())),hi(f),null;case 26:return p=f.memoizedState,l===null?(vo(f),p!==null?(hi(f),np(f,p)):(hi(f),f.flags&=-16777217)):p?p!==l.memoizedState?(vo(f),hi(f),np(f,p)):(hi(f),f.flags&=-16777217):(l.memoizedProps!==y&&vo(f),hi(f),f.flags&=-16777217),null;case 27:jr(f),p=rr.current;var v=f.type;if(l!==null&&f.stateNode!=null)l.memoizedProps!==y&&vo(f);else{if(!y){if(f.stateNode===null)throw Error(o(166));return hi(f),null}l=Xn.current,vl(f)?Vf(f):(l=rm(v,y,p),f.stateNode=l,vo(f))}return hi(f),null;case 5:if(jr(f),p=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==y&&vo(f);else{if(!y){if(f.stateNode===null)throw Error(o(166));return hi(f),null}if(l=Xn.current,vl(f))Vf(f);else{switch(v=nu(rr.current),l){case 1:l=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=v.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof y.is=="string"?v.createElement("select",{is:y.is}):v.createElement("select"),y.multiple?l.multiple=!0:y.size&&(l.size=y.size);break;default:l=typeof y.is=="string"?v.createElement(p,{is:y.is}):v.createElement(p)}}l[$r]=f,l[ei]=y;e:for(v=f.child;v!==null;){if(v.tag===5||v.tag===6)l.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break e;for(;v.sibling===null;){if(v.return===null||v.return===f)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}f.stateNode=l;e:switch(qi(l,p,y),p){case"button":case"input":case"select":case"textarea":l=!!y.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&vo(f)}}return hi(f),f.flags&=-16777217,null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==y&&vo(f);else{if(typeof y!="string"&&f.stateNode===null)throw Error(o(166));if(l=rr.current,vl(f)){if(l=f.stateNode,p=f.memoizedProps,y=null,v=Qi,v!==null)switch(v.tag){case 27:case 5:y=v.memoizedProps}l[$r]=f,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||Xp(l.nodeValue,p)),l||ba(f)}else l=nu(l).createTextNode(y),l[$r]=f,f.stateNode=l}return hi(f),null;case 13:if(y=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(v=vl(f),y!==null&&y.dehydrated!==null){if(l===null){if(!v)throw Error(o(318));if(v=f.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[$r]=f}else Tl(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;hi(f),v=!1}else v=Df(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=v),v=!0;if(!v)return f.flags&256?(bo(f),f):(bo(f),null)}if(bo(f),(f.flags&128)!==0)return f.lanes=p,f;if(p=y!==null,l=l!==null&&l.memoizedState!==null,p){y=f.child,v=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(v=y.alternate.memoizedState.cachePool.pool);var S=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(S=y.memoizedState.cachePool.pool),S!==v&&(y.flags|=2048)}return p!==l&&p&&(f.child.flags|=8192),zc(f,f.updateQueue),hi(f),null;case 4:return pr(),l===null&&zd(f.stateNode.containerInfo),hi(f),null;case 10:return yo(f.type),hi(f),null;case 19:if(Bn(Vi),v=f.memoizedState,v===null)return hi(f),null;if(y=(f.flags&128)!==0,S=v.rendering,S===null)if(y)Ol(v,!1);else{if(yi!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(S=Oc(l),S!==null){for(f.flags|=128,Ol(v,!1),l=S.updateQueue,f.updateQueue=l,zc(f,l),f.subtreeFlags=0,l=p,p=f.child;p!==null;)Pf(p,l),p=p.sibling;return Ln(Vi,Vi.current&1|2),f.child}l=l.sibling}v.tail!==null&&Vr()>Gc&&(f.flags|=128,y=!0,Ol(v,!1),f.lanes=4194304)}else{if(!y)if(l=Oc(S),l!==null){if(f.flags|=128,y=!0,l=l.updateQueue,f.updateQueue=l,zc(f,l),Ol(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Wr)return hi(f),null}else 2*Vr()-v.renderingStartTime>Gc&&p!==536870912&&(f.flags|=128,y=!0,Ol(v,!1),f.lanes=4194304);v.isBackwards?(S.sibling=f.child,f.child=S):(l=v.last,l!==null?l.sibling=S:f.child=S,v.last=S)}return v.tail!==null?(f=v.tail,v.rendering=f,v.tail=f.sibling,v.renderingStartTime=Vr(),f.sibling=null,l=Vi.current,Ln(Vi,y?l&1|2:l&1),f):(hi(f),null);case 22:case 23:return bo(f),Hu(),y=f.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(f.flags|=8192):y&&(f.flags|=8192),y?(p&536870912)!==0&&(f.flags&128)===0&&(hi(f),f.subtreeFlags&6&&(f.flags|=8192)):hi(f),p=f.updateQueue,p!==null&&zc(f,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==p&&(f.flags|=2048),l!==null&&Bn(Ta),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),yo(Ci),hi(f),null;case 25:return null;case 30:return null}throw Error(o(156,f.tag))}function pg(l,f){switch(Cu(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return yo(Ci),pr(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return jr(f),null;case 13:if(bo(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(o(340));Tl()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return Bn(Vi),null;case 4:return pr(),null;case 10:return yo(f.type),null;case 22:case 23:return bo(f),Hu(),l!==null&&Bn(Ta),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return yo(Ci),null;case 25:return null;default:return null}}function rp(l,f){switch(Cu(f),f.tag){case 3:yo(Ci),pr();break;case 26:case 27:case 5:jr(f);break;case 4:pr();break;case 13:bo(f);break;case 19:Bn(Vi);break;case 10:yo(f.type);break;case 22:case 23:bo(f),Hu(),l!==null&&Bn(Ta);break;case 24:yo(Ci)}}function Ll(l,f){try{var p=f.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var v=y.next;p=v;do{if((p.tag&l)===l){y=void 0;var S=p.create,Wt=p.inst;y=S(),Wt.destroy=y}p=p.next}while(p!==v)}}catch(Tn){ti(f,f.return,Tn)}}function Uo(l,f,p){try{var y=f.updateQueue,v=y!==null?y.lastEffect:null;if(v!==null){var S=v.next;y=S;do{if((y.tag&l)===l){var Wt=y.inst,Tn=Wt.destroy;if(Tn!==void 0){Wt.destroy=void 0,v=f;var Dn=p,qn=Tn;try{qn()}catch(Jn){ti(v,Dn,Jn)}}}y=y.next}while(y!==S)}}catch(Jn){ti(f,f.return,Jn)}}function ip(l){var f=l.updateQueue;if(f!==null){var p=l.stateNode;try{Hf(f,p)}catch(y){ti(l,l.return,y)}}}function sp(l,f,p){p.props=Sa(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){ti(l,f,y)}}function Fl(l,f){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(v){ti(l,f,v)}}function Qs(l,f){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(v){ti(l,f,v)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(v){ti(l,f,v)}else p.current=null}function op(l){var f=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(v){ti(l,l.return,v)}}function bd(l,f,p){try{var y=l.stateNode;Mg(y,l.type,p,f),y[ei]=f}catch(v){ti(l,l.return,v)}}function ap(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Xo(l.type)||l.tag===4}function Ed(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||ap(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Xo(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function vd(l,f,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(l),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=tu));else if(y!==4&&(y===27&&Xo(l.type)&&(p=l.stateNode,f=null),l=l.child,l!==null))for(vd(l,f,p),l=l.sibling;l!==null;)vd(l,f,p),l=l.sibling}function Hc(l,f,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,f?p.insertBefore(l,f):p.appendChild(l);else if(y!==4&&(y===27&&Xo(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Hc(l,f,p),l=l.sibling;l!==null;)Hc(l,f,p),l=l.sibling}function lp(l){var f=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,v=f.attributes;v.length;)f.removeAttributeNode(v[0]);qi(f,y,p),f[$r]=l,f[ei]=p}catch(S){ti(l,l.return,S)}}var To=!1,bi=!1,Td=!1,cp=typeof WeakSet=="function"?WeakSet:Set,Bi=null;function mg(l,f){if(l=l.containerInfo,Gd=lu,l=bf(l),bu(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var v=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{p.nodeType,S.nodeType}catch{p=null;break e}var Wt=0,Tn=-1,Dn=-1,qn=0,Jn=0,nr=l,Gn=null;t:for(;;){for(var Wn;nr!==p||v!==0&&nr.nodeType!==3||(Tn=Wt+v),nr!==S||y!==0&&nr.nodeType!==3||(Dn=Wt+y),nr.nodeType===3&&(Wt+=nr.nodeValue.length),(Wn=nr.firstChild)!==null;)Gn=nr,nr=Wn;for(;;){if(nr===l)break t;if(Gn===p&&++qn===v&&(Tn=Wt),Gn===S&&++Jn===y&&(Dn=Wt),(Wn=nr.nextSibling)!==null)break;nr=Gn,Gn=nr.parentNode}nr=Wn}p=Tn===-1||Dn===-1?null:{start:Tn,end:Dn}}else p=null}p=p||{start:0,end:0}}else p=null;for(Wd={focusedElem:l,selectionRange:p},lu=!1,Bi=f;Bi!==null;)if(f=Bi,l=f.child,(f.subtreeFlags&1024)!==0&&l!==null)l.return=f,Bi=l;else for(;Bi!==null;){switch(f=Bi,S=f.alternate,l=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&S!==null){l=void 0,p=f,v=S.memoizedProps,S=S.memoizedState,y=p.stateNode;try{var br=Sa(p.type,v,p.elementType===p.type);l=y.getSnapshotBeforeUpdate(br,S),y.__reactInternalSnapshotBeforeUpdate=l}catch(gr){ti(p,p.return,gr)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,p=l.nodeType,p===9)Xd(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Xd(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(o(163))}if(l=f.sibling,l!==null){l.return=f.return,Bi=l;break}Bi=f.return}}function up(l,f,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:zo(l,p),y&4&&Ll(5,p);break;case 1:if(zo(l,p),y&4)if(l=p.stateNode,f===null)try{l.componentDidMount()}catch(Wt){ti(p,p.return,Wt)}else{var v=Sa(p.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(v,f,l.__reactInternalSnapshotBeforeUpdate)}catch(Wt){ti(p,p.return,Wt)}}y&64&&ip(p),y&512&&Fl(p,p.return);break;case 3:if(zo(l,p),y&64&&(l=p.updateQueue,l!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{Hf(l,f)}catch(Wt){ti(p,p.return,Wt)}}break;case 27:f===null&&y&4&&lp(p);case 26:case 5:zo(l,p),f===null&&y&4&&op(p),y&512&&Fl(p,p.return);break;case 12:zo(l,p);break;case 13:zo(l,p),y&4&&hp(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=Sg.bind(null,p),Ug(l,p))));break;case 22:if(y=p.memoizedState!==null||To,!y){f=f!==null&&f.memoizedState!==null||bi,v=To;var S=bi;To=y,(bi=f)&&!S?Ho(l,p,(p.subtreeFlags&8772)!==0):zo(l,p),To=v,bi=S}break;case 30:break;default:zo(l,p)}}function dp(l){var f=l.alternate;f!==null&&(l.alternate=null,dp(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&zs(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var ci=null,ns=!1;function xo(l,f,p){for(p=p.child;p!==null;)fp(l,f,p),p=p.sibling}function fp(l,f,p){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Ur,p)}catch{}switch(p.tag){case 26:bi||Qs(p,f),xo(l,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:bi||Qs(p,f);var y=ci,v=ns;Xo(p.type)&&(ci=p.stateNode,ns=!1),xo(l,f,p),Yl(p.stateNode),ci=y,ns=v;break;case 5:bi||Qs(p,f);case 6:if(y=ci,v=ns,ci=null,xo(l,f,p),ci=y,ns=v,ci!==null)if(ns)try{(ci.nodeType===9?ci.body:ci.nodeName==="HTML"?ci.ownerDocument.body:ci).removeChild(p.stateNode)}catch(S){ti(p,f,S)}else try{ci.removeChild(p.stateNode)}catch(S){ti(p,f,S)}break;case 18:ci!==null&&(ns?(l=ci,tm(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),rc(l)):tm(ci,p.stateNode));break;case 4:y=ci,v=ns,ci=p.stateNode.containerInfo,ns=!0,xo(l,f,p),ci=y,ns=v;break;case 0:case 11:case 14:case 15:bi||Uo(2,p,f),bi||Uo(4,p,f),xo(l,f,p);break;case 1:bi||(Qs(p,f),y=p.stateNode,typeof y.componentWillUnmount=="function"&&sp(p,f,y)),xo(l,f,p);break;case 21:xo(l,f,p);break;case 22:bi=(y=bi)||p.memoizedState!==null,xo(l,f,p),bi=y;break;default:xo(l,f,p)}}function hp(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{rc(l)}catch(p){ti(f,f.return,p)}}function gg(l){switch(l.tag){case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new cp),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new cp),f;default:throw Error(o(435,l.tag))}}function xd(l,f){var p=gg(l);f.forEach(function(y){var v=Ag.bind(null,l,y);p.has(y)||(p.add(y),y.then(v,v))})}function ys(l,f){var p=f.deletions;if(p!==null)for(var y=0;y<p.length;y++){var v=p[y],S=l,Wt=f,Tn=Wt;e:for(;Tn!==null;){switch(Tn.tag){case 27:if(Xo(Tn.type)){ci=Tn.stateNode,ns=!1;break e}break;case 5:ci=Tn.stateNode,ns=!1;break e;case 3:case 4:ci=Tn.stateNode.containerInfo,ns=!0;break e}Tn=Tn.return}if(ci===null)throw Error(o(160));fp(S,Wt,v),ci=null,ns=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)pp(f,l),f=f.sibling}var Ls=null;function pp(l,f){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ys(f,l),_s(l),y&4&&(Uo(3,l,l.return),Ll(3,l),Uo(5,l,l.return));break;case 1:ys(f,l),_s(l),y&512&&(bi||p===null||Qs(p,p.return)),y&64&&To&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var v=Ls;if(ys(f,l),_s(l),y&512&&(bi||p===null||Qs(p,p.return)),y&4){var S=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,v=v.ownerDocument||v;t:switch(y){case"title":S=v.getElementsByTagName("title")[0],(!S||S[eo]||S[$r]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(y),v.head.insertBefore(S,v.querySelector("head > title"))),qi(S,y,p),S[$r]=l,fi(S),y=S;break e;case"link":var Wt=cm("link","href",v).get(y+(p.href||""));if(Wt){for(var Tn=0;Tn<Wt.length;Tn++)if(S=Wt[Tn],S.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&S.getAttribute("rel")===(p.rel==null?null:p.rel)&&S.getAttribute("title")===(p.title==null?null:p.title)&&S.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){Wt.splice(Tn,1);break t}}S=v.createElement(y),qi(S,y,p),v.head.appendChild(S);break;case"meta":if(Wt=cm("meta","content",v).get(y+(p.content||""))){for(Tn=0;Tn<Wt.length;Tn++)if(S=Wt[Tn],S.getAttribute("content")===(p.content==null?null:""+p.content)&&S.getAttribute("name")===(p.name==null?null:p.name)&&S.getAttribute("property")===(p.property==null?null:p.property)&&S.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&S.getAttribute("charset")===(p.charSet==null?null:p.charSet)){Wt.splice(Tn,1);break t}}S=v.createElement(y),qi(S,y,p),v.head.appendChild(S);break;default:throw Error(o(468,y))}S[$r]=l,fi(S),y=S}l.stateNode=y}else um(v,l.type,l.stateNode);else l.stateNode=lm(v,y,l.memoizedProps);else S!==y?(S===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):S.count--,y===null?um(v,l.type,l.stateNode):lm(v,y,l.memoizedProps)):y===null&&l.stateNode!==null&&bd(l,l.memoizedProps,p.memoizedProps)}break;case 27:ys(f,l),_s(l),y&512&&(bi||p===null||Qs(p,p.return)),p!==null&&y&4&&bd(l,l.memoizedProps,p.memoizedProps);break;case 5:if(ys(f,l),_s(l),y&512&&(bi||p===null||Qs(p,p.return)),l.flags&32){v=l.stateNode;try{Yi(v,"")}catch(Wn){ti(l,l.return,Wn)}}y&4&&l.stateNode!=null&&(v=l.memoizedProps,bd(l,v,p!==null?p.memoizedProps:v)),y&1024&&(Td=!0);break;case 6:if(ys(f,l),_s(l),y&4){if(l.stateNode===null)throw Error(o(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch(Wn){ti(l,l.return,Wn)}}break;case 3:if(su=null,v=Ls,Ls=ru(f.containerInfo),ys(f,l),Ls=v,_s(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{rc(f.containerInfo)}catch(Wn){ti(l,l.return,Wn)}Td&&(Td=!1,mp(l));break;case 4:y=Ls,Ls=ru(l.stateNode.containerInfo),ys(f,l),_s(l),Ls=y;break;case 12:ys(f,l),_s(l);break;case 13:ys(f,l),_s(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Pd=Vr()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,xd(l,y)));break;case 22:v=l.memoizedState!==null;var Dn=p!==null&&p.memoizedState!==null,qn=To,Jn=bi;if(To=qn||v,bi=Jn||Dn,ys(f,l),bi=Jn,To=qn,_s(l),y&8192)e:for(f=l.stateNode,f._visibility=v?f._visibility&-2:f._visibility|1,v&&(p===null||Dn||To||bi||Aa(l)),p=null,f=l;;){if(f.tag===5||f.tag===26){if(p===null){Dn=p=f;try{if(S=Dn.stateNode,v)Wt=S.style,typeof Wt.setProperty=="function"?Wt.setProperty("display","none","important"):Wt.display="none";else{Tn=Dn.stateNode;var nr=Dn.memoizedProps.style,Gn=nr!=null&&nr.hasOwnProperty("display")?nr.display:null;Tn.style.display=Gn==null||typeof Gn=="boolean"?"":(""+Gn).trim()}}catch(Wn){ti(Dn,Dn.return,Wn)}}}else if(f.tag===6){if(p===null){Dn=f;try{Dn.stateNode.nodeValue=v?"":Dn.memoizedProps}catch(Wn){ti(Dn,Dn.return,Wn)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,xd(l,p))));break;case 19:ys(f,l),_s(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,xd(l,y)));break;case 30:break;case 21:break;default:ys(f,l),_s(l)}}function _s(l){var f=l.flags;if(f&2){try{for(var p,y=l.return;y!==null;){if(ap(y)){p=y;break}y=y.return}if(p==null)throw Error(o(160));switch(p.tag){case 27:var v=p.stateNode,S=Ed(l);Hc(l,S,v);break;case 5:var Wt=p.stateNode;p.flags&32&&(Yi(Wt,""),p.flags&=-33);var Tn=Ed(l);Hc(l,Tn,Wt);break;case 3:case 4:var Dn=p.stateNode.containerInfo,qn=Ed(l);vd(l,qn,Dn);break;default:throw Error(o(161))}}catch(Jn){ti(l,l.return,Jn)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function mp(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;mp(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function zo(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)up(l,f.alternate,f),f=f.sibling}function Aa(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:Uo(4,f,f.return),Aa(f);break;case 1:Qs(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&sp(f,f.return,p),Aa(f);break;case 27:Yl(f.stateNode);case 26:case 5:Qs(f,f.return),Aa(f);break;case 22:f.memoizedState===null&&Aa(f);break;case 30:Aa(f);break;default:Aa(f)}l=l.sibling}}function Ho(l,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var y=f.alternate,v=l,S=f,Wt=S.flags;switch(S.tag){case 0:case 11:case 15:Ho(v,S,p),Ll(4,S);break;case 1:if(Ho(v,S,p),y=S,v=y.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(qn){ti(y,y.return,qn)}if(y=S,v=y.updateQueue,v!==null){var Tn=y.stateNode;try{var Dn=v.shared.hiddenCallbacks;if(Dn!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Dn.length;v++)zf(Dn[v],Tn)}catch(qn){ti(y,y.return,qn)}}p&&Wt&64&&ip(S),Fl(S,S.return);break;case 27:lp(S);case 26:case 5:Ho(v,S,p),p&&y===null&&Wt&4&&op(S),Fl(S,S.return);break;case 12:Ho(v,S,p);break;case 13:Ho(v,S,p),p&&Wt&4&&hp(v,S);break;case 22:S.memoizedState===null&&Ho(v,S,p),Fl(S,S.return);break;case 30:break;default:Ho(v,S,p)}f=f.sibling}}function Sd(l,f){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Al(p))}function Ad(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Al(l))}function Zs(l,f,p,y){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)gp(l,f,p,y),f=f.sibling}function gp(l,f,p,y){var v=f.flags;switch(f.tag){case 0:case 11:case 15:Zs(l,f,p,y),v&2048&&Ll(9,f);break;case 1:Zs(l,f,p,y);break;case 3:Zs(l,f,p,y),v&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Al(l)));break;case 12:if(v&2048){Zs(l,f,p,y),l=f.stateNode;try{var S=f.memoizedProps,Wt=S.id,Tn=S.onPostCommit;typeof Tn=="function"&&Tn(Wt,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Dn){ti(f,f.return,Dn)}}else Zs(l,f,p,y);break;case 13:Zs(l,f,p,y);break;case 23:break;case 22:S=f.stateNode,Wt=f.alternate,f.memoizedState!==null?S._visibility&2?Zs(l,f,p,y):jl(l,f):S._visibility&2?Zs(l,f,p,y):(S._visibility|=2,Ja(l,f,p,y,(f.subtreeFlags&10256)!==0)),v&2048&&Sd(Wt,f);break;case 24:Zs(l,f,p,y),v&2048&&Ad(f.alternate,f);break;default:Zs(l,f,p,y)}}function Ja(l,f,p,y,v){for(v=v&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var S=l,Wt=f,Tn=p,Dn=y,qn=Wt.flags;switch(Wt.tag){case 0:case 11:case 15:Ja(S,Wt,Tn,Dn,v),Ll(8,Wt);break;case 23:break;case 22:var Jn=Wt.stateNode;Wt.memoizedState!==null?Jn._visibility&2?Ja(S,Wt,Tn,Dn,v):jl(S,Wt):(Jn._visibility|=2,Ja(S,Wt,Tn,Dn,v)),v&&qn&2048&&Sd(Wt.alternate,Wt);break;case 24:Ja(S,Wt,Tn,Dn,v),v&&qn&2048&&Ad(Wt.alternate,Wt);break;default:Ja(S,Wt,Tn,Dn,v)}f=f.sibling}}function jl(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=l,y=f,v=y.flags;switch(y.tag){case 22:jl(p,y),v&2048&&Sd(y.alternate,y);break;case 24:jl(p,y),v&2048&&Ad(y.alternate,y);break;default:jl(p,y)}f=f.sibling}}var Ul=8192;function el(l){if(l.subtreeFlags&Ul)for(l=l.child;l!==null;)yp(l),l=l.sibling}function yp(l){switch(l.tag){case 26:el(l),l.flags&Ul&&l.memoizedState!==null&&ty(Ls,l.memoizedState,l.memoizedProps);break;case 5:el(l);break;case 3:case 4:var f=Ls;Ls=ru(l.stateNode.containerInfo),el(l),Ls=f;break;case 22:l.memoizedState===null&&(f=l.alternate,f!==null&&f.memoizedState!==null?(f=Ul,Ul=16777216,el(l),Ul=f):el(l));break;default:el(l)}}function _p(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function zl(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var y=f[p];Bi=y,Ep(y,l)}_p(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)bp(l),l=l.sibling}function bp(l){switch(l.tag){case 0:case 11:case 15:zl(l),l.flags&2048&&Uo(9,l,l.return);break;case 3:zl(l);break;case 12:zl(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,qc(l)):zl(l);break;default:zl(l)}}function qc(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var y=f[p];Bi=y,Ep(y,l)}_p(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:Uo(8,f,f.return),qc(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,qc(f));break;default:qc(f)}l=l.sibling}}function Ep(l,f){for(;Bi!==null;){var p=Bi;switch(p.tag){case 0:case 11:case 15:Uo(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Al(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Bi=y;else e:for(p=l;Bi!==null;){y=Bi;var v=y.sibling,S=y.return;if(dp(y),y===p){Bi=null;break e}if(v!==null){v.return=S,Bi=v;break e}Bi=S}}}var yg={getCacheForType:function(l){var f=Wi(Ci),p=f.data.get(l);return p===void 0&&(p=l(),f.data.set(l,p)),p}},_g=typeof WeakMap=="function"?WeakMap:Map,Yr=0,ri=null,kr=null,Lr=0,Xr=0,bs=null,qo=!1,tl=!1,Rd=!1,So=0,yi=0,Go=0,Ra=0,wd=0,Vs=0,nl=0,Hl=null,rs=null,Id=!1,Pd=0,Gc=1/0,Wc=null,Wo=null,Hi=0,Ko=null,rl=null,il=0,Cd=0,Vd=null,vp=null,ql=0,kd=null;function Es(){if((Yr&2)!==0&&Lr!==0)return Lr&-Lr;if(En.T!==null){var l=qa;return l!==0?l:Ld()}return ki()}function Tp(){Vs===0&&(Vs=(Lr&536870912)===0||Wr?Fr():536870912);var l=Cs.current;return l!==null&&(l.flags|=32),Vs}function vs(l,f,p){(l===ri&&(Xr===2||Xr===9)||l.cancelPendingCommit!==null)&&(sl(l,0),Yo(l,Lr,Vs,!1)),Pr(l,p),((Yr&2)===0||l!==ri)&&(l===ri&&((Yr&2)===0&&(Ra|=p),yi===4&&Yo(l,Lr,Vs,!1)),Js(l))}function xp(l,f,p){if((Yr&6)!==0)throw Error(o(327));var y=!p&&(f&124)===0&&(f&l.expiredLanes)===0||ur(l,f),v=y?vg(l,f):Md(l,f,!0),S=y;do{if(v===0){tl&&!y&&Yo(l,f,0,!1);break}else{if(p=l.current.alternate,S&&!bg(p)){v=Md(l,f,!1),S=!1;continue}if(v===2){if(S=f,l.errorRecoveryDisabledLanes&S)var Wt=0;else Wt=l.pendingLanes&-536870913,Wt=Wt!==0?Wt:Wt&536870912?536870912:0;if(Wt!==0){f=Wt;e:{var Tn=l;v=Hl;var Dn=Tn.current.memoizedState.isDehydrated;if(Dn&&(sl(Tn,Wt).flags|=256),Wt=Md(Tn,Wt,!1),Wt!==2){if(Rd&&!Dn){Tn.errorRecoveryDisabledLanes|=S,Ra|=S,v=4;break e}S=rs,rs=v,S!==null&&(rs===null?rs=S:rs.push.apply(rs,S))}v=Wt}if(S=!1,v!==2)continue}}if(v===1){sl(l,0),Yo(l,f,0,!0);break}e:{switch(y=l,S=v,S){case 0:case 1:throw Error(o(345));case 4:if((f&4194048)!==f)break;case 6:Yo(y,f,Vs,!qo);break e;case 2:rs=null;break;case 3:case 5:break;default:throw Error(o(329))}if((f&62914560)===f&&(v=Pd+300-Vr(),10<v)){if(Yo(y,f,Vs,!qo),or(y,0,!0)!==0)break e;y.timeoutHandle=Jp(Sp.bind(null,y,p,rs,Wc,Id,f,Vs,Ra,nl,qo,S,2,-0,0),v);break e}Sp(y,p,rs,Wc,Id,f,Vs,Ra,nl,qo,S,0,-0,0)}}break}while(!0);Js(l)}function Sp(l,f,p,y,v,S,Wt,Tn,Dn,qn,Jn,nr,Gn,Wn){if(l.timeoutHandle=-1,nr=f.subtreeFlags,(nr&8192||(nr&16785408)===16785408)&&(Zl={stylesheets:null,count:0,unsuspend:ey},yp(f),nr=ny(),nr!==null)){l.cancelPendingCommit=nr(Vp.bind(null,l,f,S,p,y,v,Wt,Tn,Dn,Jn,1,Gn,Wn)),Yo(l,S,Wt,!qn);return}Vp(l,f,S,p,y,v,Wt,Tn,Dn)}function bg(l){for(var f=l;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var v=p[y],S=v.getSnapshot;v=v.value;try{if(!ps(S(),v))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Yo(l,f,p,y){f&=~wd,f&=~Ra,l.suspendedLanes|=f,l.pingedLanes&=~f,y&&(l.warmLanes|=f),y=l.expirationTimes;for(var v=f;0<v;){var S=31-C(v),Wt=1<<S;y[S]=-1,v&=~Wt}p!==0&&Si(l,p,f)}function Kc(){return(Yr&6)===0?(Gl(0),!1):!0}function Dd(){if(kr!==null){if(Xr===0)var l=kr.return;else l=kr,go=Ea=null,Yu(l),Qa=null,Nl=0,l=kr;for(;l!==null;)rp(l.alternate,l),l=l.return;kr=null}}function sl(l,f){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,Bg(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Dd(),ri=l,kr=p=ho(l.current,null),Lr=f,Xr=0,bs=null,qo=!1,tl=ur(l,f),Rd=!1,nl=Vs=wd=Ra=Go=yi=0,rs=Hl=null,Id=!1,(f&8)!==0&&(f|=f&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=f;0<y;){var v=31-C(y),S=1<<v;f|=l[v],y&=~S}return So=f,gc(),p}function Ap(l,f){Ir=null,En.H=Mc,f===wl||f===Ac?(f=jf(),Xr=3):f===Of?(f=jf(),Xr=4):Xr=f===zh?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,bs=f,kr===null&&(yi=1,Fc(l,Rs(f,l.current)))}function Rp(){var l=En.H;return En.H=Mc,l===null?Mc:l}function wp(){var l=En.A;return En.A=yg,l}function $d(){yi=4,qo||(Lr&4194048)!==Lr&&Cs.current!==null||(tl=!0),(Go&134217727)===0&&(Ra&134217727)===0||ri===null||Yo(ri,Lr,Vs,!1)}function Md(l,f,p){var y=Yr;Yr|=2;var v=Rp(),S=wp();(ri!==l||Lr!==f)&&(Wc=null,sl(l,f)),f=!1;var Wt=yi;e:do try{if(Xr!==0&&kr!==null){var Tn=kr,Dn=bs;switch(Xr){case 8:Dd(),Wt=6;break e;case 3:case 2:case 9:case 6:Cs.current===null&&(f=!0);var qn=Xr;if(Xr=0,bs=null,ol(l,Tn,Dn,qn),p&&tl){Wt=0;break e}break;default:qn=Xr,Xr=0,bs=null,ol(l,Tn,Dn,qn)}}Eg(),Wt=yi;break}catch(Jn){Ap(l,Jn)}while(!0);return f&&l.shellSuspendCounter++,go=Ea=null,Yr=y,En.H=v,En.A=S,kr===null&&(ri=null,Lr=0,gc()),Wt}function Eg(){for(;kr!==null;)Ip(kr)}function vg(l,f){var p=Yr;Yr|=2;var y=Rp(),v=wp();ri!==l||Lr!==f?(Wc=null,Gc=Vr()+500,sl(l,f)):tl=ur(l,f);e:do try{if(Xr!==0&&kr!==null){f=kr;var S=bs;t:switch(Xr){case 1:Xr=0,bs=null,ol(l,f,S,1);break;case 2:case 9:if(Lf(S)){Xr=0,bs=null,Pp(f);break}f=function(){Xr!==2&&Xr!==9||ri!==l||(Xr=7),Js(l)},S.then(f,f);break e;case 3:Xr=7;break e;case 4:Xr=5;break e;case 7:Lf(S)?(Xr=0,bs=null,Pp(f)):(Xr=0,bs=null,ol(l,f,S,7));break;case 5:var Wt=null;switch(kr.tag){case 26:Wt=kr.memoizedState;case 5:case 27:var Tn=kr;if(!Wt||dm(Wt)){Xr=0,bs=null;var Dn=Tn.sibling;if(Dn!==null)kr=Dn;else{var qn=Tn.return;qn!==null?(kr=qn,Yc(qn)):kr=null}break t}}Xr=0,bs=null,ol(l,f,S,5);break;case 6:Xr=0,bs=null,ol(l,f,S,6);break;case 8:Dd(),yi=6;break e;default:throw Error(o(462))}}Tg();break}catch(Jn){Ap(l,Jn)}while(!0);return go=Ea=null,En.H=y,En.A=v,Yr=p,kr!==null?0:(ri=null,Lr=0,gc(),yi)}function Tg(){for(;kr!==null&&!Ar();)Ip(kr)}function Ip(l){var f=tp(l.alternate,l,So);l.memoizedProps=l.pendingProps,f===null?Yc(l):kr=f}function Pp(l){var f=l,p=f.alternate;switch(f.tag){case 15:case 0:f=Yh(p,f,f.pendingProps,f.type,void 0,Lr);break;case 11:f=Yh(p,f,f.pendingProps,f.type.render,f.ref,Lr);break;case 5:Yu(f);default:rp(p,f),f=kr=Pf(f,So),f=tp(p,f,So)}l.memoizedProps=l.pendingProps,f===null?Yc(l):kr=f}function ol(l,f,p,y){go=Ea=null,Yu(f),Qa=null,Nl=0;var v=f.return;try{if(dg(l,v,f,p,Lr)){yi=1,Fc(l,Rs(p,l.current)),kr=null;return}}catch(S){if(v!==null)throw kr=v,S;yi=1,Fc(l,Rs(p,l.current)),kr=null;return}f.flags&32768?(Wr||y===1?l=!0:tl||(Lr&536870912)!==0?l=!1:(qo=l=!0,(y===2||y===9||y===3||y===6)&&(y=Cs.current,y!==null&&y.tag===13&&(y.flags|=16384))),Cp(f,l)):Yc(f)}function Yc(l){var f=l;do{if((f.flags&32768)!==0){Cp(f,qo);return}l=f.return;var p=hg(f.alternate,f,So);if(p!==null){kr=p;return}if(f=f.sibling,f!==null){kr=f;return}kr=f=l}while(f!==null);yi===0&&(yi=5)}function Cp(l,f){do{var p=pg(l.alternate,l);if(p!==null){p.flags&=32767,kr=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(l=l.sibling,l!==null)){kr=l;return}kr=l=p}while(l!==null);yi=6,kr=null}function Vp(l,f,p,y,v,S,Wt,Tn,Dn){l.cancelPendingCommit=null;do Xc();while(Hi!==0);if((Yr&6)!==0)throw Error(o(327));if(f!==null){if(f===l.current)throw Error(o(177));if(S=f.lanes|f.childLanes,S|=Su,Rr(l,p,S,Wt,Tn,Dn),l===ri&&(kr=ri=null,Lr=0),rl=f,Ko=l,il=p,Cd=S,Vd=v,vp=y,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Rg(pi,function(){return Np(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||y){y=En.T,En.T=null,v=Cn.p,Cn.p=2,Wt=Yr,Yr|=4;try{mg(l,f,p)}finally{Yr=Wt,Cn.p=v,En.T=y}}Hi=1,kp(),Dp(),$p()}}function kp(){if(Hi===1){Hi=0;var l=Ko,f=rl,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=En.T,En.T=null;var y=Cn.p;Cn.p=2;var v=Yr;Yr|=4;try{pp(f,l);var S=Wd,Wt=bf(l.containerInfo),Tn=S.focusedElem,Dn=S.selectionRange;if(Wt!==Tn&&Tn&&Tn.ownerDocument&&_f(Tn.ownerDocument.documentElement,Tn)){if(Dn!==null&&bu(Tn)){var qn=Dn.start,Jn=Dn.end;if(Jn===void 0&&(Jn=qn),"selectionStart"in Tn)Tn.selectionStart=qn,Tn.selectionEnd=Math.min(Jn,Tn.value.length);else{var nr=Tn.ownerDocument||document,Gn=nr&&nr.defaultView||window;if(Gn.getSelection){var Wn=Gn.getSelection(),br=Tn.textContent.length,gr=Math.min(Dn.start,br),Jr=Dn.end===void 0?gr:Math.min(Dn.end,br);!Wn.extend&&gr>Jr&&(Wt=Jr,Jr=gr,gr=Wt);var jn=yf(Tn,gr),Nn=yf(Tn,Jr);if(jn&&Nn&&(Wn.rangeCount!==1||Wn.anchorNode!==jn.node||Wn.anchorOffset!==jn.offset||Wn.focusNode!==Nn.node||Wn.focusOffset!==Nn.offset)){var zn=nr.createRange();zn.setStart(jn.node,jn.offset),Wn.removeAllRanges(),gr>Jr?(Wn.addRange(zn),Wn.extend(Nn.node,Nn.offset)):(zn.setEnd(Nn.node,Nn.offset),Wn.addRange(zn))}}}}for(nr=[],Wn=Tn;Wn=Wn.parentNode;)Wn.nodeType===1&&nr.push({element:Wn,left:Wn.scrollLeft,top:Wn.scrollTop});for(typeof Tn.focus=="function"&&Tn.focus(),Tn=0;Tn<nr.length;Tn++){var tr=nr[Tn];tr.element.scrollLeft=tr.left,tr.element.scrollTop=tr.top}}lu=!!Gd,Wd=Gd=null}finally{Yr=v,Cn.p=y,En.T=p}}l.current=f,Hi=2}}function Dp(){if(Hi===2){Hi=0;var l=Ko,f=rl,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=En.T,En.T=null;var y=Cn.p;Cn.p=2;var v=Yr;Yr|=4;try{up(l,f.alternate,f)}finally{Yr=v,Cn.p=y,En.T=p}}Hi=3}}function $p(){if(Hi===4||Hi===3){Hi=0,qr();var l=Ko,f=rl,p=il,y=vp;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Hi=5:(Hi=0,rl=Ko=null,Mp(l,l.pendingLanes));var v=l.pendingLanes;if(v===0&&(Wo=null),Ji(p),f=f.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Ur,f,void 0,(f.current.flags&128)===128)}catch{}if(y!==null){f=En.T,v=Cn.p,Cn.p=2,En.T=null;try{for(var S=l.onRecoverableError,Wt=0;Wt<y.length;Wt++){var Tn=y[Wt];S(Tn.value,{componentStack:Tn.stack})}}finally{En.T=f,Cn.p=v}}(il&3)!==0&&Xc(),Js(l),v=l.pendingLanes,(p&4194090)!==0&&(v&42)!==0?l===kd?ql++:(ql=0,kd=l):ql=0,Gl(0)}}function Mp(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,Al(f)))}function Xc(l){return kp(),Dp(),$p(),Np()}function Np(){if(Hi!==5)return!1;var l=Ko,f=Cd;Cd=0;var p=Ji(il),y=En.T,v=Cn.p;try{Cn.p=32>p?32:p,En.T=null,p=Vd,Vd=null;var S=Ko,Wt=il;if(Hi=0,rl=Ko=null,il=0,(Yr&6)!==0)throw Error(o(331));var Tn=Yr;if(Yr|=4,bp(S.current),gp(S,S.current,Wt,p),Yr=Tn,Gl(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Ur,S)}catch{}return!0}finally{Cn.p=v,En.T=y,Mp(l,f)}}function Bp(l,f,p){f=Rs(p,f),f=ud(l.stateNode,f,2),l=Oo(l,f,2),l!==null&&(Pr(l,2),Js(l))}function ti(l,f,p){if(l.tag===3)Bp(l,l,p);else for(;f!==null;){if(f.tag===3){Bp(f,l,p);break}else if(f.tag===1){var y=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Wo===null||!Wo.has(y))){l=Rs(p,l),p=jh(2),y=Oo(f,p,2),y!==null&&(Uh(p,y,f,l),Pr(y,2),Js(y));break}}f=f.return}}function Nd(l,f,p){var y=l.pingCache;if(y===null){y=l.pingCache=new _g;var v=new Set;y.set(f,v)}else v=y.get(f),v===void 0&&(v=new Set,y.set(f,v));v.has(p)||(Rd=!0,v.add(p),l=xg.bind(null,l,f,p),f.then(l,l))}function xg(l,f,p){var y=l.pingCache;y!==null&&y.delete(f),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,ri===l&&(Lr&p)===p&&(yi===4||yi===3&&(Lr&62914560)===Lr&&300>Vr()-Pd?(Yr&2)===0&&sl(l,0):wd|=p,nl===Lr&&(nl=0)),Js(l)}function Op(l,f){f===0&&(f=vr()),l=ja(l,f),l!==null&&(Pr(l,f),Js(l))}function Sg(l){var f=l.memoizedState,p=0;f!==null&&(p=f.retryLane),Op(l,p)}function Ag(l,f){var p=0;switch(l.tag){case 13:var y=l.stateNode,v=l.memoizedState;v!==null&&(p=v.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(o(314))}y!==null&&y.delete(f),Op(l,p)}function Rg(l,f){return Tr(l,f)}var Qc=null,al=null,Bd=!1,Zc=!1,Od=!1,wa=0;function Js(l){l!==al&&l.next===null&&(al===null?Qc=al=l:al=al.next=l),Zc=!0,Bd||(Bd=!0,Ig())}function Gl(l,f){if(!Od&&Zc){Od=!0;do for(var p=!1,y=Qc;y!==null;){if(l!==0){var v=y.pendingLanes;if(v===0)var S=0;else{var Wt=y.suspendedLanes,Tn=y.pingedLanes;S=(1<<31-C(42|l)+1)-1,S&=v&~(Wt&~Tn),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(p=!0,zp(y,S))}else S=Lr,S=or(y,y===ri?S:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(S&3)===0||ur(y,S)||(p=!0,zp(y,S));y=y.next}while(p);Od=!1}}function wg(){Lp()}function Lp(){Zc=Bd=!1;var l=0;wa!==0&&(Ng()&&(l=wa),wa=0);for(var f=Vr(),p=null,y=Qc;y!==null;){var v=y.next,S=jp(y,f);S===0?(y.next=null,p===null?Qc=v:p.next=v,v===null&&(al=p)):(p=y,(l!==0||(S&3)!==0)&&(Zc=!0)),y=v}Gl(l)}function jp(l,f){for(var p=l.suspendedLanes,y=l.pingedLanes,v=l.expirationTimes,S=l.pendingLanes&-62914561;0<S;){var Wt=31-C(S),Tn=1<<Wt,Dn=v[Wt];Dn===-1?((Tn&p)===0||(Tn&y)!==0)&&(v[Wt]=fr(Tn,f)):Dn<=f&&(l.expiredLanes|=Tn),S&=~Tn}if(f=ri,p=Lr,p=or(l,l===f?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===f&&(Xr===2||Xr===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&sr(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||ur(l,p)){if(f=p&-p,f===l.callbackPriority)return f;switch(y!==null&&sr(y),Ji(p)){case 2:case 8:p=ni;break;case 32:p=pi;break;case 268435456:p=di;break;default:p=pi}return y=Up.bind(null,l),p=Tr(p,y),l.callbackPriority=f,l.callbackNode=p,f}return y!==null&&y!==null&&sr(y),l.callbackPriority=2,l.callbackNode=null,2}function Up(l,f){if(Hi!==0&&Hi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Xc()&&l.callbackNode!==p)return null;var y=Lr;return y=or(l,l===ri?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(xp(l,y,f),jp(l,Vr()),l.callbackNode!=null&&l.callbackNode===p?Up.bind(null,l):null)}function zp(l,f){if(Xc())return null;xp(l,f,!0)}function Ig(){Og(function(){(Yr&6)!==0?Tr(si,wg):Lp()})}function Ld(){return wa===0&&(wa=Fr()),wa}function Hp(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ko(""+l)}function qp(l,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,l.id&&p.setAttribute("form",l.id),f.parentNode.insertBefore(p,f),l=new FormData(l),p.parentNode.removeChild(p),l}function Pg(l,f,p,y,v){if(f==="submit"&&p&&p.stateNode===v){var S=Hp((v[ei]||null).action),Wt=y.submitter;Wt&&(f=(f=Wt[ei]||null)?Hp(f.formAction):Wt.getAttribute("formAction"),f!==null&&(S=f,Wt=null));var Tn=new Kn("action","action",null,y,v);l.push({event:Tn,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(wa!==0){var Dn=Wt?qp(v,Wt):new FormData(v);sd(p,{pending:!0,data:Dn,method:v.method,action:S},null,Dn)}}else typeof S=="function"&&(Tn.preventDefault(),Dn=Wt?qp(v,Wt):new FormData(v),sd(p,{pending:!0,data:Dn,method:v.method,action:S},S,Dn))},currentTarget:v}]})}}for(var Fd=0;Fd<xu.length;Fd++){var jd=xu[Fd],Cg=jd.toLowerCase(),Vg=jd[0].toUpperCase()+jd.slice(1);Os(Cg,"on"+Vg)}Os(Tf,"onAnimationEnd"),Os(xf,"onAnimationIteration"),Os(Sf,"onAnimationStart"),Os("dblclick","onDoubleClick"),Os("focusin","onFocus"),Os("focusout","onBlur"),Os(Km,"onTransitionRun"),Os(Ym,"onTransitionStart"),Os(Xm,"onTransitionCancel"),Os(Af,"onTransitionEnd"),os("onMouseEnter",["mouseout","mouseover"]),os("onMouseLeave",["mouseout","mouseover"]),os("onPointerEnter",["pointerout","pointerover"]),os("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wl));function Gp(l,f){f=(f&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],v=y.event;y=y.listeners;e:{var S=void 0;if(f)for(var Wt=y.length-1;0<=Wt;Wt--){var Tn=y[Wt],Dn=Tn.instance,qn=Tn.currentTarget;if(Tn=Tn.listener,Dn!==S&&v.isPropagationStopped())break e;S=Tn,v.currentTarget=qn;try{S(v)}catch(Jn){Lc(Jn)}v.currentTarget=null,S=Dn}else for(Wt=0;Wt<y.length;Wt++){if(Tn=y[Wt],Dn=Tn.instance,qn=Tn.currentTarget,Tn=Tn.listener,Dn!==S&&v.isPropagationStopped())break e;S=Tn,v.currentTarget=qn;try{S(v)}catch(Jn){Lc(Jn)}v.currentTarget=null,S=Dn}}}}function Dr(l,f){var p=f[is];p===void 0&&(p=f[is]=new Set);var y=l+"__bubble";p.has(y)||(Wp(f,l,2,!1),p.add(y))}function Ud(l,f,p){var y=0;f&&(y|=4),Wp(p,l,y,f)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function zd(l){if(!l[Jc]){l[Jc]=!0,na.forEach(function(p){p!=="selectionchange"&&(kg.has(p)||Ud(p,!1,l),Ud(p,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[Jc]||(f[Jc]=!0,Ud("selectionchange",!1,f))}}function Wp(l,f,p,y){switch(ym(f)){case 2:var v=sy;break;case 8:v=oy;break;default:v=rf}p=v.bind(null,f,p,l),v=void 0,!Di||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(v=!0),y?v!==void 0?l.addEventListener(f,p,{capture:!0,passive:v}):l.addEventListener(f,p,!0):v!==void 0?l.addEventListener(f,p,{passive:v}):l.addEventListener(f,p,!1)}function Hd(l,f,p,y,v){var S=y;if((f&1)===0&&(f&2)===0&&y!==null)e:for(;;){if(y===null)return;var Wt=y.tag;if(Wt===3||Wt===4){var Tn=y.stateNode.containerInfo;if(Tn===v)break;if(Wt===4)for(Wt=y.return;Wt!==null;){var Dn=Wt.tag;if((Dn===3||Dn===4)&&Wt.stateNode.containerInfo===v)return;Wt=Wt.return}for(;Tn!==null;){if(Wt=Ds(Tn),Wt===null)return;if(Dn=Wt.tag,Dn===5||Dn===6||Dn===26||Dn===27){y=S=Wt;continue e}Tn=Tn.parentNode}}y=y.return}Do(function(){var qn=S,Jn=Gi(p),nr=[];e:{var Gn=Rf.get(l);if(Gn!==void 0){var Wn=Kn,br=l;switch(l){case"keypress":if(As(p)===0)break e;case"keydown":case"keyup":Wn=Na;break;case"focusin":br="focus",Wn=Gs;break;case"focusout":br="blur",Wn=Gs;break;case"beforeblur":case"afterblur":Wn=Gs;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Wn=li;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Wn=co;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Wn=cc;break;case Tf:case xf:case Sf:Wn=$a;break;case Af:Wn=dc;break;case"scroll":case"scrollend":Wn=wr;break;case"wheel":Wn=Ba;break;case"copy":case"cut":case"paste":Wn=Ma;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Wn=yl;break;case"toggle":case"beforetoggle":Wn=hc}var gr=(f&4)!==0,Jr=!gr&&(l==="scroll"||l==="scrollend"),jn=gr?Gn!==null?Gn+"Capture":null:Gn;gr=[];for(var Nn=qn,zn;Nn!==null;){var tr=Nn;if(zn=tr.stateNode,tr=tr.tag,tr!==5&&tr!==26&&tr!==27||zn===null||jn===null||(tr=Hs(Nn,jn),tr!=null&&gr.push(Kl(Nn,tr,zn))),Jr)break;Nn=Nn.return}0<gr.length&&(Gn=new Wn(Gn,br,null,p,Jn),nr.push({event:Gn,listeners:gr}))}}if((f&7)===0){e:{if(Gn=l==="mouseover"||l==="pointerover",Wn=l==="mouseout"||l==="pointerout",Gn&&p!==es&&(br=p.relatedTarget||p.fromElement)&&(Ds(br)||br[mi]))break e;if((Wn||Gn)&&(Gn=Jn.window===Jn?Jn:(Gn=Jn.ownerDocument)?Gn.defaultView||Gn.parentWindow:window,Wn?(br=p.relatedTarget||p.toElement,Wn=qn,br=br?Ds(br):null,br!==null&&(Jr=c(br),gr=br.tag,br!==Jr||gr!==5&&gr!==27&&gr!==6)&&(br=null)):(Wn=null,br=qn),Wn!==br)){if(gr=li,tr="onMouseLeave",jn="onMouseEnter",Nn="mouse",(l==="pointerout"||l==="pointerover")&&(gr=yl,tr="onPointerLeave",jn="onPointerEnter",Nn="pointer"),Jr=Wn==null?Gn:Ts(Wn),zn=br==null?Gn:Ts(br),Gn=new gr(tr,Nn+"leave",Wn,p,Jn),Gn.target=Jr,Gn.relatedTarget=zn,tr=null,Ds(Jn)===qn&&(gr=new gr(jn,Nn+"enter",br,p,Jn),gr.target=zn,gr.relatedTarget=Jr,tr=gr),Jr=tr,Wn&&br)t:{for(gr=Wn,jn=br,Nn=0,zn=gr;zn;zn=ll(zn))Nn++;for(zn=0,tr=jn;tr;tr=ll(tr))zn++;for(;0<Nn-zn;)gr=ll(gr),Nn--;for(;0<zn-Nn;)jn=ll(jn),zn--;for(;Nn--;){if(gr===jn||jn!==null&&gr===jn.alternate)break t;gr=ll(gr),jn=ll(jn)}gr=null}else gr=null;Wn!==null&&Kp(nr,Gn,Wn,gr,!1),br!==null&&Jr!==null&&Kp(nr,Jr,br,gr,!0)}}e:{if(Gn=qn?Ts(qn):window,Wn=Gn.nodeName&&Gn.nodeName.toLowerCase(),Wn==="select"||Wn==="input"&&Gn.type==="file")var dr=df;else if(Pi(Gn))if(ff)dr=qm;else{dr=zm;var Cr=Um}else Wn=Gn.nodeName,!Wn||Wn.toLowerCase()!=="input"||Gn.type!=="checkbox"&&Gn.type!=="radio"?qn&&ao(qn.elementType)&&(dr=df):dr=Hm;if(dr&&(dr=dr(l,qn))){fo(nr,dr,p,Jn);break e}Cr&&Cr(l,Gn,qn),l==="focusout"&&qn&&Gn.type==="number"&&qn.memoizedProps.value!=null&&Ms(Gn,"number",Gn.value)}switch(Cr=qn?Ts(qn):window,l){case"focusin":(Pi(Cr)||Cr.contentEditable==="true")&&(Oa=Cr,Eu=qn,El=null);break;case"focusout":El=Eu=Oa=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,Ef(nr,p,Jn);break;case"selectionchange":if(Wm)break;case"keydown":case"keyup":Ef(nr,p,Jn)}var mr;if(Ws)e:{switch(l){case"compositionstart":var yr="onCompositionStart";break e;case"compositionend":yr="onCompositionEnd";break e;case"compositionupdate":yr="onCompositionUpdate";break e}yr=void 0}else Br?Yn(l,p)&&(yr="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(yr="onCompositionStart");yr&&(Gt&&p.locale!=="ko"&&(Br||yr!=="onCompositionStart"?yr==="onCompositionEnd"&&Br&&(mr=la()):(fs=Jn,qs="value"in fs?fs.value:fs.textContent,Br=!0)),Cr=eu(qn,yr),0<Cr.length&&(yr=new ml(yr,l,null,p,Jn),nr.push({event:yr,listeners:Cr}),mr?yr.data=mr:(mr=ir(p),mr!==null&&(yr.data=mr)))),(mr=I?Ii(l,p):Or(l,p))&&(yr=eu(qn,"onBeforeInput"),0<yr.length&&(Cr=new ml("onBeforeInput","beforeinput",null,p,Jn),nr.push({event:Cr,listeners:yr}),Cr.data=mr)),Pg(nr,l,qn,p,Jn)}Gp(nr,f)})}function Kl(l,f,p){return{instance:l,listener:f,currentTarget:p}}function eu(l,f){for(var p=f+"Capture",y=[];l!==null;){var v=l,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=Hs(l,p),v!=null&&y.unshift(Kl(l,v,S)),v=Hs(l,f),v!=null&&y.push(Kl(l,v,S))),l.tag===3)return y;l=l.return}return[]}function ll(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Kp(l,f,p,y,v){for(var S=f._reactName,Wt=[];p!==null&&p!==y;){var Tn=p,Dn=Tn.alternate,qn=Tn.stateNode;if(Tn=Tn.tag,Dn!==null&&Dn===y)break;Tn!==5&&Tn!==26&&Tn!==27||qn===null||(Dn=qn,v?(qn=Hs(p,S),qn!=null&&Wt.unshift(Kl(p,qn,Dn))):v||(qn=Hs(p,S),qn!=null&&Wt.push(Kl(p,qn,Dn)))),p=p.return}Wt.length!==0&&l.push({event:f,listeners:Wt})}var Dg=/\r\n?/g,$g=/\u0000|\uFFFD/g;function Yp(l){return(typeof l=="string"?l:""+l).replace(Dg,`
`).replace($g,"")}function Xp(l,f){return f=Yp(f),Yp(l)===f}function tu(){}function Zr(l,f,p,y,v,S){switch(p){case"children":typeof y=="string"?f==="body"||f==="textarea"&&y===""||Yi(l,y):(typeof y=="number"||typeof y=="bigint")&&f!=="body"&&Yi(l,""+y);break;case"className":ls(l,"class",y);break;case"tabIndex":ls(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(l,p,y);break;case"style":oa(l,y,S);break;case"data":if(f!=="object"){ls(l,"data",y);break}case"src":case"href":if(y===""&&(f!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=ko(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(p==="formAction"?(f!=="input"&&Zr(l,f,"name",v.name,v,null),Zr(l,f,"formEncType",v.formEncType,v,null),Zr(l,f,"formMethod",v.formMethod,v,null),Zr(l,f,"formTarget",v.formTarget,v,null)):(Zr(l,f,"encType",v.encType,v,null),Zr(l,f,"method",v.method,v,null),Zr(l,f,"target",v.target,v,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=ko(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=tu);break;case"onScroll":y!=null&&Dr("scroll",l);break;case"onScrollEnd":y!=null&&Dr("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(o(61));if(p=y.__html,p!=null){if(v.children!=null)throw Error(o(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=ko(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":Dr("beforetoggle",l),Dr("toggle",l),as(l,"popover",y);break;case"xlinkActuate":Ri(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Ri(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Ri(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Ri(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Ri(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Ri(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Ri(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Ri(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Ri(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":as(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=hl.get(p)||p,as(l,p,y))}}function qd(l,f,p,y,v,S){switch(p){case"style":oa(l,y,S);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(o(61));if(p=y.__html,p!=null){if(v.children!=null)throw Error(o(60));l.innerHTML=p}}break;case"children":typeof y=="string"?Yi(l,y):(typeof y=="number"||typeof y=="bigint")&&Yi(l,""+y);break;case"onScroll":y!=null&&Dr("scroll",l);break;case"onScrollEnd":y!=null&&Dr("scrollend",l);break;case"onClick":y!=null&&(l.onclick=tu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ro.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(v=p.endsWith("Capture"),f=p.slice(2,v?p.length-7:void 0),S=l[ei]||null,S=S!=null?S[p]:null,typeof S=="function"&&l.removeEventListener(f,S,v),typeof y=="function")){typeof S!="function"&&S!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(f,y,v);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):as(l,p,y)}}}function qi(l,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dr("error",l),Dr("load",l);var y=!1,v=!1,S;for(S in p)if(p.hasOwnProperty(S)){var Wt=p[S];if(Wt!=null)switch(S){case"src":y=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,f));default:Zr(l,f,S,Wt,p,null)}}v&&Zr(l,f,"srcSet",p.srcSet,p,null),y&&Zr(l,f,"src",p.src,p,null);return;case"input":Dr("invalid",l);var Tn=S=Wt=v=null,Dn=null,qn=null;for(y in p)if(p.hasOwnProperty(y)){var Jn=p[y];if(Jn!=null)switch(y){case"name":v=Jn;break;case"type":Wt=Jn;break;case"checked":Dn=Jn;break;case"defaultChecked":qn=Jn;break;case"value":S=Jn;break;case"defaultValue":Tn=Jn;break;case"children":case"dangerouslySetInnerHTML":if(Jn!=null)throw Error(o(137,f));break;default:Zr(l,f,y,Jn,p,null)}}io(l,S,Tn,Dn,qn,Wt,v,!1),Co(l);return;case"select":Dr("invalid",l),y=Wt=S=null;for(v in p)if(p.hasOwnProperty(v)&&(Tn=p[v],Tn!=null))switch(v){case"value":S=Tn;break;case"defaultValue":Wt=Tn;break;case"multiple":y=Tn;default:Zr(l,f,v,Tn,p,null)}f=S,p=Wt,l.multiple=!!y,f!=null?Ns(l,!!y,f,!1):p!=null&&Ns(l,!!y,p,!0);return;case"textarea":Dr("invalid",l),S=v=y=null;for(Wt in p)if(p.hasOwnProperty(Wt)&&(Tn=p[Wt],Tn!=null))switch(Wt){case"value":y=Tn;break;case"defaultValue":v=Tn;break;case"children":S=Tn;break;case"dangerouslySetInnerHTML":if(Tn!=null)throw Error(o(91));break;default:Zr(l,f,Wt,Tn,p,null)}so(l,y,v,S),Co(l);return;case"option":for(Dn in p)if(p.hasOwnProperty(Dn)&&(y=p[Dn],y!=null))switch(Dn){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Zr(l,f,Dn,y,p,null)}return;case"dialog":Dr("beforetoggle",l),Dr("toggle",l),Dr("cancel",l),Dr("close",l);break;case"iframe":case"object":Dr("load",l);break;case"video":case"audio":for(y=0;y<Wl.length;y++)Dr(Wl[y],l);break;case"image":Dr("error",l),Dr("load",l);break;case"details":Dr("toggle",l);break;case"embed":case"source":case"link":Dr("error",l),Dr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(qn in p)if(p.hasOwnProperty(qn)&&(y=p[qn],y!=null))switch(qn){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,f));default:Zr(l,f,qn,y,p,null)}return;default:if(ao(f)){for(Jn in p)p.hasOwnProperty(Jn)&&(y=p[Jn],y!==void 0&&qd(l,f,Jn,y,p,void 0));return}}for(Tn in p)p.hasOwnProperty(Tn)&&(y=p[Tn],y!=null&&Zr(l,f,Tn,y,p,null))}function Mg(l,f,p,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,Wt=null,Tn=null,Dn=null,qn=null,Jn=null;for(Wn in p){var nr=p[Wn];if(p.hasOwnProperty(Wn)&&nr!=null)switch(Wn){case"checked":break;case"value":break;case"defaultValue":Dn=nr;default:y.hasOwnProperty(Wn)||Zr(l,f,Wn,null,y,nr)}}for(var Gn in y){var Wn=y[Gn];if(nr=p[Gn],y.hasOwnProperty(Gn)&&(Wn!=null||nr!=null))switch(Gn){case"type":S=Wn;break;case"name":v=Wn;break;case"checked":qn=Wn;break;case"defaultChecked":Jn=Wn;break;case"value":Wt=Wn;break;case"defaultValue":Tn=Wn;break;case"children":case"dangerouslySetInnerHTML":if(Wn!=null)throw Error(o(137,f));break;default:Wn!==nr&&Zr(l,f,Gn,Wn,y,nr)}}Ki(l,Wt,Tn,Dn,qn,Jn,S,v);return;case"select":Wn=Wt=Tn=Gn=null;for(S in p)if(Dn=p[S],p.hasOwnProperty(S)&&Dn!=null)switch(S){case"value":break;case"multiple":Wn=Dn;default:y.hasOwnProperty(S)||Zr(l,f,S,null,y,Dn)}for(v in y)if(S=y[v],Dn=p[v],y.hasOwnProperty(v)&&(S!=null||Dn!=null))switch(v){case"value":Gn=S;break;case"defaultValue":Tn=S;break;case"multiple":Wt=S;default:S!==Dn&&Zr(l,f,v,S,y,Dn)}f=Tn,p=Wt,y=Wn,Gn!=null?Ns(l,!!p,Gn,!1):!!y!=!!p&&(f!=null?Ns(l,!!p,f,!0):Ns(l,!!p,p?[]:"",!1));return;case"textarea":Wn=Gn=null;for(Tn in p)if(v=p[Tn],p.hasOwnProperty(Tn)&&v!=null&&!y.hasOwnProperty(Tn))switch(Tn){case"value":break;case"children":break;default:Zr(l,f,Tn,null,y,v)}for(Wt in y)if(v=y[Wt],S=p[Wt],y.hasOwnProperty(Wt)&&(v!=null||S!=null))switch(Wt){case"value":Gn=v;break;case"defaultValue":Wn=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:v!==S&&Zr(l,f,Wt,v,y,S)}Kr(l,Gn,Wn);return;case"option":for(var br in p)if(Gn=p[br],p.hasOwnProperty(br)&&Gn!=null&&!y.hasOwnProperty(br))switch(br){case"selected":l.selected=!1;break;default:Zr(l,f,br,null,y,Gn)}for(Dn in y)if(Gn=y[Dn],Wn=p[Dn],y.hasOwnProperty(Dn)&&Gn!==Wn&&(Gn!=null||Wn!=null))switch(Dn){case"selected":l.selected=Gn&&typeof Gn!="function"&&typeof Gn!="symbol";break;default:Zr(l,f,Dn,Gn,y,Wn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gr in p)Gn=p[gr],p.hasOwnProperty(gr)&&Gn!=null&&!y.hasOwnProperty(gr)&&Zr(l,f,gr,null,y,Gn);for(qn in y)if(Gn=y[qn],Wn=p[qn],y.hasOwnProperty(qn)&&Gn!==Wn&&(Gn!=null||Wn!=null))switch(qn){case"children":case"dangerouslySetInnerHTML":if(Gn!=null)throw Error(o(137,f));break;default:Zr(l,f,qn,Gn,y,Wn)}return;default:if(ao(f)){for(var Jr in p)Gn=p[Jr],p.hasOwnProperty(Jr)&&Gn!==void 0&&!y.hasOwnProperty(Jr)&&qd(l,f,Jr,void 0,y,Gn);for(Jn in y)Gn=y[Jn],Wn=p[Jn],!y.hasOwnProperty(Jn)||Gn===Wn||Gn===void 0&&Wn===void 0||qd(l,f,Jn,Gn,y,Wn);return}}for(var jn in p)Gn=p[jn],p.hasOwnProperty(jn)&&Gn!=null&&!y.hasOwnProperty(jn)&&Zr(l,f,jn,null,y,Gn);for(nr in y)Gn=y[nr],Wn=p[nr],!y.hasOwnProperty(nr)||Gn===Wn||Gn==null&&Wn==null||Zr(l,f,nr,Gn,y,Wn)}var Gd=null,Wd=null;function nu(l){return l.nodeType===9?l:l.ownerDocument}function Qp(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zp(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function Kd(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Yd=null;function Ng(){var l=window.event;return l&&l.type==="popstate"?l===Yd?!1:(Yd=l,!0):(Yd=null,!1)}var Jp=typeof setTimeout=="function"?setTimeout:void 0,Bg=typeof clearTimeout=="function"?clearTimeout:void 0,em=typeof Promise=="function"?Promise:void 0,Og=typeof queueMicrotask=="function"?queueMicrotask:typeof em<"u"?function(l){return em.resolve(null).then(l).catch(Lg)}:Jp;function Lg(l){setTimeout(function(){throw l})}function Xo(l){return l==="head"}function tm(l,f){var p=f,y=0,v=0;do{var S=p.nextSibling;if(l.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(0<y&&8>y){p=y;var Wt=l.ownerDocument;if(p&1&&Yl(Wt.documentElement),p&2&&Yl(Wt.body),p&4)for(p=Wt.head,Yl(p),Wt=p.firstChild;Wt;){var Tn=Wt.nextSibling,Dn=Wt.nodeName;Wt[eo]||Dn==="SCRIPT"||Dn==="STYLE"||Dn==="LINK"&&Wt.rel.toLowerCase()==="stylesheet"||p.removeChild(Wt),Wt=Tn}}if(v===0){l.removeChild(S),rc(f);return}v--}else p==="$"||p==="$?"||p==="$!"?v++:y=p.charCodeAt(0)-48;else y=0;p=S}while(p);rc(f)}function Xd(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Xd(p),zs(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function Fg(l,f,p,y){for(;l.nodeType===1;){var v=p;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[eo])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(S=l.getAttribute("rel"),S==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(S!==v.rel||l.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||l.getAttribute("title")!==(v.title==null?null:v.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(S=l.getAttribute("src"),(S!==(v.src==null?null:v.src)||l.getAttribute("type")!==(v.type==null?null:v.type)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&l.getAttribute("name")===S)return l}else return l;if(l=Fs(l.nextSibling),l===null)break}return null}function jg(l,f,p){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Fs(l.nextSibling),l===null))return null;return l}function Qd(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function Ug(l,f){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")f();else{var y=function(){f(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Fs(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return l}var Zd=null;function nm(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(f===0)return l;f--}else p==="/$"&&f++}l=l.previousSibling}return null}function rm(l,f,p){switch(f=nu(p),l){case"html":if(l=f.documentElement,!l)throw Error(o(452));return l;case"head":if(l=f.head,!l)throw Error(o(453));return l;case"body":if(l=f.body,!l)throw Error(o(454));return l;default:throw Error(o(451))}}function Yl(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);zs(l)}var ks=new Map,im=new Set;function ru(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Ao=Cn.d;Cn.d={f:zg,r:Hg,D:qg,C:Gg,L:Wg,m:Kg,X:Xg,S:Yg,M:Qg};function zg(){var l=Ao.f(),f=Kc();return l||f}function Hg(l){var f=Li(l);f!==null&&f.tag===5&&f.type==="form"?xh(f):Ao.r(l)}var cl=typeof document>"u"?null:document;function sm(l,f,p){var y=cl;if(y&&typeof f=="string"&&f){var v=ai(f);v='link[rel="'+l+'"][href="'+v+'"]',typeof p=="string"&&(v+='[crossorigin="'+p+'"]'),im.has(v)||(im.add(v),l={rel:l,crossOrigin:p,href:f},y.querySelector(v)===null&&(f=y.createElement("link"),qi(f,"link",l),fi(f),y.head.appendChild(f)))}}function qg(l){Ao.D(l),sm("dns-prefetch",l,null)}function Gg(l,f){Ao.C(l,f),sm("preconnect",l,f)}function Wg(l,f,p){Ao.L(l,f,p);var y=cl;if(y&&l&&f){var v='link[rel="preload"][as="'+ai(f)+'"]';f==="image"&&p&&p.imageSrcSet?(v+='[imagesrcset="'+ai(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(v+='[imagesizes="'+ai(p.imageSizes)+'"]')):v+='[href="'+ai(l)+'"]';var S=v;switch(f){case"style":S=ul(l);break;case"script":S=dl(l)}ks.has(S)||(l=_({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:l,as:f},p),ks.set(S,l),y.querySelector(v)!==null||f==="style"&&y.querySelector(Xl(S))||f==="script"&&y.querySelector(Ql(S))||(f=y.createElement("link"),qi(f,"link",l),fi(f),y.head.appendChild(f)))}}function Kg(l,f){Ao.m(l,f);var p=cl;if(p&&l){var y=f&&typeof f.as=="string"?f.as:"script",v='link[rel="modulepreload"][as="'+ai(y)+'"][href="'+ai(l)+'"]',S=v;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=dl(l)}if(!ks.has(S)&&(l=_({rel:"modulepreload",href:l},f),ks.set(S,l),p.querySelector(v)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Ql(S)))return}y=p.createElement("link"),qi(y,"link",l),fi(y),p.head.appendChild(y)}}}function Yg(l,f,p){Ao.S(l,f,p);var y=cl;if(y&&l){var v=Fi(y).hoistableStyles,S=ul(l);f=f||"default";var Wt=v.get(S);if(!Wt){var Tn={loading:0,preload:null};if(Wt=y.querySelector(Xl(S)))Tn.loading=5;else{l=_({rel:"stylesheet",href:l,"data-precedence":f},p),(p=ks.get(S))&&Jd(l,p);var Dn=Wt=y.createElement("link");fi(Dn),qi(Dn,"link",l),Dn._p=new Promise(function(qn,Jn){Dn.onload=qn,Dn.onerror=Jn}),Dn.addEventListener("load",function(){Tn.loading|=1}),Dn.addEventListener("error",function(){Tn.loading|=2}),Tn.loading|=4,iu(Wt,f,y)}Wt={type:"stylesheet",instance:Wt,count:1,state:Tn},v.set(S,Wt)}}}function Xg(l,f){Ao.X(l,f);var p=cl;if(p&&l){var y=Fi(p).hoistableScripts,v=dl(l),S=y.get(v);S||(S=p.querySelector(Ql(v)),S||(l=_({src:l,async:!0},f),(f=ks.get(v))&&ef(l,f),S=p.createElement("script"),fi(S),qi(S,"link",l),p.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},y.set(v,S))}}function Qg(l,f){Ao.M(l,f);var p=cl;if(p&&l){var y=Fi(p).hoistableScripts,v=dl(l),S=y.get(v);S||(S=p.querySelector(Ql(v)),S||(l=_({src:l,async:!0,type:"module"},f),(f=ks.get(v))&&ef(l,f),S=p.createElement("script"),fi(S),qi(S,"link",l),p.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},y.set(v,S))}}function om(l,f,p,y){var v=(v=rr.current)?ru(v):null;if(!v)throw Error(o(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=ul(p.href),p=Fi(v).hoistableStyles,y=p.get(f),y||(y={type:"style",instance:null,count:0,state:null},p.set(f,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=ul(p.href);var S=Fi(v).hoistableStyles,Wt=S.get(l);if(Wt||(v=v.ownerDocument||v,Wt={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(l,Wt),(S=v.querySelector(Xl(l)))&&!S._p&&(Wt.instance=S,Wt.state.loading=5),ks.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},ks.set(l,p),S||Zg(v,l,p,Wt.state))),f&&y===null)throw Error(o(528,""));return Wt}if(f&&y!==null)throw Error(o(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=dl(p),p=Fi(v).hoistableScripts,y=p.get(f),y||(y={type:"script",instance:null,count:0,state:null},p.set(f,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,l))}}function ul(l){return'href="'+ai(l)+'"'}function Xl(l){return'link[rel="stylesheet"]['+l+"]"}function am(l){return _({},l,{"data-precedence":l.precedence,precedence:null})}function Zg(l,f,p,y){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?y.loading=1:(f=l.createElement("link"),y.preload=f,f.addEventListener("load",function(){return y.loading|=1}),f.addEventListener("error",function(){return y.loading|=2}),qi(f,"link",p),fi(f),l.head.appendChild(f))}function dl(l){return'[src="'+ai(l)+'"]'}function Ql(l){return"script[async]"+l}function lm(l,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var y=l.querySelector('style[data-href~="'+ai(p.href)+'"]');if(y)return f.instance=y,fi(y),y;var v=_({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),fi(y),qi(y,"style",v),iu(y,p.precedence,l),f.instance=y;case"stylesheet":v=ul(p.href);var S=l.querySelector(Xl(v));if(S)return f.state.loading|=4,f.instance=S,fi(S),S;y=am(p),(v=ks.get(v))&&Jd(y,v),S=(l.ownerDocument||l).createElement("link"),fi(S);var Wt=S;return Wt._p=new Promise(function(Tn,Dn){Wt.onload=Tn,Wt.onerror=Dn}),qi(S,"link",y),f.state.loading|=4,iu(S,p.precedence,l),f.instance=S;case"script":return S=dl(p.src),(v=l.querySelector(Ql(S)))?(f.instance=v,fi(v),v):(y=p,(v=ks.get(S))&&(y=_({},p),ef(y,v)),l=l.ownerDocument||l,v=l.createElement("script"),fi(v),qi(v,"link",y),l.head.appendChild(v),f.instance=v);case"void":return null;default:throw Error(o(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(y=f.instance,f.state.loading|=4,iu(y,p.precedence,l));return f.instance}function iu(l,f,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=y.length?y[y.length-1]:null,S=v,Wt=0;Wt<y.length;Wt++){var Tn=y[Wt];if(Tn.dataset.precedence===f)S=Tn;else if(S!==v)break}S?S.parentNode.insertBefore(l,S.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(l,f.firstChild))}function Jd(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function ef(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var su=null;function cm(l,f,p){if(su===null){var y=new Map,v=su=new Map;v.set(p,y)}else v=su,y=v.get(p),y||(y=new Map,v.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),v=0;v<p.length;v++){var S=p[v];if(!(S[eo]||S[$r]||l==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var Wt=S.getAttribute(f)||"";Wt=l+Wt;var Tn=y.get(Wt);Tn?Tn.push(S):y.set(Wt,[S])}}return y}function um(l,f,p){l=l.ownerDocument||l,l.head.insertBefore(p,f==="title"?l.querySelector("head > title"):null)}function Jg(l,f,p){if(p===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function dm(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Zl=null;function ey(){}function ty(l,f,p){if(Zl===null)throw Error(o(475));var y=Zl;if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var v=ul(p.href),S=l.querySelector(Xl(v));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(y.count++,y=ou.bind(y),l.then(y,y)),f.state.loading|=4,f.instance=S,fi(S);return}S=l.ownerDocument||l,p=am(p),(v=ks.get(v))&&Jd(p,v),S=S.createElement("link"),fi(S);var Wt=S;Wt._p=new Promise(function(Tn,Dn){Wt.onload=Tn,Wt.onerror=Dn}),qi(S,"link",p),f.instance=S}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(y.count++,f=ou.bind(y),l.addEventListener("load",f),l.addEventListener("error",f))}}function ny(){if(Zl===null)throw Error(o(475));var l=Zl;return l.stylesheets&&l.count===0&&tf(l,l.stylesheets),0<l.count?function(f){var p=setTimeout(function(){if(l.stylesheets&&tf(l,l.stylesheets),l.unsuspend){var y=l.unsuspend;l.unsuspend=null,y()}},6e4);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(p)}}:null}function ou(){if(this.count--,this.count===0){if(this.stylesheets)tf(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var au=null;function tf(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,au=new Map,f.forEach(ry,l),au=null,ou.call(l))}function ry(l,f){if(!(f.state.loading&4)){var p=au.get(l);if(p)var y=p.get(null);else{p=new Map,au.set(l,p);for(var v=l.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var Wt=v[S];(Wt.nodeName==="LINK"||Wt.getAttribute("media")!=="not all")&&(p.set(Wt.dataset.precedence,Wt),y=Wt)}y&&p.set(null,y)}v=f.instance,Wt=v.getAttribute("data-precedence"),S=p.get(Wt)||y,S===y&&p.set(null,v),p.set(Wt,v),this.count++,y=ou.bind(this),v.addEventListener("load",y),v.addEventListener("error",y),S?S.parentNode.insertBefore(v,S.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(v,l.firstChild)),f.state.loading|=4}}var Jl={$$typeof:pn,Provider:null,Consumer:null,_currentValue:On,_currentValue2:On,_threadCount:0};function iy(l,f,p,y,v,S,Wt,Tn){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=y,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=Wt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Tn,this.incompleteTransitions=new Map}function fm(l,f,p,y,v,S,Wt,Tn,Dn,qn,Jn,nr){return l=new iy(l,f,p,Wt,Tn,Dn,qn,nr),f=1,S===!0&&(f|=24),S=gs(3,null,null,f),l.current=S,S.stateNode=l,f=Mu(),f.refCount++,l.pooledCache=f,f.refCount++,S.memoizedState={element:y,isDehydrated:p,cache:f},Lu(S),l}function hm(l){return l?(l=Ua,l):Ua}function pm(l,f,p,y,v,S){v=hm(v),y.context===null?y.context=v:y.pendingContext=v,y=Bo(f),y.payload={element:p},S=S===void 0?null:S,S!==null&&(y.callback=S),p=Oo(l,y,f),p!==null&&(vs(p,l,f),Pl(p,l,f))}function mm(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<f?p:f}}function nf(l,f){mm(l,f),(l=l.alternate)&&mm(l,f)}function gm(l){if(l.tag===13){var f=ja(l,67108864);f!==null&&vs(f,l,67108864),nf(l,67108864)}}var lu=!0;function sy(l,f,p,y){var v=En.T;En.T=null;var S=Cn.p;try{Cn.p=2,rf(l,f,p,y)}finally{Cn.p=S,En.T=v}}function oy(l,f,p,y){var v=En.T;En.T=null;var S=Cn.p;try{Cn.p=8,rf(l,f,p,y)}finally{Cn.p=S,En.T=v}}function rf(l,f,p,y){if(lu){var v=sf(y);if(v===null)Hd(l,f,y,cu,p),_m(l,y);else if(ly(v,l,f,p,y))y.stopPropagation();else if(_m(l,y),f&4&&-1<ay.indexOf(l)){for(;v!==null;){var S=Li(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var Wt=Zn(S.pendingLanes);if(Wt!==0){var Tn=S;for(Tn.pendingLanes|=2,Tn.entangledLanes|=2;Wt;){var Dn=1<<31-C(Wt);Tn.entanglements[1]|=Dn,Wt&=~Dn}Js(S),(Yr&6)===0&&(Gc=Vr()+500,Gl(0))}}break;case 13:Tn=ja(S,2),Tn!==null&&vs(Tn,S,2),Kc(),nf(S,2)}if(S=sf(y),S===null&&Hd(l,f,y,cu,p),S===v)break;v=S}v!==null&&y.stopPropagation()}else Hd(l,f,y,null,p)}}function sf(l){return l=Gi(l),of(l)}var cu=null;function of(l){if(cu=null,l=Ds(l),l!==null){var f=c(l);if(f===null)l=null;else{var p=f.tag;if(p===13){if(l=u(f),l!==null)return l;l=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return cu=l,null}function ym(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ui()){case si:return 2;case ni:return 8;case pi:case ii:return 32;case di:return 268435456;default:return 32}default:return 32}}var af=!1,Qo=null,Zo=null,Jo=null,ec=new Map,tc=new Map,ea=[],ay="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _m(l,f){switch(l){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":ec.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(f.pointerId)}}function nc(l,f,p,y,v,S){return l===null||l.nativeEvent!==S?(l={blockedOn:f,domEventName:p,eventSystemFlags:y,nativeEvent:S,targetContainers:[v]},f!==null&&(f=Li(f),f!==null&&gm(f)),l):(l.eventSystemFlags|=y,f=l.targetContainers,v!==null&&f.indexOf(v)===-1&&f.push(v),l)}function ly(l,f,p,y,v){switch(f){case"focusin":return Qo=nc(Qo,l,f,p,y,v),!0;case"dragenter":return Zo=nc(Zo,l,f,p,y,v),!0;case"mouseover":return Jo=nc(Jo,l,f,p,y,v),!0;case"pointerover":var S=v.pointerId;return ec.set(S,nc(ec.get(S)||null,l,f,p,y,v)),!0;case"gotpointercapture":return S=v.pointerId,tc.set(S,nc(tc.get(S)||null,l,f,p,y,v)),!0}return!1}function bm(l){var f=Ds(l.target);if(f!==null){var p=c(f);if(p!==null){if(f=p.tag,f===13){if(f=u(p),f!==null){l.blockedOn=f,oi(l.priority,function(){if(p.tag===13){var y=Es();y=Ai(y);var v=ja(p,y);v!==null&&vs(v,p,y),nf(p,y)}});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function uu(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var p=sf(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);es=y,p.target.dispatchEvent(y),es=null}else return f=Li(p),f!==null&&gm(f),l.blockedOn=p,!1;f.shift()}return!0}function Em(l,f,p){uu(l)&&p.delete(f)}function cy(){af=!1,Qo!==null&&uu(Qo)&&(Qo=null),Zo!==null&&uu(Zo)&&(Zo=null),Jo!==null&&uu(Jo)&&(Jo=null),ec.forEach(Em),tc.forEach(Em)}function du(l,f){l.blockedOn===f&&(l.blockedOn=null,af||(af=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cy)))}var fu=null;function vm(l){fu!==l&&(fu=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){fu===l&&(fu=null);for(var f=0;f<l.length;f+=3){var p=l[f],y=l[f+1],v=l[f+2];if(typeof y!="function"){if(of(y||p)===null)continue;break}var S=Li(p);S!==null&&(l.splice(f,3),f-=3,sd(S,{pending:!0,data:v,method:p.method,action:y},y,v))}}))}function rc(l){function f(Dn){return du(Dn,l)}Qo!==null&&du(Qo,l),Zo!==null&&du(Zo,l),Jo!==null&&du(Jo,l),ec.forEach(f),tc.forEach(f);for(var p=0;p<ea.length;p++){var y=ea[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<ea.length&&(p=ea[0],p.blockedOn===null);)bm(p),p.blockedOn===null&&ea.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var v=p[y],S=p[y+1],Wt=v[ei]||null;if(typeof S=="function")Wt||vm(p);else if(Wt){var Tn=null;if(S&&S.hasAttribute("formAction")){if(v=S,Wt=S[ei]||null)Tn=Wt.formAction;else if(of(v)!==null)continue}else Tn=Wt.action;typeof Tn=="function"?p[y+1]=Tn:(p.splice(y,3),y-=3),vm(p)}}}function lf(l){this._internalRoot=l}hu.prototype.render=lf.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(o(409));var p=f.current,y=Es();pm(p,y,l,f,null,null)},hu.prototype.unmount=lf.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;pm(l.current,2,null,l,null,null),Kc(),f[mi]=null}};function hu(l){this._internalRoot=l}hu.prototype.unstable_scheduleHydration=function(l){if(l){var f=ki();l={blockedOn:null,target:l,priority:f};for(var p=0;p<ea.length&&f!==0&&f<ea[p].priority;p++);ea.splice(p,0,l),p===0&&bm(l)}};var Tm=e.version;if(Tm!=="19.1.1")throw Error(o(527,Tm,"19.1.1"));Cn.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(o(188)):(l=Object.keys(l).join(","),Error(o(268,l)));return l=m(f),l=l!==null?g(l):null,l=l===null?null:l.stateNode,l};var uy={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:En,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{Ur=pu.inject(uy),gn=pu}catch{}}return reactDomClient_production.createRoot=function(l,f){if(!a(l))throw Error(o(299));var p=!1,y="",v=Bh,S=Oh,Wt=Lh,Tn=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(v=f.onUncaughtError),f.onCaughtError!==void 0&&(S=f.onCaughtError),f.onRecoverableError!==void 0&&(Wt=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Tn=f.unstable_transitionCallbacks)),f=fm(l,1,!1,null,null,p,y,v,S,Wt,Tn,null),l[mi]=f.current,zd(l),new lf(f)},reactDomClient_production.hydrateRoot=function(l,f,p){if(!a(l))throw Error(o(299));var y=!1,v="",S=Bh,Wt=Oh,Tn=Lh,Dn=null,qn=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(v=p.identifierPrefix),p.onUncaughtError!==void 0&&(S=p.onUncaughtError),p.onCaughtError!==void 0&&(Wt=p.onCaughtError),p.onRecoverableError!==void 0&&(Tn=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Dn=p.unstable_transitionCallbacks),p.formState!==void 0&&(qn=p.formState)),f=fm(l,1,!0,f,p??null,y,v,S,Wt,Tn,Dn,qn),f.context=hm(null),p=f.current,y=Es(),y=Ai(y),v=Bo(y),v.callback=null,Oo(p,v,y),p=y,f.current.lanes=p,Pr(f,p),Js(f),l[mi]=f.current,zd(l),new hu(f)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(n){const e=[];let s=0;for(let o=0;o<n.length;o++){let a=n.charCodeAt(o);a<128?e[s++]=a:a<2048?(e[s++]=a>>6|192,e[s++]=a&63|128):(a&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++o)&1023),e[s++]=a>>18|240,e[s++]=a>>12&63|128,e[s++]=a>>6&63|128,e[s++]=a&63|128):(e[s++]=a>>12|224,e[s++]=a>>6&63|128,e[s++]=a&63|128)}return e},byteArrayToString=function(n){const e=[];let s=0,o=0;for(;s<n.length;){const a=n[s++];if(a<128)e[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=n[s++];e[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=n[s++],u=n[s++],h=n[s++],m=((a&7)<<18|(c&63)<<12|(u&63)<<6|h&63)-65536;e[o++]=String.fromCharCode(55296+(m>>10)),e[o++]=String.fromCharCode(56320+(m&1023))}else{const c=n[s++],u=n[s++];e[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|u&63)}}return e.join("")},base64$1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<n.length;a+=3){const c=n[a],u=a+1<n.length,h=u?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,_=c>>2,b=(c&3)<<4|h>>4;let T=(h&15)<<2|g>>6,A=g&63;m||(A=64,u||(T=64)),o.push(s[_],s[b],s[T],s[A])}return o.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(stringToByteArray$1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):byteArrayToString(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<n.length;){const c=s[n.charAt(a++)],h=a<n.length?s[n.charAt(a)]:0;++a;const g=a<n.length?s[n.charAt(a)]:64;++a;const b=a<n.length?s[n.charAt(a)]:64;if(++a,c==null||h==null||g==null||b==null)throw new DecodeBase64StringError;const T=c<<2|h>>4;if(o.push(T),g!==64){const A=h<<4&240|g>>2;if(o.push(A),b!==64){const R=g<<6&192|b;o.push(R)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(n){const e=stringToByteArray$1(n);return base64$1.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(n){return base64Encode(n).replace(/\./g,"")},base64Decode=function(n){try{return base64$1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const n=define_process_env_default.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&base64Decode(n[1]);return e&&JSON.parse(e)},getDefaults$1=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},getDefaultEmulatorHost=n=>getDefaults$1()?.emulatorHosts?.[n],getDefaultEmulatorHostnameAndPort=n=>{const e=getDefaultEmulatorHost(n);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),o]:[e.substring(0,s),o]},getDefaultAppConfig=()=>getDefaults$1()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,o)=>{s?this.reject(s):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},o=e||"demo-project",a=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[base64urlEncodeWithoutPadding(JSON.stringify(s)),base64urlEncodeWithoutPadding(JSON.stringify(u)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const n={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?n.emulator.push(e):n.prod.push(e);return n}function getOrCreateEl(n){let e=document.getElementById(n),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),s=!0),{created:s,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(n,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[n]===e||emulatorStatus[n]||previouslyDismissed)return;emulatorStatus[n]=e;function s(T){return`__firebase__banner__${T}`}const o="__firebase__banner",c=getEmulatorSummary().prod.length>0;function u(){const T=document.getElementById(o);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{previouslyDismissed=!0,u()},T}function _(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=getOrCreateEl(o),A=s("text"),R=document.getElementById(A)||document.createElement("span"),w=s("learnmore"),D=document.getElementById(w)||document.createElement("a"),fn=s("preprendIcon"),yn=document.getElementById(fn)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const pn=T.element;h(pn),_(D,w);const wn=g();m(yn,fn),pn.append(yn,R,D,wn),document.body.appendChild(pn)}c?(R.innerText="Preview backend disconnected.",yn.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(yn.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isNode(){const n=getDefaults$1()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isSafariOrWebkit(){return!isNode()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((n,e)=>{try{let s=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(o),n(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(s){e(s)}})}function areCookiesEnabled(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,s,o){super(s),this.code=e,this.customData=o,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,s,o){this.service=e,this.serviceName=s,this.errors=o}create(e,...s){const o=s[0]||{},a=`${this.service}/${e}`,c=this.errors[e],u=c?replaceTemplate(c,o):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new FirebaseError(a,h,o)}}function replaceTemplate(n,e){return n.replace(PATTERN,(s,o)=>{const a=e[o];return a!=null?String(a):`<${o}?>`})}const PATTERN=/\{\$([^}]+)}/g;function deepEqual(n,e){if(n===e)return!0;const s=Object.keys(n),o=Object.keys(e);for(const a of s){if(!o.includes(a))return!1;const c=n[a],u=e[a];if(isObject$2(c)&&isObject$2(u)){if(!deepEqual(c,u))return!1}else if(c!==u)return!1}for(const a of o)if(!s.includes(a))return!1;return!0}function isObject$2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance$1(n){return n&&n._delegate?n._delegate:n}let Component$1=class{constructor(e,s,o){this.name=e,this.instanceFactory=s,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Provider$1=class{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const o=new Deferred;if(this.instancesDeferred.set(s,o),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:s});for(const[c,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(c);o===h&&u.resolve(a)}return a}onInit(e,s){const o=this.normalizeInstanceIdentifier(s),a=this.onInitCallbacks.get(o)??new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,s){const o=this.onInitCallbacks.get(s);if(o)for(const a of o)try{a(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:s}),this.instances.set(e,o),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function normalizeIdentifierForFactory(n){return n===DEFAULT_ENTRY_NAME$1?void 0:n}function isComponentEager(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Provider$1(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel$1;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(LogLevel$1||(LogLevel$1={}));const levelStringToEnum$1={debug:LogLevel$1.DEBUG,verbose:LogLevel$1.VERBOSE,info:LogLevel$1.INFO,warn:LogLevel$1.WARN,error:LogLevel$1.ERROR,silent:LogLevel$1.SILENT},defaultLogLevel$1=LogLevel$1.INFO,ConsoleMethod$1={[LogLevel$1.DEBUG]:"log",[LogLevel$1.VERBOSE]:"log",[LogLevel$1.INFO]:"info",[LogLevel$1.WARN]:"warn",[LogLevel$1.ERROR]:"error"},defaultLogHandler$1=(n,e,...s)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),a=ConsoleMethod$1[e];if(a)console[a](`[${o}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Logger$1=class{constructor(e){this.name=e,this._logLevel=defaultLogLevel$1,this._logHandler=defaultLogHandler$1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel$1))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum$1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.DEBUG,...e),this._logHandler(this,LogLevel$1.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.VERBOSE,...e),this._logHandler(this,LogLevel$1.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.INFO,...e),this._logHandler(this,LogLevel$1.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.WARN,...e),this._logHandler(this,LogLevel$1.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.ERROR,...e),this._logHandler(this,LogLevel$1.ERROR,...e)}};const instanceOfAny=(n,e)=>e.some(s=>n instanceof s);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(n){const e=new Promise((s,o)=>{const a=()=>{n.removeEventListener("success",c),n.removeEventListener("error",u)},c=()=>{s(wrap$2(n.result)),a()},u=()=>{o(n.error),a()};n.addEventListener("success",c),n.addEventListener("error",u)});return e.then(s=>{s instanceof IDBCursor&&cursorRequestMap.set(s,n)}).catch(()=>{}),reverseTransformCache.set(e,n),e}function cacheDonePromiseForTransaction(n){if(transactionDoneMap.has(n))return;const e=new Promise((s,o)=>{const a=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",u),n.removeEventListener("abort",u)},c=()=>{s(),a()},u=()=>{o(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",c),n.addEventListener("error",u),n.addEventListener("abort",u)});transactionDoneMap.set(n,e)}let idbProxyTraps={get(n,e,s){if(n instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||transactionStoreNamesMap.get(n);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return wrap$2(n[e])},set(n,e,s){return n[e]=s,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function replaceTraps(n){idbProxyTraps=n(idbProxyTraps)}function wrapFunction(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const o=n.call(unwrap(this),e,...s);return transactionStoreNamesMap.set(o,e.sort?e.sort():[e]),wrap$2(o)}:getCursorAdvanceMethods().includes(n)?function(...e){return n.apply(unwrap(this),e),wrap$2(cursorRequestMap.get(this))}:function(...e){return wrap$2(n.apply(unwrap(this),e))}}function transformCachableValue(n){return typeof n=="function"?wrapFunction(n):(n instanceof IDBTransaction&&cacheDonePromiseForTransaction(n),instanceOfAny(n,getIdbProxyableTypes())?new Proxy(n,idbProxyTraps):n)}function wrap$2(n){if(n instanceof IDBRequest)return promisifyRequest(n);if(transformCache.has(n))return transformCache.get(n);const e=transformCachableValue(n);return e!==n&&(transformCache.set(n,e),reverseTransformCache.set(e,n)),e}const unwrap=n=>reverseTransformCache.get(n);function openDB(n,e,{blocked:s,upgrade:o,blocking:a,terminated:c}={}){const u=indexedDB.open(n,e),h=wrap$2(u);return o&&u.addEventListener("upgradeneeded",m=>{o(wrap$2(u.result),m.oldVersion,m.newVersion,wrap$2(u.transaction),m)}),s&&u.addEventListener("blocked",m=>s(m.oldVersion,m.newVersion,m)),h.then(m=>{c&&m.addEventListener("close",()=>c()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}function deleteDB(n,{blocked:e}={}){const s=indexedDB.deleteDatabase(n);return e&&s.addEventListener("blocked",o=>e(o.oldVersion,o)),wrap$2(s).then(()=>{})}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const s=e.replace(/FromIndex$/,""),o=e!==s,a=writeMethods.includes(s);if(!(s in(o?IDBIndex:IDBObjectStore).prototype)||!(a||readMethods.includes(s)))return;const c=async function(u,...h){const m=this.transaction(u,a?"readwrite":"readonly");let g=m.store;return o&&(g=g.index(h.shift())),(await Promise.all([g[s](...h),a&&m.done]))[0]};return cachedMethods.set(e,c),c}replaceTraps(n=>({...n,get:(e,s,o)=>getMethod(e,s)||n.get(e,s,o),has:(e,s)=>!!getMethod(e,s)||n.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(isVersionServiceProvider(s)){const o=s.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(s=>s).join(" ")}}function isVersionServiceProvider(n){return n.getComponent()?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger$1("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$4="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(n,e){try{n.container.addComponent(e)}catch(s){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,s)}}function _registerComponent(n){const e=n.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,n);for(const s of _apps.values())_addComponent(s,n);for(const s of _serverApps.values())_addComponent(s,n);return!0}function _getProvider(n,e){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(e)}function _isFirebaseServerApp(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY$2=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,s,o){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Component$1("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$2.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$4;function initializeApp(n,e={}){let s=n;typeof e!="object"&&(e={name:e});const o={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...e},a=o.name;if(typeof a!="string"||!a)throw ERROR_FACTORY$2.create("bad-app-name",{appName:String(a)});if(s||(s=getDefaultAppConfig()),!s)throw ERROR_FACTORY$2.create("no-options");const c=_apps.get(a);if(c){if(deepEqual(s,c.options)&&deepEqual(o,c.config))return c;throw ERROR_FACTORY$2.create("duplicate-app",{appName:a})}const u=new ComponentContainer(a);for(const m of _components.values())u.addComponent(m);const h=new FirebaseAppImpl(s,o,u);return _apps.set(a,h),h}function getApp(n=DEFAULT_ENTRY_NAME){const e=_apps.get(n);if(!e&&n===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY$2.create("no-app",{appName:n});return e}function registerVersion(n,e,s){let o=PLATFORM_LOG_STRING[n]??n;s&&(o+=`-${s}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${o}" with version "${e}":`];a&&u.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(u.join(" "));return}_registerComponent(new Component$1(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebase-heartbeat-database",DB_VERSION=1,STORE_NAME="firebase-heartbeat-store";let dbPromise$2=null;function getDbPromise$2(){return dbPromise$2||(dbPromise$2=openDB(DB_NAME,DB_VERSION,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(STORE_NAME)}catch(s){console.warn(s)}}}}).catch(n=>{throw ERROR_FACTORY$2.create("idb-open",{originalErrorMessage:n.message})})),dbPromise$2}async function readHeartbeatsFromIndexedDB(n){try{const s=(await getDbPromise$2()).transaction(STORE_NAME),o=await s.objectStore(STORE_NAME).get(computeKey(n));return await s.done,o}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const s=ERROR_FACTORY$2.create("idb-get",{originalErrorMessage:e?.message});logger.warn(s.message)}}}async function writeHeartbeatsToIndexedDB(n,e){try{const o=(await getDbPromise$2()).transaction(STORE_NAME,"readwrite");await o.objectStore(STORE_NAME).put(e,computeKey(n)),await o.done}catch(s){if(s instanceof FirebaseError)logger.warn(s.message);else{const o=ERROR_FACTORY$2.create("idb-set",{originalErrorMessage:s?.message});logger.warn(o.message)}}}function computeKey(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(s),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=getUTCDateString();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const a=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){logger.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=getUTCDateString(),{heartbeatsToSend:s,unsentEntries:o}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),a=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return logger.warn(e),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(n,e=MAX_HEADER_BYTES){const s=[];let o=n.slice();for(const a of n){const c=s.find(u=>u.agent===a.agent);if(c){if(c.dates.push(a.date),countBytes(s)>e){c.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),countBytes(s)>e){s.pop();break}o=o.slice(1)}return{heartbeatsToSend:s,unsentEntries:o}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await readHeartbeatsFromIndexedDB(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function countBytes(n){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n})).length}function getEarliestHeartbeatIdx(n){if(n.length===0)return-1;let e=0,s=n[0].date;for(let o=1;o<n.length;o++)n[o].date<s&&(s=n[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(n){_registerComponent(new Component$1("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component$1("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,n),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(wt,jt){function ln(){}ln.prototype=jt.prototype,wt.D=jt.prototype,wt.prototype=new ln,wt.prototype.constructor=wt,wt.C=function(vn,dn,mn){for(var zt=Array(arguments.length-2),$n=2;$n<arguments.length;$n++)zt[$n-2]=arguments[$n];return jt.prototype[dn].apply(vn,zt)}}function s(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,s),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(wt,jt,ln){ln||(ln=0);var vn=Array(16);if(typeof jt=="string")for(var dn=0;16>dn;++dn)vn[dn]=jt.charCodeAt(ln++)|jt.charCodeAt(ln++)<<8|jt.charCodeAt(ln++)<<16|jt.charCodeAt(ln++)<<24;else for(dn=0;16>dn;++dn)vn[dn]=jt[ln++]|jt[ln++]<<8|jt[ln++]<<16|jt[ln++]<<24;jt=wt.g[0],ln=wt.g[1],dn=wt.g[2];var mn=wt.g[3],zt=jt+(mn^ln&(dn^mn))+vn[0]+3614090360&4294967295;jt=ln+(zt<<7&4294967295|zt>>>25),zt=mn+(dn^jt&(ln^dn))+vn[1]+3905402710&4294967295,mn=jt+(zt<<12&4294967295|zt>>>20),zt=dn+(ln^mn&(jt^ln))+vn[2]+606105819&4294967295,dn=mn+(zt<<17&4294967295|zt>>>15),zt=ln+(jt^dn&(mn^jt))+vn[3]+3250441966&4294967295,ln=dn+(zt<<22&4294967295|zt>>>10),zt=jt+(mn^ln&(dn^mn))+vn[4]+4118548399&4294967295,jt=ln+(zt<<7&4294967295|zt>>>25),zt=mn+(dn^jt&(ln^dn))+vn[5]+1200080426&4294967295,mn=jt+(zt<<12&4294967295|zt>>>20),zt=dn+(ln^mn&(jt^ln))+vn[6]+2821735955&4294967295,dn=mn+(zt<<17&4294967295|zt>>>15),zt=ln+(jt^dn&(mn^jt))+vn[7]+4249261313&4294967295,ln=dn+(zt<<22&4294967295|zt>>>10),zt=jt+(mn^ln&(dn^mn))+vn[8]+1770035416&4294967295,jt=ln+(zt<<7&4294967295|zt>>>25),zt=mn+(dn^jt&(ln^dn))+vn[9]+2336552879&4294967295,mn=jt+(zt<<12&4294967295|zt>>>20),zt=dn+(ln^mn&(jt^ln))+vn[10]+4294925233&4294967295,dn=mn+(zt<<17&4294967295|zt>>>15),zt=ln+(jt^dn&(mn^jt))+vn[11]+2304563134&4294967295,ln=dn+(zt<<22&4294967295|zt>>>10),zt=jt+(mn^ln&(dn^mn))+vn[12]+1804603682&4294967295,jt=ln+(zt<<7&4294967295|zt>>>25),zt=mn+(dn^jt&(ln^dn))+vn[13]+4254626195&4294967295,mn=jt+(zt<<12&4294967295|zt>>>20),zt=dn+(ln^mn&(jt^ln))+vn[14]+2792965006&4294967295,dn=mn+(zt<<17&4294967295|zt>>>15),zt=ln+(jt^dn&(mn^jt))+vn[15]+1236535329&4294967295,ln=dn+(zt<<22&4294967295|zt>>>10),zt=jt+(dn^mn&(ln^dn))+vn[1]+4129170786&4294967295,jt=ln+(zt<<5&4294967295|zt>>>27),zt=mn+(ln^dn&(jt^ln))+vn[6]+3225465664&4294967295,mn=jt+(zt<<9&4294967295|zt>>>23),zt=dn+(jt^ln&(mn^jt))+vn[11]+643717713&4294967295,dn=mn+(zt<<14&4294967295|zt>>>18),zt=ln+(mn^jt&(dn^mn))+vn[0]+3921069994&4294967295,ln=dn+(zt<<20&4294967295|zt>>>12),zt=jt+(dn^mn&(ln^dn))+vn[5]+3593408605&4294967295,jt=ln+(zt<<5&4294967295|zt>>>27),zt=mn+(ln^dn&(jt^ln))+vn[10]+38016083&4294967295,mn=jt+(zt<<9&4294967295|zt>>>23),zt=dn+(jt^ln&(mn^jt))+vn[15]+3634488961&4294967295,dn=mn+(zt<<14&4294967295|zt>>>18),zt=ln+(mn^jt&(dn^mn))+vn[4]+3889429448&4294967295,ln=dn+(zt<<20&4294967295|zt>>>12),zt=jt+(dn^mn&(ln^dn))+vn[9]+568446438&4294967295,jt=ln+(zt<<5&4294967295|zt>>>27),zt=mn+(ln^dn&(jt^ln))+vn[14]+3275163606&4294967295,mn=jt+(zt<<9&4294967295|zt>>>23),zt=dn+(jt^ln&(mn^jt))+vn[3]+4107603335&4294967295,dn=mn+(zt<<14&4294967295|zt>>>18),zt=ln+(mn^jt&(dn^mn))+vn[8]+1163531501&4294967295,ln=dn+(zt<<20&4294967295|zt>>>12),zt=jt+(dn^mn&(ln^dn))+vn[13]+2850285829&4294967295,jt=ln+(zt<<5&4294967295|zt>>>27),zt=mn+(ln^dn&(jt^ln))+vn[2]+4243563512&4294967295,mn=jt+(zt<<9&4294967295|zt>>>23),zt=dn+(jt^ln&(mn^jt))+vn[7]+1735328473&4294967295,dn=mn+(zt<<14&4294967295|zt>>>18),zt=ln+(mn^jt&(dn^mn))+vn[12]+2368359562&4294967295,ln=dn+(zt<<20&4294967295|zt>>>12),zt=jt+(ln^dn^mn)+vn[5]+4294588738&4294967295,jt=ln+(zt<<4&4294967295|zt>>>28),zt=mn+(jt^ln^dn)+vn[8]+2272392833&4294967295,mn=jt+(zt<<11&4294967295|zt>>>21),zt=dn+(mn^jt^ln)+vn[11]+1839030562&4294967295,dn=mn+(zt<<16&4294967295|zt>>>16),zt=ln+(dn^mn^jt)+vn[14]+4259657740&4294967295,ln=dn+(zt<<23&4294967295|zt>>>9),zt=jt+(ln^dn^mn)+vn[1]+2763975236&4294967295,jt=ln+(zt<<4&4294967295|zt>>>28),zt=mn+(jt^ln^dn)+vn[4]+1272893353&4294967295,mn=jt+(zt<<11&4294967295|zt>>>21),zt=dn+(mn^jt^ln)+vn[7]+4139469664&4294967295,dn=mn+(zt<<16&4294967295|zt>>>16),zt=ln+(dn^mn^jt)+vn[10]+3200236656&4294967295,ln=dn+(zt<<23&4294967295|zt>>>9),zt=jt+(ln^dn^mn)+vn[13]+681279174&4294967295,jt=ln+(zt<<4&4294967295|zt>>>28),zt=mn+(jt^ln^dn)+vn[0]+3936430074&4294967295,mn=jt+(zt<<11&4294967295|zt>>>21),zt=dn+(mn^jt^ln)+vn[3]+3572445317&4294967295,dn=mn+(zt<<16&4294967295|zt>>>16),zt=ln+(dn^mn^jt)+vn[6]+76029189&4294967295,ln=dn+(zt<<23&4294967295|zt>>>9),zt=jt+(ln^dn^mn)+vn[9]+3654602809&4294967295,jt=ln+(zt<<4&4294967295|zt>>>28),zt=mn+(jt^ln^dn)+vn[12]+3873151461&4294967295,mn=jt+(zt<<11&4294967295|zt>>>21),zt=dn+(mn^jt^ln)+vn[15]+530742520&4294967295,dn=mn+(zt<<16&4294967295|zt>>>16),zt=ln+(dn^mn^jt)+vn[2]+3299628645&4294967295,ln=dn+(zt<<23&4294967295|zt>>>9),zt=jt+(dn^(ln|~mn))+vn[0]+4096336452&4294967295,jt=ln+(zt<<6&4294967295|zt>>>26),zt=mn+(ln^(jt|~dn))+vn[7]+1126891415&4294967295,mn=jt+(zt<<10&4294967295|zt>>>22),zt=dn+(jt^(mn|~ln))+vn[14]+2878612391&4294967295,dn=mn+(zt<<15&4294967295|zt>>>17),zt=ln+(mn^(dn|~jt))+vn[5]+4237533241&4294967295,ln=dn+(zt<<21&4294967295|zt>>>11),zt=jt+(dn^(ln|~mn))+vn[12]+1700485571&4294967295,jt=ln+(zt<<6&4294967295|zt>>>26),zt=mn+(ln^(jt|~dn))+vn[3]+2399980690&4294967295,mn=jt+(zt<<10&4294967295|zt>>>22),zt=dn+(jt^(mn|~ln))+vn[10]+4293915773&4294967295,dn=mn+(zt<<15&4294967295|zt>>>17),zt=ln+(mn^(dn|~jt))+vn[1]+2240044497&4294967295,ln=dn+(zt<<21&4294967295|zt>>>11),zt=jt+(dn^(ln|~mn))+vn[8]+1873313359&4294967295,jt=ln+(zt<<6&4294967295|zt>>>26),zt=mn+(ln^(jt|~dn))+vn[15]+4264355552&4294967295,mn=jt+(zt<<10&4294967295|zt>>>22),zt=dn+(jt^(mn|~ln))+vn[6]+2734768916&4294967295,dn=mn+(zt<<15&4294967295|zt>>>17),zt=ln+(mn^(dn|~jt))+vn[13]+1309151649&4294967295,ln=dn+(zt<<21&4294967295|zt>>>11),zt=jt+(dn^(ln|~mn))+vn[4]+4149444226&4294967295,jt=ln+(zt<<6&4294967295|zt>>>26),zt=mn+(ln^(jt|~dn))+vn[11]+3174756917&4294967295,mn=jt+(zt<<10&4294967295|zt>>>22),zt=dn+(jt^(mn|~ln))+vn[2]+718787259&4294967295,dn=mn+(zt<<15&4294967295|zt>>>17),zt=ln+(mn^(dn|~jt))+vn[9]+3951481745&4294967295,wt.g[0]=wt.g[0]+jt&4294967295,wt.g[1]=wt.g[1]+(dn+(zt<<21&4294967295|zt>>>11))&4294967295,wt.g[2]=wt.g[2]+dn&4294967295,wt.g[3]=wt.g[3]+mn&4294967295}o.prototype.u=function(wt,jt){jt===void 0&&(jt=wt.length);for(var ln=jt-this.blockSize,vn=this.B,dn=this.h,mn=0;mn<jt;){if(dn==0)for(;mn<=ln;)a(this,wt,mn),mn+=this.blockSize;if(typeof wt=="string"){for(;mn<jt;)if(vn[dn++]=wt.charCodeAt(mn++),dn==this.blockSize){a(this,vn),dn=0;break}}else for(;mn<jt;)if(vn[dn++]=wt[mn++],dn==this.blockSize){a(this,vn),dn=0;break}}this.h=dn,this.o+=jt},o.prototype.v=function(){var wt=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);wt[0]=128;for(var jt=1;jt<wt.length-8;++jt)wt[jt]=0;var ln=8*this.o;for(jt=wt.length-8;jt<wt.length;++jt)wt[jt]=ln&255,ln/=256;for(this.u(wt),wt=Array(16),jt=ln=0;4>jt;++jt)for(var vn=0;32>vn;vn+=8)wt[ln++]=this.g[jt]>>>vn&255;return wt};function c(wt,jt){var ln=h;return Object.prototype.hasOwnProperty.call(ln,wt)?ln[wt]:ln[wt]=jt(wt)}function u(wt,jt){this.h=jt;for(var ln=[],vn=!0,dn=wt.length-1;0<=dn;dn--){var mn=wt[dn]|0;vn&&mn==jt||(ln[dn]=mn,vn=!1)}this.g=ln}var h={};function m(wt){return-128<=wt&&128>wt?c(wt,function(jt){return new u([jt|0],0>jt?-1:0)}):new u([wt|0],0>wt?-1:0)}function g(wt){if(isNaN(wt)||!isFinite(wt))return b;if(0>wt)return D(g(-wt));for(var jt=[],ln=1,vn=0;wt>=ln;vn++)jt[vn]=wt/ln|0,ln*=4294967296;return new u(jt,0)}function _(wt,jt){if(wt.length==0)throw Error("number format error: empty string");if(jt=jt||10,2>jt||36<jt)throw Error("radix out of range: "+jt);if(wt.charAt(0)=="-")return D(_(wt.substring(1),jt));if(0<=wt.indexOf("-"))throw Error('number format error: interior "-" character');for(var ln=g(Math.pow(jt,8)),vn=b,dn=0;dn<wt.length;dn+=8){var mn=Math.min(8,wt.length-dn),zt=parseInt(wt.substring(dn,dn+mn),jt);8>mn?(mn=g(Math.pow(jt,mn)),vn=vn.j(mn).add(g(zt))):(vn=vn.j(ln),vn=vn.add(g(zt)))}return vn}var b=m(0),T=m(1),A=m(16777216);n=u.prototype,n.m=function(){if(w(this))return-D(this).m();for(var wt=0,jt=1,ln=0;ln<this.g.length;ln++){var vn=this.i(ln);wt+=(0<=vn?vn:4294967296+vn)*jt,jt*=4294967296}return wt},n.toString=function(wt){if(wt=wt||10,2>wt||36<wt)throw Error("radix out of range: "+wt);if(R(this))return"0";if(w(this))return"-"+D(this).toString(wt);for(var jt=g(Math.pow(wt,6)),ln=this,vn="";;){var dn=wn(ln,jt).g;ln=fn(ln,dn.j(jt));var mn=((0<ln.g.length?ln.g[0]:ln.h)>>>0).toString(wt);if(ln=dn,R(ln))return mn+vn;for(;6>mn.length;)mn="0"+mn;vn=mn+vn}},n.i=function(wt){return 0>wt?0:wt<this.g.length?this.g[wt]:this.h};function R(wt){if(wt.h!=0)return!1;for(var jt=0;jt<wt.g.length;jt++)if(wt.g[jt]!=0)return!1;return!0}function w(wt){return wt.h==-1}n.l=function(wt){return wt=fn(this,wt),w(wt)?-1:R(wt)?0:1};function D(wt){for(var jt=wt.g.length,ln=[],vn=0;vn<jt;vn++)ln[vn]=~wt.g[vn];return new u(ln,~wt.h).add(T)}n.abs=function(){return w(this)?D(this):this},n.add=function(wt){for(var jt=Math.max(this.g.length,wt.g.length),ln=[],vn=0,dn=0;dn<=jt;dn++){var mn=vn+(this.i(dn)&65535)+(wt.i(dn)&65535),zt=(mn>>>16)+(this.i(dn)>>>16)+(wt.i(dn)>>>16);vn=zt>>>16,mn&=65535,zt&=65535,ln[dn]=zt<<16|mn}return new u(ln,ln[ln.length-1]&-2147483648?-1:0)};function fn(wt,jt){return wt.add(D(jt))}n.j=function(wt){if(R(this)||R(wt))return b;if(w(this))return w(wt)?D(this).j(D(wt)):D(D(this).j(wt));if(w(wt))return D(this.j(D(wt)));if(0>this.l(A)&&0>wt.l(A))return g(this.m()*wt.m());for(var jt=this.g.length+wt.g.length,ln=[],vn=0;vn<2*jt;vn++)ln[vn]=0;for(vn=0;vn<this.g.length;vn++)for(var dn=0;dn<wt.g.length;dn++){var mn=this.i(vn)>>>16,zt=this.i(vn)&65535,$n=wt.i(dn)>>>16,Sn=wt.i(dn)&65535;ln[2*vn+2*dn]+=zt*Sn,yn(ln,2*vn+2*dn),ln[2*vn+2*dn+1]+=mn*Sn,yn(ln,2*vn+2*dn+1),ln[2*vn+2*dn+1]+=zt*$n,yn(ln,2*vn+2*dn+1),ln[2*vn+2*dn+2]+=mn*$n,yn(ln,2*vn+2*dn+2)}for(vn=0;vn<jt;vn++)ln[vn]=ln[2*vn+1]<<16|ln[2*vn];for(vn=jt;vn<2*jt;vn++)ln[vn]=0;return new u(ln,0)};function yn(wt,jt){for(;(wt[jt]&65535)!=wt[jt];)wt[jt+1]+=wt[jt]>>>16,wt[jt]&=65535,jt++}function pn(wt,jt){this.g=wt,this.h=jt}function wn(wt,jt){if(R(jt))throw Error("division by zero");if(R(wt))return new pn(b,b);if(w(wt))return jt=wn(D(wt),jt),new pn(D(jt.g),D(jt.h));if(w(jt))return jt=wn(wt,D(jt)),new pn(D(jt.g),jt.h);if(30<wt.g.length){if(w(wt)||w(jt))throw Error("slowDivide_ only works with positive integers.");for(var ln=T,vn=jt;0>=vn.l(wt);)ln=V(ln),vn=V(vn);var dn=bn(ln,1),mn=bn(vn,1);for(vn=bn(vn,2),ln=bn(ln,2);!R(vn);){var zt=mn.add(vn);0>=zt.l(wt)&&(dn=dn.add(ln),mn=zt),vn=bn(vn,1),ln=bn(ln,1)}return jt=fn(wt,dn.j(jt)),new pn(dn,jt)}for(dn=b;0<=wt.l(jt);){for(ln=Math.max(1,Math.floor(wt.m()/jt.m())),vn=Math.ceil(Math.log(ln)/Math.LN2),vn=48>=vn?1:Math.pow(2,vn-48),mn=g(ln),zt=mn.j(jt);w(zt)||0<zt.l(wt);)ln-=vn,mn=g(ln),zt=mn.j(jt);R(mn)&&(mn=T),dn=dn.add(mn),wt=fn(wt,zt)}return new pn(dn,wt)}n.A=function(wt){return wn(this,wt).h},n.and=function(wt){for(var jt=Math.max(this.g.length,wt.g.length),ln=[],vn=0;vn<jt;vn++)ln[vn]=this.i(vn)&wt.i(vn);return new u(ln,this.h&wt.h)},n.or=function(wt){for(var jt=Math.max(this.g.length,wt.g.length),ln=[],vn=0;vn<jt;vn++)ln[vn]=this.i(vn)|wt.i(vn);return new u(ln,this.h|wt.h)},n.xor=function(wt){for(var jt=Math.max(this.g.length,wt.g.length),ln=[],vn=0;vn<jt;vn++)ln[vn]=this.i(vn)^wt.i(vn);return new u(ln,this.h^wt.h)};function V(wt){for(var jt=wt.g.length+1,ln=[],vn=0;vn<jt;vn++)ln[vn]=wt.i(vn)<<1|wt.i(vn-1)>>>31;return new u(ln,wt.h)}function bn(wt,jt){var ln=jt>>5;jt%=32;for(var vn=wt.g.length-ln,dn=[],mn=0;mn<vn;mn++)dn[mn]=0<jt?wt.i(mn+ln)>>>jt|wt.i(mn+ln+1)<<32-jt:wt.i(mn+ln);return new u(dn,wt.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Md5=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=_,Integer=u}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat$1,Event,getStatEventTarget,createWebChannelTransport;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(E,I,Gt){return E==Array.prototype||E==Object.prototype||(E[I]=Gt.value),E};function s(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var I=0;I<E.length;++I){var Gt=E[I];if(Gt&&Gt.Math==Math)return Gt}throw Error("Cannot find global object")}var o=s(this);function a(E,I){if(I)e:{var Gt=o;E=E.split(".");for(var Rn=0;Rn<E.length-1;Rn++){var Un=E[Rn];if(!(Un in Gt))break e;Gt=Gt[Un]}E=E[E.length-1],Rn=Gt[E],I=I(Rn),I!=Rn&&I!=null&&e(Gt,E,{configurable:!0,writable:!0,value:I})}}function c(E,I){E instanceof String&&(E+="");var Gt=0,Rn=!1,Un={next:function(){if(!Rn&&Gt<E.length){var Yn=Gt++;return{value:I(Yn,E[Yn]),done:!1}}return Rn=!0,{done:!0,value:void 0}}};return Un[Symbol.iterator]=function(){return Un},Un}a("Array.prototype.values",function(E){return E||function(){return c(this,function(I,Gt){return Gt})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(E){var I=typeof E;return I=I!="object"?I:E?Array.isArray(E)?"array":I:"null",I=="array"||I=="object"&&typeof E.length=="number"}function g(E){var I=typeof E;return I=="object"&&E!=null||I=="function"}function _(E,I,Gt){return E.call.apply(E.bind,arguments)}function b(E,I,Gt){if(!E)throw Error();if(2<arguments.length){var Rn=Array.prototype.slice.call(arguments,2);return function(){var Un=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Un,Rn),E.apply(I,Un)}}return function(){return E.apply(I,arguments)}}function T(E,I,Gt){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:b,T.apply(null,arguments)}function A(E,I){var Gt=Array.prototype.slice.call(arguments,1);return function(){var Rn=Gt.slice();return Rn.push.apply(Rn,arguments),E.apply(this,Rn)}}function R(E,I){function Gt(){}Gt.prototype=I.prototype,E.aa=I.prototype,E.prototype=new Gt,E.prototype.constructor=E,E.Qb=function(Rn,Un,Yn){for(var ir=Array(arguments.length-2),Br=2;Br<arguments.length;Br++)ir[Br-2]=arguments[Br];return I.prototype[Un].apply(Rn,ir)}}function w(E){const I=E.length;if(0<I){const Gt=Array(I);for(let Rn=0;Rn<I;Rn++)Gt[Rn]=E[Rn];return Gt}return[]}function D(E,I){for(let Gt=1;Gt<arguments.length;Gt++){const Rn=arguments[Gt];if(m(Rn)){const Un=E.length||0,Yn=Rn.length||0;E.length=Un+Yn;for(let ir=0;ir<Yn;ir++)E[Un+ir]=Rn[ir]}else E.push(Rn)}}class fn{constructor(I,Gt){this.i=I,this.j=Gt,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function yn(E){return/^[\s\xa0]*$/.test(E)}function pn(){var E=h.navigator;return E&&(E=E.userAgent)?E:""}function wn(E){return wn[" "](E),E}wn[" "]=function(){};var V=pn().indexOf("Gecko")!=-1&&!(pn().toLowerCase().indexOf("webkit")!=-1&&pn().indexOf("Edge")==-1)&&!(pn().indexOf("Trident")!=-1||pn().indexOf("MSIE")!=-1)&&pn().indexOf("Edge")==-1;function bn(E,I,Gt){for(const Rn in E)I.call(Gt,E[Rn],Rn,E)}function wt(E,I){for(const Gt in E)I.call(void 0,E[Gt],Gt,E)}function jt(E){const I={};for(const Gt in E)I[Gt]=E[Gt];return I}const ln="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vn(E,I){let Gt,Rn;for(let Un=1;Un<arguments.length;Un++){Rn=arguments[Un];for(Gt in Rn)E[Gt]=Rn[Gt];for(let Yn=0;Yn<ln.length;Yn++)Gt=ln[Yn],Object.prototype.hasOwnProperty.call(Rn,Gt)&&(E[Gt]=Rn[Gt])}}function dn(E){var I=1;E=E.split(":");const Gt=[];for(;0<I&&E.length;)Gt.push(E.shift()),I--;return E.length&&Gt.push(E.join(":")),Gt}function mn(E){h.setTimeout(()=>{throw E},0)}function zt(){var E=Fn;let I=null;return E.g&&(I=E.g,E.g=E.g.next,E.g||(E.h=null),I.next=null),I}class $n{constructor(){this.h=this.g=null}add(I,Gt){const Rn=Sn.get();Rn.set(I,Gt),this.h?this.h.next=Rn:this.g=Rn,this.h=Rn}}var Sn=new fn(()=>new En,E=>E.reset());class En{constructor(){this.next=this.g=this.h=null}set(I,Gt){this.h=I,this.g=Gt,this.next=null}reset(){this.next=this.g=this.h=null}}let Cn,On=!1,Fn=new $n,An=()=>{const E=h.Promise.resolve(void 0);Cn=()=>{E.then(Vn)}};var Vn=()=>{for(var E;E=zt();){try{E.h.call(E.g)}catch(Gt){mn(Gt)}var I=Sn;I.j(E),100>I.h&&(I.h++,E.next=I.g,I.g=E)}On=!1};function Bn(){this.s=this.s,this.C=this.C}Bn.prototype.s=!1,Bn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Bn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ln(E,I){this.type=E,this.g=this.target=I,this.defaultPrevented=!1}Ln.prototype.h=function(){this.defaultPrevented=!0};var Xn=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var E=!1,I=Object.defineProperty({},"passive",{get:function(){E=!0}});try{const Gt=()=>{};h.addEventListener("test",Gt,I),h.removeEventListener("test",Gt,I)}catch{}return E})();function er(E,I){if(Ln.call(this,E?E.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,E){var Gt=this.type=E.type,Rn=E.changedTouches&&E.changedTouches.length?E.changedTouches[0]:null;if(this.target=E.target||E.srcElement,this.g=I,I=E.relatedTarget){if(V){e:{try{wn(I.nodeName);var Un=!0;break e}catch{}Un=!1}Un||(I=null)}}else Gt=="mouseover"?I=E.fromElement:Gt=="mouseout"&&(I=E.toElement);this.relatedTarget=I,Rn?(this.clientX=Rn.clientX!==void 0?Rn.clientX:Rn.pageX,this.clientY=Rn.clientY!==void 0?Rn.clientY:Rn.pageY,this.screenX=Rn.screenX||0,this.screenY=Rn.screenY||0):(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0),this.button=E.button,this.key=E.key||"",this.ctrlKey=E.ctrlKey,this.altKey=E.altKey,this.shiftKey=E.shiftKey,this.metaKey=E.metaKey,this.pointerId=E.pointerId||0,this.pointerType=typeof E.pointerType=="string"?E.pointerType:rr[E.pointerType]||"",this.state=E.state,this.i=E,E.defaultPrevented&&er.aa.h.call(this)}}R(er,Ln);var rr={2:"touch",3:"pen",4:"mouse"};er.prototype.h=function(){er.aa.h.call(this);var E=this.i;E.preventDefault?E.preventDefault():E.returnValue=!1};var cr="closure_listenable_"+(1e6*Math.random()|0),ar=0;function pr(E,I,Gt,Rn,Un){this.listener=E,this.proxy=null,this.src=I,this.type=Gt,this.capture=!!Rn,this.ha=Un,this.key=++ar,this.da=this.fa=!1}function _r(E){E.da=!0,E.listener=null,E.proxy=null,E.src=null,E.ha=null}function jr(E){this.src=E,this.g={},this.h=0}jr.prototype.add=function(E,I,Gt,Rn,Un){var Yn=E.toString();E=this.g[Yn],E||(E=this.g[Yn]=[],this.h++);var ir=Tr(E,I,Rn,Un);return-1<ir?(I=E[ir],Gt||(I.fa=!1)):(I=new pr(I,this.src,Yn,!!Rn,Un),I.fa=Gt,E.push(I)),I};function Sr(E,I){var Gt=I.type;if(Gt in E.g){var Rn=E.g[Gt],Un=Array.prototype.indexOf.call(Rn,I,void 0),Yn;(Yn=0<=Un)&&Array.prototype.splice.call(Rn,Un,1),Yn&&(_r(I),E.g[Gt].length==0&&(delete E.g[Gt],E.h--))}}function Tr(E,I,Gt,Rn){for(var Un=0;Un<E.length;++Un){var Yn=E[Un];if(!Yn.da&&Yn.listener==I&&Yn.capture==!!Gt&&Yn.ha==Rn)return Un}return-1}var sr="closure_lm_"+(1e6*Math.random()|0),Ar={};function qr(E,I,Gt,Rn,Un){if(Array.isArray(I)){for(var Yn=0;Yn<I.length;Yn++)qr(E,I[Yn],Gt,Rn,Un);return null}return Gt=Ei(Gt),E&&E[cr]?E.K(I,Gt,g(Rn)?!!Rn.capture:!1,Un):Vr(E,I,Gt,!1,Rn,Un)}function Vr(E,I,Gt,Rn,Un,Yn){if(!I)throw Error("Invalid event type");var ir=g(Un)?!!Un.capture:!!Un,Br=di(E);if(Br||(E[sr]=Br=new jr(E)),Gt=Br.add(I,Gt,Rn,ir,Yn),Gt.proxy)return Gt;if(Rn=ui(),Gt.proxy=Rn,Rn.src=E,Rn.listener=Gt,E.addEventListener)Xn||(Un=ir),Un===void 0&&(Un=!1),E.addEventListener(I.toString(),Rn,Un);else if(E.attachEvent)E.attachEvent(pi(I.toString()),Rn);else if(E.addListener&&E.removeListener)E.addListener(Rn);else throw Error("addEventListener and attachEvent are unavailable.");return Gt}function ui(){function E(Gt){return I.call(E.src,E.listener,Gt)}const I=ii;return E}function si(E,I,Gt,Rn,Un){if(Array.isArray(I))for(var Yn=0;Yn<I.length;Yn++)si(E,I[Yn],Gt,Rn,Un);else Rn=g(Rn)?!!Rn.capture:!!Rn,Gt=Ei(Gt),E&&E[cr]?(E=E.i,I=String(I).toString(),I in E.g&&(Yn=E.g[I],Gt=Tr(Yn,Gt,Rn,Un),-1<Gt&&(_r(Yn[Gt]),Array.prototype.splice.call(Yn,Gt,1),Yn.length==0&&(delete E.g[I],E.h--)))):E&&(E=di(E))&&(I=E.g[I.toString()],E=-1,I&&(E=Tr(I,Gt,Rn,Un)),(Gt=-1<E?I[E]:null)&&ni(Gt))}function ni(E){if(typeof E!="number"&&E&&!E.da){var I=E.src;if(I&&I[cr])Sr(I.i,E);else{var Gt=E.type,Rn=E.proxy;I.removeEventListener?I.removeEventListener(Gt,Rn,E.capture):I.detachEvent?I.detachEvent(pi(Gt),Rn):I.addListener&&I.removeListener&&I.removeListener(Rn),(Gt=di(I))?(Sr(Gt,E),Gt.h==0&&(Gt.src=null,I[sr]=null)):_r(E)}}}function pi(E){return E in Ar?Ar[E]:Ar[E]="on"+E}function ii(E,I){if(E.da)E=!0;else{I=new er(I,this);var Gt=E.listener,Rn=E.ha||E.src;E.fa&&ni(E),E=Gt.call(Rn,I)}return E}function di(E){return E=E[sr],E instanceof jr?E:null}var Zi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ei(E){return typeof E=="function"?E:(E[Zi]||(E[Zi]=function(I){return E.handleEvent(I)}),E[Zi])}function Ur(){Bn.call(this),this.i=new jr(this),this.M=this,this.F=null}R(Ur,Bn),Ur.prototype[cr]=!0,Ur.prototype.removeEventListener=function(E,I,Gt,Rn){si(this,E,I,Gt,Rn)};function gn(E,I){var Gt,Rn=E.F;if(Rn)for(Gt=[];Rn;Rn=Rn.F)Gt.push(Rn);if(E=E.M,Rn=I.type||I,typeof I=="string")I=new Ln(I,E);else if(I instanceof Ln)I.target=I.target||E;else{var Un=I;I=new Ln(Rn,E),vn(I,Un)}if(Un=!0,Gt)for(var Yn=Gt.length-1;0<=Yn;Yn--){var ir=I.g=Gt[Yn];Un=P(ir,Rn,!0,I)&&Un}if(ir=I.g=E,Un=P(ir,Rn,!0,I)&&Un,Un=P(ir,Rn,!1,I)&&Un,Gt)for(Yn=0;Yn<Gt.length;Yn++)ir=I.g=Gt[Yn],Un=P(ir,Rn,!1,I)&&Un}Ur.prototype.N=function(){if(Ur.aa.N.call(this),this.i){var E=this.i,I;for(I in E.g){for(var Gt=E.g[I],Rn=0;Rn<Gt.length;Rn++)_r(Gt[Rn]);delete E.g[I],E.h--}}this.F=null},Ur.prototype.K=function(E,I,Gt,Rn){return this.i.add(String(E),I,!1,Gt,Rn)},Ur.prototype.L=function(E,I,Gt,Rn){return this.i.add(String(E),I,!0,Gt,Rn)};function P(E,I,Gt,Rn){if(I=E.i.g[String(I)],!I)return!0;I=I.concat();for(var Un=!0,Yn=0;Yn<I.length;++Yn){var ir=I[Yn];if(ir&&!ir.da&&ir.capture==Gt){var Br=ir.listener,Ii=ir.ha||ir.src;ir.fa&&Sr(E.i,ir),Un=Br.call(Ii,Rn)!==!1&&Un}}return Un&&!Rn.defaultPrevented}function C(E,I,Gt){if(typeof E=="function")Gt&&(E=T(E,Gt));else if(E&&typeof E.handleEvent=="function")E=T(E.handleEvent,E);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:h.setTimeout(E,I||0)}function xn(E){E.g=C(()=>{E.g=null,E.i&&(E.i=!1,xn(E))},E.l);const I=E.h;E.h=null,E.m.apply(null,I)}class kn extends Bn{constructor(I,Gt){super(),this.m=I,this.l=Gt,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:xn(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hn(E){Bn.call(this),this.h=E,this.g={}}R(Hn,Bn);var Qn=[];function hr(E){bn(E.g,function(I,Gt){this.g.hasOwnProperty(Gt)&&ni(I)},E),E.g={}}Hn.prototype.N=function(){Hn.aa.N.call(this),hr(this)},Hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zn=h.JSON.stringify,or=h.JSON.parse,ur=class{stringify(E){return h.JSON.stringify(E,void 0)}parse(E){return h.JSON.parse(E,void 0)}};function fr(){}fr.prototype.h=null;function Fr(E){return E.h||(E.h=E.i())}function vr(){}var Mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pr(){Ln.call(this,"d")}R(Pr,Ln);function Rr(){Ln.call(this,"c")}R(Rr,Ln);var Si={},vi=null;function Ai(){return vi=vi||new Ur}Si.La="serverreachability";function Ji(E){Ln.call(this,Si.La,E)}R(Ji,Ln);function ki(E){const I=Ai();gn(I,new Ji(I))}Si.STAT_EVENT="statevent";function oi(E,I){Ln.call(this,Si.STAT_EVENT,E),this.stat=I}R(oi,Ln);function Er(E){const I=Ai();gn(I,new oi(I,E))}Si.Ma="timingevent";function $r(E,I){Ln.call(this,Si.Ma,E),this.size=I}R($r,Ln);function ei(E,I){if(typeof E!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){E()},I)}function mi(){this.g=!0}mi.prototype.xa=function(){this.g=!1};function is(E,I,Gt,Rn,Un,Yn){E.info(function(){if(E.g)if(Yn)for(var ir="",Br=Yn.split("&"),Ii=0;Ii<Br.length;Ii++){var Or=Br[Ii].split("=");if(1<Or.length){var Mi=Or[0];Or=Or[1];var Pi=Mi.split("_");ir=2<=Pi.length&&Pi[1]=="type"?ir+(Mi+"="+Or+"&"):ir+(Mi+"=redacted&")}}else ir=null;else ir=Yn;return"XMLHTTP REQ ("+Rn+") [attempt "+Un+"]: "+I+`
`+Gt+`
`+ir})}function js(E,I,Gt,Rn,Un,Yn,ir){E.info(function(){return"XMLHTTP RESP ("+Rn+") [ attempt "+Un+"]: "+I+`
`+Gt+`
`+Yn+" "+ir})}function Us(E,I,Gt,Rn){E.info(function(){return"XMLHTTP TEXT ("+I+"): "+eo(E,Gt)+(Rn?" "+Rn:"")})}function Pa(E,I){E.info(function(){return"TIMEOUT: "+I})}mi.prototype.info=function(){};function eo(E,I){if(!E.g)return I;if(!I)return null;try{var Gt=JSON.parse(I);if(Gt){for(E=0;E<Gt.length;E++)if(Array.isArray(Gt[E])){var Rn=Gt[E];if(!(2>Rn.length)){var Un=Rn[1];if(Array.isArray(Un)&&!(1>Un.length)){var Yn=Un[0];if(Yn!="noop"&&Yn!="stop"&&Yn!="close")for(var ir=1;ir<Un.length;ir++)Un[ir]=""}}}}return Zn(Gt)}catch{return I}}var zs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ds={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Li;function Ts(){}R(Ts,fr),Ts.prototype.g=function(){return new XMLHttpRequest},Ts.prototype.i=function(){return{}},Li=new Ts;function Fi(E,I,Gt,Rn){this.j=E,this.i=I,this.l=Gt,this.R=Rn||1,this.U=new Hn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fi}function fi(){this.i=null,this.g="",this.h=!1}var na={},Ro={};function ss(E,I,Gt){E.L=1,E.v=so(Ki(I)),E.m=Gt,E.P=!0,os(E,null)}function os(E,I){E.F=Date.now(),$s(E),E.A=Ki(E.v);var Gt=E.A,Rn=E.R;Array.isArray(Rn)||(Rn=[String(Rn)]),aa(Gt.i,"t",Rn),E.C=0,Gt=E.j.J,E.h=new fi,E.g=dc(E.j,Gt?I:null,!E.m),0<E.O&&(E.M=new kn(T(E.Y,E,E.g),E.O)),I=E.U,Gt=E.g,Rn=E.ca;var Un="readystatechange";Array.isArray(Un)||(Un&&(Qn[0]=Un.toString()),Un=Qn);for(var Yn=0;Yn<Un.length;Yn++){var ir=qr(Gt,Un[Yn],Rn||I.handleEvent,!1,I.h||I);if(!ir)break;I.g[ir.key]=ir}I=E.H?jt(E.H):{},E.m?(E.u||(E.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",E.g.ea(E.A,E.u,E.m,I)):(E.u="GET",E.g.ea(E.A,E.u,null,I)),ki(),is(E.i,E.u,E.A,E.l,E.R,E.m)}Fi.prototype.ca=function(E){E=E.target;const I=this.M;I&&li(E)==3?I.j():this.Y(E)},Fi.prototype.Y=function(E){try{if(E==this.g)e:{const Pi=li(this.g);var I=this.g.Ba();const fo=this.g.Z();if(!(3>Pi)&&(Pi!=3||this.g&&(this.h.h||this.g.oa()||$i(this.g)))){this.J||Pi!=4||I==7||(I==8||0>=fo?ki(3):ki(2)),as(this);var Gt=this.g.Z();this.X=Gt;t:if(Ca(this)){var Rn=$i(this.g);E="";var Un=Rn.length,Yn=li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),ls(this);var ir="";break t}this.h.i=new h.TextDecoder}for(I=0;I<Un;I++)this.h.h=!0,E+=this.h.i.decode(Rn[I],{stream:!(Yn&&I==Un-1)});Rn.length=0,this.h.g+=E,this.C=0,ir=this.h.g}else ir=this.g.oa();if(this.o=Gt==200,js(this.i,this.u,this.A,this.l,this.R,Pi,Gt),this.o){if(this.T&&!this.K){t:{if(this.g){var Br,Ii=this.g;if((Br=Ii.g?Ii.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yn(Br)){var Or=Br;break t}}Or=null}if(Gt=Or)Us(this.i,this.l,Gt,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,no(this,Gt);else{this.o=!1,this.s=3,Er(12),Ri(this),ls(this);break e}}if(this.P){Gt=!0;let Ui;for(;!this.J&&this.C<ir.length;)if(Ui=to(this,ir),Ui==Ro){Pi==4&&(this.s=4,Er(14),Gt=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(Ui==na){this.s=4,Er(15),Us(this.i,this.l,ir,"[Invalid Chunk]"),Gt=!1;break}else Us(this.i,this.l,Ui,null),no(this,Ui);if(Ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pi!=4||ir.length!=0||this.h.h||(this.s=1,Er(16),Gt=!1),this.o=this.o&&Gt,!Gt)Us(this.i,this.l,ir,"[Invalid Chunked Response]"),Ri(this),ls(this);else if(0<ir.length&&!this.W){this.W=!0;var Mi=this.j;Mi.g==this&&Mi.ba&&!Mi.M&&(Mi.j.info("Great, no buffering proxy detected. Bytes received: "+ir.length),da(Mi),Mi.M=!0,Er(11))}}else Us(this.i,this.l,ir,null),no(this,ir);Pi==4&&Ri(this),this.o&&!this.J&&(Pi==4?lc(this.j,this):(this.o=!1,$s(this)))}else co(this.g),Gt==400&&0<ir.indexOf("Unknown SID")?(this.s=3,Er(12)):(this.s=0,Er(13)),Ri(this),ls(this)}}}catch{}finally{}};function Ca(E){return E.g?E.u=="GET"&&E.L!=2&&E.j.Ca:!1}function to(E,I){var Gt=E.C,Rn=I.indexOf(`
`,Gt);return Rn==-1?Ro:(Gt=Number(I.substring(Gt,Rn)),isNaN(Gt)?na:(Rn+=1,Rn+Gt>I.length?Ro:(I=I.slice(Rn,Rn+Gt),E.C=Rn+Gt,I)))}Fi.prototype.cancel=function(){this.J=!0,Ri(this)};function $s(E){E.S=Date.now()+E.I,Va(E,E.I)}function Va(E,I){if(E.B!=null)throw Error("WatchDog timer not null");E.B=ei(T(E.ba,E),I)}function as(E){E.B&&(h.clearTimeout(E.B),E.B=null)}Fi.prototype.ba=function(){this.B=null;const E=Date.now();0<=E-this.S?(Pa(this.i,this.A),this.L!=2&&(ki(),Er(17)),Ri(this),this.s=2,ls(this)):Va(this,this.S-E)};function ls(E){E.j.G==0||E.J||lc(E.j,E)}function Ri(E){as(E);var I=E.M;I&&typeof I.ma=="function"&&I.ma(),E.M=null,hr(E.U),E.g&&(I=E.g,E.g=null,I.abort(),I.ma())}function no(E,I){try{var Gt=E.j;if(Gt.G!=0&&(Gt.g==E||ra(Gt.h,E))){if(!E.K&&ra(Gt.h,E)&&Gt.G==3){try{var Rn=Gt.Da.g.parse(I)}catch{Rn=null}if(Array.isArray(Rn)&&Rn.length==3){var Un=Rn;if(Un[0]==0){e:if(!Gt.u){if(Gt.g)if(Gt.g.F+3e3<E.F)Na(Gt),$a(Gt);else break e;gl(Gt),Er(18)}}else Gt.za=Un[1],0<Gt.za-Gt.T&&37500>Un[2]&&Gt.F&&Gt.v==0&&!Gt.C&&(Gt.C=ei(T(Gt.Za,Gt),6e3));if(1>=Io(Gt.h)&&Gt.ca){try{Gt.ca()}catch{}Gt.ca=void 0}}else uo(Gt,11)}else if((E.K||Gt.g==E)&&Na(Gt),!yn(I))for(Un=Gt.Da.g.parse(I),I=0;I<Un.length;I++){let Or=Un[I];if(Gt.T=Or[0],Or=Or[1],Gt.G==2)if(Or[0]=="c"){Gt.K=Or[1],Gt.ia=Or[2];const Mi=Or[3];Mi!=null&&(Gt.la=Mi,Gt.j.info("VER="+Gt.la));const Pi=Or[4];Pi!=null&&(Gt.Aa=Pi,Gt.j.info("SVER="+Gt.Aa));const fo=Or[5];fo!=null&&typeof fo=="number"&&0<fo&&(Rn=1.5*fo,Gt.L=Rn,Gt.j.info("backChannelRequestTimeoutMs_="+Rn)),Rn=Gt;const Ui=E.g;if(Ui){const Ks=Ui.g?Ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var Yn=Rn.h;Yn.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(Yn.j=Yn.l,Yn.g=new Set,Yn.h&&(Po(Yn,Yn.h),Yn.h=null))}if(Rn.D){const _l=Ui.g?Ui.g.getResponseHeader("X-HTTP-Session-Id"):null;_l&&(Rn.ya=_l,Kr(Rn.I,Rn.D,_l))}}Gt.G=3,Gt.l&&Gt.l.ua(),Gt.ba&&(Gt.R=Date.now()-E.F,Gt.j.info("Handshake RTT: "+Gt.R+"ms")),Rn=Gt;var ir=E;if(Rn.qa=uc(Rn,Rn.J?Rn.ia:null,Rn.W),ir.K){ji(Rn.h,ir);var Br=ir,Ii=Rn.L;Ii&&(Br.I=Ii),Br.B&&(as(Br),$s(Br)),Rn.g=ir}else oc(Rn);0<Gt.i.length&&Ma(Gt)}else Or[0]!="stop"&&Or[0]!="close"||uo(Gt,7);else Gt.G==3&&(Or[0]=="stop"||Or[0]=="close"?Or[0]=="stop"?uo(Gt,7):$o(Gt):Or[0]!="noop"&&Gt.l&&Gt.l.ta(Or),Gt.v=0)}}ki(4)}catch{}}var ka=class{constructor(E,I){this.g=E,this.map=I}};function xs(E){this.l=E||10,h.PerformanceNavigationTiming?(E=h.performance.getEntriesByType("navigation"),E=0<E.length&&(E[0].nextHopProtocol=="hq"||E[0].nextHopProtocol=="h2")):E=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=E?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wo(E){return E.h?!0:E.g?E.g.size>=E.j:!1}function Io(E){return E.h?1:E.g?E.g.size:0}function ra(E,I){return E.h?E.h==I:E.g?E.g.has(I):!1}function Po(E,I){E.g?E.g.add(I):E.h=I}function ji(E,I){E.h&&E.h==I?E.h=null:E.g&&E.g.has(I)&&E.g.delete(I)}xs.prototype.cancel=function(){if(this.i=ia(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const E of this.g.values())E.cancel();this.g.clear()}};function ia(E){if(E.h!=null)return E.i.concat(E.h.D);if(E.g!=null&&E.g.size!==0){let I=E.i;for(const Gt of E.g.values())I=I.concat(Gt.D);return I}return w(E.i)}function fl(E){if(E.V&&typeof E.V=="function")return E.V();if(typeof Map<"u"&&E instanceof Map||typeof Set<"u"&&E instanceof Set)return Array.from(E.values());if(typeof E=="string")return E.split("");if(m(E)){for(var I=[],Gt=E.length,Rn=0;Rn<Gt;Rn++)I.push(E[Rn]);return I}I=[],Gt=0;for(Rn in E)I[Gt++]=E[Rn];return I}function Co(E){if(E.na&&typeof E.na=="function")return E.na();if(!E.V||typeof E.V!="function"){if(typeof Map<"u"&&E instanceof Map)return Array.from(E.keys());if(!(typeof Set<"u"&&E instanceof Set)){if(m(E)||typeof E=="string"){var I=[];E=E.length;for(var Gt=0;Gt<E;Gt++)I.push(Gt);return I}I=[],Gt=0;for(const Rn in E)I[Gt++]=Rn;return I}}}function sa(E,I){if(E.forEach&&typeof E.forEach=="function")E.forEach(I,void 0);else if(m(E)||typeof E=="string")Array.prototype.forEach.call(E,I,void 0);else for(var Gt=Co(E),Rn=fl(E),Un=Rn.length,Yn=0;Yn<Un;Yn++)I.call(void 0,Rn[Yn],Gt&&Gt[Yn],E)}var ro=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vo(E,I){if(E){E=E.split("&");for(var Gt=0;Gt<E.length;Gt++){var Rn=E[Gt].indexOf("="),Un=null;if(0<=Rn){var Yn=E[Gt].substring(0,Rn);Un=E[Gt].substring(Rn+1)}else Yn=E[Gt];I(Yn,Un?decodeURIComponent(Un.replace(/\+/g," ")):"")}}}function ai(E){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,E instanceof ai){this.h=E.h,io(this,E.j),this.o=E.o,this.g=E.g,Ms(this,E.s),this.l=E.l;var I=E.i,Gt=new es;Gt.i=I.i,I.g&&(Gt.g=new Map(I.g),Gt.h=I.h),Ns(this,Gt),this.m=E.m}else E&&(I=String(E).match(ro))?(this.h=!1,io(this,I[1]||"",!0),this.o=Yi(I[2]||""),this.g=Yi(I[3]||"",!0),Ms(this,I[4]),this.l=Yi(I[5]||"",!0),Ns(this,I[6]||"",!0),this.m=Yi(I[7]||"")):(this.h=!1,this.i=new es(null,this.h))}ai.prototype.toString=function(){var E=[],I=this.j;I&&E.push(oo(I,oa,!0),":");var Gt=this.g;return(Gt||I=="file")&&(E.push("//"),(I=this.o)&&E.push(oo(I,oa,!0),"@"),E.push(encodeURIComponent(String(Gt)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Gt=this.s,Gt!=null&&E.push(":",String(Gt))),(Gt=this.l)&&(this.g&&Gt.charAt(0)!="/"&&E.push("/"),E.push(oo(Gt,Gt.charAt(0)=="/"?hl:ao,!0))),(Gt=this.i.toString())&&E.push("?",Gt),(Gt=this.m)&&E.push("#",oo(Gt,ko)),E.join("")};function Ki(E){return new ai(E)}function io(E,I,Gt){E.j=Gt?Yi(I,!0):I,E.j&&(E.j=E.j.replace(/:$/,""))}function Ms(E,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);E.s=I}else E.s=null}function Ns(E,I,Gt){I instanceof es?(E.i=I,Do(E.i,E.h)):(Gt||(I=oo(I,pl)),E.i=new es(I,E.h))}function Kr(E,I,Gt){E.i.set(I,Gt)}function so(E){return Kr(E,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),E}function Yi(E,I){return E?I?decodeURI(E.replace(/%25/g,"%2525")):decodeURIComponent(E):""}function oo(E,I,Gt){return typeof E=="string"?(E=encodeURI(E).replace(I,Da),Gt&&(E=E.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E):null}function Da(E){return E=E.charCodeAt(0),"%"+(E>>4&15).toString(16)+(E&15).toString(16)}var oa=/[#\/\?@]/g,ao=/[#\?:]/g,hl=/[#\?]/g,pl=/[#\?@]/g,ko=/#/g;function es(E,I){this.h=this.g=null,this.i=E||null,this.j=!!I}function Gi(E){E.g||(E.g=new Map,E.h=0,E.i&&Vo(E.i,function(I,Gt){E.add(decodeURIComponent(I.replace(/\+/g," ")),Gt)}))}n=es.prototype,n.add=function(E,I){Gi(this),this.i=null,E=ds(this,E);var Gt=this.g.get(E);return Gt||this.g.set(E,Gt=[]),Gt.push(I),this.h+=1,this};function cs(E,I){Gi(E),I=ds(E,I),E.g.has(I)&&(E.i=null,E.h-=E.g.get(I).length,E.g.delete(I))}function us(E,I){return Gi(E),I=ds(E,I),E.g.has(I)}n.forEach=function(E,I){Gi(this),this.g.forEach(function(Gt,Rn){Gt.forEach(function(Un){E.call(I,Un,Rn,this)},this)},this)},n.na=function(){Gi(this);const E=Array.from(this.g.values()),I=Array.from(this.g.keys()),Gt=[];for(let Rn=0;Rn<I.length;Rn++){const Un=E[Rn];for(let Yn=0;Yn<Un.length;Yn++)Gt.push(I[Rn])}return Gt},n.V=function(E){Gi(this);let I=[];if(typeof E=="string")us(this,E)&&(I=I.concat(this.g.get(ds(this,E))));else{E=Array.from(this.g.values());for(let Gt=0;Gt<E.length;Gt++)I=I.concat(E[Gt])}return I},n.set=function(E,I){return Gi(this),this.i=null,E=ds(this,E),us(this,E)&&(this.h-=this.g.get(E).length),this.g.set(E,[I]),this.h+=1,this},n.get=function(E,I){return E?(E=this.V(E),0<E.length?String(E[0]):I):I};function aa(E,I,Gt){cs(E,I),0<Gt.length&&(E.i=null,E.g.set(ds(E,I),w(Gt)),E.h+=Gt.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const E=[],I=Array.from(this.g.keys());for(var Gt=0;Gt<I.length;Gt++){var Rn=I[Gt];const Yn=encodeURIComponent(String(Rn)),ir=this.V(Rn);for(Rn=0;Rn<ir.length;Rn++){var Un=Yn;ir[Rn]!==""&&(Un+="="+encodeURIComponent(String(ir[Rn]))),E.push(Un)}}return this.i=E.join("&")};function ds(E,I){return I=String(I),E.j&&(I=I.toLowerCase()),I}function Do(E,I){I&&!E.j&&(Gi(E),E.i=null,E.g.forEach(function(Gt,Rn){var Un=Rn.toLowerCase();Rn!=Un&&(cs(this,Rn),aa(this,Un,Gt))},E)),E.j=I}function Hs(E,I){const Gt=new mi;if(h.Image){const Rn=new Image;Rn.onload=A(Di,Gt,"TestLoadImage: loaded",!0,I,Rn),Rn.onerror=A(Di,Gt,"TestLoadImage: error",!1,I,Rn),Rn.onabort=A(Di,Gt,"TestLoadImage: abort",!1,I,Rn),Rn.ontimeout=A(Di,Gt,"TestLoadImage: timeout",!1,I,Rn),h.setTimeout(function(){Rn.ontimeout&&Rn.ontimeout()},1e4),Rn.src=E}else I(!1)}function wi(E,I){const Gt=new mi,Rn=new AbortController,Un=setTimeout(()=>{Rn.abort(),Di(Gt,"TestPingServer: timeout",!1,I)},1e4);fetch(E,{signal:Rn.signal}).then(Yn=>{clearTimeout(Un),Yn.ok?Di(Gt,"TestPingServer: ok",!0,I):Di(Gt,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(Un),Di(Gt,"TestPingServer: error",!1,I)})}function Di(E,I,Gt,Rn,Un){try{Un&&(Un.onload=null,Un.onerror=null,Un.onabort=null,Un.ontimeout=null),Rn(Gt)}catch{}}function lo(){this.g=new ur}function fs(E,I,Gt){const Rn=Gt||"";try{sa(E,function(Un,Yn){let ir=Un;g(Un)&&(ir=Zn(Un)),I.push(Rn+Yn+"="+encodeURIComponent(ir))})}catch(Un){throw I.push(Rn+"type="+encodeURIComponent("_badmap")),Un}}function qs(E){this.l=E.Ub||null,this.j=E.eb||!1}R(qs,fr),qs.prototype.g=function(){return new Ss(this.l,this.j)},qs.prototype.i=(function(E){return function(){return E}})({});function Ss(E,I){Ur.call(this),this.D=E,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Ss,Ur),n=Ss.prototype,n.open=function(E,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=E,this.A=I,this.readyState=1,hs(this)},n.send=function(E){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};E&&(I.body=E),(this.D||h).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},n.Sa=function(E){if(this.g&&(this.l=E,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=E.headers,this.readyState=2,hs(this)),this.g&&(this.readyState=3,hs(this),this.g)))if(this.responseType==="arraybuffer")E.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in E){if(this.j=E.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;la(this)}else E.text().then(this.Ra.bind(this),this.ga.bind(this))};function la(E){E.j.read().then(E.Pa.bind(E)).catch(E.ga.bind(E))}n.Pa=function(E){if(this.g){if(this.o&&E.value)this.response.push(E.value);else if(!this.o){var I=E.value?E.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!E.done}))&&(this.response=this.responseText+=I)}E.done?As(this):hs(this),this.readyState==3&&la(this)}},n.Ra=function(E){this.g&&(this.response=this.responseText=E,As(this))},n.Qa=function(E){this.g&&(this.response=E,As(this))},n.ga=function(){this.g&&As(this)};function As(E){E.readyState=4,E.l=null,E.j=null,E.v=null,hs(E)}n.setRequestHeader=function(E,I){this.u.append(E,I)},n.getResponseHeader=function(E){return this.h&&this.h.get(E.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const E=[],I=this.h.entries();for(var Gt=I.next();!Gt.done;)Gt=Gt.value,E.push(Gt[0]+": "+Gt[1]),Gt=I.next();return E.join(`\r
`)};function hs(E){E.onreadystatechange&&E.onreadystatechange.call(E)}Object.defineProperty(Ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(E){this.m=E?"include":"same-origin"}});function ca(E){let I="";return bn(E,function(Gt,Rn){I+=Rn,I+=":",I+=Gt,I+=`\r
`}),I}function In(E,I,Gt){e:{for(Rn in Gt){var Rn=!1;break e}Rn=!0}Rn||(Gt=ca(Gt),typeof E=="string"?Gt!=null&&encodeURIComponent(String(Gt)):Kr(E,I,Gt))}function Mn(E){Ur.call(this),this.headers=new Map,this.o=E||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Mn,Ur);var Kn=/^https?$/i,lr=["POST","PUT"];n=Mn.prototype,n.Ha=function(E){this.J=E},n.ea=function(E,I,Gt,Rn){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+E);I=I?I.toUpperCase():"GET",this.D=E,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Li.g(),this.v=this.o?Fr(this.o):Fr(Li),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(I,String(E),!0),this.B=!1}catch(Yn){wr(this,Yn);return}if(E=Gt||"",Gt=new Map(this.headers),Rn)if(Object.getPrototypeOf(Rn)===Object.prototype)for(var Un in Rn)Gt.set(Un,Rn[Un]);else if(typeof Rn.keys=="function"&&typeof Rn.get=="function")for(const Yn of Rn.keys())Gt.set(Yn,Rn.get(Yn));else throw Error("Unknown input type for opt_headers: "+String(Rn));Rn=Array.from(Gt.keys()).find(Yn=>Yn.toLowerCase()=="content-type"),Un=h.FormData&&E instanceof h.FormData,!(0<=Array.prototype.indexOf.call(lr,I,void 0))||Rn||Un||Gt.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Yn,ir]of Gt)this.g.setRequestHeader(Yn,ir);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zr(this),this.u=!0,this.g.send(E),this.u=!1}catch(Yn){wr(this,Yn)}};function wr(E,I){E.h=!1,E.g&&(E.j=!0,E.g.abort(),E.j=!1),E.l=I,E.m=5,Nr(E),xr(E)}function Nr(E){E.A||(E.A=!0,gn(E,"complete"),gn(E,"error"))}n.abort=function(E){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=E||7,gn(this,"complete"),gn(this,"abort"),xr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),Mn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Gr(this):this.bb())},n.bb=function(){Gr(this)};function Gr(E){if(E.h&&typeof u<"u"&&(!E.v[1]||li(E)!=4||E.Z()!=2)){if(E.u&&li(E)==4)C(E.Ea,0,E);else if(gn(E,"readystatechange"),li(E)==4){E.h=!1;try{const ir=E.Z();e:switch(ir){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var Gt;if(!(Gt=I)){var Rn;if(Rn=ir===0){var Un=String(E.D).match(ro)[1]||null;!Un&&h.self&&h.self.location&&(Un=h.self.location.protocol.slice(0,-1)),Rn=!Kn.test(Un?Un.toLowerCase():"")}Gt=Rn}if(Gt)gn(E,"complete"),gn(E,"success");else{E.m=6;try{var Yn=2<li(E)?E.g.statusText:""}catch{Yn=""}E.l=Yn+" ["+E.Z()+"]",Nr(E)}}finally{xr(E)}}}}function xr(E,I){if(E.g){zr(E);const Gt=E.g,Rn=E.v[0]?()=>{}:null;E.g=null,E.v=null,I||gn(E,"ready");try{Gt.onreadystatechange=Rn}catch{}}}function zr(E){E.I&&(h.clearTimeout(E.I),E.I=null)}n.isActive=function(){return!!this.g};function li(E){return E.g?E.g.readyState:0}n.Z=function(){try{return 2<li(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(E){if(this.g){var I=this.g.responseText;return E&&I.indexOf(E)==0&&(I=I.substring(E.length)),or(I)}};function $i(E){try{if(!E.g)return null;if("response"in E.g)return E.g.response;switch(E.H){case"":case"text":return E.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in E.g)return E.g.mozResponseArrayBuffer}return null}catch{return null}}function co(E){const I={};E=(E.g&&2<=li(E)&&E.g.getAllResponseHeaders()||"").split(`\r
`);for(let Rn=0;Rn<E.length;Rn++){if(yn(E[Rn]))continue;var Gt=dn(E[Rn]);const Un=Gt[0];if(Gt=Gt[1],typeof Gt!="string")continue;Gt=Gt.trim();const Yn=I[Un]||[];I[Un]=Yn,Yn.push(Gt)}wt(I,function(Rn){return Rn.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bs(E,I,Gt){return Gt&&Gt.internalChannelParams&&Gt.internalChannelParams[E]||I}function Gs(E){this.Aa=0,this.i=[],this.j=new mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bs("failFast",!1,E),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bs("baseRetryDelayMs",5e3,E),this.cb=Bs("retryDelaySeedMs",1e4,E),this.Wa=Bs("forwardChannelMaxRetries",2,E),this.wa=Bs("forwardChannelRequestTimeoutMs",2e4,E),this.pa=E&&E.xmlHttpFactory||void 0,this.Xa=E&&E.Tb||void 0,this.Ca=E&&E.useFetchStreams||!1,this.L=void 0,this.J=E&&E.supportsCrossDomainXhr||!1,this.K="",this.h=new xs(E&&E.concurrentRequestLimit),this.Da=new lo,this.P=E&&E.fastHandshake||!1,this.O=E&&E.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=E&&E.Rb||!1,E&&E.xa&&this.j.xa(),E&&E.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&E&&E.detectBufferingProxy||!1,this.ja=void 0,E&&E.longPollingTimeout&&0<E.longPollingTimeout&&(this.ja=E.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Gs.prototype,n.la=8,n.G=1,n.connect=function(E,I,Gt,Rn){Er(0),this.W=E,this.H=I||{},Gt&&Rn!==void 0&&(this.H.OSID=Gt,this.H.OAID=Rn),this.F=this.X,this.I=uc(this,null,this.W),Ma(this)};function $o(E){if(ic(E),E.G==3){var I=E.U++,Gt=Ki(E.I);if(Kr(Gt,"SID",E.K),Kr(Gt,"RID",I),Kr(Gt,"TYPE","terminate"),ua(E,Gt),I=new Fi(E,E.j,I),I.L=2,I.v=so(Ki(Gt)),Gt=!1,h.navigator&&h.navigator.sendBeacon)try{Gt=h.navigator.sendBeacon(I.v.toString(),"")}catch{}!Gt&&h.Image&&(new Image().src=I.v,Gt=!0),Gt||(I.g=dc(I.j,null),I.g.ea(I.v)),I.F=Date.now(),$s(I)}cc(E)}function $a(E){E.g&&(da(E),E.g.cancel(),E.g=null)}function ic(E){$a(E),E.u&&(h.clearTimeout(E.u),E.u=null),Na(E),E.h.cancel(),E.s&&(typeof E.s=="number"&&h.clearTimeout(E.s),E.s=null)}function Ma(E){if(!wo(E.h)&&!E.s){E.s=!0;var I=E.Ga;Cn||An(),On||(Cn(),On=!0),Fn.add(I,E),E.B=0}}function gu(E,I){return Io(E.h)>=E.h.j-(E.s?1:0)?!1:E.s?(E.i=I.D.concat(E.i),!0):E.G==1||E.G==2||E.B>=(E.Va?0:E.Wa)?!1:(E.s=ei(T(E.Ga,E,I),yl(E,E.B)),E.B++,!0)}n.Ga=function(E){if(this.s)if(this.s=null,this.G==1){if(!E){this.U=Math.floor(1e5*Math.random()),E=this.U++;const Un=new Fi(this,this.j,E);let Yn=this.o;if(this.S&&(Yn?(Yn=jt(Yn),vn(Yn,this.S)):Yn=this.S),this.m!==null||this.O||(Un.H=Yn,Yn=null),this.P)e:{for(var I=0,Gt=0;Gt<this.i.length;Gt++){t:{var Rn=this.i[Gt];if("__data__"in Rn.map&&(Rn=Rn.map.__data__,typeof Rn=="string")){Rn=Rn.length;break t}Rn=void 0}if(Rn===void 0)break;if(I+=Rn,4096<I){I=Gt;break e}if(I===4096||Gt===this.i.length-1){I=Gt+1;break e}}I=1e3}else I=1e3;I=sc(this,Un,I),Gt=Ki(this.I),Kr(Gt,"RID",E),Kr(Gt,"CVER",22),this.D&&Kr(Gt,"X-HTTP-Session-Id",this.D),ua(this,Gt),Yn&&(this.O?I="headers="+encodeURIComponent(String(ca(Yn)))+"&"+I:this.m&&In(Gt,this.m,Yn)),Po(this.h,Un),this.Ua&&Kr(Gt,"TYPE","init"),this.P?(Kr(Gt,"$req",I),Kr(Gt,"SID","null"),Un.T=!0,ss(Un,Gt,null)):ss(Un,Gt,I),this.G=2}}else this.G==3&&(E?ml(this,E):this.i.length==0||wo(this.h)||ml(this))};function ml(E,I){var Gt;I?Gt=I.l:Gt=E.U++;const Rn=Ki(E.I);Kr(Rn,"SID",E.K),Kr(Rn,"RID",Gt),Kr(Rn,"AID",E.T),ua(E,Rn),E.m&&E.o&&In(Rn,E.m,E.o),Gt=new Fi(E,E.j,Gt,E.B+1),E.m===null&&(Gt.H=E.o),I&&(E.i=I.D.concat(E.i)),I=sc(E,Gt,1e3),Gt.I=Math.round(.5*E.wa)+Math.round(.5*E.wa*Math.random()),Po(E.h,Gt),ss(Gt,Rn,I)}function ua(E,I){E.H&&bn(E.H,function(Gt,Rn){Kr(I,Rn,Gt)}),E.l&&sa({},function(Gt,Rn){Kr(I,Rn,Gt)})}function sc(E,I,Gt){Gt=Math.min(E.i.length,Gt);var Rn=E.l?T(E.l.Na,E.l,E):null;e:{var Un=E.i;let Yn=-1;for(;;){const ir=["count="+Gt];Yn==-1?0<Gt?(Yn=Un[0].g,ir.push("ofs="+Yn)):Yn=0:ir.push("ofs="+Yn);let Br=!0;for(let Ii=0;Ii<Gt;Ii++){let Or=Un[Ii].g;const Mi=Un[Ii].map;if(Or-=Yn,0>Or)Yn=Math.max(0,Un[Ii].g-100),Br=!1;else try{fs(Mi,ir,"req"+Or+"_")}catch{Rn&&Rn(Mi)}}if(Br){Rn=ir.join("&");break e}}}return E=E.i.splice(0,Gt),I.D=E,Rn}function oc(E){if(!E.g&&!E.u){E.Y=1;var I=E.Fa;Cn||An(),On||(Cn(),On=!0),Fn.add(I,E),E.v=0}}function gl(E){return E.g||E.u||3<=E.v?!1:(E.Y++,E.u=ei(T(E.Fa,E),yl(E,E.v)),E.v++,!0)}n.Fa=function(){if(this.u=null,ac(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var E=2*this.R;this.j.info("BP detection timer enabled: "+E),this.A=ei(T(this.ab,this),E)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Er(10),$a(this),ac(this))};function da(E){E.A!=null&&(h.clearTimeout(E.A),E.A=null)}function ac(E){E.g=new Fi(E,E.j,"rpc",E.Y),E.m===null&&(E.g.H=E.o),E.g.O=0;var I=Ki(E.qa);Kr(I,"RID","rpc"),Kr(I,"SID",E.K),Kr(I,"AID",E.T),Kr(I,"CI",E.F?"0":"1"),!E.F&&E.ja&&Kr(I,"TO",E.ja),Kr(I,"TYPE","xmlhttp"),ua(E,I),E.m&&E.o&&In(I,E.m,E.o),E.L&&(E.g.I=E.L);var Gt=E.g;E=E.ia,Gt.L=1,Gt.v=so(Ki(I)),Gt.m=null,Gt.P=!0,os(Gt,E)}n.Za=function(){this.C!=null&&(this.C=null,$a(this),gl(this),Er(19))};function Na(E){E.C!=null&&(h.clearTimeout(E.C),E.C=null)}function lc(E,I){var Gt=null;if(E.g==I){Na(E),da(E),E.g=null;var Rn=2}else if(ra(E.h,I))Gt=I.D,ji(E.h,I),Rn=1;else return;if(E.G!=0){if(I.o)if(Rn==1){Gt=I.m?I.m.length:0,I=Date.now()-I.F;var Un=E.B;Rn=Ai(),gn(Rn,new $r(Rn,Gt)),Ma(E)}else oc(E);else if(Un=I.s,Un==3||Un==0&&0<I.X||!(Rn==1&&gu(E,I)||Rn==2&&gl(E)))switch(Gt&&0<Gt.length&&(I=E.h,I.i=I.i.concat(Gt)),Un){case 1:uo(E,5);break;case 4:uo(E,10);break;case 3:uo(E,6);break;default:uo(E,2)}}}function yl(E,I){let Gt=E.Ta+Math.floor(Math.random()*E.cb);return E.isActive()||(Gt*=2),Gt*I}function uo(E,I){if(E.j.info("Error code "+I),I==2){var Gt=T(E.fb,E),Rn=E.Xa;const Un=!Rn;Rn=new ai(Rn||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||io(Rn,"https"),so(Rn),Un?Hs(Rn.toString(),Gt):wi(Rn.toString(),Gt)}else Er(2);E.G=0,E.l&&E.l.sa(I),cc(E),ic(E)}n.fb=function(E){E?(this.j.info("Successfully pinged google.com"),Er(2)):(this.j.info("Failed to ping google.com"),Er(1))};function cc(E){if(E.G=0,E.ka=[],E.l){const I=ia(E.h);(I.length!=0||E.i.length!=0)&&(D(E.ka,I),D(E.ka,E.i),E.h.i.length=0,w(E.i),E.i.length=0),E.l.ra()}}function uc(E,I,Gt){var Rn=Gt instanceof ai?Ki(Gt):new ai(Gt);if(Rn.g!="")I&&(Rn.g=I+"."+Rn.g),Ms(Rn,Rn.s);else{var Un=h.location;Rn=Un.protocol,I=I?I+"."+Un.hostname:Un.hostname,Un=+Un.port;var Yn=new ai(null);Rn&&io(Yn,Rn),I&&(Yn.g=I),Un&&Ms(Yn,Un),Gt&&(Yn.l=Gt),Rn=Yn}return Gt=E.D,I=E.ya,Gt&&I&&Kr(Rn,Gt,I),Kr(Rn,"VER",E.la),ua(E,Rn),Rn}function dc(E,I,Gt){if(I&&!E.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=E.Ca&&!E.pa?new Mn(new qs({eb:Gt})):new Mn(E.pa),I.Ha(E.J),I}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fc(){}n=fc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ba(){}Ba.prototype.g=function(E,I){return new Xi(E,I)};function Xi(E,I){Ur.call(this),this.g=new Gs(I),this.l=E,this.h=I&&I.messageUrlParams||null,E=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(E?E["X-Client-Protocol"]="webchannel":E={"X-Client-Protocol":"webchannel"}),this.g.o=E,E=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(E?E["X-WebChannel-Content-Type"]=I.messageContentType:E={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(E?E["X-WebChannel-Client-Profile"]=I.va:E={"X-WebChannel-Client-Profile":I.va}),this.g.S=E,(E=I&&I.Sb)&&!yn(E)&&(this.g.m=E),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!yn(I)&&(this.g.D=I,E=this.h,E!==null&&I in E&&(E=this.h,I in E&&delete E[I])),this.j=new Ws(this)}R(Xi,Ur),Xi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xi.prototype.close=function(){$o(this.g)},Xi.prototype.o=function(E){var I=this.g;if(typeof E=="string"){var Gt={};Gt.__data__=E,E=Gt}else this.u&&(Gt={},Gt.__data__=Zn(E),E=Gt);I.i.push(new ka(I.Ya++,E)),I.G==3&&Ma(I)},Xi.prototype.N=function(){this.g.l=null,delete this.j,$o(this.g),delete this.g,Xi.aa.N.call(this)};function hc(E){Pr.call(this),E.__headers__&&(this.headers=E.__headers__,this.statusCode=E.__status__,delete E.__headers__,delete E.__status__);var I=E.__sm__;if(I){e:{for(const Gt in I){E=Gt;break e}E=void 0}(this.i=E)&&(E=this.i,I=I!==null&&E in I?I[E]:void 0),this.data=I}else this.data=E}R(hc,Pr);function pc(){Rr.call(this),this.status=1}R(pc,Rr);function Ws(E){this.g=E}R(Ws,fc),Ws.prototype.ua=function(){gn(this.g,"a")},Ws.prototype.ta=function(E){gn(this.g,new hc(E))},Ws.prototype.sa=function(E){gn(this.g,new pc)},Ws.prototype.ra=function(){gn(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,Xi.prototype.send=Xi.prototype.o,Xi.prototype.open=Xi.prototype.m,Xi.prototype.close=Xi.prototype.close,createWebChannelTransport=function(){return new Ba},getStatEventTarget=function(){return Ai()},Event=Si,Stat$1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,ErrorCode=zs,Ds.COMPLETE="complete",EventType=Ds,vr.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",Ur.prototype.listen=Ur.prototype.K,WebChannel=vr,Mn.prototype.listenOnce=Mn.prototype.L,Mn.prototype.getLastError=Mn.prototype.Ka,Mn.prototype.getLastErrorCode=Mn.prototype.Ba,Mn.prototype.getStatus=Mn.prototype.Z,Mn.prototype.getResponseJson=Mn.prototype.Oa,Mn.prototype.getResponseText=Mn.prototype.oa,Mn.prototype.send=Mn.prototype.ea,Mn.prototype.setWithCredentials=Mn.prototype.Ha,XhrIo=Mn}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F="@firebase/firestore",M="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=new Logger$1("@firebase/firestore");function __PRIVATE_getLogLevel(){return O.logLevel}function __PRIVATE_logDebug(n,...e){if(O.logLevel<=LogLevel$1.DEBUG){const s=e.map(__PRIVATE_argToString);O.debug(`Firestore (${x}): ${n}`,...s)}}function __PRIVATE_logError(n,...e){if(O.logLevel<=LogLevel$1.ERROR){const s=e.map(__PRIVATE_argToString);O.error(`Firestore (${x}): ${n}`,...s)}}function __PRIVATE_logWarn(n,...e){if(O.logLevel<=LogLevel$1.WARN){const s=e.map(__PRIVATE_argToString);O.warn(`Firestore (${x}): ${n}`,...s)}}function __PRIVATE_argToString(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(n,e,s){let o="Unexpected state";typeof e=="string"?o=e:s=e,__PRIVATE__fail(n,o,s)}function __PRIVATE__fail(n,e,s){let o=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(s!==void 0)try{o+=" CONTEXT: "+JSON.stringify(s)}catch{o+=" CONTEXT: "+s}throw __PRIVATE_logError(o),new Error(o)}function __PRIVATE_hardAssert(n,e,s,o){let a="Unexpected state";typeof s=="string"?a=s:o=s,n||__PRIVATE__fail(e,a,o)}function __PRIVATE_debugCast(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(User.UNAUTHENTICATED)))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){__PRIVATE_hardAssert(this.o===void 0,42304);let o=this.i;const a=m=>this.i!==o?(o=this.i,s(m)):Promise.resolve();let c=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new __PRIVATE_Deferred,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=c;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new __PRIVATE_Deferred)}}),0),u()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((o=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(__PRIVATE_hardAssert(typeof o.accessToken=="string",31837,{l:o}),new __PRIVATE_OAuthToken(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,s,o){this.P=e,this.T=s,this.I=o,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,s,o){this.P=e,this.T=s,this.I=o}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(User.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){__PRIVATE_hardAssert(this.o===void 0,3512);const o=c=>{c.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?s(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>o(c)))};const a=c=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(__PRIVATE_hardAssert(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new AppCheckToken(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let o=0;o<n;o++)s[o]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const a=__PRIVATE_randomBytes(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<s&&(o+=e.charAt(a[c]%62))}return o}}function __PRIVATE_primitiveComparator(n,e){return n<e?-1:n>e?1:0}function __PRIVATE_compareUtf8Strings(n,e){const s=Math.min(n.length,e.length);for(let o=0;o<s;o++){const a=n.charAt(o),c=e.charAt(o);if(a!==c)return __PRIVATE_isSurrogate(a)===__PRIVATE_isSurrogate(c)?__PRIVATE_primitiveComparator(a,c):__PRIVATE_isSurrogate(a)?1:-1}return __PRIVATE_primitiveComparator(n.length,e.length)}const B=55296,L=57343;function __PRIVATE_isSurrogate(n){const e=n.charCodeAt(0);return e>=B&&e<=L}function __PRIVATE_arrayEquals(n,e,s){return n.length===e.length&&n.every(((o,a)=>s(o,e[a])))}function __PRIVATE_immediateSuccessor(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k="__name__";class BasePath{constructor(e,s,o){s===void 0?s=0:s>e.length&&fail(637,{offset:s,range:e.length}),o===void 0?o=e.length-s:o>e.length-s&&fail(1746,{length:o,range:e.length-s}),this.segments=e,this.offset=s,this.len=o}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach((o=>{s.push(o)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,o=this.limit();s<o;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const o=Math.min(e.length,s.length);for(let a=0;a<o;a++){const c=BasePath.compareSegments(e.get(a),s.get(a));if(c!==0)return c}return __PRIVATE_primitiveComparator(e.length,s.length)}static compareSegments(e,s){const o=BasePath.isNumericId(e),a=BasePath.isNumericId(s);return o&&!a?-1:!o&&a?1:o&&a?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(s)):__PRIVATE_compareUtf8Strings(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,s,o){return new ResourcePath(e,s,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const o of e){if(o.indexOf("//")>=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);s.push(...o.split("/").filter((a=>a.length>0)))}return new ResourcePath(s)}static emptyPath(){return new ResourcePath([])}}const q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,s,o){return new FieldPath$1(e,s,o)}static isValidIdentifier(e){return q.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k}static keyField(){return new FieldPath$1([k])}static fromServerFormat(e){const s=[];let o="",a=0;const c=()=>{if(o.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(o),o=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new FirestoreError(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new FirestoreError(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=m,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(o+=h,a++):(c(),a++)}if(c(),u)throw new FirestoreError(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(s)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return ResourcePath.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(n,e,s){if(!s)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(n,e,s,o){if(e===!0&&o===!0)throw new FirestoreError(N.INVALID_ARGUMENT,`${n} and ${s} cannot be used together.`)}function __PRIVATE_validateDocumentPath(n){if(!DocumentKey.isDocumentKey(n))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function __PRIVATE_validateCollectionPath(n){if(DocumentKey.isDocumentKey(n))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function __PRIVATE_isPlainObject(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function __PRIVATE_valueDescription(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":fail(12329,{type:typeof n})}function __PRIVATE_cast(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new FirestoreError(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=__PRIVATE_valueDescription(n);throw new FirestoreError(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property(n,e){const s={typeString:n};return e&&(s.value=e),s}function __PRIVATE_validateJSON(n,e){if(!__PRIVATE_isPlainObject(n))throw new FirestoreError(N.INVALID_ARGUMENT,"JSON must be an object");let s;for(const o in e)if(e[o]){const a=e[o].typeString,c="value"in e[o]?{value:e[o].value}:void 0;if(!(o in n)){s=`JSON missing required field: '${o}'`;break}const u=n[o];if(a&&typeof u!==a){s=`JSON field '${o}' must be a ${a}.`;break}if(c!==void 0&&u!==c.value){s=`Expected '${o}' field to equal '${c.value}'`;break}}if(s)throw new FirestoreError(N.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=-62135596800,$=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),o=Math.floor((e-1e3*s)*$);return new Timestamp(s,o)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<Q)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U=-1;class FieldIndex{constructor(e,s,o,a){this.indexId=e,this.collectionGroup=s,this.fields=o,this.indexState=a}}function __PRIVATE_fieldIndexGetArraySegment(n){return n.fields.find((e=>e.kind===2))}function __PRIVATE_fieldIndexGetDirectionalSegments(n){return n.fields.filter((e=>e.kind!==2))}FieldIndex.UNKNOWN_ID=-1;class IndexSegment{constructor(e,s){this.fieldPath=e,this.kind=s}}class IndexState{constructor(e,s){this.sequenceNumber=e,this.offset=s}static empty(){return new IndexState(0,IndexOffset.min())}}function __PRIVATE_newIndexOffsetSuccessorFromReadTime(n,e){const s=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,a=SnapshotVersion.fromTimestamp(o===1e9?new Timestamp(s+1,0):new Timestamp(s,o));return new IndexOffset(a,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(n){return new IndexOffset(n.readTime,n.key,U)}class IndexOffset{constructor(e,s,o){this.readTime=e,this.documentKey=s,this.largestBatchId=o}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),U)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),U)}}function __PRIVATE_indexOffsetComparator(n,e){let s=n.readTime.compareTo(e.readTime);return s!==0?s:(s=DocumentKey.comparator(n.documentKey,e.documentKey),s!==0?s:__PRIVATE_primitiveComparator(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(n){if(n.code!==N.FAILED_PRECONDITION||n.message!==K)throw n;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new PersistencePromise(((o,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,a)},this.catchCallback=c=>{this.wrapFailure(s,c).next(o,a)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof PersistencePromise?s:PersistencePromise.resolve(s)}catch(s){return PersistencePromise.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):PersistencePromise.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):PersistencePromise.reject(s)}static resolve(e){return new PersistencePromise(((s,o)=>{s(e)}))}static reject(e){return new PersistencePromise(((s,o)=>{o(e)}))}static waitFor(e){return new PersistencePromise(((s,o)=>{let a=0,c=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++c,u&&c===a&&s()}),(m=>o(m)))})),u=!0,c===a&&s()}))}static or(e){let s=PersistencePromise.resolve(!1);for(const o of e)s=s.next((a=>a?PersistencePromise.resolve(a):o()));return s}static forEach(e,s){const o=[];return e.forEach(((a,c)=>{o.push(s.call(this,a,c))})),this.waitFor(o)}static mapArray(e,s){return new PersistencePromise(((o,a)=>{const c=e.length,u=new Array(c);let h=0;for(let m=0;m<c;m++){const g=m;s(e[g]).next((_=>{u[g]=_,++h,h===c&&o(u)}),(_=>a(_)))}}))}static doWhile(e,s){return new PersistencePromise(((o,a)=>{const c=()=>{e()===!0?s().next((()=>{c()}),a):o()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W="SimpleDb";class __PRIVATE_SimpleDbTransaction{static open(e,s,o,a){try{return new __PRIVATE_SimpleDbTransaction(s,e.transaction(a,o))}catch(c){throw new __PRIVATE_IndexedDbTransactionError(s,c)}}constructor(e,s){this.action=e,this.transaction=s,this.aborted=!1,this.S=new __PRIVATE_Deferred,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{s.error?this.S.reject(new __PRIVATE_IndexedDbTransactionError(e,s.error)):this.S.resolve()},this.transaction.onerror=o=>{const a=__PRIVATE_checkForAndReportiOSError(o.target.error);this.S.reject(new __PRIVATE_IndexedDbTransactionError(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(__PRIVATE_logDebug(W,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const s=this.transaction.objectStore(e);return new __PRIVATE_SimpleDbStore(s)}}class __PRIVATE_SimpleDb{static delete(e){return __PRIVATE_logDebug(W,"Removing database:",e),__PRIVATE_wrapRequest(getGlobal().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!isIndexedDBAvailable())return!1;if(__PRIVATE_SimpleDb.F())return!0;const e=getUA(),s=__PRIVATE_SimpleDb.M(e),o=0<s&&s<10,a=__PRIVATE_getAndroidVersion(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||c)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,s){return e.store(s)}static M(e){const s=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(o)}constructor(e,s,o){this.name=e,this.version=s,this.N=o,this.B=null,__PRIVATE_SimpleDb.M(getUA())===12.2&&__PRIVATE_logError("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(__PRIVATE_logDebug(W,"Opening database:",this.name),this.db=await new Promise(((s,o)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=c=>{const u=c.target.result;s(u)},a.onblocked=()=>{o(new __PRIVATE_IndexedDbTransactionError(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const u=c.target.error;u.name==="VersionError"?o(new FirestoreError(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?o(new FirestoreError(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):o(new __PRIVATE_IndexedDbTransactionError(e,u))},a.onupgradeneeded=c=>{__PRIVATE_logDebug(W,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const u=c.target.result;this.N.k(u,a.transaction,c.oldVersion,this.version).next((()=>{__PRIVATE_logDebug(W,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=s=>this.q(s)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=s=>e(s))}async runTransaction(e,s,o,a){const c=s==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const h=__PRIVATE_SimpleDbTransaction.open(this.db,e,c?"readonly":"readwrite",o),m=a(h).next((g=>(h.C(),g))).catch((g=>(h.abort(g),PersistencePromise.reject(g)))).toPromise();return m.catch((()=>{})),await h.D,m}catch(h){const m=h,g=m.name!=="FirebaseError"&&u<3;if(__PRIVATE_logDebug(W,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function __PRIVATE_getAndroidVersion(n){const e=n.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}class __PRIVATE_IterationController{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return __PRIVATE_wrapRequest(this.U.delete())}}class __PRIVATE_IndexedDbTransactionError extends FirestoreError{constructor(e,s){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${s}`),this.name="IndexedDbTransactionError"}}function __PRIVATE_isIndexedDbTransactionError(n){return n.name==="IndexedDbTransactionError"}class __PRIVATE_SimpleDbStore{constructor(e){this.store=e}put(e,s){let o;return s!==void 0?(__PRIVATE_logDebug(W,"PUT",this.store.name,e,s),o=this.store.put(s,e)):(__PRIVATE_logDebug(W,"PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),__PRIVATE_wrapRequest(o)}add(e){return __PRIVATE_logDebug(W,"ADD",this.store.name,e,e),__PRIVATE_wrapRequest(this.store.add(e))}get(e){return __PRIVATE_wrapRequest(this.store.get(e)).next((s=>(s===void 0&&(s=null),__PRIVATE_logDebug(W,"GET",this.store.name,e,s),s)))}delete(e){return __PRIVATE_logDebug(W,"DELETE",this.store.name,e),__PRIVATE_wrapRequest(this.store.delete(e))}count(){return __PRIVATE_logDebug(W,"COUNT",this.store.name),__PRIVATE_wrapRequest(this.store.count())}J(e,s){const o=this.options(e,s),a=o.index?this.store.index(o.index):this.store;if(typeof a.getAll=="function"){const c=a.getAll(o.range);return new PersistencePromise(((u,h)=>{c.onerror=m=>{h(m.target.error)},c.onsuccess=m=>{u(m.target.result)}}))}{const c=this.cursor(o),u=[];return this.H(c,((h,m)=>{u.push(m)})).next((()=>u))}}Y(e,s){const o=this.store.getAll(e,s===null?void 0:s);return new PersistencePromise(((a,c)=>{o.onerror=u=>{c(u.target.error)},o.onsuccess=u=>{a(u.target.result)}}))}Z(e,s){__PRIVATE_logDebug(W,"DELETE ALL",this.store.name);const o=this.options(e,s);o.X=!1;const a=this.cursor(o);return this.H(a,((c,u,h)=>h.delete()))}ee(e,s){let o;s?o=e:(o={},s=e);const a=this.cursor(o);return this.H(a,s)}te(e){const s=this.cursor({});return new PersistencePromise(((o,a)=>{s.onerror=c=>{const u=__PRIVATE_checkForAndReportiOSError(c.target.error);a(u)},s.onsuccess=c=>{const u=c.target.result;u?e(u.primaryKey,u.value).next((h=>{h?u.continue():o()})):o()}}))}H(e,s){const o=[];return new PersistencePromise(((a,c)=>{e.onerror=u=>{c(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void a();const m=new __PRIVATE_IterationController(h),g=s(h.primaryKey,h.value,m);if(g instanceof PersistencePromise){const _=g.catch((b=>(m.done(),PersistencePromise.reject(b))));o.push(_)}m.isDone?a():m.G===null?h.continue():h.continue(m.G)}})).next((()=>PersistencePromise.waitFor(o)))}options(e,s){let o;return e!==void 0&&(typeof e=="string"?o=e:s=e),{index:o,range:s}}cursor(e){let s="next";if(e.reverse&&(s="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,s):o.openCursor(e.range,s)}return this.store.openCursor(e.range,s)}}function __PRIVATE_wrapRequest(n){return new PersistencePromise(((e,s)=>{n.onsuccess=o=>{const a=o.target.result;e(a)},n.onerror=o=>{const a=__PRIVATE_checkForAndReportiOSError(o.target.error);s(a)}}))}let G=!1;function __PRIVATE_checkForAndReportiOSError(n){const e=__PRIVATE_SimpleDb.M(getUA());if(e>=12.2&&e<13){const s="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(s)>=0){const o=new FirestoreError("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${s}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return G||(G=!0,setTimeout((()=>{throw o}),0)),o}}return n}const z="IndexBackfiller";class __PRIVATE_IndexBackfillerScheduler{constructor(e,s){this.asyncQueue=e,this.ne=s,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){__PRIVATE_logDebug(z,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const s=await this.ne.ie();__PRIVATE_logDebug(z,`Documents written: ${s}`)}catch(s){__PRIVATE_isIndexedDbTransactionError(s)?__PRIVATE_logDebug(z,"Ignoring IndexedDB error during index backfill: ",s):await __PRIVATE_ignoreIfPrimaryLeaseLoss(s)}await this.re(6e4)}))}}class __PRIVATE_IndexBackfiller{constructor(e,s){this.localStore=e,this.persistence=s}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(s=>this.se(s,e)))}se(e,s){const o=new Set;let a=s,c=!0;return PersistencePromise.doWhile((()=>c===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!o.has(u))return __PRIVATE_logDebug(z,`Processing collection: ${u}`),this.oe(e,u,a).next((h=>{a-=h,o.add(u)}));c=!1})))).next((()=>s-a))}oe(e,s,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,s).next((a=>this.localStore.localDocuments.getNextDocuments(e,s,a,o).next((c=>{const u=c.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,c))).next((h=>(__PRIVATE_logDebug(z,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,s,h)))).next((()=>u.size))}))))}_e(e,s){let o=e;return s.changes.forEach(((a,c)=>{const u=__PRIVATE_newIndexOffsetFromDocument(c);__PRIVATE_indexOffsetComparator(u,o)>0&&(o=u)})),new IndexOffset(o.readTime,o.documentKey,Math.max(s.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>s.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}__PRIVATE_ListenSequence.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j=-1;function __PRIVATE_isNullOrUndefined(n){return n==null}function __PRIVATE_isNegativeZero(n){return n===0&&1/n==-1/0}function isSafeInteger(n){return typeof n=="number"&&Number.isInteger(n)&&!__PRIVATE_isNegativeZero(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J="";function __PRIVATE_encodeResourcePath(n){let e="";for(let s=0;s<n.length;s++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(n.get(s),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(n,e){let s=e;const o=n.length;for(let a=0;a<o;a++){const c=n.charAt(a);switch(c){case"\0":s+="";break;case J:s+="";break;default:s+=c}}return s}function __PRIVATE_encodeSeparator(n){return n+J+""}function __PRIVATE_decodeResourcePath(n){const e=n.length;if(__PRIVATE_hardAssert(e>=2,64408,{path:n}),e===2)return __PRIVATE_hardAssert(n.charAt(0)===J&&n.charAt(1)==="",56145,{path:n}),ResourcePath.emptyPath();const s=e-2,o=[];let a="";for(let c=0;c<e;){const u=n.indexOf(J,c);switch((u<0||u>s)&&fail(50515,{path:n}),n.charAt(u+1)){case"":const h=n.substring(c,u);let m;a.length===0?m=h:(a+=h,m=a,a=""),o.push(m);break;case"":a+=n.substring(c,u),a+="\0";break;case"":a+=n.substring(c,u+1);break;default:fail(61167,{path:n})}c=u+2}return new ResourcePath(o)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H="remoteDocuments",Y="owner",Z="owner",X="mutationQueues",ee$1="userId",te="mutations",ne="batchId",re="userMutationsIndex",ie=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newDbDocumentMutationPrefixForPath(n,e){return[n,__PRIVATE_encodeResourcePath(e)]}function __PRIVATE_newDbDocumentMutationKey(n,e,s){return[n,__PRIVATE_encodeResourcePath(e),s]}const se={},oe="documentMutations",_e="remoteDocumentsV14",ae=["prefixPath","collectionGroup","readTime","documentId"],ue="documentKeyIndex",ce=["prefixPath","collectionGroup","documentId"],le="collectionGroupIndex",he=["collectionGroup","readTime","prefixPath","documentId"],Pe="remoteDocumentGlobal",Te="remoteDocumentGlobalKey",Ie="targets",Ee="queryTargetsIndex",de=["canonicalId","targetId"],Ae="targetDocuments",Re=["targetId","path"],Ve="documentTargetsIndex",me=["path","targetId"],fe$1="targetGlobalKey",ge$1="targetGlobal",pe="collectionParents",ye=["collectionId","parent"],we="clientMetadata",Se="clientId",be="bundles",De="bundleId",Ce="namedQueries",ve="name",Fe="indexConfiguration",Me="indexId",xe="collectionGroupIndex",Oe="collectionGroup",Ne="indexState",Be=["indexId","uid"],Le="sequenceNumberIndex",ke=["uid","sequenceNumber"],qe="indexEntries",Qe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$e="documentKeyIndex",Ue=["indexId","uid","orderedDocumentKey"],Ke="documentOverlays",We=["userId","collectionPath","documentId"],Ge="collectionPathOverlayIndex",ze=["userId","collectionPath","largestBatchId"],je="collectionGroupOverlayIndex",Je=["userId","collectionGroup","largestBatchId"],He="globals",Ye="name",Ze=[X,te,oe,H,Ie,Y,ge$1,Ae,we,Pe,pe,be,Ce],Xe=[...Ze,Ke],et=[X,te,oe,_e,Ie,Y,ge$1,Ae,we,Pe,pe,be,Ce,Ke],tt=et,nt=[...tt,Fe,Ne,qe],rt=nt,it=[...nt,He],st=it;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_IndexedDbTransaction extends PersistenceTransaction{constructor(e,s){super(),this.le=e,this.currentSequenceNumber=s}}function __PRIVATE_getStore(n,e){const s=__PRIVATE_debugCast(n);return __PRIVATE_SimpleDb.O(s.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(n){let e=0;for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&e++;return e}function forEach(n,e){for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&e(s,n[s])}function isEmpty(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,s){this.comparator=e,this.root=s||LLRBNode.EMPTY}insert(e,s){return new SortedMap(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return s.value;o<0?s=s.left:o>0&&(s=s.right)}return null}indexOf(e){let s=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(e,o.key);if(a===0)return s+o.left.size;a<0?o=o.left:(s+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,o)=>(e(s,o),!1)))}toString(){const e=[];return this.inorderTraversal(((s,o)=>(e.push(`${s}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,s,o,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=s?o(e.key,s):1,s&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,s,o,a,c){this.key=e,this.value=s,this.color=o??LLRBNode.RED,this.left=a??LLRBNode.EMPTY,this.right=c??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,o,a,c){return new LLRBNode(e??this.key,s??this.value,o??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,o){let a=this;const c=o(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,s,o),null):c===0?a.copy(null,s,null,null,null):a.copy(null,null,null,null,a.right.insert(e,s,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let o,a=this;if(s(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,s),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),s(e,a.key)===0){if(a.right.isEmpty())return LLRBNode.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,s))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,s,o,a,c){return this}insert(e,s,o){return new LLRBNode(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,o)=>(e(s),!1)))}forEachInRange(e,s){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,e[1])>=0)return;s(a.key)}}forEachWhile(e,s){let o;for(o=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((o=>{s=s.add(o)})),s}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const s=this.data.getIterator(),o=e.data.getIterator();for(;s.hasNext();){const a=s.getNext().key,c=o.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new SortedSet(this.comparator);return s.data=e,s}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function __PRIVATE_advanceIterator(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let s=new SortedSet(FieldPath$1.comparator);for(const o of this.fields)s=s.add(o);for(const o of e)s=s.add(o);return new FieldMask(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,((s,o)=>s.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+c):c}})(e);return new ByteString(s)}static fromUint8Array(e){const s=(function(a){let c="";for(let u=0;u<a.length;++u)c+=String.fromCharCode(a[u]);return c})(e);return new ByteString(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ot=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(n){if(__PRIVATE_hardAssert(!!n,39018),typeof n=="string"){let e=0;const s=ot.exec(n);if(__PRIVATE_hardAssert(!!s,46558,{timestamp:n}),s[1]){let a=s[1];a=(a+"000000000").substr(0,9),e=Number(a)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(n.seconds),nanos:__PRIVATE_normalizeNumber(n.nanos)}}function __PRIVATE_normalizeNumber(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function __PRIVATE_normalizeByteString(n){return typeof n=="string"?ByteString.fromBase64String(n):ByteString.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="server_timestamp",at="__type__",ut$1="__previous_value__",ct="__local_write_time__";function __PRIVATE_isServerTimestamp(n){return(n?.mapValue?.fields||{})[at]?.stringValue===_t}function __PRIVATE_getPreviousValue(n){const e=n.mapValue.fields[ut$1];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(n){const e=__PRIVATE_normalizeTimestamp(n.mapValue.fields[ct].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,s,o,a,c,u,h,m,g,_){this.databaseId=e,this.appId=s,this.persistenceKey=o,this.host=a,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const lt="(default)";class DatabaseId{constructor(e,s){this.projectId=e,this.database=s||lt}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===lt}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="__type__",Pt="__max__",Tt={mapValue:{fields:{__type__:{stringValue:Pt}}}},It="__vector__",Et="value",dt={nullValue:"NULL_VALUE"};function __PRIVATE_typeOrder(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?__PRIVATE_isServerTimestamp(n)?4:__PRIVATE_isMaxValue(n)?9007199254740991:__PRIVATE_isVectorValue(n)?10:11:fail(28295,{value:n})}function __PRIVATE_valueEquals(n,e){if(n===e)return!0;const s=__PRIVATE_typeOrder(n);if(s!==__PRIVATE_typeOrder(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(n).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const u=__PRIVATE_normalizeTimestamp(a.timestampValue),h=__PRIVATE_normalizeTimestamp(c.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,c){return __PRIVATE_normalizeByteString(a.bytesValue).isEqual(__PRIVATE_normalizeByteString(c.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,c){return __PRIVATE_normalizeNumber(a.geoPointValue.latitude)===__PRIVATE_normalizeNumber(c.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(a.geoPointValue.longitude)===__PRIVATE_normalizeNumber(c.geoPointValue.longitude)})(n,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return __PRIVATE_normalizeNumber(a.integerValue)===__PRIVATE_normalizeNumber(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const u=__PRIVATE_normalizeNumber(a.doubleValue),h=__PRIVATE_normalizeNumber(c.doubleValue);return u===h?__PRIVATE_isNegativeZero(u)===__PRIVATE_isNegativeZero(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return __PRIVATE_arrayEquals(n.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return(function(a,c){const u=a.mapValue.fields||{},h=c.mapValue.fields||{};if(__PRIVATE_objectSize(u)!==__PRIVATE_objectSize(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!__PRIVATE_valueEquals(u[m],h[m])))return!1;return!0})(n,e);default:return fail(52216,{left:n})}}function __PRIVATE_arrayValueContains(n,e){return(n.values||[]).find((s=>__PRIVATE_valueEquals(s,e)))!==void 0}function __PRIVATE_valueCompare(n,e){if(n===e)return 0;const s=__PRIVATE_typeOrder(n),o=__PRIVATE_typeOrder(e);if(s!==o)return __PRIVATE_primitiveComparator(s,o);switch(s){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(n.booleanValue,e.booleanValue);case 2:return(function(c,u){const h=__PRIVATE_normalizeNumber(c.integerValue||c.doubleValue),m=__PRIVATE_normalizeNumber(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(n,e);case 3:return __PRIVATE_compareTimestamps(n.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(n),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(n.stringValue,e.stringValue);case 6:return(function(c,u){const h=__PRIVATE_normalizeByteString(c),m=__PRIVATE_normalizeByteString(u);return h.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(c,u){const h=c.split("/"),m=u.split("/");for(let g=0;g<h.length&&g<m.length;g++){const _=__PRIVATE_primitiveComparator(h[g],m[g]);if(_!==0)return _}return __PRIVATE_primitiveComparator(h.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(c,u){const h=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(c.latitude),__PRIVATE_normalizeNumber(u.latitude));return h!==0?h:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(c.longitude),__PRIVATE_normalizeNumber(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(n.arrayValue,e.arrayValue);case 10:return(function(c,u){const h=c.fields||{},m=u.fields||{},g=h[Et]?.arrayValue,_=m[Et]?.arrayValue,b=__PRIVATE_primitiveComparator(g?.values?.length||0,_?.values?.length||0);return b!==0?b:__PRIVATE_compareArrays(g,_)})(n.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Tt.mapValue&&u===Tt.mapValue)return 0;if(c===Tt.mapValue)return 1;if(u===Tt.mapValue)return-1;const h=c.fields||{},m=Object.keys(h),g=u.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let b=0;b<m.length&&b<_.length;++b){const T=__PRIVATE_compareUtf8Strings(m[b],_[b]);if(T!==0)return T;const A=__PRIVATE_valueCompare(h[m[b]],g[_[b]]);if(A!==0)return A}return __PRIVATE_primitiveComparator(m.length,_.length)})(n.mapValue,e.mapValue);default:throw fail(23264,{he:s})}}function __PRIVATE_compareTimestamps(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return __PRIVATE_primitiveComparator(n,e);const s=__PRIVATE_normalizeTimestamp(n),o=__PRIVATE_normalizeTimestamp(e),a=__PRIVATE_primitiveComparator(s.seconds,o.seconds);return a!==0?a:__PRIVATE_primitiveComparator(s.nanos,o.nanos)}function __PRIVATE_compareArrays(n,e){const s=n.values||[],o=e.values||[];for(let a=0;a<s.length&&a<o.length;++a){const c=__PRIVATE_valueCompare(s[a],o[a]);if(c)return c}return __PRIVATE_primitiveComparator(s.length,o.length)}function canonicalId(n){return __PRIVATE_canonifyValue(n)}function __PRIVATE_canonifyValue(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(s){const o=__PRIVATE_normalizeTimestamp(s);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(s){return __PRIVATE_normalizeByteString(s).toBase64()})(n.bytesValue):"referenceValue"in n?(function(s){return DocumentKey.fromName(s).toString()})(n.referenceValue):"geoPointValue"in n?(function(s){return`geo(${s.latitude},${s.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(s){let o="[",a=!0;for(const c of s.values||[])a?a=!1:o+=",",o+=__PRIVATE_canonifyValue(c);return o+"]"})(n.arrayValue):"mapValue"in n?(function(s){const o=Object.keys(s.fields||{}).sort();let a="{",c=!0;for(const u of o)c?c=!1:a+=",",a+=`${u}:${__PRIVATE_canonifyValue(s.fields[u])}`;return a+"}"})(n.mapValue):fail(61005,{value:n})}function __PRIVATE_estimateByteSize(n){switch(__PRIVATE_typeOrder(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(n);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*n.stringValue.length;case 6:return __PRIVATE_normalizeByteString(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((a,c)=>a+__PRIVATE_estimateByteSize(c)),0)})(n.arrayValue);case 10:case 11:return(function(o){let a=0;return forEach(o.fields,((c,u)=>{a+=c.length+__PRIVATE_estimateByteSize(u)})),a})(n.mapValue);default:throw fail(13486,{value:n})}}function __PRIVATE_refValue(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function isInteger(n){return!!n&&"integerValue"in n}function isArray$1(n){return!!n&&"arrayValue"in n}function __PRIVATE_isNullValue(n){return!!n&&"nullValue"in n}function __PRIVATE_isNanValue(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function __PRIVATE_isMapValue(n){return!!n&&"mapValue"in n}function __PRIVATE_isVectorValue(n){return(n?.mapValue?.fields||{})[ht]?.stringValue===It}function __PRIVATE_deepClone(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return forEach(n.mapValue.fields,((s,o)=>e.mapValue.fields[s]=__PRIVATE_deepClone(o))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(n.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=__PRIVATE_deepClone(n.arrayValue.values[s]);return e}return{...n}}function __PRIVATE_isMaxValue(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Pt}const At={mapValue:{fields:{[ht]:{stringValue:It},[Et]:{arrayValue:{}}}}};function __PRIVATE_valuesGetLowerBound(n){return"nullValue"in n?dt:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?__PRIVATE_refValue(DatabaseId.empty(),DocumentKey.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?__PRIVATE_isVectorValue(n)?At:{mapValue:{}}:fail(35942,{value:n})}function __PRIVATE_valuesGetUpperBound(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?__PRIVATE_refValue(DatabaseId.empty(),DocumentKey.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?At:"mapValue"in n?__PRIVATE_isVectorValue(n)?{mapValue:{}}:Tt:fail(61959,{value:n})}function __PRIVATE_lowerBoundCompare(n,e){const s=__PRIVATE_valueCompare(n.value,e.value);return s!==0?s:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function __PRIVATE_upperBoundCompare(n,e){const s=__PRIVATE_valueCompare(n.value,e.value);return s!==0?s:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let o=0;o<e.length-1;++o)if(s=(s.mapValue.fields||{})[e.get(o)],!__PRIVATE_isMapValue(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(s)}setAll(e){let s=FieldPath$1.emptyPath(),o={},a=[];e.forEach(((u,h)=>{if(!s.isImmediateParentOf(h)){const m=this.getFieldsMap(s);this.applyChanges(m,o,a),o={},a=[],s=h.popLast()}u?o[h.lastSegment()]=__PRIVATE_deepClone(u):a.push(h.lastSegment())}));const c=this.getFieldsMap(s);this.applyChanges(c,o,a)}delete(e){const s=this.field(e.popLast());__PRIVATE_isMapValue(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let o=0;o<e.length;++o){let a=s.mapValue.fields[e.get(o)];__PRIVATE_isMapValue(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},s.mapValue.fields[e.get(o)]=a),s=a}return s.mapValue.fields}applyChanges(e,s,o){forEach(s,((a,c)=>e[a]=c));for(const a of o)delete e[a]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(n){const e=[];return forEach(n.fields,((s,o)=>{const a=new FieldPath$1([s]);if(__PRIVATE_isMapValue(o)){const c=__PRIVATE_extractFieldMask(o.mapValue).fields;if(c.length===0)e.push(a);else for(const u of c)e.push(a.child(u))}else e.push(a)})),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,s,o,a,c,u,h){this.key=e,this.documentType=s,this.version=o,this.readTime=a,this.createTime=c,this.data=u,this.documentState=h}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,s,o,a){return new MutableDocument(e,1,s,SnapshotVersion.min(),o,a,0)}static newNoDocument(e,s){return new MutableDocument(e,2,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,s){return new MutableDocument(e,3,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,s){this.position=e,this.inclusive=s}}function __PRIVATE_boundCompareToDocument(n,e,s){let o=0;for(let a=0;a<n.position.length;a++){const c=e[a],u=n.position[a];if(c.field.isKeyField()?o=DocumentKey.comparator(DocumentKey.fromName(u.referenceValue),s.key):o=__PRIVATE_valueCompare(u,s.data.field(c.field)),c.dir==="desc"&&(o*=-1),o!==0)break}return o}function __PRIVATE_boundEquals(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let s=0;s<n.position.length;s++)if(!__PRIVATE_valueEquals(n.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,s="asc"){this.field=e,this.dir=s}}function __PRIVATE_orderByEquals(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,s,o){super(),this.field=e,this.op=s,this.value=o}static create(e,s,o){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,o):new __PRIVATE_KeyFieldFilter(e,s,o):s==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,o):s==="in"?new __PRIVATE_InFilter(e,o):s==="not-in"?new __PRIVATE_NotInFilter(e,o):s==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,o):new FieldFilter(e,s,o)}static createKeyFieldInFilter(e,s,o){return s==="in"?new __PRIVATE_KeyFieldInFilter(e,o):new __PRIVATE_KeyFieldNotInFilter(e,o)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value)):s!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(s)&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new CompositeFilter(e,s)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(n){return n.op==="and"}function __PRIVATE_compositeFilterIsDisjunction(n){return n.op==="or"}function __PRIVATE_compositeFilterIsFlatConjunction(n){return __PRIVATE_compositeFilterIsFlat(n)&&__PRIVATE_compositeFilterIsConjunction(n)}function __PRIVATE_compositeFilterIsFlat(n){for(const e of n.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(n){if(n instanceof FieldFilter)return n.field.canonicalString()+n.op.toString()+canonicalId(n.value);if(__PRIVATE_compositeFilterIsFlatConjunction(n))return n.filters.map((e=>__PRIVATE_canonifyFilter(e))).join(",");{const e=n.filters.map((s=>__PRIVATE_canonifyFilter(s))).join(",");return`${n.op}(${e})`}}function __PRIVATE_filterEquals(n,e){return n instanceof FieldFilter?(function(o,a){return a instanceof FieldFilter&&o.op===a.op&&o.field.isEqual(a.field)&&__PRIVATE_valueEquals(o.value,a.value)})(n,e):n instanceof CompositeFilter?(function(o,a){return a instanceof CompositeFilter&&o.op===a.op&&o.filters.length===a.filters.length?o.filters.reduce(((c,u,h)=>c&&__PRIVATE_filterEquals(u,a.filters[h])),!0):!1})(n,e):void fail(19439)}function __PRIVATE_compositeFilterWithAddedFilters(n,e){const s=n.filters.concat(e);return CompositeFilter.create(s,n.op)}function __PRIVATE_stringifyFilter(n){return n instanceof FieldFilter?(function(s){return`${s.field.canonicalString()} ${s.op} ${canonicalId(s.value)}`})(n):n instanceof CompositeFilter?(function(s){return s.op.toString()+" {"+s.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"})(n):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,s,o){super(e,s,o),this.key=DocumentKey.fromName(o.referenceValue)}matches(e){const s=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(s)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,s){super(e,"in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,s){super(e,"not-in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function __PRIVATE_extractDocumentKeysFromArrayValue(n,e){return(e.arrayValue?.values||[]).map((s=>DocumentKey.fromName(s.referenceValue)))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return isArray$1(s)&&__PRIVATE_arrayValueContains(s.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,s){super(e,"not-in",s)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!isArray$1(s)||!s.arrayValue.values)&&s.arrayValue.values.some((o=>__PRIVATE_arrayValueContains(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,s=null,o=[],a=[],c=null,u=null,h=null){this.path=e,this.collectionGroup=s,this.orderBy=o,this.filters=a,this.limit=c,this.startAt=u,this.endAt=h,this.Te=null}}function __PRIVATE_newTarget(n,e=null,s=[],o=[],a=null,c=null,u=null){return new __PRIVATE_TargetImpl(n,e,s,o,a,c,u)}function __PRIVATE_canonifyTarget(n){const e=__PRIVATE_debugCast(n);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((o=>__PRIVATE_canonifyFilter(o))).join(","),s+="|ob:",s+=e.orderBy.map((o=>(function(c){return c.field.canonicalString()+c.dir})(o))).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((o=>canonicalId(o))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((o=>canonicalId(o))).join(",")),e.Te=s}return e.Te}function __PRIVATE_targetEquals(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!__PRIVATE_orderByEquals(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if(!__PRIVATE_filterEquals(n.filters[s],e.filters[s]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(n.startAt,e.startAt)&&__PRIVATE_boundEquals(n.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(n){return DocumentKey.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function __PRIVATE_targetGetFieldFiltersForPath(n,e){return n.filters.filter((s=>s instanceof FieldFilter&&s.field.isEqual(e)))}function __PRIVATE_targetGetAscendingBound(n,e,s){let o=dt,a=!0;for(const c of __PRIVATE_targetGetFieldFiltersForPath(n,e)){let u=dt,h=!0;switch(c.op){case"<":case"<=":u=__PRIVATE_valuesGetLowerBound(c.value);break;case"==":case"in":case">=":u=c.value;break;case">":u=c.value,h=!1;break;case"!=":case"not-in":u=dt}__PRIVATE_lowerBoundCompare({value:o,inclusive:a},{value:u,inclusive:h})<0&&(o=u,a=h)}if(s!==null){for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=s.position[c];__PRIVATE_lowerBoundCompare({value:o,inclusive:a},{value:u,inclusive:s.inclusive})<0&&(o=u,a=s.inclusive);break}}return{value:o,inclusive:a}}function __PRIVATE_targetGetDescendingBound(n,e,s){let o=Tt,a=!0;for(const c of __PRIVATE_targetGetFieldFiltersForPath(n,e)){let u=Tt,h=!0;switch(c.op){case">=":case">":u=__PRIVATE_valuesGetUpperBound(c.value),h=!1;break;case"==":case"in":case"<=":u=c.value;break;case"<":u=c.value,h=!1;break;case"!=":case"not-in":u=Tt}__PRIVATE_upperBoundCompare({value:o,inclusive:a},{value:u,inclusive:h})>0&&(o=u,a=h)}if(s!==null){for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=s.position[c];__PRIVATE_upperBoundCompare({value:o,inclusive:a},{value:u,inclusive:s.inclusive})>0&&(o=u,a=s.inclusive);break}}return{value:o,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,s=null,o=[],a=[],c=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=u,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(n,e,s,o,a,c,u,h){return new __PRIVATE_QueryImpl(n,e,s,o,a,c,u,h)}function __PRIVATE_newQueryForPath(n){return new __PRIVATE_QueryImpl(n)}function __PRIVATE_queryMatchesAllDocuments(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(n){return n.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(n){const e=__PRIVATE_debugCast(n);if(e.Ie===null){e.Ie=[];const s=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),s.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new SortedSet(FieldPath$1.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((c=>{s.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new OrderBy(c,o))})),s.has(FieldPath$1.keyField().canonicalString())||e.Ie.push(new OrderBy(FieldPath$1.keyField(),o))}return e.Ie}function __PRIVATE_queryToTarget(n){const e=__PRIVATE_debugCast(n);return e.Ee||(e.Ee=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(n))),e.Ee}function __PRIVATE__queryToTarget(n,e){if(n.limitType==="F")return __PRIVATE_newTarget(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new OrderBy(a.field,c)}));const s=n.endAt?new Bound(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Bound(n.startAt.position,n.startAt.inclusive):null;return __PRIVATE_newTarget(n.path,n.collectionGroup,e,n.filters,n.limit,s,o)}}function __PRIVATE_queryWithAddedFilter(n,e){const s=n.filters.concat([e]);return new __PRIVATE_QueryImpl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),s,n.limit,n.limitType,n.startAt,n.endAt)}function __PRIVATE_queryWithLimit(n,e,s){return new __PRIVATE_QueryImpl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,s,n.startAt,n.endAt)}function __PRIVATE_queryEquals(n,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(n),__PRIVATE_queryToTarget(e))&&n.limitType===e.limitType}function __PRIVATE_canonifyQuery(n){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(n))}|lt:${n.limitType}`}function __PRIVATE_stringifyQuery(n){return`Query(target=${(function(s){let o=s.path.canonicalString();return s.collectionGroup!==null&&(o+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(o+=`, filters: [${s.filters.map((a=>__PRIVATE_stringifyFilter(a))).join(", ")}]`),__PRIVATE_isNullOrUndefined(s.limit)||(o+=", limit: "+s.limit),s.orderBy.length>0&&(o+=`, orderBy: [${s.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),s.startAt&&(o+=", startAt: ",o+=s.startAt.inclusive?"b:":"a:",o+=s.startAt.position.map((a=>canonicalId(a))).join(",")),s.endAt&&(o+=", endAt: ",o+=s.endAt.inclusive?"a:":"b:",o+=s.endAt.position.map((a=>canonicalId(a))).join(",")),`Target(${o})`})(__PRIVATE_queryToTarget(n))}; limitType=${n.limitType})`}function __PRIVATE_queryMatches(n,e){return e.isFoundDocument()&&(function(o,a){const c=a.key.path;return o.collectionGroup!==null?a.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):DocumentKey.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)})(n,e)&&(function(o,a){for(const c of __PRIVATE_queryNormalizedOrderBy(o))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(n,e)&&(function(o,a){for(const c of o.filters)if(!c.matches(a))return!1;return!0})(n,e)&&(function(o,a){return!(o.startAt&&!(function(u,h,m){const g=__PRIVATE_boundCompareToDocument(u,h,m);return u.inclusive?g<=0:g<0})(o.startAt,__PRIVATE_queryNormalizedOrderBy(o),a)||o.endAt&&!(function(u,h,m){const g=__PRIVATE_boundCompareToDocument(u,h,m);return u.inclusive?g>=0:g>0})(o.endAt,__PRIVATE_queryNormalizedOrderBy(o),a))})(n,e)}function __PRIVATE_queryCollectionGroup(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function __PRIVATE_newQueryComparator(n){return(e,s)=>{let o=!1;for(const a of __PRIVATE_queryNormalizedOrderBy(n)){const c=__PRIVATE_compareDocs(a,e,s);if(c!==0)return c;o=o||a.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(n,e,s){const o=n.field.isKeyField()?DocumentKey.comparator(e.key,s.key):(function(c,u,h){const m=u.data.field(c),g=h.data.field(c);return m!==null&&g!==null?__PRIVATE_valueCompare(m,g):fail(42886)})(n.field,e,s);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return fail(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),o=this.inner[s];if(o!==void 0){for(const[a,c]of o)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,s){const o=this.mapKeyFn(e),a=this.inner[o];if(a===void 0)return this.inner[o]=[[e,s]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,s]);a.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return o.length===1?delete this.inner[s]:o.splice(a,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,((s,o)=>{for(const[a,c]of o)e(a,c)}))}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Rt}const Vt=new SortedMap(DocumentKey.comparator);function documentMap(...n){let e=Vt;for(const s of n)e=e.insert(s.key,s);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(n){let e=Vt;return n.forEach(((s,o)=>e=e.insert(s,o.overlayedDocument))),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap((n=>n.toString()),((n,e)=>n.isEqual(e)))}const mt=new SortedMap(DocumentKey.comparator),ft=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...n){let e=ft;for(const s of n)e=e.add(s);return e}const gt=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return gt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(n){return{integerValue:""+n}}function toNumber$1(n,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(n,e,s){return n instanceof __PRIVATE_ServerTimestampTransform?(function(a,c){const u={fields:{[at]:{stringValue:_t},[ct]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&__PRIVATE_isServerTimestamp(c)&&(c=__PRIVATE_getPreviousValue(c)),c&&(u.fields[ut$1]=c),{mapValue:u}})(s,e):n instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(n,e):n instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(n,e):(function(a,c){const u=__PRIVATE_computeTransformOperationBaseValue(a,c),h=asNumber$1(u)+asNumber$1(a.Ae);return isInteger(u)&&isInteger(a.Ae)?__PRIVATE_toInteger(h):__PRIVATE_toDouble(a.serializer,h)})(n,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(n,e,s){return n instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(n,e):n instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(n,e):s}function __PRIVATE_computeTransformOperationBaseValue(n,e){return n instanceof __PRIVATE_NumericIncrementTransformOperation?(function(o){return isInteger(o)||(function(c){return!!c&&"doubleValue"in c})(o)})(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(n,e){const s=__PRIVATE_coercedFieldValuesArray(e);for(const o of n.elements)s.some((a=>__PRIVATE_valueEquals(a,o)))||s.push(o);return{arrayValue:{values:s}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(n,e){let s=__PRIVATE_coercedFieldValuesArray(e);for(const o of n.elements)s=s.filter((a=>!__PRIVATE_valueEquals(a,o)));return{arrayValue:{values:s}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function asNumber$1(n){return __PRIVATE_normalizeNumber(n.integerValue||n.doubleValue)}function __PRIVATE_coercedFieldValuesArray(n){return isArray$1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,s){this.field=e,this.transform=s}}function __PRIVATE_fieldTransformEquals(n,e){return n.field.isEqual(e.field)&&(function(o,a){return o instanceof __PRIVATE_ArrayUnionTransformOperation&&a instanceof __PRIVATE_ArrayUnionTransformOperation||o instanceof __PRIVATE_ArrayRemoveTransformOperation&&a instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(o.elements,a.elements,__PRIVATE_valueEquals):o instanceof __PRIVATE_NumericIncrementTransformOperation&&a instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(o.Ae,a.Ae):o instanceof __PRIVATE_ServerTimestampTransform&&a instanceof __PRIVATE_ServerTimestampTransform})(n.transform,e.transform)}class MutationResult{constructor(e,s){this.version=e,this.transformResults=s}}class Precondition{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new __PRIVATE_DeleteMutation(n.key,Precondition.none()):new __PRIVATE_SetMutation(n.key,n.data,Precondition.none());{const s=n.data,o=ObjectValue.empty();let a=new SortedSet(FieldPath$1.comparator);for(let c of e.fields)if(!a.has(c)){let u=s.field(c);u===null&&c.length>1&&(c=c.popLast(),u=s.field(c)),u===null?o.delete(c):o.set(c,u),a=a.add(c)}return new __PRIVATE_PatchMutation(n.key,o,new FieldMask(a.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(n,e,s){n instanceof __PRIVATE_SetMutation?(function(a,c,u){const h=a.value.clone(),m=__PRIVATE_serverTransformResults(a.fieldTransforms,c,u.transformResults);h.setAll(m),c.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,s):n instanceof __PRIVATE_PatchMutation?(function(a,c,u){if(!__PRIVATE_preconditionIsValidForDocument(a.precondition,c))return void c.convertToUnknownDocument(u.version);const h=__PRIVATE_serverTransformResults(a.fieldTransforms,c,u.transformResults),m=c.data;m.setAll(__PRIVATE_getPatch(a)),m.setAll(h),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,s):(function(a,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,s)}function __PRIVATE_mutationApplyToLocalView(n,e,s,o){return n instanceof __PRIVATE_SetMutation?(function(c,u,h,m){if(!__PRIVATE_preconditionIsValidForDocument(c.precondition,u))return h;const g=c.value.clone(),_=__PRIVATE_localTransformResults(c.fieldTransforms,m,u);return g.setAll(_),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(n,e,s,o):n instanceof __PRIVATE_PatchMutation?(function(c,u,h,m){if(!__PRIVATE_preconditionIsValidForDocument(c.precondition,u))return h;const g=__PRIVATE_localTransformResults(c.fieldTransforms,m,u),_=u.data;return _.setAll(__PRIVATE_getPatch(c)),_.setAll(g),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(n,e,s,o):(function(c,u,h){return __PRIVATE_preconditionIsValidForDocument(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,s)}function __PRIVATE_mutationExtractBaseValue(n,e){let s=null;for(const o of n.fieldTransforms){const a=e.data.field(o.field),c=__PRIVATE_computeTransformOperationBaseValue(o.transform,a||null);c!=null&&(s===null&&(s=ObjectValue.empty()),s.set(o.field,c))}return s||null}function __PRIVATE_mutationEquals(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(o,a){return o===void 0&&a===void 0||!(!o||!a)&&__PRIVATE_arrayEquals(o,a,((c,u)=>__PRIVATE_fieldTransformEquals(c,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,s,o,a=[]){super(),this.key=e,this.value=s,this.precondition=o,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,s,o,a,c=[]){super(),this.key=e,this.data=s,this.fieldMask=o,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(n){const e=new Map;return n.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const o=n.data.field(s);e.set(s,o)}})),e}function __PRIVATE_serverTransformResults(n,e,s){const o=new Map;__PRIVATE_hardAssert(n.length===s.length,32656,{Re:s.length,Ve:n.length});for(let a=0;a<s.length;a++){const c=n[a],u=c.transform,h=e.data.field(c.field);o.set(c.field,__PRIVATE_applyTransformOperationToRemoteDocument(u,h,s[a]))}return o}function __PRIVATE_localTransformResults(n,e,s){const o=new Map;for(const a of n){const c=a.transform,u=s.data.field(a.field);o.set(a.field,__PRIVATE_applyTransformOperationToLocalView(c,u,e))}return o}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,s,o,a){this.batchId=e,this.localWriteTime=s,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(e,s){const o=s.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(c,e,o[a])}}applyToLocalView(e,s){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(s=__PRIVATE_mutationApplyToLocalView(o,e,s,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(s=__PRIVATE_mutationApplyToLocalView(o,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const o=__PRIVATE_newMutationMap();return this.mutations.forEach((a=>{const c=e.get(a.key),u=c.overlayedDocument;let h=this.applyToLocalView(u,c.mutatedFields);h=s.has(a.key)?null:h;const m=__PRIVATE_calculateOverlayMutation(u,h);m!==null&&o.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(SnapshotVersion.min())})),o}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,((s,o)=>__PRIVATE_mutationEquals(s,o)))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,((s,o)=>__PRIVATE_mutationEquals(s,o)))}}class MutationBatchResult{constructor(e,s,o,a){this.batch=e,this.commitVersion=s,this.mutationResults=o,this.docVersions=a}static from(e,s,o){__PRIVATE_hardAssert(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let a=(function(){return mt})();const c=e.mutations;for(let u=0;u<c.length;u++)a=a.insert(c[u].key,o[u].version);return new MutationBatchResult(e,s,o,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,yt;function __PRIVATE_isPermanentError(n){switch(n){case N.OK:return fail(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return fail(15467,{code:n})}}function __PRIVATE_mapCodeFromRpcCode(n){if(n===void 0)return __PRIVATE_logError("GRPC error has no .code"),N.UNKNOWN;switch(n){case pt.OK:return N.OK;case pt.CANCELLED:return N.CANCELLED;case pt.UNKNOWN:return N.UNKNOWN;case pt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case pt.INTERNAL:return N.INTERNAL;case pt.UNAVAILABLE:return N.UNAVAILABLE;case pt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case pt.NOT_FOUND:return N.NOT_FOUND;case pt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case pt.ABORTED:return N.ABORTED;case pt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case pt.DATA_LOSS:return N.DATA_LOSS;default:return fail(39323,{code:n})}}(yt=pt||(pt={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(n){const e=__PRIVATE_newTextEncoder().encode(n),s=new Md5;return s.update(e),new Uint8Array(s.digest())}function __PRIVATE_get64BitUints(n){const e=new DataView(n.buffer),s=e.getUint32(0,!0),o=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Integer([s,o],0),new Integer([a,c],0)]}class BloomFilter{constructor(e,s,o){if(this.bitmap=e,this.padding=s,this.hashCount=o,s<0||s>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${s}`);if(o<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${o}`);if(e.length===0&&s!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=Integer.fromNumber(this.ge)}ye(e,s,o){let a=e.add(s.multiply(Integer.fromNumber(o)));return a.compare(St)===1&&(a=new Integer([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=__PRIVATE_getMd5HashValue(e),[o,a]=__PRIVATE_get64BitUints(s);for(let c=0;c<this.hashCount;c++){const u=this.ye(o,a,c);if(!this.we(u))return!1}return!0}static create(e,s,o){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new BloomFilter(c,a,s);return o.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const s=__PRIVATE_getMd5HashValue(e),[o,a]=__PRIVATE_get64BitUints(s);for(let c=0;c<this.hashCount;c++){const u=this.ye(o,a,c);this.Se(u)}}Se(e){const s=Math.floor(e/8),o=e%8;this.bitmap[s]|=1<<o}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,s,o,a,c){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,s,o){const a=new Map;return a.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,s,o)),new RemoteEvent(SnapshotVersion.min(),a,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,s,o,a,c){this.resumeToken=e,this.current=s,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,s,o){return new TargetChange(o,s,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,s,o,a){this.be=e,this.removedTargetIds=s,this.key=o,this.De=a}}class __PRIVATE_ExistenceFilterChange{constructor(e,s){this.targetId=e,this.Ce=s}}class __PRIVATE_WatchTargetChange{constructor(e,s,o=ByteString.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=s,this.resumeToken=o,this.cause=a}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Fe=__PRIVATE_snapshotChangesMap(),this.Me=ByteString.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=__PRIVATE_documentKeySet(),s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:s=s.add(a);break;case 1:o=o.add(a);break;default:fail(38017,{changeType:c})}})),new TargetChange(this.Me,this.xe,e,s,o)}qe(){this.Oe=!1,this.Fe=__PRIVATE_snapshotChangesMap()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.Ge=e,this.ze=new Map,this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const o=this.nt(s);switch(e.state){case 0:this.rt(s)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),o.Le(e.resumeToken));break;default:fail(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((o,a)=>{this.rt(a)&&s(a)}))}st(e){const s=e.targetId,o=e.Ce.count,a=this.ot(s);if(a){const c=a.target;if(__PRIVATE_targetIsDocumentTarget(c))if(o===0){const u=new DocumentKey(c.path);this.et(s,u,MutableDocument.newNoDocument(u,SnapshotVersion.min()))}else __PRIVATE_hardAssert(o===1,20013,{expectedCount:o});else{const u=this._t(s);if(u!==o){const h=this.ut(e),m=h?this.ct(h,e,u):1;if(m!==0){this.it(s);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,g)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=s;let u,h;try{u=__PRIVATE_normalizeByteString(o).toUint8Array()}catch(m){if(m instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new BloomFilter(u,a,c)}catch(m){return __PRIVATE_logWarn(m instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,s,o){return s.Ce.count===o-this.Pt(e,s.targetId)?0:2}Pt(e,s){const o=this.Ge.getRemoteKeysForTarget(s);let a=0;return o.forEach((c=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(h)||(this.et(s,c,null),a++)})),a}Tt(e){const s=new Map;this.ze.forEach(((c,u)=>{const h=this.ot(u);if(h){if(c.current&&__PRIVATE_targetIsDocumentTarget(h.target)){const m=new DocumentKey(h.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,MutableDocument.newNoDocument(m,e))}c.Be&&(s.set(u,c.ke()),c.qe())}}));let o=__PRIVATE_documentKeySet();this.He.forEach(((c,u)=>{let h=!0;u.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(o=o.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const a=new RemoteEvent(e,s,this.Ye,this.je,o);return this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator),a}Xe(e,s){if(!this.rt(e))return;const o=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,o),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,o){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,s)?a.Qe(s,1):a.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),o&&(this.je=this.je.insert(s,o))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new __PRIVATE_TargetState,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new SortedSet(__PRIVATE_primitiveComparator),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new __PRIVATE_TargetState),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const bt={asc:"ASCENDING",desc:"DESCENDING"},Dt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ct={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function __PRIVATE_toInt32Proto(n,e){return n.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(n,e){return toTimestamp(n,e.toTimestamp())}function __PRIVATE_fromVersion(n){return __PRIVATE_hardAssert(!!n,49232),SnapshotVersion.fromTimestamp((function(s){const o=__PRIVATE_normalizeTimestamp(s);return new Timestamp(o.seconds,o.nanos)})(n))}function __PRIVATE_toResourceName(n,e){return __PRIVATE_toResourcePath(n,e).canonicalString()}function __PRIVATE_toResourcePath(n,e){const s=(function(a){return new ResourcePath(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?s:s.child(e)}function __PRIVATE_fromResourceName(n){const e=ResourcePath.fromString(n);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(n,e){return __PRIVATE_toResourceName(n.databaseId,e.path)}function fromName(n,e){const s=__PRIVATE_fromResourceName(e);if(s.get(1)!==n.databaseId.projectId)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+n.databaseId.projectId);if(s.get(3)!==n.databaseId.database)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+n.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(s))}function __PRIVATE_toQueryPath(n,e){return __PRIVATE_toResourceName(n.databaseId,e)}function __PRIVATE_fromQueryPath(n){const e=__PRIVATE_fromResourceName(n);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(n){return new ResourcePath(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(n){return __PRIVATE_hardAssert(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function __PRIVATE_toMutationDocument(n,e,s){return{name:__PRIVATE_toName(n,e),fields:s.value.mapValue.fields}}function __PRIVATE_fromDocument(n,e,s){const o=fromName(n,e.name),a=__PRIVATE_fromVersion(e.updateTime),c=e.createTime?__PRIVATE_fromVersion(e.createTime):SnapshotVersion.min(),u=new ObjectValue({mapValue:{fields:e.fields}}),h=MutableDocument.newFoundDocument(o,a,c,u);return s&&h.setHasCommittedMutations(),s?h.setHasCommittedMutations():h}function __PRIVATE_fromWatchChange(n,e){let s;if("targetChange"in e){e.targetChange;const o=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:fail(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(g,_){return g.useProto3Json?(__PRIVATE_hardAssert(_===void 0||typeof _=="string",58123),ByteString.fromBase64String(_||"")):(__PRIVATE_hardAssert(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),ByteString.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(g){const _=g.code===void 0?N.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(g.code);return new FirestoreError(_,g.message||"")})(u);s=new __PRIVATE_WatchTargetChange(o,a,c,h||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const a=fromName(n,o.document.name),c=__PRIVATE_fromVersion(o.document.updateTime),u=o.document.createTime?__PRIVATE_fromVersion(o.document.createTime):SnapshotVersion.min(),h=new ObjectValue({mapValue:{fields:o.document.fields}}),m=MutableDocument.newFoundDocument(a,c,u,h),g=o.targetIds||[],_=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const a=fromName(n,o.document),c=o.readTime?__PRIVATE_fromVersion(o.readTime):SnapshotVersion.min(),u=MutableDocument.newNoDocument(a,c),h=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const a=fromName(n,o.document),c=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],c,a,null)}else{if(!("filter"in e))return fail(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:a=0,unchangedNames:c}=o,u=new ExistenceFilter(a,c),h=o.targetId;s=new __PRIVATE_ExistenceFilterChange(h,u)}}return s}function toMutation(n,e){let s;if(e instanceof __PRIVATE_SetMutation)s={update:__PRIVATE_toMutationDocument(n,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)s={delete:__PRIVATE_toName(n,e.key)};else if(e instanceof __PRIVATE_PatchMutation)s={update:__PRIVATE_toMutationDocument(n,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{Vt:e.type});s={verify:__PRIVATE_toName(n,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((o=>(function(c,u){const h=u.transform;if(h instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw fail(20930,{transform:u.transform})})(0,o)))),e.precondition.isNone||(s.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:fail(27497)})(n,e.precondition)),s}function __PRIVATE_fromMutation(n,e){const s=e.currentDocument?(function(c){return c.updateTime!==void 0?Precondition.updateTime(__PRIVATE_fromVersion(c.updateTime)):c.exists!==void 0?Precondition.exists(c.exists):Precondition.none()})(e.currentDocument):Precondition.none(),o=e.updateTransforms?e.updateTransforms.map((a=>(function(u,h){let m=null;if("setToServerValue"in h)__PRIVATE_hardAssert(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),m=new __PRIVATE_ServerTimestampTransform;else if("appendMissingElements"in h){const _=h.appendMissingElements.values||[];m=new __PRIVATE_ArrayUnionTransformOperation(_)}else if("removeAllFromArray"in h){const _=h.removeAllFromArray.values||[];m=new __PRIVATE_ArrayRemoveTransformOperation(_)}else"increment"in h?m=new __PRIVATE_NumericIncrementTransformOperation(u,h.increment):fail(16584,{proto:h});const g=FieldPath$1.fromServerFormat(h.fieldPath);return new FieldTransform(g,m)})(n,a))):[];if(e.update){e.update.name;const a=fromName(n,e.update.name),c=new ObjectValue({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(m){const g=m.fieldPaths||[];return new FieldMask(g.map((_=>FieldPath$1.fromServerFormat(_))))})(e.updateMask);return new __PRIVATE_PatchMutation(a,c,u,s,o)}return new __PRIVATE_SetMutation(a,c,s,o)}if(e.delete){const a=fromName(n,e.delete);return new __PRIVATE_DeleteMutation(a,s)}if(e.verify){const a=fromName(n,e.verify);return new __PRIVATE_VerifyMutation(a,s)}return fail(1463,{proto:e})}function __PRIVATE_fromWriteResults(n,e){return n&&n.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),n.map((s=>(function(a,c){let u=a.updateTime?__PRIVATE_fromVersion(a.updateTime):__PRIVATE_fromVersion(c);return u.isEqual(SnapshotVersion.min())&&(u=__PRIVATE_fromVersion(c)),new MutationResult(u,a.transformResults||[])})(s,e)))):[]}function __PRIVATE_toDocumentsTarget(n,e){return{documents:[__PRIVATE_toQueryPath(n,e.path)]}}function __PRIVATE_toQueryTarget(n,e){const s={structuredQuery:{}},o=e.path;let a;e.collectionGroup!==null?(a=o,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=o.popLast(),s.structuredQuery.from=[{collectionId:o.lastSegment()}]),s.parent=__PRIVATE_toQueryPath(n,a);const c=(function(g){if(g.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(g,"and"))})(e.filters);c&&(s.structuredQuery.where=c);const u=(function(g){if(g.length!==0)return g.map((_=>(function(T){return{field:__PRIVATE_toFieldPathReference(T.field),direction:__PRIVATE_toDirection(T.dir)}})(_)))})(e.orderBy);u&&(s.structuredQuery.orderBy=u);const h=__PRIVATE_toInt32Proto(n,e.limit);return h!==null&&(s.structuredQuery.limit=h),e.startAt&&(s.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:s,parent:a}}function __PRIVATE_convertQueryTargetToQuery(n){let e=__PRIVATE_fromQueryPath(n.parent);const s=n.structuredQuery,o=s.from?s.from.length:0;let a=null;if(o>0){__PRIVATE_hardAssert(o===1,65062);const _=s.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let c=[];s.where&&(c=(function(b){const T=__PRIVATE_fromFilter(b);return T instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(T)?T.getFilters():[T]})(s.where));let u=[];s.orderBy&&(u=(function(b){return b.map((T=>(function(R){return new OrderBy(__PRIVATE_fromFieldPathReference(R.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(T)))})(s.orderBy));let h=null;s.limit&&(h=(function(b){let T;return T=typeof b=="object"?b.value:b,__PRIVATE_isNullOrUndefined(T)?null:T})(s.limit));let m=null;s.startAt&&(m=(function(b){const T=!!b.before,A=b.values||[];return new Bound(A,T)})(s.startAt));let g=null;return s.endAt&&(g=(function(b){const T=!b.before,A=b.values||[];return new Bound(A,T)})(s.endAt)),__PRIVATE_newQuery(e,a,u,c,h,"F",m,g)}function __PRIVATE_toListenRequestLabels(n,e){const s=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:a})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function __PRIVATE_fromFilter(n){return n.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const o=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(o,"==",{doubleValue:NaN});case"IS_NULL":const a=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}})(n):n.fieldFilter!==void 0?(function(s){return FieldFilter.create(__PRIVATE_fromFieldPathReference(s.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(s){return CompositeFilter.create(s.compositeFilter.filters.map((o=>__PRIVATE_fromFilter(o))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return fail(1026)}})(s.compositeFilter.op))})(n):fail(30097,{filter:n})}function __PRIVATE_toDirection(n){return bt[n]}function __PRIVATE_toOperatorName(n){return Dt[n]}function __PRIVATE_toCompositeOperatorName(n){return Ct[n]}function __PRIVATE_toFieldPathReference(n){return{fieldPath:n.canonicalString()}}function __PRIVATE_fromFieldPathReference(n){return FieldPath$1.fromServerFormat(n.fieldPath)}function __PRIVATE_toFilter(n){return n instanceof FieldFilter?(function(s){if(s.op==="=="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:__PRIVATE_toOperatorName(s.op),value:s.value}}})(n):n instanceof CompositeFilter?(function(s){const o=s.getFilters().map((a=>__PRIVATE_toFilter(a)));return o.length===1?o[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(s.op),filters:o}}})(n):fail(54877,{filter:n})}function __PRIVATE_toDocumentMask(n){const e=[];return n.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function __PRIVATE_isValidResourceName(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,s,o,a,c=SnapshotVersion.min(),u=SnapshotVersion.min(),h=ByteString.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=s,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.yt=e}}function __PRIVATE_fromDbRemoteDocument(n,e){let s;if(e.document)s=__PRIVATE_fromDocument(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=DocumentKey.fromSegments(e.noDocument.path),a=__PRIVATE_fromDbTimestamp(e.noDocument.readTime);s=MutableDocument.newNoDocument(o,a),e.hasCommittedMutations&&s.setHasCommittedMutations()}else{if(!e.unknownDocument)return fail(56709);{const o=DocumentKey.fromSegments(e.unknownDocument.path),a=__PRIVATE_fromDbTimestamp(e.unknownDocument.version);s=MutableDocument.newUnknownDocument(o,a)}}return e.readTime&&s.setReadTime((function(a){const c=new Timestamp(a[0],a[1]);return SnapshotVersion.fromTimestamp(c)})(e.readTime)),s}function __PRIVATE_toDbRemoteDocument(n,e){const s=e.key,o={prefixPath:s.getCollectionPath().popLast().toArray(),collectionGroup:s.collectionGroup,documentId:s.path.lastSegment(),readTime:__PRIVATE_toDbTimestampKey(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document=(function(c,u){return{name:__PRIVATE_toName(c,u.key),fields:u.data.value.mapValue.fields,updateTime:toTimestamp(c,u.version.toTimestamp()),createTime:toTimestamp(c,u.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())o.noDocument={path:s.path.toArray(),readTime:__PRIVATE_toDbTimestamp(e.version)};else{if(!e.isUnknownDocument())return fail(57904,{document:e});o.unknownDocument={path:s.path.toArray(),version:__PRIVATE_toDbTimestamp(e.version)}}return o}function __PRIVATE_toDbTimestampKey(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function __PRIVATE_toDbTimestamp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function __PRIVATE_fromDbTimestamp(n){const e=new Timestamp(n.seconds,n.nanoseconds);return SnapshotVersion.fromTimestamp(e)}function __PRIVATE_fromDbMutationBatch(n,e){const s=(e.baseMutations||[]).map((c=>__PRIVATE_fromMutation(n.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const u=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const h=e.mutations[c+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const o=e.mutations.map((c=>__PRIVATE_fromMutation(n.yt,c))),a=Timestamp.fromMillis(e.localWriteTimeMs);return new MutationBatch(e.batchId,a,s,o)}function __PRIVATE_fromDbTarget(n){const e=__PRIVATE_fromDbTimestamp(n.readTime),s=n.lastLimboFreeSnapshotVersion!==void 0?__PRIVATE_fromDbTimestamp(n.lastLimboFreeSnapshotVersion):SnapshotVersion.min();let o;return o=(function(c){return c.documents!==void 0})(n.query)?(function(c){const u=c.documents.length;return __PRIVATE_hardAssert(u===1,1966,{count:u}),__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(__PRIVATE_fromQueryPath(c.documents[0])))})(n.query):(function(c){return __PRIVATE_queryToTarget(__PRIVATE_convertQueryTargetToQuery(c))})(n.query),new TargetData(o,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,s,ByteString.fromBase64String(n.resumeToken))}function __PRIVATE_toDbTarget(n,e){const s=__PRIVATE_toDbTimestamp(e.snapshotVersion),o=__PRIVATE_toDbTimestamp(e.lastLimboFreeSnapshotVersion);let a;a=__PRIVATE_targetIsDocumentTarget(e.target)?__PRIVATE_toDocumentsTarget(n.yt,e.target):__PRIVATE_toQueryTarget(n.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:__PRIVATE_canonifyTarget(e.target),readTime:s,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:a}}function __PRIVATE_fromBundledQuery(n){const e=__PRIVATE_convertQueryTargetToQuery({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}function __PRIVATE_fromDbDocumentOverlay(n,e){return new Overlay(e.largestBatchId,__PRIVATE_fromMutation(n.yt,e.overlayMutation))}function __PRIVATE_toDbDocumentOverlayKey(n,e){const s=e.path.lastSegment();return[n,__PRIVATE_encodeResourcePath(e.path.popLast()),s]}function __PRIVATE_toDbIndexState(n,e,s,o){return{indexId:n,uid:e,sequenceNumber:s,readTime:__PRIVATE_toDbTimestamp(o.readTime),documentKey:__PRIVATE_encodeResourcePath(o.documentKey.path),largestBatchId:o.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_IndexedDbBundleCache{getBundleMetadata(e,s){return __PRIVATE_bundlesStore(e).get(s).next((o=>{if(o)return(function(c){return{id:c.bundleId,createTime:__PRIVATE_fromDbTimestamp(c.createTime),version:c.version}})(o)}))}saveBundleMetadata(e,s){return __PRIVATE_bundlesStore(e).put((function(a){return{bundleId:a.id,createTime:__PRIVATE_toDbTimestamp(__PRIVATE_fromVersion(a.createTime)),version:a.version}})(s))}getNamedQuery(e,s){return __PRIVATE_namedQueriesStore(e).get(s).next((o=>{if(o)return(function(c){return{name:c.name,query:__PRIVATE_fromBundledQuery(c.bundledQuery),readTime:__PRIVATE_fromDbTimestamp(c.readTime)}})(o)}))}saveNamedQuery(e,s){return __PRIVATE_namedQueriesStore(e).put((function(a){return{name:a.name,readTime:__PRIVATE_toDbTimestamp(__PRIVATE_fromVersion(a.readTime)),bundledQuery:a.bundledQuery}})(s))}}function __PRIVATE_bundlesStore(n){return __PRIVATE_getStore(n,be)}function __PRIVATE_namedQueriesStore(n){return __PRIVATE_getStore(n,Ce)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_IndexedDbDocumentOverlayCache{constructor(e,s){this.serializer=e,this.userId=s}static wt(e,s){const o=s.uid||"";return new __PRIVATE_IndexedDbDocumentOverlayCache(e,o)}getOverlay(e,s){return __PRIVATE_documentOverlayStore(e).get(__PRIVATE_toDbDocumentOverlayKey(this.userId,s)).next((o=>o?__PRIVATE_fromDbDocumentOverlay(this.serializer,o):null))}getOverlays(e,s){const o=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(s,(a=>this.getOverlay(e,a).next((c=>{c!==null&&o.set(a,c)})))).next((()=>o))}saveOverlays(e,s,o){const a=[];return o.forEach(((c,u)=>{const h=new Overlay(s,u);a.push(this.St(e,h))})),PersistencePromise.waitFor(a)}removeOverlaysForBatchId(e,s,o){const a=new Set;s.forEach((u=>a.add(__PRIVATE_encodeResourcePath(u.getCollectionPath()))));const c=[];return a.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,o],[this.userId,u,o+1],!1,!0);c.push(__PRIVATE_documentOverlayStore(e).Z(Ge,h))})),PersistencePromise.waitFor(c)}getOverlaysForCollection(e,s,o){const a=__PRIVATE_newOverlayMap(),c=__PRIVATE_encodeResourcePath(s),u=IDBKeyRange.bound([this.userId,c,o],[this.userId,c,Number.POSITIVE_INFINITY],!0);return __PRIVATE_documentOverlayStore(e).J(Ge,u).next((h=>{for(const m of h){const g=__PRIVATE_fromDbDocumentOverlay(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,s,o,a){const c=__PRIVATE_newOverlayMap();let u;const h=IDBKeyRange.bound([this.userId,s,o],[this.userId,s,Number.POSITIVE_INFINITY],!0);return __PRIVATE_documentOverlayStore(e).ee({index:je,range:h},((m,g,_)=>{const b=__PRIVATE_fromDbDocumentOverlay(this.serializer,g);c.size()<a||b.largestBatchId===u?(c.set(b.getKey(),b),u=b.largestBatchId):_.done()})).next((()=>c))}St(e,s){return __PRIVATE_documentOverlayStore(e).put((function(a,c,u){const[h,m,g]=__PRIVATE_toDbDocumentOverlayKey(c,u.mutation.key);return{userId:c,collectionPath:m,documentId:g,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:toMutation(a.yt,u.mutation)}})(this.serializer,this.userId,s))}}function __PRIVATE_documentOverlayStore(n){return __PRIVATE_getStore(n,Ke)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_IndexedDbGlobalsCache{bt(e){return __PRIVATE_getStore(e,He)}getSessionToken(e){return this.bt(e).get("sessionToken").next((s=>{const o=s?.value;return o?ByteString.fromUint8Array(o):ByteString.EMPTY_BYTE_STRING}))}setSessionToken(e,s){return this.bt(e).put({name:"sessionToken",value:s.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_FirestoreIndexValueWriter{constructor(){}Dt(e,s){this.Ct(e,s),s.vt()}Ct(e,s){if("nullValue"in e)this.Ft(s,5);else if("booleanValue"in e)this.Ft(s,10),s.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(s,15),s.Mt(__PRIVATE_normalizeNumber(e.integerValue));else if("doubleValue"in e){const o=__PRIVATE_normalizeNumber(e.doubleValue);isNaN(o)?this.Ft(s,13):(this.Ft(s,15),__PRIVATE_isNegativeZero(o)?s.Mt(0):s.Mt(o))}else if("timestampValue"in e){let o=e.timestampValue;this.Ft(s,20),typeof o=="string"&&(o=__PRIVATE_normalizeTimestamp(o)),s.xt(`${o.seconds||""}`),s.Mt(o.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,s),this.Nt(s);else if("bytesValue"in e)this.Ft(s,30),s.Bt(__PRIVATE_normalizeByteString(e.bytesValue)),this.Nt(s);else if("referenceValue"in e)this.Lt(e.referenceValue,s);else if("geoPointValue"in e){const o=e.geoPointValue;this.Ft(s,45),s.Mt(o.latitude||0),s.Mt(o.longitude||0)}else"mapValue"in e?__PRIVATE_isMaxValue(e)?this.Ft(s,Number.MAX_SAFE_INTEGER):__PRIVATE_isVectorValue(e)?this.kt(e.mapValue,s):(this.qt(e.mapValue,s),this.Nt(s)):"arrayValue"in e?(this.Qt(e.arrayValue,s),this.Nt(s)):fail(19022,{$t:e})}Ot(e,s){this.Ft(s,25),this.Ut(e,s)}Ut(e,s){s.xt(e)}qt(e,s){const o=e.fields||{};this.Ft(s,55);for(const a of Object.keys(o))this.Ot(a,s),this.Ct(o[a],s)}kt(e,s){const o=e.fields||{};this.Ft(s,53);const a=Et,c=o[a].arrayValue?.values?.length||0;this.Ft(s,15),s.Mt(__PRIVATE_normalizeNumber(c)),this.Ot(a,s),this.Ct(o[a],s)}Qt(e,s){const o=e.values||[];this.Ft(s,50);for(const a of o)this.Ct(a,s)}Lt(e,s){this.Ft(s,37),DocumentKey.fromName(e).path.forEach((o=>{this.Ft(s,60),this.Ut(o,s)}))}Ft(e,s){e.Mt(s)}Nt(e){e.Mt(2)}}__PRIVATE_FirestoreIndexValueWriter.Kt=new __PRIVATE_FirestoreIndexValueWriter;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt=255;function __PRIVATE_numberOfLeadingZerosInByte(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function __PRIVATE_unsignedNumLength(n){const e=64-(function(o){let a=0;for(let c=0;c<8;++c){const u=__PRIVATE_numberOfLeadingZerosInByte(255&o[c]);if(a+=u,u!==8)break}return a})(n);return Math.ceil(e/8)}class __PRIVATE_OrderedCodeWriter{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const s=e[Symbol.iterator]();let o=s.next();for(;!o.done;)this.Gt(o.value),o=s.next();this.zt()}jt(e){const s=e[Symbol.iterator]();let o=s.next();for(;!o.done;)this.Jt(o.value),o=s.next();this.Ht()}Yt(e){for(const s of e){const o=s.charCodeAt(0);if(o<128)this.Gt(o);else if(o<2048)this.Gt(960|o>>>6),this.Gt(128|63&o);else if(s<"\uD800"||"\uDBFF"<s)this.Gt(480|o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o);else{const a=s.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const s of e){const o=s.charCodeAt(0);if(o<128)this.Jt(o);else if(o<2048)this.Jt(960|o>>>6),this.Jt(128|63&o);else if(s<"\uD800"||"\uDBFF"<s)this.Jt(480|o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o);else{const a=s.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const s=this.en(e),o=__PRIVATE_unsignedNumLength(s);this.tn(1+o),this.buffer[this.position++]=255&o;for(let a=s.length-o;a<s.length;++a)this.buffer[this.position++]=255&s[a]}nn(e){const s=this.en(e),o=__PRIVATE_unsignedNumLength(s);this.tn(1+o),this.buffer[this.position++]=~(255&o);for(let a=s.length-o;a<s.length;++a)this.buffer[this.position++]=~(255&s[a])}rn(){this.sn(vt),this.sn(255)}_n(){this.an(vt),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const s=(function(c){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,c,!1),new Uint8Array(u.buffer)})(e),o=!!(128&s[0]);s[0]^=o?255:128;for(let a=1;a<s.length;++a)s[a]^=o?255:0;return s}Gt(e){const s=255&e;s===0?(this.sn(0),this.sn(255)):s===vt?(this.sn(vt),this.sn(0)):this.sn(s)}Jt(e){const s=255&e;s===0?(this.an(0),this.an(255)):s===vt?(this.an(vt),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const s=e+this.position;if(s<=this.buffer.length)return;let o=2*this.buffer.length;o<s&&(o=s);const a=new Uint8Array(o);a.set(this.buffer),this.buffer=a}}class __PRIVATE_AscendingIndexByteEncoder{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class __PRIVATE_DescendingIndexByteEncoder{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class __PRIVATE_IndexByteEncoder{constructor(){this.cn=new __PRIVATE_OrderedCodeWriter,this.ln=new __PRIVATE_AscendingIndexByteEncoder(this.cn),this.hn=new __PRIVATE_DescendingIndexByteEncoder(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_IndexEntry{constructor(e,s,o,a){this.Tn=e,this.In=s,this.En=o,this.dn=a}An(){const e=this.dn.length,s=e===0||this.dn[e-1]===255?e+1:e,o=new Uint8Array(s);return o.set(this.dn,0),s!==e?o.set([0],this.dn.length):++o[o.length-1],new __PRIVATE_IndexEntry(this.Tn,this.In,this.En,o)}Rn(e,s,o){return{indexId:this.Tn,uid:e,arrayValue:__PRIVATE_encodeKeySafeBytes(this.En),directionalValue:__PRIVATE_encodeKeySafeBytes(this.dn),orderedDocumentKey:__PRIVATE_encodeKeySafeBytes(s),documentKey:o.path.toArray()}}Vn(e,s,o){const a=this.Rn(e,s,o);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function __PRIVATE_indexEntryComparator(n,e){let s=n.Tn-e.Tn;return s!==0?s:(s=__PRIVATE_compareByteArrays(n.En,e.En),s!==0?s:(s=__PRIVATE_compareByteArrays(n.dn,e.dn),s!==0?s:DocumentKey.comparator(n.In,e.In)))}function __PRIVATE_compareByteArrays(n,e){for(let s=0;s<n.length&&s<e.length;++s){const o=n[s]-e[s];if(o!==0)return o}return n.length-e.length}function __PRIVATE_encodeKeySafeBytes(n){return isSafariOrWebkit()?(function(s){let o="";for(let a=0;a<s.length;a++)o+=String.fromCharCode(s[a]);return o})(n):n}function __PRIVATE_decodeKeySafeBytes(n){return typeof n!="string"?n:(function(s){const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o})(n)}class __PRIVATE_TargetIndexMatcher{constructor(e){this.mn=new SortedSet(((s,o)=>FieldPath$1.comparator(s.field,o.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const s of e.filters){const o=s;o.isInequality()?this.mn=this.mn.add(o):this.gn.push(o)}}get pn(){return this.mn.size>1}yn(e){if(__PRIVATE_hardAssert(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const s=__PRIVATE_fieldIndexGetArraySegment(e);if(s!==void 0&&!this.wn(s))return!1;const o=__PRIVATE_fieldIndexGetDirectionalSegments(e);let a=new Set,c=0,u=0;for(;c<o.length&&this.wn(o[c]);++c)a=a.add(o[c].fieldPath.canonicalString());if(c===o.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!a.has(h.field.canonicalString())){const m=o[c];if(!this.Sn(h,m)||!this.bn(this.fn[u++],m))return!1}++c}for(;c<o.length;++c){const h=o[c];if(u>=this.fn.length||!this.bn(this.fn[u++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new SortedSet(FieldPath$1.comparator);const s=[];for(const o of this.gn)if(!o.field.isKeyField())if(o.op==="array-contains"||o.op==="array-contains-any")s.push(new IndexSegment(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),s.push(new IndexSegment(o.field,0))}for(const o of this.fn)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),s.push(new IndexSegment(o.field,o.dir==="asc"?0:1)));return new FieldIndex(FieldIndex.UNKNOWN_ID,this.collectionId,s,IndexState.empty())}wn(e){for(const s of this.gn)if(this.Sn(s,e))return!0;return!1}Sn(e,s){if(e===void 0||!e.field.isEqual(s.fieldPath))return!1;const o=e.op==="array-contains"||e.op==="array-contains-any";return s.kind===2===o}bn(e,s){return!!e.field.isEqual(s.fieldPath)&&(s.kind===0&&e.dir==="asc"||s.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_computeInExpansion(n){if(__PRIVATE_hardAssert(n instanceof FieldFilter||n instanceof CompositeFilter,20012),n instanceof FieldFilter){if(n instanceof __PRIVATE_InFilter){const s=n.value.arrayValue?.values?.map((o=>FieldFilter.create(n.field,"==",o)))||[];return CompositeFilter.create(s,"or")}return n}const e=n.filters.map((s=>__PRIVATE_computeInExpansion(s)));return CompositeFilter.create(e,n.op)}function __PRIVATE_getDnfTerms(n){if(n.getFilters().length===0)return[];const e=__PRIVATE_computeDistributedNormalForm(__PRIVATE_computeInExpansion(n));return __PRIVATE_hardAssert(__PRIVATE_isDisjunctiveNormalForm(e),7391),__PRIVATE_isSingleFieldFilter(e)||__PRIVATE_isFlatConjunction(e)?[e]:e.getFilters()}function __PRIVATE_isSingleFieldFilter(n){return n instanceof FieldFilter}function __PRIVATE_isFlatConjunction(n){return n instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(n)}function __PRIVATE_isDisjunctiveNormalForm(n){return __PRIVATE_isSingleFieldFilter(n)||__PRIVATE_isFlatConjunction(n)||(function(s){if(s instanceof CompositeFilter&&__PRIVATE_compositeFilterIsDisjunction(s)){for(const o of s.getFilters())if(!__PRIVATE_isSingleFieldFilter(o)&&!__PRIVATE_isFlatConjunction(o))return!1;return!0}return!1})(n)}function __PRIVATE_computeDistributedNormalForm(n){if(__PRIVATE_hardAssert(n instanceof FieldFilter||n instanceof CompositeFilter,34018),n instanceof FieldFilter)return n;if(n.filters.length===1)return __PRIVATE_computeDistributedNormalForm(n.filters[0]);const e=n.filters.map((o=>__PRIVATE_computeDistributedNormalForm(o)));let s=CompositeFilter.create(e,n.op);return s=__PRIVATE_applyAssociation(s),__PRIVATE_isDisjunctiveNormalForm(s)?s:(__PRIVATE_hardAssert(s instanceof CompositeFilter,64498),__PRIVATE_hardAssert(__PRIVATE_compositeFilterIsConjunction(s),40251),__PRIVATE_hardAssert(s.filters.length>1,57927),s.filters.reduce(((o,a)=>__PRIVATE_applyDistribution(o,a))))}function __PRIVATE_applyDistribution(n,e){let s;return __PRIVATE_hardAssert(n instanceof FieldFilter||n instanceof CompositeFilter,38388),__PRIVATE_hardAssert(e instanceof FieldFilter||e instanceof CompositeFilter,25473),s=n instanceof FieldFilter?e instanceof FieldFilter?(function(a,c){return CompositeFilter.create([a,c],"and")})(n,e):__PRIVATE_applyDistributionFieldAndCompositeFilters(n,e):e instanceof FieldFilter?__PRIVATE_applyDistributionFieldAndCompositeFilters(e,n):(function(a,c){if(__PRIVATE_hardAssert(a.filters.length>0&&c.filters.length>0,48005),__PRIVATE_compositeFilterIsConjunction(a)&&__PRIVATE_compositeFilterIsConjunction(c))return __PRIVATE_compositeFilterWithAddedFilters(a,c.getFilters());const u=__PRIVATE_compositeFilterIsDisjunction(a)?a:c,h=__PRIVATE_compositeFilterIsDisjunction(a)?c:a,m=u.filters.map((g=>__PRIVATE_applyDistribution(g,h)));return CompositeFilter.create(m,"or")})(n,e),__PRIVATE_applyAssociation(s)}function __PRIVATE_applyDistributionFieldAndCompositeFilters(n,e){if(__PRIVATE_compositeFilterIsConjunction(e))return __PRIVATE_compositeFilterWithAddedFilters(e,n.getFilters());{const s=e.filters.map((o=>__PRIVATE_applyDistribution(n,o)));return CompositeFilter.create(s,"or")}}function __PRIVATE_applyAssociation(n){if(__PRIVATE_hardAssert(n instanceof FieldFilter||n instanceof CompositeFilter,11850),n instanceof FieldFilter)return n;const e=n.getFilters();if(e.length===1)return __PRIVATE_applyAssociation(e[0]);if(__PRIVATE_compositeFilterIsFlat(n))return n;const s=e.map((a=>__PRIVATE_applyAssociation(a))),o=[];return s.forEach((a=>{a instanceof FieldFilter?o.push(a):a instanceof CompositeFilter&&(a.op===n.op?o.push(...a.filters):o.push(a))})),o.length===1?o[0]:CompositeFilter.create(o,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,s){return this.Cn.add(s),PersistencePromise.resolve()}getCollectionParents(e,s){return PersistencePromise.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return PersistencePromise.resolve()}deleteFieldIndex(e,s){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,s){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,s){return PersistencePromise.resolve(null)}getIndexType(e,s){return PersistencePromise.resolve(0)}getFieldIndexes(e,s){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,s){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,s){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,s,o){return PersistencePromise.resolve()}updateIndexEntries(e,s){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const s=e.lastSegment(),o=e.popLast(),a=this.index[s]||new SortedSet(ResourcePath.comparator),c=!a.has(o);return this.index[s]=a.add(o),c}has(e){const s=e.lastSegment(),o=e.popLast(),a=this.index[s];return a&&a.has(o)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="IndexedDbIndexManager",Mt=new Uint8Array(0);class __PRIVATE_IndexedDbIndexManager{constructor(e,s){this.databaseId=s,this.vn=new __PRIVATE_MemoryCollectionParentIndex,this.Fn=new ObjectMap((o=>__PRIVATE_canonifyTarget(o)),((o,a)=>__PRIVATE_targetEquals(o,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,s){if(!this.vn.has(s)){const o=s.lastSegment(),a=s.popLast();e.addOnCommittedListener((()=>{this.vn.add(s)}));const c={collectionId:o,parent:__PRIVATE_encodeResourcePath(a)};return __PRIVATE_collectionParentsStore(e).put(c)}return PersistencePromise.resolve()}getCollectionParents(e,s){const o=[],a=IDBKeyRange.bound([s,""],[__PRIVATE_immediateSuccessor(s),""],!1,!0);return __PRIVATE_collectionParentsStore(e).J(a).next((c=>{for(const u of c){if(u.collectionId!==s)break;o.push(__PRIVATE_decodeResourcePath(u.parent))}return o}))}addFieldIndex(e,s){const o=__PRIVATE_indexConfigurationStore(e),a=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(s);delete a.indexId;const c=o.add(a);if(s.indexState){const u=__PRIVATE_indexStateStore(e);return c.next((h=>{u.put(__PRIVATE_toDbIndexState(h,this.uid,s.indexState.sequenceNumber,s.indexState.offset))}))}return c.next()}deleteFieldIndex(e,s){const o=__PRIVATE_indexConfigurationStore(e),a=__PRIVATE_indexStateStore(e),c=__PRIVATE_indexEntriesStore(e);return o.delete(s.indexId).next((()=>a.delete(IDBKeyRange.bound([s.indexId],[s.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([s.indexId],[s.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const s=__PRIVATE_indexConfigurationStore(e),o=__PRIVATE_indexEntriesStore(e),a=__PRIVATE_indexStateStore(e);return s.Z().next((()=>o.Z())).next((()=>a.Z()))}createTargetIndexes(e,s){return PersistencePromise.forEach(this.Mn(s),(o=>this.getIndexType(e,o).next((a=>{if(a===0||a===1){const c=new __PRIVATE_TargetIndexMatcher(o).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,s){const o=__PRIVATE_indexEntriesStore(e);let a=!0;const c=new Map;return PersistencePromise.forEach(this.Mn(s),(u=>this.xn(e,u).next((h=>{a&&(a=!!h),c.set(u,h)})))).next((()=>{if(a){let u=__PRIVATE_documentKeySet();const h=[];return PersistencePromise.forEach(c,((m,g)=>{__PRIVATE_logDebug(Ft,`Using index ${(function(pn){return`id=${pn.indexId}|cg=${pn.collectionGroup}|f=${pn.fields.map((wn=>`${wn.fieldPath}:${wn.kind}`)).join(",")}`})(m)} to execute ${__PRIVATE_canonifyTarget(s)}`);const _=(function(pn,wn){const V=__PRIVATE_fieldIndexGetArraySegment(wn);if(V===void 0)return null;for(const bn of __PRIVATE_targetGetFieldFiltersForPath(pn,V.fieldPath))switch(bn.op){case"array-contains-any":return bn.value.arrayValue.values||[];case"array-contains":return[bn.value]}return null})(g,m),b=(function(pn,wn){const V=new Map;for(const bn of __PRIVATE_fieldIndexGetDirectionalSegments(wn))for(const wt of __PRIVATE_targetGetFieldFiltersForPath(pn,bn.fieldPath))switch(wt.op){case"==":case"in":V.set(bn.fieldPath.canonicalString(),wt.value);break;case"not-in":case"!=":return V.set(bn.fieldPath.canonicalString(),wt.value),Array.from(V.values())}return null})(g,m),T=(function(pn,wn){const V=[];let bn=!0;for(const wt of __PRIVATE_fieldIndexGetDirectionalSegments(wn)){const jt=wt.kind===0?__PRIVATE_targetGetAscendingBound(pn,wt.fieldPath,pn.startAt):__PRIVATE_targetGetDescendingBound(pn,wt.fieldPath,pn.startAt);V.push(jt.value),bn&&(bn=jt.inclusive)}return new Bound(V,bn)})(g,m),A=(function(pn,wn){const V=[];let bn=!0;for(const wt of __PRIVATE_fieldIndexGetDirectionalSegments(wn)){const jt=wt.kind===0?__PRIVATE_targetGetDescendingBound(pn,wt.fieldPath,pn.endAt):__PRIVATE_targetGetAscendingBound(pn,wt.fieldPath,pn.endAt);V.push(jt.value),bn&&(bn=jt.inclusive)}return new Bound(V,bn)})(g,m),R=this.On(m,g,T),w=this.On(m,g,A),D=this.Nn(m,g,b),fn=this.Bn(m.indexId,_,R,T.inclusive,w,A.inclusive,D);return PersistencePromise.forEach(fn,(yn=>o.Y(yn,s.limit).next((pn=>{pn.forEach((wn=>{const V=DocumentKey.fromSegments(wn.documentKey);u.has(V)||(u=u.add(V),h.push(V))}))}))))})).next((()=>h))}return PersistencePromise.resolve(null)}))}Mn(e){let s=this.Fn.get(e);return s||(e.filters.length===0?s=[e]:s=__PRIVATE_getDnfTerms(CompositeFilter.create(e.filters,"and")).map((o=>__PRIVATE_newTarget(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,s),s)}Bn(e,s,o,a,c,u,h){const m=(s!=null?s.length:1)*Math.max(o.length,c.length),g=m/(s!=null?s.length:1),_=[];for(let b=0;b<m;++b){const T=s?this.Ln(s[b/g]):Mt,A=this.kn(e,T,o[b%g],a),R=this.qn(e,T,c[b%g],u),w=h.map((D=>this.kn(e,T,D,!0)));_.push(...this.createRange(A,R,w))}return _}kn(e,s,o,a){const c=new __PRIVATE_IndexEntry(e,DocumentKey.empty(),s,o);return a?c:c.An()}qn(e,s,o,a){const c=new __PRIVATE_IndexEntry(e,DocumentKey.empty(),s,o);return a?c.An():c}xn(e,s){const o=new __PRIVATE_TargetIndexMatcher(s),a=s.collectionGroup!=null?s.collectionGroup:s.path.lastSegment();return this.getFieldIndexes(e,a).next((c=>{let u=null;for(const h of c)o.yn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(e,s){let o=2;const a=this.Mn(s);return PersistencePromise.forEach(a,(c=>this.xn(e,c).next((u=>{u?o!==0&&u.fields.length<(function(m){let g=new SortedSet(FieldPath$1.comparator),_=!1;for(const b of m.filters)for(const T of b.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?_=!0:g=g.add(T.field));for(const b of m.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(_?1:0)})(c)&&(o=1):o=0})))).next((()=>(function(u){return u.limit!==null})(s)&&a.length>1&&o===2?1:o))}Qn(e,s){const o=new __PRIVATE_IndexByteEncoder;for(const a of __PRIVATE_fieldIndexGetDirectionalSegments(e)){const c=s.data.field(a.fieldPath);if(c==null)return null;const u=o.Pn(a.kind);__PRIVATE_FirestoreIndexValueWriter.Kt.Dt(c,u)}return o.un()}Ln(e){const s=new __PRIVATE_IndexByteEncoder;return __PRIVATE_FirestoreIndexValueWriter.Kt.Dt(e,s.Pn(0)),s.un()}$n(e,s){const o=new __PRIVATE_IndexByteEncoder;return __PRIVATE_FirestoreIndexValueWriter.Kt.Dt(__PRIVATE_refValue(this.databaseId,s),o.Pn((function(c){const u=__PRIVATE_fieldIndexGetDirectionalSegments(c);return u.length===0?0:u[u.length-1].kind})(e))),o.un()}Nn(e,s,o){if(o===null)return[];let a=[];a.push(new __PRIVATE_IndexByteEncoder);let c=0;for(const u of __PRIVATE_fieldIndexGetDirectionalSegments(e)){const h=o[c++];for(const m of a)if(this.Un(s,u.fieldPath)&&isArray$1(h))a=this.Kn(a,u,h);else{const g=m.Pn(u.kind);__PRIVATE_FirestoreIndexValueWriter.Kt.Dt(h,g)}}return this.Wn(a)}On(e,s,o){return this.Nn(e,s,o.position)}Wn(e){const s=[];for(let o=0;o<e.length;++o)s[o]=e[o].un();return s}Kn(e,s,o){const a=[...e],c=[];for(const u of o.arrayValue.values||[])for(const h of a){const m=new __PRIVATE_IndexByteEncoder;m.seed(h.un()),__PRIVATE_FirestoreIndexValueWriter.Kt.Dt(u,m.Pn(s.kind)),c.push(m)}return c}Un(e,s){return!!e.filters.find((o=>o instanceof FieldFilter&&o.field.isEqual(s)&&(o.op==="in"||o.op==="not-in")))}getFieldIndexes(e,s){const o=__PRIVATE_indexConfigurationStore(e),a=__PRIVATE_indexStateStore(e);return(s?o.J(xe,IDBKeyRange.bound(s,s)):o.J()).next((c=>{const u=[];return PersistencePromise.forEach(c,(h=>a.get([h.indexId,this.uid]).next((m=>{u.push((function(_,b){const T=b?new IndexState(b.sequenceNumber,new IndexOffset(__PRIVATE_fromDbTimestamp(b.readTime),new DocumentKey(__PRIVATE_decodeResourcePath(b.documentKey)),b.largestBatchId)):IndexState.empty(),A=_.fields.map((([R,w])=>new IndexSegment(FieldPath$1.fromServerFormat(R),w)));return new FieldIndex(_.indexId,_.collectionGroup,A,T)})(h,m))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((s=>s.length===0?null:(s.sort(((o,a)=>{const c=o.indexState.sequenceNumber-a.indexState.sequenceNumber;return c!==0?c:__PRIVATE_primitiveComparator(o.collectionGroup,a.collectionGroup)})),s[0].collectionGroup)))}updateCollectionGroup(e,s,o){const a=__PRIVATE_indexConfigurationStore(e),c=__PRIVATE_indexStateStore(e);return this.Gn(e).next((u=>a.J(xe,IDBKeyRange.bound(s,s)).next((h=>PersistencePromise.forEach(h,(m=>c.put(__PRIVATE_toDbIndexState(m.indexId,this.uid,u,o))))))))}updateIndexEntries(e,s){const o=new Map;return PersistencePromise.forEach(s,((a,c)=>{const u=o.get(a.collectionGroup);return(u?PersistencePromise.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((h=>(o.set(a.collectionGroup,h),PersistencePromise.forEach(h,(m=>this.zn(e,a,m).next((g=>{const _=this.jn(c,m);return g.isEqual(_)?PersistencePromise.resolve():this.Jn(e,c,m,g,_)})))))))}))}Hn(e,s,o,a){return __PRIVATE_indexEntriesStore(e).put(a.Rn(this.uid,this.$n(o,s.key),s.key))}Yn(e,s,o,a){return __PRIVATE_indexEntriesStore(e).delete(a.Vn(this.uid,this.$n(o,s.key),s.key))}zn(e,s,o){const a=__PRIVATE_indexEntriesStore(e);let c=new SortedSet(__PRIVATE_indexEntryComparator);return a.ee({index:$e,range:IDBKeyRange.only([o.indexId,this.uid,__PRIVATE_encodeKeySafeBytes(this.$n(o,s))])},((u,h)=>{c=c.add(new __PRIVATE_IndexEntry(o.indexId,s,__PRIVATE_decodeKeySafeBytes(h.arrayValue),__PRIVATE_decodeKeySafeBytes(h.directionalValue)))})).next((()=>c))}jn(e,s){let o=new SortedSet(__PRIVATE_indexEntryComparator);const a=this.Qn(s,e);if(a==null)return o;const c=__PRIVATE_fieldIndexGetArraySegment(s);if(c!=null){const u=e.data.field(c.fieldPath);if(isArray$1(u))for(const h of u.arrayValue.values||[])o=o.add(new __PRIVATE_IndexEntry(s.indexId,e.key,this.Ln(h),a))}else o=o.add(new __PRIVATE_IndexEntry(s.indexId,e.key,Mt,a));return o}Jn(e,s,o,a,c){__PRIVATE_logDebug(Ft,"Updating index entries for document '%s'",s.key);const u=[];return(function(m,g,_,b,T){const A=m.getIterator(),R=g.getIterator();let w=__PRIVATE_advanceIterator(A),D=__PRIVATE_advanceIterator(R);for(;w||D;){let fn=!1,yn=!1;if(w&&D){const pn=_(w,D);pn<0?yn=!0:pn>0&&(fn=!0)}else w!=null?yn=!0:fn=!0;fn?(b(D),D=__PRIVATE_advanceIterator(R)):yn?(T(w),w=__PRIVATE_advanceIterator(A)):(w=__PRIVATE_advanceIterator(A),D=__PRIVATE_advanceIterator(R))}})(a,c,__PRIVATE_indexEntryComparator,(h=>{u.push(this.Hn(e,s,o,h))}),(h=>{u.push(this.Yn(e,s,o,h))})),PersistencePromise.waitFor(u)}Gn(e){let s=1;return __PRIVATE_indexStateStore(e).ee({index:Le,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((o,a,c)=>{c.done(),s=a.sequenceNumber+1})).next((()=>s))}createRange(e,s,o){o=o.sort(((u,h)=>__PRIVATE_indexEntryComparator(u,h))).filter(((u,h,m)=>!h||__PRIVATE_indexEntryComparator(u,m[h-1])!==0));const a=[];a.push(e);for(const u of o){const h=__PRIVATE_indexEntryComparator(u,e),m=__PRIVATE_indexEntryComparator(u,s);if(h===0)a[0]=e.An();else if(h>0&&m<0)a.push(u),a.push(u.An());else if(m>0)break}a.push(s);const c=[];for(let u=0;u<a.length;u+=2){if(this.Zn(a[u],a[u+1]))return[];const h=a[u].Vn(this.uid,Mt,DocumentKey.empty()),m=a[u+1].Vn(this.uid,Mt,DocumentKey.empty());c.push(IDBKeyRange.bound(h,m))}return c}Zn(e,s){return __PRIVATE_indexEntryComparator(e,s)>0}getMinOffsetFromCollectionGroup(e,s){return this.getFieldIndexes(e,s).next(__PRIVATE_getMinOffsetFromFieldIndexes)}getMinOffset(e,s){return PersistencePromise.mapArray(this.Mn(s),(o=>this.xn(e,o).next((a=>a||fail(44426))))).next(__PRIVATE_getMinOffsetFromFieldIndexes)}}function __PRIVATE_collectionParentsStore(n){return __PRIVATE_getStore(n,pe)}function __PRIVATE_indexEntriesStore(n){return __PRIVATE_getStore(n,qe)}function __PRIVATE_indexConfigurationStore(n){return __PRIVATE_getStore(n,Fe)}function __PRIVATE_indexStateStore(n){return __PRIVATE_getStore(n,Ne)}function __PRIVATE_getMinOffsetFromFieldIndexes(n){__PRIVATE_hardAssert(n.length!==0,28825);let e=n[0].indexState.offset,s=e.largestBatchId;for(let o=1;o<n.length;o++){const a=n[o].indexState.offset;__PRIVATE_indexOffsetComparator(a,e)<0&&(e=a),s<a.largestBatchId&&(s=a.largestBatchId)}return new IndexOffset(e.readTime,e.documentKey,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ot=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function removeMutationBatch(n,e,s){const o=n.store(te),a=n.store(oe),c=[],u=IDBKeyRange.only(s.batchId);let h=0;const m=o.ee({range:u},((_,b,T)=>(h++,T.delete())));c.push(m.next((()=>{__PRIVATE_hardAssert(h===1,47070,{batchId:s.batchId})})));const g=[];for(const _ of s.mutations){const b=__PRIVATE_newDbDocumentMutationKey(e,_.key.path,s.batchId);c.push(a.delete(b)),g.push(_.key)}return PersistencePromise.waitFor(c).next((()=>g))}function __PRIVATE_dbDocumentSize(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw fail(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Ot,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);class __PRIVATE_IndexedDbMutationQueue{constructor(e,s,o,a){this.userId=e,this.serializer=s,this.indexManager=o,this.referenceDelegate=a,this.Xn={}}static wt(e,s,o,a){__PRIVATE_hardAssert(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new __PRIVATE_IndexedDbMutationQueue(c,s,o,a)}checkEmpty(e){let s=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return __PRIVATE_mutationsStore(e).ee({index:re,range:o},((a,c,u)=>{s=!1,u.done()})).next((()=>s))}addMutationBatch(e,s,o,a){const c=__PRIVATE_documentMutationsStore(e),u=__PRIVATE_mutationsStore(e);return u.add({}).next((h=>{__PRIVATE_hardAssert(typeof h=="number",49019);const m=new MutationBatch(h,s,o,a),g=(function(A,R,w){const D=w.baseMutations.map((yn=>toMutation(A.yt,yn))),fn=w.mutations.map((yn=>toMutation(A.yt,yn)));return{userId:R,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:D,mutations:fn}})(this.serializer,this.userId,m),_=[];let b=new SortedSet(((T,A)=>__PRIVATE_primitiveComparator(T.canonicalString(),A.canonicalString())));for(const T of a){const A=__PRIVATE_newDbDocumentMutationKey(this.userId,T.key.path,h);b=b.add(T.key.path.popLast()),_.push(u.put(g)),_.push(c.put(A,se))}return b.forEach((T=>{_.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Xn[h]=m.keys()})),PersistencePromise.waitFor(_).next((()=>m))}))}lookupMutationBatch(e,s){return __PRIVATE_mutationsStore(e).get(s).next((o=>o?(__PRIVATE_hardAssert(o.userId===this.userId,48,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),__PRIVATE_fromDbMutationBatch(this.serializer,o)):null))}er(e,s){return this.Xn[s]?PersistencePromise.resolve(this.Xn[s]):this.lookupMutationBatch(e,s).next((o=>{if(o){const a=o.keys();return this.Xn[s]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,s){const o=s+1,a=IDBKeyRange.lowerBound([this.userId,o]);let c=null;return __PRIVATE_mutationsStore(e).ee({index:re,range:a},((u,h,m)=>{h.userId===this.userId&&(__PRIVATE_hardAssert(h.batchId>=o,47524,{tr:o}),c=__PRIVATE_fromDbMutationBatch(this.serializer,h)),m.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const s=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=j;return __PRIVATE_mutationsStore(e).ee({index:re,range:s,reverse:!0},((a,c,u)=>{o=c.batchId,u.done()})).next((()=>o))}getAllMutationBatches(e){const s=IDBKeyRange.bound([this.userId,j],[this.userId,Number.POSITIVE_INFINITY]);return __PRIVATE_mutationsStore(e).J(re,s).next((o=>o.map((a=>__PRIVATE_fromDbMutationBatch(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,s){const o=__PRIVATE_newDbDocumentMutationPrefixForPath(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=[];return __PRIVATE_documentMutationsStore(e).ee({range:a},((u,h,m)=>{const[g,_,b]=u,T=__PRIVATE_decodeResourcePath(_);if(g===this.userId&&s.path.isEqual(T))return __PRIVATE_mutationsStore(e).get(b).next((A=>{if(!A)throw fail(61480,{nr:u,batchId:b});__PRIVATE_hardAssert(A.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:A.userId,batchId:b}),c.push(__PRIVATE_fromDbMutationBatch(this.serializer,A))}));m.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,s){let o=new SortedSet(__PRIVATE_primitiveComparator);const a=[];return s.forEach((c=>{const u=__PRIVATE_newDbDocumentMutationPrefixForPath(this.userId,c.path),h=IDBKeyRange.lowerBound(u),m=__PRIVATE_documentMutationsStore(e).ee({range:h},((g,_,b)=>{const[T,A,R]=g,w=__PRIVATE_decodeResourcePath(A);T===this.userId&&c.path.isEqual(w)?o=o.add(R):b.done()}));a.push(m)})),PersistencePromise.waitFor(a).next((()=>this.rr(e,o)))}getAllMutationBatchesAffectingQuery(e,s){const o=s.path,a=o.length+1,c=__PRIVATE_newDbDocumentMutationPrefixForPath(this.userId,o),u=IDBKeyRange.lowerBound(c);let h=new SortedSet(__PRIVATE_primitiveComparator);return __PRIVATE_documentMutationsStore(e).ee({range:u},((m,g,_)=>{const[b,T,A]=m,R=__PRIVATE_decodeResourcePath(T);b===this.userId&&o.isPrefixOf(R)?R.length===a&&(h=h.add(A)):_.done()})).next((()=>this.rr(e,h)))}rr(e,s){const o=[],a=[];return s.forEach((c=>{a.push(__PRIVATE_mutationsStore(e).get(c).next((u=>{if(u===null)throw fail(35274,{batchId:c});__PRIVATE_hardAssert(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:c}),o.push(__PRIVATE_fromDbMutationBatch(this.serializer,u))})))})),PersistencePromise.waitFor(a).next((()=>o))}removeMutationBatch(e,s){return removeMutationBatch(e.le,this.userId,s).next((o=>(e.addOnCommittedListener((()=>{this.ir(s.batchId)})),PersistencePromise.forEach(o,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((s=>{if(!s)return PersistencePromise.resolve();const o=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return __PRIVATE_documentMutationsStore(e).ee({range:o},((c,u,h)=>{if(c[0]===this.userId){const m=__PRIVATE_decodeResourcePath(c[1]);a.push(m)}else h.done()})).next((()=>{__PRIVATE_hardAssert(a.length===0,56720,{sr:a.map((c=>c.canonicalString()))})}))}))}containsKey(e,s){return __PRIVATE_mutationQueueContainsKey(e,this.userId,s)}_r(e){return __PRIVATE_mutationQueuesStore(e).get(this.userId).next((s=>s||{userId:this.userId,lastAcknowledgedBatchId:j,lastStreamToken:""}))}}function __PRIVATE_mutationQueueContainsKey(n,e,s){const o=__PRIVATE_newDbDocumentMutationPrefixForPath(e,s.path),a=o[1],c=IDBKeyRange.lowerBound(o);let u=!1;return __PRIVATE_documentMutationsStore(n).ee({range:c,X:!0},((h,m,g)=>{const[_,b,T]=h;_===e&&b===a&&(u=!0),g.done()})).next((()=>u))}function __PRIVATE_mutationsStore(n){return __PRIVATE_getStore(n,te)}function __PRIVATE_documentMutationsStore(n){return __PRIVATE_getStore(n,oe)}function __PRIVATE_mutationQueuesStore(n){return __PRIVATE_getStore(n,X)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new __PRIVATE_TargetIdGenerator(0)}static cr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_IndexedDbTargetCache{constructor(e,s){this.referenceDelegate=e,this.serializer=s}allocateTargetId(e){return this.lr(e).next((s=>{const o=new __PRIVATE_TargetIdGenerator(s.highestTargetId);return s.highestTargetId=o.next(),this.hr(e,s).next((()=>s.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((s=>SnapshotVersion.fromTimestamp(new Timestamp(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((s=>s.highestListenSequenceNumber))}setTargetsMetadata(e,s,o){return this.lr(e).next((a=>(a.highestListenSequenceNumber=s,o&&(a.lastRemoteSnapshotVersion=o.toTimestamp()),s>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=s),this.hr(e,a))))}addTargetData(e,s){return this.Pr(e,s).next((()=>this.lr(e).next((o=>(o.targetCount+=1,this.Tr(s,o),this.hr(e,o))))))}updateTargetData(e,s){return this.Pr(e,s)}removeTargetData(e,s){return this.removeMatchingKeysForTargetId(e,s.targetId).next((()=>__PRIVATE_targetsStore(e).delete(s.targetId))).next((()=>this.lr(e))).next((o=>(__PRIVATE_hardAssert(o.targetCount>0,8065),o.targetCount-=1,this.hr(e,o))))}removeTargets(e,s,o){let a=0;const c=[];return __PRIVATE_targetsStore(e).ee(((u,h)=>{const m=__PRIVATE_fromDbTarget(h);m.sequenceNumber<=s&&o.get(m.targetId)===null&&(a++,c.push(this.removeTargetData(e,m)))})).next((()=>PersistencePromise.waitFor(c))).next((()=>a))}forEachTarget(e,s){return __PRIVATE_targetsStore(e).ee(((o,a)=>{const c=__PRIVATE_fromDbTarget(a);s(c)}))}lr(e){return __PRIVATE_globalTargetStore(e).get(fe$1).next((s=>(__PRIVATE_hardAssert(s!==null,2888),s)))}hr(e,s){return __PRIVATE_globalTargetStore(e).put(fe$1,s)}Pr(e,s){return __PRIVATE_targetsStore(e).put(__PRIVATE_toDbTarget(this.serializer,s))}Tr(e,s){let o=!1;return e.targetId>s.highestTargetId&&(s.highestTargetId=e.targetId,o=!0),e.sequenceNumber>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.lr(e).next((s=>s.targetCount))}getTargetData(e,s){const o=__PRIVATE_canonifyTarget(s),a=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let c=null;return __PRIVATE_targetsStore(e).ee({range:a,index:Ee},((u,h,m)=>{const g=__PRIVATE_fromDbTarget(h);__PRIVATE_targetEquals(s,g.target)&&(c=g,m.done())})).next((()=>c))}addMatchingKeys(e,s,o){const a=[],c=__PRIVATE_documentTargetStore(e);return s.forEach((u=>{const h=__PRIVATE_encodeResourcePath(u.path);a.push(c.put({targetId:o,path:h})),a.push(this.referenceDelegate.addReference(e,o,u))})),PersistencePromise.waitFor(a)}removeMatchingKeys(e,s,o){const a=__PRIVATE_documentTargetStore(e);return PersistencePromise.forEach(s,(c=>{const u=__PRIVATE_encodeResourcePath(c.path);return PersistencePromise.waitFor([a.delete([o,u]),this.referenceDelegate.removeReference(e,o,c)])}))}removeMatchingKeysForTargetId(e,s){const o=__PRIVATE_documentTargetStore(e),a=IDBKeyRange.bound([s],[s+1],!1,!0);return o.delete(a)}getMatchingKeysForTargetId(e,s){const o=IDBKeyRange.bound([s],[s+1],!1,!0),a=__PRIVATE_documentTargetStore(e);let c=__PRIVATE_documentKeySet();return a.ee({range:o,X:!0},((u,h,m)=>{const g=__PRIVATE_decodeResourcePath(u[1]),_=new DocumentKey(g);c=c.add(_)})).next((()=>c))}containsKey(e,s){const o=__PRIVATE_encodeResourcePath(s.path),a=IDBKeyRange.bound([o],[__PRIVATE_immediateSuccessor(o)],!1,!0);let c=0;return __PRIVATE_documentTargetStore(e).ee({index:Ve,X:!0,range:a},(([u,h],m,g)=>{u!==0&&(c++,g.done())})).next((()=>c>0))}At(e,s){return __PRIVATE_targetsStore(e).get(s).next((o=>o?__PRIVATE_fromDbTarget(o):null))}}function __PRIVATE_targetsStore(n){return __PRIVATE_getStore(n,Ie)}function __PRIVATE_globalTargetStore(n){return __PRIVATE_getStore(n,ge$1)}function __PRIVATE_documentTargetStore(n){return __PRIVATE_getStore(n,Ae)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="LruGarbageCollector",Bt=1048576;function __PRIVATE_bufferEntryComparator([n,e],[s,o]){const a=__PRIVATE_primitiveComparator(n,s);return a===0?__PRIVATE_primitiveComparator(e,o):a}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Ir=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const o=this.buffer.last();__PRIVATE_bufferEntryComparator(s,o)<0&&(this.buffer=this.buffer.delete(o).add(s))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,s,o){this.garbageCollector=e,this.asyncQueue=s,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){__PRIVATE_logDebug(Nt,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){__PRIVATE_isIndexedDbTransactionError(s)?__PRIVATE_logDebug(Nt,"Ignoring IndexedDB error during garbage collection: ",s):await __PRIVATE_ignoreIfPrimaryLeaseLoss(s)}await this.Vr(3e5)}))}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((o=>Math.floor(s/100*o)))}nthSequenceNumber(e,s){if(s===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);const o=new __PRIVATE_RollingSequenceNumberBuffer(s);return this.mr.forEachTarget(e,(a=>o.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>o.Ar(a))))).next((()=>o.maxValue))}removeTargets(e,s,o){return this.mr.removeTargets(e,s,o)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(xt)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xt):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let o,a,c,u,h,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,u=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(o=b,h=Date.now(),this.removeTargets(e,o,s)))).next((b=>(c=b,m=Date.now(),this.removeOrphanedDocuments(e,o)))).next((b=>(g=Date.now(),__PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${c} targets in `+(m-h)+`ms
	Removed ${b} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:b}))))}}function __PRIVATE_newLruGarbageCollector(n,e){return new __PRIVATE_LruGarbageCollectorImpl(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_IndexedDbLruDelegateImpl{constructor(e,s){this.db=e,this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,s)}gr(e){const s=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((o=>s.next((a=>o+a))))}wr(e){let s=0;return this.pr(e,(o=>{s++})).next((()=>s))}forEachTarget(e,s){return this.db.getTargetCache().forEachTarget(e,s)}pr(e,s){return this.Sr(e,((o,a)=>s(a)))}addReference(e,s,o){return __PRIVATE_writeSentinelKey(e,o)}removeReference(e,s,o){return __PRIVATE_writeSentinelKey(e,o)}removeTargets(e,s,o){return this.db.getTargetCache().removeTargets(e,s,o)}markPotentiallyOrphaned(e,s){return __PRIVATE_writeSentinelKey(e,s)}br(e,s){return(function(a,c){let u=!1;return __PRIVATE_mutationQueuesStore(a).te((h=>__PRIVATE_mutationQueueContainsKey(a,h,c).next((m=>(m&&(u=!0),PersistencePromise.resolve(!m)))))).next((()=>u))})(e,s)}removeOrphanedDocuments(e,s){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Sr(e,((u,h)=>{if(h<=s){const m=this.br(e,u).next((g=>{if(!g)return c++,o.getEntry(e,u).next((()=>(o.removeEntry(u,SnapshotVersion.min()),__PRIVATE_documentTargetStore(e).delete((function(b){return[0,__PRIVATE_encodeResourcePath(b.path)]})(u)))))}));a.push(m)}})).next((()=>PersistencePromise.waitFor(a))).next((()=>o.apply(e))).next((()=>c))}removeTarget(e,s){const o=s.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,s){return __PRIVATE_writeSentinelKey(e,s)}Sr(e,s){const o=__PRIVATE_documentTargetStore(e);let a,c=__PRIVATE_ListenSequence.ce;return o.ee({index:Ve},(([u,h],{path:m,sequenceNumber:g})=>{u===0?(c!==__PRIVATE_ListenSequence.ce&&s(new DocumentKey(__PRIVATE_decodeResourcePath(a)),c),c=g,a=m):c=__PRIVATE_ListenSequence.ce})).next((()=>{c!==__PRIVATE_ListenSequence.ce&&s(new DocumentKey(__PRIVATE_decodeResourcePath(a)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function __PRIVATE_writeSentinelKey(n,e){return __PRIVATE_documentTargetStore(n).put((function(o,a){return{targetId:0,path:__PRIVATE_encodeResourcePath(o.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const o=this.changes.get(s);return o!==void 0?PersistencePromise.resolve(o):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_IndexedDbRemoteDocumentCacheImpl{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,s,o){return __PRIVATE_remoteDocumentsStore(e).put(o)}removeEntry(e,s,o){return __PRIVATE_remoteDocumentsStore(e).delete((function(c,u){const h=c.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],__PRIVATE_toDbTimestampKey(u),h[h.length-1]]})(s,o))}updateMetadata(e,s){return this.getMetadata(e).next((o=>(o.byteSize+=s,this.Dr(e,o))))}getEntry(e,s){let o=MutableDocument.newInvalidDocument(s);return __PRIVATE_remoteDocumentsStore(e).ee({index:ue,range:IDBKeyRange.only(__PRIVATE_dbKey(s))},((a,c)=>{o=this.Cr(s,c)})).next((()=>o))}vr(e,s){let o={size:0,document:MutableDocument.newInvalidDocument(s)};return __PRIVATE_remoteDocumentsStore(e).ee({index:ue,range:IDBKeyRange.only(__PRIVATE_dbKey(s))},((a,c)=>{o={document:this.Cr(s,c),size:__PRIVATE_dbDocumentSize(c)}})).next((()=>o))}getEntries(e,s){let o=__PRIVATE_mutableDocumentMap();return this.Fr(e,s,((a,c)=>{const u=this.Cr(a,c);o=o.insert(a,u)})).next((()=>o))}Mr(e,s){let o=__PRIVATE_mutableDocumentMap(),a=new SortedMap(DocumentKey.comparator);return this.Fr(e,s,((c,u)=>{const h=this.Cr(c,u);o=o.insert(c,h),a=a.insert(c,__PRIVATE_dbDocumentSize(u))})).next((()=>({documents:o,Or:a})))}Fr(e,s,o){if(s.isEmpty())return PersistencePromise.resolve();let a=new SortedSet(__PRIVATE_dbKeyComparator);s.forEach((m=>a=a.add(m)));const c=IDBKeyRange.bound(__PRIVATE_dbKey(a.first()),__PRIVATE_dbKey(a.last())),u=a.getIterator();let h=u.getNext();return __PRIVATE_remoteDocumentsStore(e).ee({index:ue,range:c},((m,g,_)=>{const b=DocumentKey.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;h&&__PRIVATE_dbKeyComparator(h,b)<0;)o(h,null),h=u.getNext();h&&h.isEqual(b)&&(o(h,g),h=u.hasNext()?u.getNext():null),h?_.j(__PRIVATE_dbKey(h)):_.done()})).next((()=>{for(;h;)o(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,s,o,a,c){const u=s.path,h=[u.popLast().toArray(),u.lastSegment(),__PRIVATE_toDbTimestampKey(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return __PRIVATE_remoteDocumentsStore(e).J(IDBKeyRange.bound(h,m,!0)).next((g=>{c?.incrementDocumentReadCount(g.length);let _=__PRIVATE_mutableDocumentMap();for(const b of g){const T=this.Cr(DocumentKey.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);T.isFoundDocument()&&(__PRIVATE_queryMatches(s,T)||a.has(T.key))&&(_=_.insert(T.key,T))}return _}))}getAllFromCollectionGroup(e,s,o,a){let c=__PRIVATE_mutableDocumentMap();const u=__PRIVATE_dbCollectionGroupKey(s,o),h=__PRIVATE_dbCollectionGroupKey(s,IndexOffset.max());return __PRIVATE_remoteDocumentsStore(e).ee({index:le,range:IDBKeyRange.bound(u,h,!0)},((m,g,_)=>{const b=this.Cr(DocumentKey.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);c=c.insert(b.key,b),c.size===a&&_.done()})).next((()=>c))}newChangeBuffer(e){return new __PRIVATE_IndexedDbRemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((s=>s.byteSize))}getMetadata(e){return __PRIVATE_documentGlobalStore(e).get(Te).next((s=>(__PRIVATE_hardAssert(!!s,20021),s)))}Dr(e,s){return __PRIVATE_documentGlobalStore(e).put(Te,s)}Cr(e,s){if(s){const o=__PRIVATE_fromDbRemoteDocument(this.serializer,s);if(!(o.isNoDocument()&&o.version.isEqual(SnapshotVersion.min())))return o}return MutableDocument.newInvalidDocument(e)}}function __PRIVATE_newIndexedDbRemoteDocumentCache(n){return new __PRIVATE_IndexedDbRemoteDocumentCacheImpl(n)}class __PRIVATE_IndexedDbRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e,s){super(),this.Nr=e,this.trackRemovals=s,this.Br=new ObjectMap((o=>o.toString()),((o,a)=>o.isEqual(a)))}applyChanges(e){const s=[];let o=0,a=new SortedSet(((c,u)=>__PRIVATE_primitiveComparator(c.canonicalString(),u.canonicalString())));return this.changes.forEach(((c,u)=>{const h=this.Br.get(c);if(s.push(this.Nr.removeEntry(e,c,h.readTime)),u.isValidDocument()){const m=__PRIVATE_toDbRemoteDocument(this.Nr.serializer,u);a=a.add(c.path.popLast());const g=__PRIVATE_dbDocumentSize(m);o+=g-h.size,s.push(this.Nr.addEntry(e,c,m))}else if(o-=h.size,this.trackRemovals){const m=__PRIVATE_toDbRemoteDocument(this.Nr.serializer,u.convertToNoDocument(SnapshotVersion.min()));s.push(this.Nr.addEntry(e,c,m))}})),a.forEach((c=>{s.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),s.push(this.Nr.updateMetadata(e,o)),PersistencePromise.waitFor(s)}getFromCache(e,s){return this.Nr.vr(e,s).next((o=>(this.Br.set(s,{size:o.size,readTime:o.document.readTime}),o.document)))}getAllFromCache(e,s){return this.Nr.Mr(e,s).next((({documents:o,Or:a})=>(a.forEach(((c,u)=>{this.Br.set(c,{size:u,readTime:o.get(c).readTime})})),o)))}}function __PRIVATE_documentGlobalStore(n){return __PRIVATE_getStore(n,Pe)}function __PRIVATE_remoteDocumentsStore(n){return __PRIVATE_getStore(n,_e)}function __PRIVATE_dbKey(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function __PRIVATE_dbCollectionGroupKey(n,e){const s=e.documentKey.path.toArray();return[n,__PRIVATE_toDbTimestampKey(e.readTime),s.slice(0,s.length-2),s.length>0?s[s.length-1]:""]}function __PRIVATE_dbKeyComparator(n,e){const s=n.path.toArray(),o=e.path.toArray();let a=0;for(let c=0;c<s.length-2&&c<o.length-2;++c)if(a=__PRIVATE_primitiveComparator(s[c],o[c]),a)return a;return a=__PRIVATE_primitiveComparator(s.length,o.length),a||(a=__PRIVATE_primitiveComparator(s[s.length-2],o[o.length-2]),a||__PRIVATE_primitiveComparator(s[s.length-1],o[o.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,s,o,a){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=o,this.indexManager=a}getDocument(e,s){let o=null;return this.documentOverlayCache.getOverlay(e,s).next((a=>(o=a,this.remoteDocumentCache.getEntry(e,s)))).next((a=>(o!==null&&__PRIVATE_mutationApplyToLocalView(o.mutation,a,FieldMask.empty(),Timestamp.now()),a)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((o=>this.getLocalViewOfDocuments(e,o,__PRIVATE_documentKeySet()).next((()=>o))))}getLocalViewOfDocuments(e,s,o=__PRIVATE_documentKeySet()){const a=__PRIVATE_newOverlayMap();return this.populateOverlays(e,a,s).next((()=>this.computeViews(e,s,a,o).next((c=>{let u=documentMap();return c.forEach(((h,m)=>{u=u.insert(h,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,s){const o=__PRIVATE_newOverlayMap();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,__PRIVATE_documentKeySet())))}populateOverlays(e,s,o){const a=[];return o.forEach((c=>{s.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((u,h)=>{s.set(u,h)}))}))}computeViews(e,s,o,a){let c=__PRIVATE_mutableDocumentMap();const u=__PRIVATE_newDocumentKeyMap(),h=(function(){return __PRIVATE_newDocumentKeyMap()})();return s.forEach(((m,g)=>{const _=o.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof __PRIVATE_PatchMutation)?c=c.insert(g.key,g):_!==void 0?(u.set(g.key,_.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(_.mutation,g,_.mutation.getFieldMask(),Timestamp.now())):u.set(g.key,FieldMask.empty())})),this.recalculateAndSaveOverlays(e,c).next((m=>(m.forEach(((g,_)=>u.set(g,_))),s.forEach(((g,_)=>h.set(g,new OverlayedDocument(_,u.get(g)??null)))),h)))}recalculateAndSaveOverlays(e,s){const o=__PRIVATE_newDocumentKeyMap();let a=new SortedMap(((u,h)=>u-h)),c=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((u=>{for(const h of u)h.keys().forEach((m=>{const g=s.get(m);if(g===null)return;let _=o.get(m)||FieldMask.empty();_=h.applyToLocalView(g,_),o.set(m,_);const b=(a.get(h.batchId)||__PRIVATE_documentKeySet()).add(m);a=a.insert(h.batchId,b)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),g=m.key,_=m.value,b=__PRIVATE_newMutationMap();_.forEach((T=>{if(!c.has(T)){const A=__PRIVATE_calculateOverlayMutation(s.get(T),o.get(T));A!==null&&b.set(T,A),c=c.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,b))}return PersistencePromise.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,s,o,a){return(function(u){return DocumentKey.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):__PRIVATE_isCollectionGroupQuery(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,o,a):this.getDocumentsMatchingCollectionQuery(e,s,o,a)}getNextDocuments(e,s,o,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,o,a).next((c=>{const u=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,o.largestBatchId,a-c.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let h=U,m=c;return u.next((g=>PersistencePromise.forEach(g,((_,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),c.get(_)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{m=m.insert(_,T)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,m,g,__PRIVATE_documentKeySet()))).next((_=>({batchId:h,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new DocumentKey(s)).next((o=>{let a=documentMap();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a}))}getDocumentsMatchingCollectionGroupQuery(e,s,o,a){const c=s.collectionGroup;let u=documentMap();return this.indexManager.getCollectionParents(e,c).next((h=>PersistencePromise.forEach(h,(m=>{const g=(function(b,T){return new __PRIVATE_QueryImpl(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(s,m.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,o,a).next((_=>{_.forEach(((b,T)=>{u=u.insert(b,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,s,o,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,o.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,o,c,a)))).next((u=>{c.forEach(((m,g)=>{const _=g.getKey();u.get(_)===null&&(u=u.insert(_,MutableDocument.newInvalidDocument(_)))}));let h=documentMap();return u.forEach(((m,g)=>{const _=c.get(m);_!==void 0&&__PRIVATE_mutationApplyToLocalView(_.mutation,g,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(s,g)&&(h=h.insert(m,g))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return PersistencePromise.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(a){return{id:a.id,version:a.version,createTime:__PRIVATE_fromVersion(a.createTime)}})(s)),PersistencePromise.resolve()}getNamedQuery(e,s){return PersistencePromise.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(a){return{name:a.name,query:__PRIVATE_fromBundledQuery(a.bundledQuery),readTime:__PRIVATE_fromVersion(a.readTime)}})(s)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.qr=new Map}getOverlay(e,s){return PersistencePromise.resolve(this.overlays.get(s))}getOverlays(e,s){const o=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(s,(a=>this.getOverlay(e,a).next((c=>{c!==null&&o.set(a,c)})))).next((()=>o))}saveOverlays(e,s,o){return o.forEach(((a,c)=>{this.St(e,s,c)})),PersistencePromise.resolve()}removeOverlaysForBatchId(e,s,o){const a=this.qr.get(o);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(o)),PersistencePromise.resolve()}getOverlaysForCollection(e,s,o){const a=__PRIVATE_newOverlayMap(),c=s.length+1,u=new DocumentKey(s.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,g=m.getKey();if(!s.isPrefixOf(g.path))break;g.path.length===c&&m.largestBatchId>o&&a.set(m.getKey(),m)}return PersistencePromise.resolve(a)}getOverlaysForCollectionGroup(e,s,o,a){let c=new SortedMap(((g,_)=>g-_));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===s&&g.largestBatchId>o){let _=c.get(g.largestBatchId);_===null&&(_=__PRIVATE_newOverlayMap(),c=c.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const h=__PRIVATE_newOverlayMap(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>h.set(g,_))),!(h.size()>=a)););return PersistencePromise.resolve(h)}St(e,s,o){const a=this.overlays.get(o.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(o.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new Overlay(s,o));let c=this.qr.get(s);c===void 0&&(c=__PRIVATE_documentKeySet(),this.qr.set(s,c)),this.qr.set(s,c.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Qr=new SortedSet(__PRIVATE_DocReference.$r),this.Ur=new SortedSet(__PRIVATE_DocReference.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const o=new __PRIVATE_DocReference(e,s);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,s){e.forEach((o=>this.addReference(o,s)))}removeReference(e,s){this.Gr(new __PRIVATE_DocReference(e,s))}zr(e,s){e.forEach((o=>this.removeReference(o,s)))}jr(e){const s=new DocumentKey(new ResourcePath([])),o=new __PRIVATE_DocReference(s,e),a=new __PRIVATE_DocReference(s,e+1),c=[];return this.Ur.forEachInRange([o,a],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new DocumentKey(new ResourcePath([])),o=new __PRIVATE_DocReference(s,e),a=new __PRIVATE_DocReference(s,e+1);let c=__PRIVATE_documentKeySet();return this.Ur.forEachInRange([o,a],(u=>{c=c.add(u.key)})),c}containsKey(e){const s=new __PRIVATE_DocReference(e,0),o=this.Qr.firstAfterOrEqual(s);return o!==null&&e.isEqual(o.key)}}class __PRIVATE_DocReference{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return DocumentKey.comparator(e.key,s.key)||__PRIVATE_primitiveComparator(e.Yr,s.Yr)}static Kr(e,s){return __PRIVATE_primitiveComparator(e.Yr,s.Yr)||DocumentKey.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new SortedSet(__PRIVATE_DocReference.$r)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,o,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new MutationBatch(c,s,o,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new __PRIVATE_DocReference(h.key,c)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return PersistencePromise.resolve(u)}lookupMutationBatch(e,s){return PersistencePromise.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const o=s+1,a=this.ei(o),c=a<0?0:a;return PersistencePromise.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?j:this.tr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const o=new __PRIVATE_DocReference(s,0),a=new __PRIVATE_DocReference(s,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([o,a],(u=>{const h=this.Xr(u.Yr);c.push(h)})),PersistencePromise.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,s){let o=new SortedSet(__PRIVATE_primitiveComparator);return s.forEach((a=>{const c=new __PRIVATE_DocReference(a,0),u=new __PRIVATE_DocReference(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(h=>{o=o.add(h.Yr)}))})),PersistencePromise.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,s){const o=s.path,a=o.length+1;let c=o;DocumentKey.isDocumentKey(c)||(c=c.child(""));const u=new __PRIVATE_DocReference(new DocumentKey(c),0);let h=new SortedSet(__PRIVATE_primitiveComparator);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!o.isPrefixOf(g)&&(g.length===a&&(h=h.add(m.Yr)),!0)}),u),PersistencePromise.resolve(this.ti(h))}ti(e){const s=[];return e.forEach((o=>{const a=this.Xr(o);a!==null&&s.push(a)})),s}removeMutationBatch(e,s){__PRIVATE_hardAssert(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return PersistencePromise.forEach(s.mutations,(a=>{const c=new __PRIVATE_DocReference(a.key,s.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,s){const o=new __PRIVATE_DocReference(s,0),a=this.Zr.firstAfterOrEqual(o);return PersistencePromise.resolve(s.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ri=e,this.docs=(function(){return new SortedMap(DocumentKey.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const o=s.key,a=this.docs.get(o),c=a?a.size:0,u=this.ri(s);return this.docs=this.docs.insert(o,{document:s.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const o=this.docs.get(s);return PersistencePromise.resolve(o?o.document.mutableCopy():MutableDocument.newInvalidDocument(s))}getEntries(e,s){let o=__PRIVATE_mutableDocumentMap();return s.forEach((a=>{const c=this.docs.get(a);o=o.insert(a,c?c.document.mutableCopy():MutableDocument.newInvalidDocument(a))})),PersistencePromise.resolve(o)}getDocumentsMatchingQuery(e,s,o,a){let c=__PRIVATE_mutableDocumentMap();const u=s.path,h=new DocumentKey(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(_),o)<=0||(a.has(_.key)||__PRIVATE_queryMatches(s,_))&&(c=c.insert(_.key,_.mutableCopy()))}return PersistencePromise.resolve(c)}getAllFromCollectionGroup(e,s,o,a){fail(9500)}ii(e,s){return PersistencePromise.forEach(this.docs,(o=>s(o)))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((o,a)=>{a.isValidDocument()?s.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(o)})),PersistencePromise.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.si=new ObjectMap((s=>__PRIVATE_canonifyTarget(s)),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.oi=0,this._i=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ai=__PRIVATE_TargetIdGenerator.ur()}forEachTarget(e,s){return this.si.forEach(((o,a)=>s(a))),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,s,o){return o&&(this.lastRemoteSnapshotVersion=o),s>this.oi&&(this.oi=s),PersistencePromise.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new __PRIVATE_TargetIdGenerator(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,s){return this.Pr(s),PersistencePromise.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,s,o){let a=0;const c=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=s&&o.get(h.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),PersistencePromise.waitFor(c).next((()=>a))}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,s){const o=this.si.get(s)||null;return PersistencePromise.resolve(o)}addMatchingKeys(e,s,o){return this._i.Wr(s,o),PersistencePromise.resolve()}removeMatchingKeys(e,s,o){this._i.zr(s,o);const a=this.persistence.referenceDelegate,c=[];return a&&s.forEach((u=>{c.push(a.markPotentiallyOrphaned(e,u))})),PersistencePromise.waitFor(c)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,s){const o=this._i.Hr(s);return PersistencePromise.resolve(o)}containsKey(e,s){return PersistencePromise.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,s){this.ui={},this.overlays={},this.ci=new __PRIVATE_ListenSequence(0),this.li=!1,this.li=!0,this.hi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Pi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=(function(a){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(a)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new __PRIVATE_LocalSerializer(s),this.Ii=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let o=this.ui[e.toKey()];return o||(o=new __PRIVATE_MemoryMutationQueue(s,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,o){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const a=new __PRIVATE_MemoryTransaction(this.ci.next());return this.referenceDelegate.Ei(),o(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ai(e,s){return PersistencePromise.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,s))))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ri=new __PRIVATE_ReferenceSet,this.Vi=null}static mi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get fi(){if(this.Vi)return this.Vi;throw fail(60996)}addReference(e,s,o){return this.Ri.addReference(o,s),this.fi.delete(o.toString()),PersistencePromise.resolve()}removeReference(e,s,o){return this.Ri.removeReference(o,s),this.fi.add(o.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),PersistencePromise.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((a=>this.fi.add(a.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,s.targetId).next((a=>{a.forEach((c=>this.fi.add(c.toString())))})).next((()=>o.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.fi,(o=>{const a=DocumentKey.fromPath(o);return this.gi(e,a).next((c=>{c||s.removeEntry(a,SnapshotVersion.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((o=>{o?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,s){this.persistence=e,this.pi=new ObjectMap((o=>__PRIVATE_encodeResourcePath(o.path)),((o,a)=>o.isEqual(a))),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,s)}static mi(e,s){return new __PRIVATE_MemoryLruDelegate(e,s)}Ei(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>s.next((a=>o+a))))}wr(e){let s=0;return this.pr(e,(o=>{s++})).next((()=>s))}pr(e,s){return PersistencePromise.forEach(this.pi,((o,a)=>this.br(e,o,a).next((c=>c?PersistencePromise.resolve():s(a)))))}removeTargets(e,s,o){return this.persistence.getTargetCache().removeTargets(e,s,o)}removeOrphanedDocuments(e,s){let o=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,s).next((h=>{h||(o++,c.removeEntry(u,SnapshotVersion.min()))})))).next((()=>c.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,s){const o=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,s,o){return this.pi.set(o,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,s,o){return this.pi.set(o,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=__PRIVATE_estimateByteSize(e.data.value)),s}br(e,s,o){return PersistencePromise.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const a=this.pi.get(s);return PersistencePromise.resolve(a!==void 0&&a>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_SchemaConverter{constructor(e){this.serializer=e}k(e,s,o,a){const c=new __PRIVATE_SimpleDbTransaction("createOrUpgrade",s);o<1&&a>=1&&((function(m){m.createObjectStore(Y)})(e),(function(m){m.createObjectStore(X,{keyPath:ee$1}),m.createObjectStore(te,{keyPath:ne,autoIncrement:!0}).createIndex(re,ie,{unique:!0}),m.createObjectStore(oe)})(e),__PRIVATE_createQueryCache(e),(function(m){m.createObjectStore(H)})(e));let u=PersistencePromise.resolve();return o<3&&a>=3&&(o!==0&&((function(m){m.deleteObjectStore(Ae),m.deleteObjectStore(Ie),m.deleteObjectStore(ge$1)})(e),__PRIVATE_createQueryCache(e)),u=u.next((()=>(function(m){const g=m.store(ge$1),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:SnapshotVersion.min().toTimestamp(),targetCount:0};return g.put(fe$1,_)})(c)))),o<4&&a>=4&&(o!==0&&(u=u.next((()=>(function(m,g){return g.store(te).J().next((b=>{m.deleteObjectStore(te),m.createObjectStore(te,{keyPath:ne,autoIncrement:!0}).createIndex(re,ie,{unique:!0});const T=g.store(te),A=b.map((R=>T.put(R)));return PersistencePromise.waitFor(A)}))})(e,c)))),u=u.next((()=>{(function(m){m.createObjectStore(we,{keyPath:Se})})(e)}))),o<5&&a>=5&&(u=u.next((()=>this.yi(c)))),o<6&&a>=6&&(u=u.next((()=>((function(m){m.createObjectStore(Pe)})(e),this.wi(c))))),o<7&&a>=7&&(u=u.next((()=>this.Si(c)))),o<8&&a>=8&&(u=u.next((()=>this.bi(e,c)))),o<9&&a>=9&&(u=u.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),o<10&&a>=10&&(u=u.next((()=>this.Di(c)))),o<11&&a>=11&&(u=u.next((()=>{(function(m){m.createObjectStore(be,{keyPath:De})})(e),(function(m){m.createObjectStore(Ce,{keyPath:ve})})(e)}))),o<12&&a>=12&&(u=u.next((()=>{(function(m){const g=m.createObjectStore(Ke,{keyPath:We});g.createIndex(Ge,ze,{unique:!1}),g.createIndex(je,Je,{unique:!1})})(e)}))),o<13&&a>=13&&(u=u.next((()=>(function(m){const g=m.createObjectStore(_e,{keyPath:ae});g.createIndex(ue,ce),g.createIndex(le,he)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(H)))),o<14&&a>=14&&(u=u.next((()=>this.Fi(e,c)))),o<15&&a>=15&&(u=u.next((()=>(function(m){m.createObjectStore(Fe,{keyPath:Me,autoIncrement:!0}).createIndex(xe,Oe,{unique:!1}),m.createObjectStore(Ne,{keyPath:Be}).createIndex(Le,ke,{unique:!1}),m.createObjectStore(qe,{keyPath:Qe}).createIndex($e,Ue,{unique:!1})})(e)))),o<16&&a>=16&&(u=u.next((()=>{s.objectStore(Ne).clear()})).next((()=>{s.objectStore(qe).clear()}))),o<17&&a>=17&&(u=u.next((()=>{(function(m){m.createObjectStore(He,{keyPath:Ye})})(e)}))),o<18&&a>=18&&isSafariOrWebkit()&&(u=u.next((()=>{s.objectStore(Ne).clear()})).next((()=>{s.objectStore(qe).clear()}))),u}wi(e){let s=0;return e.store(H).ee(((o,a)=>{s+=__PRIVATE_dbDocumentSize(a)})).next((()=>{const o={byteSize:s};return e.store(Pe).put(Te,o)}))}yi(e){const s=e.store(X),o=e.store(te);return s.J().next((a=>PersistencePromise.forEach(a,(c=>{const u=IDBKeyRange.bound([c.userId,j],[c.userId,c.lastAcknowledgedBatchId]);return o.J(re,u).next((h=>PersistencePromise.forEach(h,(m=>{__PRIVATE_hardAssert(m.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=__PRIVATE_fromDbMutationBatch(this.serializer,m);return removeMutationBatch(e,c.userId,g).next((()=>{}))}))))}))))}Si(e){const s=e.store(Ae),o=e.store(H);return e.store(ge$1).get(fe$1).next((a=>{const c=[];return o.ee(((u,h)=>{const m=new ResourcePath(u),g=(function(b){return[0,__PRIVATE_encodeResourcePath(b)]})(m);c.push(s.get(g).next((_=>_?PersistencePromise.resolve():(b=>s.put({targetId:0,path:__PRIVATE_encodeResourcePath(b),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>PersistencePromise.waitFor(c)))}))}bi(e,s){e.createObjectStore(pe,{keyPath:ye});const o=s.store(pe),a=new __PRIVATE_MemoryCollectionParentIndex,c=u=>{if(a.add(u)){const h=u.lastSegment(),m=u.popLast();return o.put({collectionId:h,parent:__PRIVATE_encodeResourcePath(m)})}};return s.store(H).ee({X:!0},((u,h)=>{const m=new ResourcePath(u);return c(m.popLast())})).next((()=>s.store(oe).ee({X:!0},(([u,h,m],g)=>{const _=__PRIVATE_decodeResourcePath(h);return c(_.popLast())}))))}Di(e){const s=e.store(Ie);return s.ee(((o,a)=>{const c=__PRIVATE_fromDbTarget(a),u=__PRIVATE_toDbTarget(this.serializer,c);return s.put(u)}))}Ci(e,s){const o=s.store(H),a=[];return o.ee(((c,u)=>{const h=s.store(_e),m=(function(b){return b.document?new DocumentKey(ResourcePath.fromString(b.document.name).popFirst(5)):b.noDocument?DocumentKey.fromSegments(b.noDocument.path):b.unknownDocument?DocumentKey.fromSegments(b.unknownDocument.path):fail(36783)})(u).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(h.put(g))})).next((()=>PersistencePromise.waitFor(a)))}Fi(e,s){const o=s.store(te),a=__PRIVATE_newIndexedDbRemoteDocumentCache(this.serializer),c=new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi,this.serializer.yt);return o.J().next((u=>{const h=new Map;return u.forEach((m=>{let g=h.get(m.userId)??__PRIVATE_documentKeySet();__PRIVATE_fromDbMutationBatch(this.serializer,m).keys().forEach((_=>g=g.add(_))),h.set(m.userId,g)})),PersistencePromise.forEach(h,((m,g)=>{const _=new User(g),b=__PRIVATE_IndexedDbDocumentOverlayCache.wt(this.serializer,_),T=c.getIndexManager(_),A=__PRIVATE_IndexedDbMutationQueue.wt(_,this.serializer,T,c.referenceDelegate);return new LocalDocumentsView(a,A,b,T).recalculateAndSaveOverlaysForDocumentKeys(new __PRIVATE_IndexedDbTransaction(s,__PRIVATE_ListenSequence.ce),m).next()}))}))}}function __PRIVATE_createQueryCache(n){n.createObjectStore(Ae,{keyPath:Re}).createIndex(Ve,me,{unique:!0}),n.createObjectStore(Ie,{keyPath:"targetId"}).createIndex(Ee,de,{unique:!0}),n.createObjectStore(ge$1)}const Lt="IndexedDbPersistence",kt=18e5,qt=5e3,Qt="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$t="main";class __PRIVATE_IndexedDbPersistence{constructor(e,s,o,a,c,u,h,m,g,_,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=s,this.clientId=o,this.Mi=c,this.window=u,this.document=h,this.xi=g,this.Oi=_,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=T=>Promise.resolve(),!__PRIVATE_IndexedDbPersistence.v())throw new FirestoreError(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new __PRIVATE_IndexedDbLruDelegateImpl(this,a),this.$i=s+$t,this.serializer=new __PRIVATE_LocalSerializer(m),this.Ui=new __PRIVATE_SimpleDb(this.$i,this.Ni,new __PRIVATE_SchemaConverter(this.serializer)),this.hi=new __PRIVATE_IndexedDbGlobalsCache,this.Pi=new __PRIVATE_IndexedDbTargetCache(this.referenceDelegate,this.serializer),this.remoteDocumentCache=__PRIVATE_newIndexedDbRemoteDocumentCache(this.serializer),this.Ii=new __PRIVATE_IndexedDbBundleCache,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&__PRIVATE_logError(Lt,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new FirestoreError(N.FAILED_PRECONDITION,Qt);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new __PRIVATE_ListenSequence(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async s=>{if(this.started)return e(s)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async s=>{s.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>__PRIVATE_clientMetadataStore(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((s=>{s||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((s=>this.isPrimary&&!s?this.Zi(e).next((()=>!1)):!!s&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(__PRIVATE_isIndexedDbTransactionError(e))return __PRIVATE_logDebug(Lt,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return __PRIVATE_logDebug(Lt,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return __PRIVATE_primaryClientStore(e).get(Z).next((s=>PersistencePromise.resolve(this.es(s))))}ts(e){return __PRIVATE_clientMetadataStore(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,kt)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(s=>{const o=__PRIVATE_getStore(s,we);return o.J().next((a=>{const c=this.ss(a,kt),u=a.filter((h=>c.indexOf(h)===-1));return PersistencePromise.forEach(u,(h=>o.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const s of e)this.Ki.removeItem(this._s(s.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?PersistencePromise.resolve(!0):__PRIVATE_primaryClientStore(e).get(Z).next((s=>{if(s!==null&&this.rs(s.leaseTimestampMs,qt)&&!this.us(s.ownerId)){if(this.es(s)&&this.networkEnabled)return!0;if(!this.es(s)){if(!s.allowTabSynchronization)throw new FirestoreError(N.FAILED_PRECONDITION,Qt);return!1}}return!(!this.networkEnabled||!this.inForeground)||__PRIVATE_clientMetadataStore(e).J().next((o=>this.ss(o,qt).find((a=>{if(this.clientId!==a.clientId){const c=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,h=this.networkEnabled===a.networkEnabled;if(c||u&&h)return!0}return!1}))===void 0))})).next((s=>(this.isPrimary!==s&&__PRIVATE_logDebug(Lt,`Client ${s?"is":"is not"} eligible for a primary lease.`),s)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Y,we],(e=>{const s=new __PRIVATE_IndexedDbTransaction(e,__PRIVATE_ListenSequence.ce);return this.Zi(s).next((()=>this.ts(s)))})),this.Ui.close(),this.Ps()}ss(e,s){return e.filter((o=>this.rs(o.updateTimeMs,s)&&!this.us(o.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>__PRIVATE_clientMetadataStore(e).J().next((s=>this.ss(s,kt).map((o=>o.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,s){return __PRIVATE_IndexedDbMutationQueue.wt(e,this.serializer,s,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new __PRIVATE_IndexedDbIndexManager(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return __PRIVATE_IndexedDbDocumentOverlayCache.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,s,o){__PRIVATE_logDebug(Lt,"Starting transaction:",e);const a=s==="readonly"?"readonly":"readwrite",c=(function(m){return m===18?st:m===17?it:m===16?rt:m===15?nt:m===14?tt:m===13?et:m===12?Xe:m===11?Ze:void fail(60245)})(this.Ni);let u;return this.Ui.runTransaction(e,a,c,(h=>(u=new __PRIVATE_IndexedDbTransaction(h,this.ci?this.ci.next():__PRIVATE_ListenSequence.ce),s==="readwrite-primary"?this.Hi(u).next((m=>!!m||this.Yi(u))).next((m=>{if(!m)throw __PRIVATE_logError(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new FirestoreError(N.FAILED_PRECONDITION,K);return o(u)})).next((m=>this.Xi(u).next((()=>m)))):this.Is(u).next((()=>o(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Is(e){return __PRIVATE_primaryClientStore(e).get(Z).next((s=>{if(s!==null&&this.rs(s.leaseTimestampMs,qt)&&!this.us(s.ownerId)&&!this.es(s)&&!(this.Oi||this.allowTabSynchronization&&s.allowTabSynchronization))throw new FirestoreError(N.FAILED_PRECONDITION,Qt)}))}Xi(e){const s={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return __PRIVATE_primaryClientStore(e).put(Z,s)}static v(){return __PRIVATE_SimpleDb.v()}Zi(e){const s=__PRIVATE_primaryClientStore(e);return s.get(Z).next((o=>this.es(o)?(__PRIVATE_logDebug(Lt,"Releasing primary lease."),s.delete(Z)):PersistencePromise.resolve()))}rs(e,s){const o=Date.now();return!(e<o-s)&&(!(e>o)||(__PRIVATE_logError(`Detected an update time that is in the future: ${e} > ${o}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;isSafari()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const s=this.Ki?.getItem(this._s(e))!==null;return __PRIVATE_logDebug(Lt,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return __PRIVATE_logError(Lt,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){__PRIVATE_logError("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function __PRIVATE_primaryClientStore(n){return __PRIVATE_getStore(n,Y)}function __PRIVATE_clientMetadataStore(n){return __PRIVATE_getStore(n,we)}function __PRIVATE_indexedDbStoragePrefix(n,e){let s=n.projectId;return n.isDefaultDatabase||(s+="."+n.database),"firestore/"+e+"/"+s+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,s,o,a){this.targetId=e,this.fromCache=s,this.Es=o,this.ds=a}static As(e,s){let o=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();for(const c of s.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new __PRIVATE_LocalViewChanges(e,s.fromCache,o,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,o,a){const c={result:null};return this.ys(e,s).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,s,a,o).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new QueryContext;return this.Ss(e,s,u).next((h=>{if(c.result=h,this.Vs)return this.bs(e,s,u,h.size)}))})).next((()=>c.result))}bs(e,s,o,a){return o.documentReadCount<this.fs?(__PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(s),"scans",o.documentReadCount,"local documents and returns",a,"documents as results."),o.documentReadCount>this.gs*a?(__PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(s))):PersistencePromise.resolve())}ys(e,s){if(__PRIVATE_queryMatchesAllDocuments(s))return PersistencePromise.resolve(null);let o=__PRIVATE_queryToTarget(s);return this.indexManager.getIndexType(e,o).next((a=>a===0?null:(s.limit!==null&&a===1&&(s=__PRIVATE_queryWithLimit(s,null,"F"),o=__PRIVATE_queryToTarget(s)),this.indexManager.getDocumentsMatchingTarget(e,o).next((c=>{const u=__PRIVATE_documentKeySet(...c);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,o).next((m=>{const g=this.Ds(s,h);return this.Cs(s,g,u,m.readTime)?this.ys(e,__PRIVATE_queryWithLimit(s,null,"F")):this.vs(e,g,s,m)}))))})))))}ws(e,s,o,a){return __PRIVATE_queryMatchesAllDocuments(s)||a.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ps.getDocuments(e,o).next((c=>{const u=this.Ds(s,c);return this.Cs(s,u,o,a)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),__PRIVATE_stringifyQuery(s)),this.vs(e,u,s,__PRIVATE_newIndexOffsetSuccessorFromReadTime(a,U)).next((h=>h)))}))}Ds(e,s){let o=new SortedSet(__PRIVATE_newQueryComparator(e));return s.forEach(((a,c)=>{__PRIVATE_queryMatches(e,c)&&(o=o.add(c))})),o}Cs(e,s,o,a){if(e.limit===null)return!1;if(o.size!==s.size)return!0;const c=e.limitType==="F"?s.last():s.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,s,o){return __PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(s)),this.ps.getDocumentsMatchingQuery(e,s,IndexOffset.min(),o)}vs(e,s,o,a){return this.ps.getDocumentsMatchingQuery(e,o,a).next((c=>(s.forEach((u=>{c=c.insert(u.key,u)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="LocalStore",Kt=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,s,o,a){this.persistence=e,this.Fs=s,this.serializer=a,this.Ms=new SortedMap(__PRIVATE_primitiveComparator),this.xs=new ObjectMap((c=>__PRIVATE_canonifyTarget(c)),__PRIVATE_targetEquals),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function __PRIVATE_newLocalStore(n,e,s,o){return new __PRIVATE_LocalStoreImpl(n,e,s,o)}async function __PRIVATE_localStoreHandleUserChange(n,e){const s=__PRIVATE_debugCast(n);return await s.persistence.runTransaction("Handle user change","readonly",(o=>{let a;return s.mutationQueue.getAllMutationBatches(o).next((c=>(a=c,s.Bs(e),s.mutationQueue.getAllMutationBatches(o)))).next((c=>{const u=[],h=[];let m=__PRIVATE_documentKeySet();for(const g of a){u.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of c){h.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return s.localDocuments.getDocuments(o,m).next((g=>({Ls:g,removedBatchIds:u,addedBatchIds:h})))}))}))}function __PRIVATE_localStoreAcknowledgeBatch(n,e){const s=__PRIVATE_debugCast(n);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const a=e.batch.keys(),c=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,g,_){const b=g.batch,T=b.keys();let A=PersistencePromise.resolve();return T.forEach((R=>{A=A.next((()=>_.getEntry(m,R))).next((w=>{const D=g.docVersions.get(R);__PRIVATE_hardAssert(D!==null,48541),w.version.compareTo(D)<0&&(b.applyToRemoteDocument(w,g),w.isValidDocument()&&(w.setReadTime(g.commitVersion),_.addEntry(w)))}))})),A.next((()=>h.mutationQueue.removeMutationBatch(m,b)))})(s,o,e,c).next((()=>c.apply(o))).next((()=>s.mutationQueue.performConsistencyCheck(o))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(o,a,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(h){let m=__PRIVATE_documentKeySet();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(m=m.add(h.batch.mutations[g].key));return m})(e)))).next((()=>s.localDocuments.getDocuments(o,a)))}))}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(n){const e=__PRIVATE_debugCast(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(n,e){const s=__PRIVATE_debugCast(n),o=e.snapshotVersion;let a=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=s.Ns.newChangeBuffer({trackRemovals:!0});a=s.Ms;const h=[];e.targetChanges.forEach(((_,b)=>{const T=a.get(b);if(!T)return;h.push(s.Pi.removeMatchingKeys(c,_.removedDocuments,b).next((()=>s.Pi.addMatchingKeys(c,_.addedDocuments,b))));let A=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?A=A.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,o)),a=a.insert(b,A),(function(w,D,fn){return w.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=Kt?!0:fn.addedDocuments.size+fn.modifiedDocuments.size+fn.removedDocuments.size>0})(T,A,_)&&h.push(s.Pi.updateTargetData(c,A))}));let m=__PRIVATE_mutableDocumentMap(),g=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(s.persistence.referenceDelegate.updateLimboDocument(c,_))})),h.push(__PRIVATE_populateDocumentChangeBuffer(c,u,e.documentUpdates).next((_=>{m=_.ks,g=_.qs}))),!o.isEqual(SnapshotVersion.min())){const _=s.Pi.getLastRemoteSnapshotVersion(c).next((b=>s.Pi.setTargetsMetadata(c,c.currentSequenceNumber,o)));h.push(_)}return PersistencePromise.waitFor(h).next((()=>u.apply(c))).next((()=>s.localDocuments.getLocalViewOfDocuments(c,m,g))).next((()=>m))})).then((c=>(s.Ms=a,c)))}function __PRIVATE_populateDocumentChangeBuffer(n,e,s){let o=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();return s.forEach((c=>o=o.add(c))),e.getEntries(n,o).next((c=>{let u=__PRIVATE_mutableDocumentMap();return s.forEach(((h,m)=>{const g=c.get(h);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(SnapshotVersion.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):__PRIVATE_logDebug(Ut,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function __PRIVATE_localStoreGetNextMutationBatch(n,e){const s=__PRIVATE_debugCast(n);return s.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=j),s.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function __PRIVATE_localStoreAllocateTarget(n,e){const s=__PRIVATE_debugCast(n);return s.persistence.runTransaction("Allocate target","readwrite",(o=>{let a;return s.Pi.getTargetData(o,e).next((c=>c?(a=c,PersistencePromise.resolve(a)):s.Pi.allocateTargetId(o).next((u=>(a=new TargetData(e,u,"TargetPurposeListen",o.currentSequenceNumber),s.Pi.addTargetData(o,a).next((()=>a)))))))})).then((o=>{const a=s.Ms.get(o.targetId);return(a===null||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(o.targetId,o),s.xs.set(e,o.targetId)),o}))}async function __PRIVATE_localStoreReleaseTarget(n,e,s){const o=__PRIVATE_debugCast(n),a=o.Ms.get(e),c=s?"readwrite":"readwrite-primary";try{s||await o.persistence.runTransaction("Release target",c,(u=>o.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!__PRIVATE_isIndexedDbTransactionError(u))throw u;__PRIVATE_logDebug(Ut,`Failed to update sequence numbers for target ${e}: ${u}`)}o.Ms=o.Ms.remove(e),o.xs.delete(a.target)}function __PRIVATE_localStoreExecuteQuery(n,e,s){const o=__PRIVATE_debugCast(n);let a=SnapshotVersion.min(),c=__PRIVATE_documentKeySet();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,g,_){const b=__PRIVATE_debugCast(m),T=b.xs.get(_);return T!==void 0?PersistencePromise.resolve(b.Ms.get(T)):b.Pi.getTargetData(g,_)})(o,u,__PRIVATE_queryToTarget(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(u,h.targetId).next((m=>{c=m}))})).next((()=>o.Fs.getDocumentsMatchingQuery(u,e,s?a:SnapshotVersion.min(),s?c:__PRIVATE_documentKeySet()))).next((h=>(__PRIVATE_setMaxReadTime(o,__PRIVATE_queryCollectionGroup(e),h),{documents:h,Qs:c})))))}function __PRIVATE_setMaxReadTime(n,e,s){let o=n.Os.get(e)||SnapshotVersion.min();s.forEach(((a,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)})),n.Os.set(e,o)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Mo=new __PRIVATE_LocalClientState,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,o){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,o){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,s,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){__PRIVATE_logDebug(Jt,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){__PRIVATE_logDebug(Jt,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=null;function __PRIVATE_generateUniqueDebugId(){return Ht===null?Ht=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ht++,"0x"+Ht.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="RestConnection",Zt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${o}/databases/${a}`,this.Wo=this.databaseId.database===lt?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Go(e,s,o,a,c){const u=__PRIVATE_generateUniqueDebugId(),h=this.zo(e,s.toUriEncodedString());__PRIVATE_logDebug(Yt,`Sending RPC '${e}' ${u}:`,h,o);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,c);const{host:g}=new URL(h),_=isCloudWorkstation(g);return this.Jo(e,h,m,o,_).then((b=>(__PRIVATE_logDebug(Yt,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw __PRIVATE_logWarn(Yt,`RPC '${e}' ${u} failed with error: `,b,"url: ",h,"request:",o),b}))}Ho(e,s,o,a,c,u){return this.Go(e,s,o,a,c)}jo(e,s,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+x})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((a,c)=>e[c]=a)),o&&o.headers.forEach(((a,c)=>e[c]=a))}zo(e,s){const o=Zt[e];return`${this.Uo}/v1/${s}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,o,a,c){const u=__PRIVATE_generateUniqueDebugId();return new Promise(((h,m)=>{const g=new XhrIo;g.setWithCredentials(!0),g.listenOnce(EventType.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ErrorCode.NO_ERROR:const b=g.getResponseJson();__PRIVATE_logDebug(Xt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),h(b);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Xt,`RPC '${e}' ${u} timed out`),m(new FirestoreError(N.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const T=g.getStatus();if(__PRIVATE_logDebug(Xt,`RPC '${e}' ${u} failed with status:`,T,"response text:",g.getResponseText()),T>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A?.error;if(R&&R.status&&R.message){const w=(function(fn){const yn=fn.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(yn)>=0?yn:N.UNKNOWN})(R.status);m(new FirestoreError(w,R.message))}else m(new FirestoreError(N.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new FirestoreError(N.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{l_:e,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{__PRIVATE_logDebug(Xt,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(a);__PRIVATE_logDebug(Xt,`RPC '${e}' ${u} sending request:`,a),g.send(s,"POST",_,o,15)}))}T_(e,s,o){const a=__PRIVATE_generateUniqueDebugId(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=createWebChannelTransport(),h=getStatEventTarget(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,s,o),m.encodeInitMessageHeaders=!0;const _=c.join("");__PRIVATE_logDebug(Xt,`Creating RPC '${e}' stream ${a}: ${_}`,m);const b=u.createWebChannel(_,m);this.I_(b);let T=!1,A=!1;const R=new __PRIVATE_StreamBridge({Yo:D=>{A?__PRIVATE_logDebug(Xt,`Not sending because RPC '${e}' stream ${a} is closed:`,D):(T||(__PRIVATE_logDebug(Xt,`Opening RPC '${e}' stream ${a} transport.`),b.open(),T=!0),__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} sending:`,D),b.send(D))},Zo:()=>b.close()}),w=(D,fn,yn)=>{D.listen(fn,(pn=>{try{yn(pn)}catch(wn){setTimeout((()=>{throw wn}),0)}}))};return w(b,WebChannel.EventType.OPEN,(()=>{A||(__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} transport opened.`),R.o_())})),w(b,WebChannel.EventType.CLOSE,(()=>{A||(A=!0,__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} transport closed`),R.a_(),this.E_(b))})),w(b,WebChannel.EventType.ERROR,(D=>{A||(A=!0,__PRIVATE_logWarn(Xt,`RPC '${e}' stream ${a} transport errored. Name:`,D.name,"Message:",D.message),R.a_(new FirestoreError(N.UNAVAILABLE,"The operation could not be completed")))})),w(b,WebChannel.EventType.MESSAGE,(D=>{if(!A){const fn=D.data[0];__PRIVATE_hardAssert(!!fn,16349);const yn=fn,pn=yn?.error||yn[0]?.error;if(pn){__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} received error:`,pn);const wn=pn.status;let V=(function(jt){const ln=pt[jt];if(ln!==void 0)return __PRIVATE_mapCodeFromRpcCode(ln)})(wn),bn=pn.message;V===void 0&&(V=N.INTERNAL,bn="Unknown error status: "+wn+" with message "+pn.message),A=!0,R.a_(new FirestoreError(V,bn)),b.close()}else __PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} received:`,fn),R.u_(fn)}})),w(h,Event.STAT_EVENT,(D=>{D.stat===Stat$1.PROXY?__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} detected buffering proxy`):D.stat===Stat$1.NOPROXY&&__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_getWindow(){return typeof window<"u"?window:null}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(n){return new JsonProtoSerializer(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,s,o=1e3,a=1.5,c=6e4){this.Mi=e,this.timerId=s,this.d_=o,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),a=Math.max(0,s-o);a>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,s,o,a,c,u,h,m){this.Mi=e,this.S_=o,this.b_=a,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __PRIVATE_ExponentialBackoff(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===N.RESOURCE_EXHAUSTED?(__PRIVATE_logError(s.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,a])=>{this.D_===s&&this.G_(o,a)}),(o=>{e((()=>{const a=new FirestoreError(N.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(a)}))}))}G_(e,s){const o=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{o((()=>this.z_(a)))})),this.stream.onMessage((a=>{o((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return __PRIVATE_logDebug(en,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(__PRIVATE_logDebug(en,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,s,o,a,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,o,a,u),this.serializer=c}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=__PRIVATE_fromWatchChange(this.serializer,e),o=(function(c){if(!("targetChange"in c))return SnapshotVersion.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?SnapshotVersion.min():u.readTime?__PRIVATE_fromVersion(u.readTime):SnapshotVersion.min()})(e);return this.listener.H_(s,o)}Y_(e){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.addTarget=(function(c,u){let h;const m=u.target;if(h=__PRIVATE_targetIsDocumentTarget(m)?{documents:__PRIVATE_toDocumentsTarget(c,m)}:{query:__PRIVATE_toQueryTarget(c,m).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=__PRIVATE_toBytes(c,u.resumeToken);const g=__PRIVATE_toInt32Proto(c,u.expectedCount);g!==null&&(h.expectedCount=g)}else if(u.snapshotVersion.compareTo(SnapshotVersion.min())>0){h.readTime=toTimestamp(c,u.snapshotVersion.toTimestamp());const g=__PRIVATE_toInt32Proto(c,u.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const o=__PRIVATE_toListenRequestLabels(this.serializer,e);o&&(s.labels=o),this.q_(s)}Z_(e){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.removeTarget=e,this.q_(s)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,s,o,a,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,o,a,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),o=__PRIVATE_fromVersion(e.commitTime);return this.listener.na(o,s)}ra(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((o=>toMutation(this.serializer,o)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,s,o,a){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=o,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,__PRIVATE_toResourcePath(s,o),a,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new FirestoreError(N.UNKNOWN,c.toString())}))}Ho(e,s,o,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,__PRIVATE_toResourcePath(s,o),a,u,h,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new FirestoreError(N.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(__PRIVATE_logError(s),this.aa=!1):__PRIVATE_logDebug("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,s,o,a,c){this.localStore=e,this.datastore=s,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{o.enqueueAndForget((async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(tn,"Restarting streams for network reachability change."),await(async function(m){const g=__PRIVATE_debugCast(m);g.Ea.add(4),await __PRIVATE_disableNetworkInternal(g),g.Ra.set("Unknown"),g.Ea.delete(4),await __PRIVATE_enableNetworkInternal(g)})(this))}))})),this.Ra=new __PRIVATE_OnlineStateTracker(o,a)}}async function __PRIVATE_enableNetworkInternal(n){if(__PRIVATE_canUseNetwork(n))for(const e of n.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(n){for(const e of n.da)await e(!1)}function __PRIVATE_remoteStoreListen(n,e){const s=__PRIVATE_debugCast(n);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(s)?__PRIVATE_startWatchStream(s):__PRIVATE_ensureWatchStream(s).O_()&&__PRIVATE_sendWatchRequest(s,e))}function __PRIVATE_remoteStoreUnlisten(n,e){const s=__PRIVATE_debugCast(n),o=__PRIVATE_ensureWatchStream(s);s.Ia.delete(e),o.O_()&&__PRIVATE_sendUnwatchRequest(s,e),s.Ia.size===0&&(o.O_()?o.L_():__PRIVATE_canUseNetwork(s)&&s.Ra.set("Unknown"))}function __PRIVATE_sendWatchRequest(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const s=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}__PRIVATE_ensureWatchStream(n).Y_(e)}function __PRIVATE_sendUnwatchRequest(n,e){n.Va.Ue(e),__PRIVATE_ensureWatchStream(n).Z_(e)}function __PRIVATE_startWatchStream(n){n.Va=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(n).start(),n.Ra.ua()}function __PRIVATE_shouldStartWatchStream(n){return __PRIVATE_canUseNetwork(n)&&!__PRIVATE_ensureWatchStream(n).x_()&&n.Ia.size>0}function __PRIVATE_canUseNetwork(n){return __PRIVATE_debugCast(n).Ea.size===0}function __PRIVATE_cleanUpWatchStreamState(n){n.Va=void 0}async function __PRIVATE_onWatchStreamConnected(n){n.Ra.set("Online")}async function __PRIVATE_onWatchStreamOpen(n){n.Ia.forEach(((e,s)=>{__PRIVATE_sendWatchRequest(n,e)}))}async function __PRIVATE_onWatchStreamClose(n,e){__PRIVATE_cleanUpWatchStreamState(n),__PRIVATE_shouldStartWatchStream(n)?(n.Ra.ha(e),__PRIVATE_startWatchStream(n)):n.Ra.set("Unknown")}async function __PRIVATE_onWatchStreamChange(n,e,s){if(n.Ra.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await(async function(a,c){const u=c.cause;for(const h of c.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(o){__PRIVATE_logDebug(tn,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await __PRIVATE_disableNetworkUntilRecovery(n,o)}else if(e instanceof __PRIVATE_DocumentWatchChange?n.Va.Ze(e):e instanceof __PRIVATE_ExistenceFilterChange?n.Va.st(e):n.Va.tt(e),!s.isEqual(SnapshotVersion.min()))try{const o=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(n.localStore);s.compareTo(o)>=0&&await(function(c,u){const h=c.Va.Tt(u);return h.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=c.Ia.get(g);_&&c.Ia.set(g,_.withResumeToken(m.resumeToken,u))}})),h.targetMismatches.forEach(((m,g)=>{const _=c.Ia.get(m);if(!_)return;c.Ia.set(m,_.withResumeToken(ByteString.EMPTY_BYTE_STRING,_.snapshotVersion)),__PRIVATE_sendUnwatchRequest(c,m);const b=new TargetData(_.target,m,g,_.sequenceNumber);__PRIVATE_sendWatchRequest(c,b)})),c.remoteSyncer.applyRemoteEvent(h)})(n,s)}catch(o){__PRIVATE_logDebug(tn,"Failed to raise snapshot:",o),await __PRIVATE_disableNetworkUntilRecovery(n,o)}}async function __PRIVATE_disableNetworkUntilRecovery(n,e,s){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;n.Ea.add(1),await __PRIVATE_disableNetworkInternal(n),n.Ra.set("Offline"),s||(s=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{__PRIVATE_logDebug(tn,"Retrying IndexedDB access"),await s(),n.Ea.delete(1),await __PRIVATE_enableNetworkInternal(n)}))}function __PRIVATE_executeWithRecovery(n,e){return e().catch((s=>__PRIVATE_disableNetworkUntilRecovery(n,s,e)))}async function __PRIVATE_fillWritePipeline(n){const e=__PRIVATE_debugCast(n),s=__PRIVATE_ensureWriteStream(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j;for(;__PRIVATE_canAddToWritePipeline(e);)try{const a=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,o);if(a===null){e.Ta.length===0&&s.L_();break}o=a.batchId,__PRIVATE_addToWritePipeline(e,a)}catch(a){await __PRIVATE_disableNetworkUntilRecovery(e,a)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(n){return __PRIVATE_canUseNetwork(n)&&n.Ta.length<10}function __PRIVATE_addToWritePipeline(n,e){n.Ta.push(e);const s=__PRIVATE_ensureWriteStream(n);s.O_()&&s.X_&&s.ea(e.mutations)}function __PRIVATE_shouldStartWriteStream(n){return __PRIVATE_canUseNetwork(n)&&!__PRIVATE_ensureWriteStream(n).x_()&&n.Ta.length>0}function __PRIVATE_startWriteStream(n){__PRIVATE_ensureWriteStream(n).start()}async function __PRIVATE_onWriteStreamOpen(n){__PRIVATE_ensureWriteStream(n).ra()}async function __PRIVATE_onWriteHandshakeComplete(n){const e=__PRIVATE_ensureWriteStream(n);for(const s of n.Ta)e.ea(s.mutations)}async function __PRIVATE_onMutationResult(n,e,s){const o=n.Ta.shift(),a=MutationBatchResult.from(o,e,s);await __PRIVATE_executeWithRecovery(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await __PRIVATE_fillWritePipeline(n)}async function __PRIVATE_onWriteStreamClose(n,e){e&&__PRIVATE_ensureWriteStream(n).X_&&await(async function(o,a){if((function(u){return __PRIVATE_isPermanentError(u)&&u!==N.ABORTED})(a.code)){const c=o.Ta.shift();__PRIVATE_ensureWriteStream(o).B_(),await __PRIVATE_executeWithRecovery(o,(()=>o.remoteSyncer.rejectFailedWrite(c.batchId,a))),await __PRIVATE_fillWritePipeline(o)}})(n,e),__PRIVATE_shouldStartWriteStream(n)&&__PRIVATE_startWriteStream(n)}async function __PRIVATE_remoteStoreHandleCredentialChange(n,e){const s=__PRIVATE_debugCast(n);s.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(tn,"RemoteStore received new credentials");const o=__PRIVATE_canUseNetwork(s);s.Ea.add(3),await __PRIVATE_disableNetworkInternal(s),o&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await __PRIVATE_enableNetworkInternal(s)}async function __PRIVATE_remoteStoreApplyPrimaryState(n,e){const s=__PRIVATE_debugCast(n);e?(s.Ea.delete(2),await __PRIVATE_enableNetworkInternal(s)):e||(s.Ea.add(2),await __PRIVATE_disableNetworkInternal(s),s.Ra.set("Unknown"))}function __PRIVATE_ensureWatchStream(n){return n.ma||(n.ma=(function(s,o,a){const c=__PRIVATE_debugCast(s);return c.sa(),new __PRIVATE_PersistentListenStream(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(n.datastore,n.asyncQueue,{Xo:__PRIVATE_onWatchStreamConnected.bind(null,n),t_:__PRIVATE_onWatchStreamOpen.bind(null,n),r_:__PRIVATE_onWatchStreamClose.bind(null,n),H_:__PRIVATE_onWatchStreamChange.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),__PRIVATE_shouldStartWatchStream(n)?__PRIVATE_startWatchStream(n):n.Ra.set("Unknown")):(await n.ma.stop(),__PRIVATE_cleanUpWatchStreamState(n))}))),n.ma}function __PRIVATE_ensureWriteStream(n){return n.fa||(n.fa=(function(s,o,a){const c=__PRIVATE_debugCast(s);return c.sa(),new __PRIVATE_PersistentWriteStream(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:__PRIVATE_onWriteStreamOpen.bind(null,n),r_:__PRIVATE_onWriteStreamClose.bind(null,n),ta:__PRIVATE_onWriteHandshakeComplete.bind(null,n),na:__PRIVATE_onMutationResult.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await __PRIVATE_fillWritePipeline(n)):(await n.fa.stop(),n.Ta.length>0&&(__PRIVATE_logDebug(tn,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,s,o,a,c){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,o,a,c){const u=Date.now()+o,h=new DelayedOperation(e,s,u,a,c);return h.start(o),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(n,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${n}`),__PRIVATE_isIndexedDbTransactionError(n))return new FirestoreError(N.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(s,o)=>e(s,o)||DocumentKey.comparator(s.key,o.key):(s,o)=>DocumentKey.comparator(s.key,o.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,o)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;s.hasNext();){const a=s.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const o=new DocumentSet;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=s,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.ga=new SortedMap(DocumentKey.comparator)}track(e){const s=e.doc.key,o=this.ga.get(s);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(s,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(s,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(s):e.type===1&&o.type===2?this.ga=this.ga.insert(s,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):fail(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,o)=>{e.push(o)})),e}}class ViewSnapshot{constructor(e,s,o,a,c,u,h,m,g){this.query=e,this.docs=s,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,s,o,a,c){const u=[];return s.forEach((h=>{u.push({type:0,doc:h})})),new ViewSnapshot(e,s,DocumentSet.emptySet(s),u,o,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,o=e.docChanges;if(s.length!==o.length)return!1;for(let a=0;a<s.length;a++)if(s[a].type!==o[a].type||!s[a].doc.isEqual(o[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,o){const a=__PRIVATE_debugCast(s),c=a.queries;a.queries=__PRIVATE_newQueriesObjectMap(),c.forEach(((u,h)=>{for(const m of h.Sa)m.onError(o)}))})(this,new FirestoreError(N.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap((n=>__PRIVATE_canonifyQuery(n)),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(n,e){const s=__PRIVATE_debugCast(n);let o=3;const a=e.query;let c=s.queries.get(a);c?!c.ba()&&e.Da()&&(o=2):(c=new __PRIVATE_QueryListenersInfo,o=e.Da()?0:1);try{switch(o){case 0:c.wa=await s.onListen(a,!0);break;case 1:c.wa=await s.onListen(a,!1);break;case 2:await s.onFirstRemoteStoreListen(a)}}catch(u){const h=__PRIVATE_wrapInUserErrorIfRecoverable(u,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(h)}s.queries.set(a,c),c.Sa.push(e),e.va(s.onlineState),c.wa&&e.Fa(c.wa)&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}async function __PRIVATE_eventManagerUnlisten(n,e){const s=__PRIVATE_debugCast(n),o=e.query;let a=3;const c=s.queries.get(o);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?a=e.Da()?0:1:!c.ba()&&e.Da()&&(a=2))}switch(a){case 0:return s.queries.delete(o),s.onUnlisten(o,!0);case 1:return s.queries.delete(o),s.onUnlisten(o,!1);case 2:return s.onLastRemoteStoreUnlisten(o);default:return}}function __PRIVATE_eventManagerOnWatchChange(n,e){const s=__PRIVATE_debugCast(n);let o=!1;for(const a of e){const c=a.query,u=s.queries.get(c);if(u){for(const h of u.Sa)h.Fa(a)&&(o=!0);u.wa=a}}o&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}function __PRIVATE_eventManagerOnWatchError(n,e,s){const o=__PRIVATE_debugCast(n),a=o.queries.get(e);if(a)for(const c of a.Sa)c.onError(s);o.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(n){n.Ca.forEach((e=>{e.next()}))}var nn,rn;(rn=nn||(nn={})).Ma="default",rn.Cache="cache";class __PRIVATE_QueryListener{constructor(e,s,o){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const a of e.docChanges)a.type!==3&&o.push(a);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const o=s!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nn.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.eu=__PRIVATE_newQueryComparator(e),this.tu=new DocumentSet(this.eu)}get nu(){return this.Ya}ru(e,s){const o=s?s.iu:new __PRIVATE_DocumentChangeSet,a=s?s.tu:this.tu;let c=s?s.mutatedKeys:this.mutatedKeys,u=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,b)=>{const T=a.get(_),A=__PRIVATE_queryMatches(this.query,b)?b:null,R=!!T&&this.mutatedKeys.has(T.key),w=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let D=!1;T&&A?T.data.isEqual(A.data)?R!==w&&(o.track({type:3,doc:A}),D=!0):this.su(T,A)||(o.track({type:2,doc:A}),D=!0,(m&&this.eu(A,m)>0||g&&this.eu(A,g)<0)&&(h=!0)):!T&&A?(o.track({type:0,doc:A}),D=!0):T&&!A&&(o.track({type:1,doc:T}),D=!0,(m||g)&&(h=!0)),D&&(A?(u=u.add(A),c=w?c.add(_):c.delete(_)):(u=u.delete(_),c=c.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),c=c.delete(_.key),o.track({type:1,doc:_})}return{tu:u,iu:o,Cs:h,mutatedKeys:c}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,o,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,b)=>(function(A,R){const w=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Rt:D})}};return w(A)-w(R)})(_.type,b.type)||this.eu(_.doc,b.doc))),this.ou(o),a=a??!1;const h=s&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,u.length!==0||g?{snapshot:new ViewSnapshot(this.query,e.tu,c,u,e.mutatedKeys,m===0,g,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=__PRIVATE_documentKeySet(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const s=[];return e.forEach((o=>{this.Xa.has(o)||s.push(new __PRIVATE_RemovedLimboDocument(o))})),this.Xa.forEach((o=>{e.has(o)||s.push(new __PRIVATE_AddedLimboDocument(o))})),s}cu(e){this.Ya=e.Qs,this.Xa=__PRIVATE_documentKeySet();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return ViewSnapshot.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sn="SyncEngine";class __PRIVATE_QueryView{constructor(e,s,o){this.query=e,this.targetId=s,this.view=o}}class LimboResolution{constructor(e){this.key=e,this.hu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,s,o,a,c,u){this.localStore=e,this.remoteStore=s,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ObjectMap((h=>__PRIVATE_canonifyQuery(h)),__PRIVATE_queryEquals),this.Iu=new Map,this.Eu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Au=new Map,this.Ru=new __PRIVATE_ReferenceSet,this.Vu={},this.mu=new Map,this.fu=__PRIVATE_TargetIdGenerator.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function __PRIVATE_syncEngineListen(n,e,s=!0){const o=__PRIVATE_ensureWatchCallbacks(n);let a;const c=o.Tu.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await __PRIVATE_allocateTargetAndMaybeListen(o,e,s,!0),a}async function __PRIVATE_triggerRemoteStoreListen(n,e){const s=__PRIVATE_ensureWatchCallbacks(n);await __PRIVATE_allocateTargetAndMaybeListen(s,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(n,e,s,o){const a=await __PRIVATE_localStoreAllocateTarget(n.localStore,__PRIVATE_queryToTarget(e)),c=a.targetId,u=n.sharedClientState.addLocalQueryTarget(c,s);let h;return o&&(h=await __PRIVATE_initializeViewAndComputeSnapshot(n,e,c,u==="current",a.resumeToken)),n.isPrimaryClient&&s&&__PRIVATE_remoteStoreListen(n.remoteStore,a),h}async function __PRIVATE_initializeViewAndComputeSnapshot(n,e,s,o,a){n.pu=(b,T,A)=>(async function(w,D,fn,yn){let pn=D.view.ru(fn);pn.Cs&&(pn=await __PRIVATE_localStoreExecuteQuery(w.localStore,D.query,!1).then((({documents:wt})=>D.view.ru(wt,pn))));const wn=yn&&yn.targetChanges.get(D.targetId),V=yn&&yn.targetMismatches.get(D.targetId)!=null,bn=D.view.applyChanges(pn,w.isPrimaryClient,wn,V);return __PRIVATE_updateTrackedLimbos(w,D.targetId,bn.au),bn.snapshot})(n,b,T,A);const c=await __PRIVATE_localStoreExecuteQuery(n.localStore,e,!0),u=new __PRIVATE_View(e,c.Qs),h=u.ru(c.documents),m=TargetChange.createSynthesizedTargetChangeForCurrentChange(s,o&&n.onlineState!=="Offline",a),g=u.applyChanges(h,n.isPrimaryClient,m);__PRIVATE_updateTrackedLimbos(n,s,g.au);const _=new __PRIVATE_QueryView(e,s,u);return n.Tu.set(e,_),n.Iu.has(s)?n.Iu.get(s).push(e):n.Iu.set(s,[e]),g.snapshot}async function __PRIVATE_syncEngineUnlisten(n,e,s){const o=__PRIVATE_debugCast(n),a=o.Tu.get(e),c=o.Iu.get(a.targetId);if(c.length>1)return o.Iu.set(a.targetId,c.filter((u=>!__PRIVATE_queryEquals(u,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(a.targetId),o.sharedClientState.isActiveQueryTarget(a.targetId)||await __PRIVATE_localStoreReleaseTarget(o.localStore,a.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(a.targetId),s&&__PRIVATE_remoteStoreUnlisten(o.remoteStore,a.targetId),__PRIVATE_removeAndCleanupTarget(o,a.targetId)})).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(o,a.targetId),await __PRIVATE_localStoreReleaseTarget(o.localStore,a.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(n,e){const s=__PRIVATE_debugCast(n),o=s.Tu.get(e),a=s.Iu.get(o.targetId);s.isPrimaryClient&&a.length===1&&(s.sharedClientState.removeLocalQueryTarget(o.targetId),__PRIVATE_remoteStoreUnlisten(s.remoteStore,o.targetId))}async function __PRIVATE_syncEngineWrite(n,e,s){const o=__PRIVATE_syncEngineEnsureWriteCallbacks(n);try{const a=await(function(u,h){const m=__PRIVATE_debugCast(u),g=Timestamp.now(),_=h.reduce(((A,R)=>A.add(R.key)),__PRIVATE_documentKeySet());let b,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let R=__PRIVATE_mutableDocumentMap(),w=__PRIVATE_documentKeySet();return m.Ns.getEntries(A,_).next((D=>{R=D,R.forEach(((fn,yn)=>{yn.isValidDocument()||(w=w.add(fn))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,R))).next((D=>{b=D;const fn=[];for(const yn of h){const pn=__PRIVATE_mutationExtractBaseValue(yn,b.get(yn.key).overlayedDocument);pn!=null&&fn.push(new __PRIVATE_PatchMutation(yn.key,pn,__PRIVATE_extractFieldMask(pn.value.mapValue),Precondition.exists(!0)))}return m.mutationQueue.addMutationBatch(A,g,fn,h)})).next((D=>{T=D;const fn=D.applyToLocalDocumentSet(b,w);return m.documentOverlayCache.saveOverlays(A,D.batchId,fn)}))})).then((()=>({batchId:T.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(b)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(a.batchId),(function(u,h,m){let g=u.Vu[u.currentUser.toKey()];g||(g=new SortedMap(__PRIVATE_primitiveComparator)),g=g.insert(h,m),u.Vu[u.currentUser.toKey()]=g})(o,a.batchId,s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,a.changes),await __PRIVATE_fillWritePipeline(o.remoteStore)}catch(a){const c=__PRIVATE_wrapInUserErrorIfRecoverable(a,"Failed to persist write");s.reject(c)}}async function __PRIVATE_syncEngineApplyRemoteEvent(n,e){const s=__PRIVATE_debugCast(n);try{const o=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(s.localStore,e);e.targetChanges.forEach(((a,c)=>{const u=s.Au.get(c);u&&(__PRIVATE_hardAssert(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?__PRIVATE_hardAssert(u.hu,14607):a.removedDocuments.size>0&&(__PRIVATE_hardAssert(u.hu,42227),u.hu=!1))})),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o,e)}catch(o){await __PRIVATE_ignoreIfPrimaryLeaseLoss(o)}}function __PRIVATE_syncEngineApplyOnlineStateChange(n,e,s){const o=__PRIVATE_debugCast(n);if(o.isPrimaryClient&&s===0||!o.isPrimaryClient&&s===1){const a=[];o.Tu.forEach(((c,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const m=__PRIVATE_debugCast(u);m.onlineState=h;let g=!1;m.queries.forEach(((_,b)=>{for(const T of b.Sa)T.va(h)&&(g=!0)})),g&&__PRIVATE_raiseSnapshotsInSyncEvent(m)})(o.eventManager,e),a.length&&o.Pu.H_(a),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(n,e,s){const o=__PRIVATE_debugCast(n);o.sharedClientState.updateQueryState(e,"rejected",s);const a=o.Au.get(e),c=a&&a.key;if(c){let u=new SortedMap(DocumentKey.comparator);u=u.insert(c,MutableDocument.newNoDocument(c,SnapshotVersion.min()));const h=__PRIVATE_documentKeySet().add(c),m=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),u,h);await __PRIVATE_syncEngineApplyRemoteEvent(o,m),o.du=o.du.remove(c),o.Au.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(o)}else await __PRIVATE_localStoreReleaseTarget(o.localStore,e,!1).then((()=>__PRIVATE_removeAndCleanupTarget(o,e,s))).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(n,e){const s=__PRIVATE_debugCast(n),o=e.batch.batchId;try{const a=await __PRIVATE_localStoreAcknowledgeBatch(s.localStore,e);__PRIVATE_processUserCallback(s,o,null),__PRIVATE_triggerPendingWritesCallbacks(s,o),s.sharedClientState.updateMutationState(o,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}async function __PRIVATE_syncEngineRejectFailedWrite(n,e,s){const o=__PRIVATE_debugCast(n);try{const a=await(function(u,h){const m=__PRIVATE_debugCast(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,h).next((b=>(__PRIVATE_hardAssert(b!==null,37113),_=b.keys(),m.mutationQueue.removeMutationBatch(g,b)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(o.localStore,e);__PRIVATE_processUserCallback(o,e,s),__PRIVATE_triggerPendingWritesCallbacks(o,e),o.sharedClientState.updateMutationState(e,"rejected",s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}function __PRIVATE_triggerPendingWritesCallbacks(n,e){(n.mu.get(e)||[]).forEach((s=>{s.resolve()})),n.mu.delete(e)}function __PRIVATE_processUserCallback(n,e,s){const o=__PRIVATE_debugCast(n);let a=o.Vu[o.currentUser.toKey()];if(a){const c=a.get(e);c&&(s?c.reject(s):c.resolve(),a=a.remove(e)),o.Vu[o.currentUser.toKey()]=a}}function __PRIVATE_removeAndCleanupTarget(n,e,s=null){n.sharedClientState.removeLocalQueryTarget(e);for(const o of n.Iu.get(e))n.Tu.delete(o),s&&n.Pu.yu(o,s);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((o=>{n.Ru.containsKey(o)||__PRIVATE_removeLimboTarget(n,o)}))}function __PRIVATE_removeLimboTarget(n,e){n.Eu.delete(e.path.canonicalString());const s=n.du.get(e);s!==null&&(__PRIVATE_remoteStoreUnlisten(n.remoteStore,s),n.du=n.du.remove(e),n.Au.delete(s),__PRIVATE_pumpEnqueuedLimboResolutions(n))}function __PRIVATE_updateTrackedLimbos(n,e,s){for(const o of s)o instanceof __PRIVATE_AddedLimboDocument?(n.Ru.addReference(o.key,e),__PRIVATE_trackLimboChange(n,o)):o instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(sn,"Document no longer in limbo: "+o.key),n.Ru.removeReference(o.key,e),n.Ru.containsKey(o.key)||__PRIVATE_removeLimboTarget(n,o.key)):fail(19791,{wu:o})}function __PRIVATE_trackLimboChange(n,e){const s=e.key,o=s.path.canonicalString();n.du.get(s)||n.Eu.has(o)||(__PRIVATE_logDebug(sn,"New document in limbo: "+s),n.Eu.add(o),__PRIVATE_pumpEnqueuedLimboResolutions(n))}function __PRIVATE_pumpEnqueuedLimboResolutions(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const s=new DocumentKey(ResourcePath.fromString(e)),o=n.fu.next();n.Au.set(o,new LimboResolution(s)),n.du=n.du.insert(s,o),__PRIVATE_remoteStoreListen(n.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(s.path)),o,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ce))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,e,s){const o=__PRIVATE_debugCast(n),a=[],c=[],u=[];o.Tu.isEmpty()||(o.Tu.forEach(((h,m)=>{u.push(o.pu(m,e,s).then((g=>{if((g||s)&&o.isPrimaryClient){const _=g?!g.fromCache:s?.targetChanges.get(m.targetId)?.current;o.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){a.push(g);const _=__PRIVATE_LocalViewChanges.As(m.targetId,g);c.push(_)}})))})),await Promise.all(u),o.Pu.H_(a),await(async function(m,g){const _=__PRIVATE_debugCast(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>PersistencePromise.forEach(g,(T=>PersistencePromise.forEach(T.Es,(A=>_.persistence.referenceDelegate.addReference(b,T.targetId,A))).next((()=>PersistencePromise.forEach(T.ds,(A=>_.persistence.referenceDelegate.removeReference(b,T.targetId,A)))))))))}catch(b){if(!__PRIVATE_isIndexedDbTransactionError(b))throw b;__PRIVATE_logDebug(Ut,"Failed to update sequence numbers: "+b)}for(const b of g){const T=b.targetId;if(!b.fromCache){const A=_.Ms.get(T),R=A.snapshotVersion,w=A.withLastLimboFreeSnapshotVersion(R);_.Ms=_.Ms.insert(T,w)}}})(o.localStore,c))}async function __PRIVATE_syncEngineHandleCredentialChange(n,e){const s=__PRIVATE_debugCast(n);if(!s.currentUser.isEqual(e)){__PRIVATE_logDebug(sn,"User change. New user:",e.toKey());const o=await __PRIVATE_localStoreHandleUserChange(s.localStore,e);s.currentUser=e,(function(c,u){c.mu.forEach((h=>{h.forEach((m=>{m.reject(new FirestoreError(N.CANCELLED,u))}))})),c.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o.Ls)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(n,e){const s=__PRIVATE_debugCast(n),o=s.Au.get(e);if(o&&o.hu)return __PRIVATE_documentKeySet().add(o.key);{let a=__PRIVATE_documentKeySet();const c=s.Iu.get(e);if(!c)return a;for(const u of c){const h=s.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function __PRIVATE_ensureWatchCallbacks(n){const e=__PRIVATE_debugCast(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.Pu.H_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.Pu.yu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(n){const e=__PRIVATE_debugCast(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Cu(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi,this.serializer)}Du(e){return new __PRIVATE_MemorySharedClientState}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(o,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence((o=>__PRIVATE_MemoryLruDelegate.mi(o,s)),this.serializer)}}class __PRIVATE_IndexedDbOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e,s,o){super(),this.xu=e,this.cacheSizeBytes=s,this.forceOwnership=o,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await __PRIVATE_syncEngineEnsureWriteCallbacks(this.xu.syncEngine),await __PRIVATE_fillWritePipeline(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Fu(e,s){const o=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(o,e.asyncQueue,s)}Mu(e,s){const o=new __PRIVATE_IndexBackfiller(s,this.persistence);return new __PRIVATE_IndexBackfillerScheduler(e.asyncQueue,o)}Cu(e){const s=__PRIVATE_indexedDbStoragePrefix(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_IndexedDbPersistence(this.synchronizeTabs,s,e.clientId,o,e.asyncQueue,__PRIVATE_getWindow(),getDocument(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new __PRIVATE_MemorySharedClientState}}class OnlineComponentProvider{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new __PRIVATE_EventManagerImpl})()}createDatastore(e){const s=__PRIVATE_newSerializer(e.databaseInfo.databaseId),o=(function(c){return new __PRIVATE_WebChannelConnection(c)})(e.databaseInfo);return(function(c,u,h,m){return new __PRIVATE_DatastoreImpl(c,u,h,m)})(e.authCredentials,e.appCheckCredentials,o,s)}createRemoteStore(e){return(function(o,a,c,u,h){return new __PRIVATE_RemoteStoreImpl(o,a,c,u,h)})(this.localStore,this.datastore,e.asyncQueue,(s=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,s,0)),(function(){return __PRIVATE_BrowserConnectivityMonitor.v()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor})())}createSyncEngine(e,s){return(function(a,c,u,h,m,g,_){const b=new __PRIVATE_SyncEngineImpl(a,c,u,h,m,g);return _&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const o=__PRIVATE_debugCast(s);__PRIVATE_logDebug(tn,"RemoteStore shutting down."),o.Ea.add(5),await __PRIVATE_disableNetworkInternal(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="FirestoreClient";class FirestoreClient{constructor(e,s,o,a,c){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=o,this.databaseInfo=a,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(o,(async u=>{__PRIVATE_logDebug(on,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(__PRIVATE_logDebug(on,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const o=__PRIVATE_wrapInUserErrorIfRecoverable(s,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function __PRIVATE_setOfflineComponentProvider(n,e){n.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(on,"Initializing OfflineComponentProvider");const s=n.configuration;await e.initialize(s);let o=s.initialUser;n.setCredentialChangeListener((async a=>{o.isEqual(a)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,a),o=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(n,e){n.asyncQueue.verifyOperationInProgress();const s=await __PRIVATE_ensureOfflineComponents(n);__PRIVATE_logDebug(on,"Initializing OnlineComponentProvider"),await e.initialize(s,n.configuration),n.setCredentialChangeListener((o=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,a)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,a))),n._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){__PRIVATE_logDebug(on,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(n,n._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(a){return a.name==="FirebaseError"?a.code===N.FAILED_PRECONDITION||a.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(s))throw s;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+s),await __PRIVATE_setOfflineComponentProvider(n,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(on,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(n,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return n._offlineComponents}async function __PRIVATE_ensureOnlineComponents(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(__PRIVATE_logDebug(on,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(n,n._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(on,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(n,new OnlineComponentProvider))),n._onlineComponents}function __PRIVATE_getLocalStore(n){return __PRIVATE_ensureOfflineComponents(n).then((e=>e.localStore))}function __PRIVATE_getSyncEngine(n){return __PRIVATE_ensureOnlineComponents(n).then((e=>e.syncEngine))}async function __PRIVATE_getEventManager(n){const e=await __PRIVATE_ensureOnlineComponents(n),s=e.eventManager;return s.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),s.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),s}function __PRIVATE_firestoreClientGetDocumentFromLocalCache(n,e){const s=new __PRIVATE_Deferred;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,c,u){try{const h=await(function(g,_){const b=__PRIVATE_debugCast(g);return b.persistence.runTransaction("read document","readonly",(T=>b.localDocuments.getDocument(T,_)))})(a,c);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new FirestoreError(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=__PRIVATE_wrapInUserErrorIfRecoverable(h,`Failed to get document '${c} from cache`);u.reject(m)}})(await __PRIVATE_getLocalStore(n),e,s))),s.promise}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(n,e,s={}){const o=new __PRIVATE_Deferred;return n.asyncQueue.enqueueAndForget((async()=>(function(c,u,h,m,g){const _=new __PRIVATE_AsyncObserver({next:T=>{_.Nu(),u.enqueueAndForget((()=>__PRIVATE_eventManagerUnlisten(c,b)));const A=T.docs.has(h);!A&&T.fromCache?g.reject(new FirestoreError(N.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&m&&m.source==="server"?g.reject(new FirestoreError(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(h.path),_,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(c,b)})(await __PRIVATE_getEventManager(n),n.asyncQueue,e,s,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="firestore.googleapis.com",un=!0;class FirestoreSettingsImpl{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=an,this.ssl=un}else this.host=e.host,this.ssl=e.ssl??un;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ot;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bt)throw new FirestoreError(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,a){return o.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,s,o,a){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=o,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(o.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new FirestoreError(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const o=_n.get(s);o&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),_n.delete(s),o.terminate())})(this),Promise.resolve()}}function connectFirestoreEmulator(n,e,s,o={}){n=__PRIVATE_cast(n,Firestore$1);const a=isCloudWorkstation(e),c=n._getSettings(),u={...c,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${s}`;a&&(pingServer(`https://${h}`),updateEmulatorBanner("Firestore",!0)),c.host!==an&&c.host!==h&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...c,host:h,ssl:a,emulatorOptions:o};if(!deepEqual(m,u)&&(n._setSettings(m),o.mockUserToken)){let g,_;if(typeof o.mockUserToken=="string")g=o.mockUserToken,_=User.MOCK_USER;else{g=createMockUserToken(o.mockUserToken,n._app?.options.projectId);const b=o.mockUserToken.sub||o.mockUserToken.user_id;if(!b)throw new FirestoreError(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new User(b)}n._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,s,o){this.converter=s,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,s,o){this.converter=s,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,o){if(__PRIVATE_validateJSON(s,DocumentReference._jsonSchema))return new DocumentReference(e,o||null,new DocumentKey(ResourcePath.fromString(s.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(e,s,o){super(e,s,__PRIVATE_newQueryForPath(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(n,e,...s){if(n=getModularInstance$1(n),__PRIVATE_validateNonEmptyArgument("collection","path",e),n instanceof Firestore$1){const o=ResourcePath.fromString(e,...s);return __PRIVATE_validateCollectionPath(o),new CollectionReference(n,null,o)}{if(!(n instanceof DocumentReference||n instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ResourcePath.fromString(e,...s));return __PRIVATE_validateCollectionPath(o),new CollectionReference(n.firestore,null,o)}}function doc(n,e,...s){if(n=getModularInstance$1(n),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),n instanceof Firestore$1){const o=ResourcePath.fromString(e,...s);return __PRIVATE_validateDocumentPath(o),new DocumentReference(n,null,new DocumentKey(o))}{if(!(n instanceof DocumentReference||n instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ResourcePath.fromString(e,...s));return __PRIVATE_validateDocumentPath(o),new DocumentReference(n.firestore,n instanceof CollectionReference?n.converter:null,new DocumentKey(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._c=()=>{const o=getDocument();o&&__PRIVATE_logDebug(cn,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const s=getDocument();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=getDocument();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new __PRIVATE_Deferred;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(cn,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=s,s}enqueueAfterDelay(e,s,o){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const a=DelayedOperation.createAndSchedule(this,e,s,o,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&fail(47125,{Pc:__PRIVATE_getMessageOrStack(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,o)=>s.targetTimeMs-o.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function __PRIVATE_getMessageOrStack(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isPartialObserver(n){return(function(s,o){if(typeof s!="object"||s===null)return!1;const a=s;for(const c of o)if(c in a&&typeof a[c]=="function")return!0;return!1})(n,["next","error","complete"])}class Firestore extends Firestore$1{constructor(e,s,o,a){super(e,s,o,a),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(n,e){const s=typeof n=="object"?n:getApp(),o=typeof n=="string"?n:lt,a=_getProvider(s,"firestore").getImmediate({identifier:o});if(!a._initialized){const c=getDefaultEmulatorHostnameAndPort("firestore");c&&connectFirestoreEmulator(a,...c)}return a}function ensureFirestoreConfigured(n){if(n._terminated)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||__PRIVATE_configureFirestore(n),n._firestoreClient}function __PRIVATE_configureFirestore(n){const e=n._freezeSettings(),s=(function(a,c,u,h){return new DatabaseInfo(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new FirestoreClient(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}function enableIndexedDbPersistence(n,e){__PRIVATE_logWarn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=n._freezeSettings();return __PRIVATE_setPersistenceProviders(n,OnlineComponentProvider.provider,{build:o=>new __PRIVATE_IndexedDbOfflineComponentProvider(o,s.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function __PRIVATE_setPersistenceProviders(n,e,s){if((n=__PRIVATE_cast(n,Firestore))._firestoreClient||n._terminated)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new FirestoreError(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:s},__PRIVATE_configureFirestore(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(s){throw new FirestoreError(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new FirestoreError(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,a){if(o.length!==a.length)return!1;for(let c=0;c<o.length;++c)if(o[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new VectorValue(e.vectorValues);throw new FirestoreError(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=/^__.*__$/;class ParsedSetData{constructor(e,s,o){this.data=e,this.fieldMask=s,this.fieldTransforms=o}toMutation(e,s){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,s,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,s,this.fieldTransforms)}}function __PRIVATE_isWrite(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ac:n})}}class __PRIVATE_ParseContextImpl{constructor(e,s,o,a,c,u){this.settings=e,this.databaseId=s,this.serializer=o,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new __PRIVATE_ParseContextImpl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),o=this.Vc({path:s,fc:!1});return o.gc(e),o}yc(e){const s=this.path?.child(e),o=this.Vc({path:s,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ac)&&hn.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,s,o){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=o||__PRIVATE_newSerializer(e)}Cc(e,s,o,a=!1){return new __PRIVATE_ParseContextImpl({Ac:e,methodName:s,Dc:o,path:FieldPath$1.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(n){const e=n._freezeSettings(),s=__PRIVATE_newSerializer(n._databaseId);return new __PRIVATE_UserDataReader(n._databaseId,!!e.ignoreUndefinedProperties,s)}function __PRIVATE_parseSetData(n,e,s,o,a,c={}){const u=n.Cc(c.merge||c.mergeFields?2:0,e,s,a);__PRIVATE_validatePlainObject("Data must be an object, but it was:",u,o);const h=__PRIVATE_parseObject(o,u);let m,g;if(c.merge)m=new FieldMask(u.fieldMask),g=u.fieldTransforms;else if(c.mergeFields){const _=[];for(const b of c.mergeFields){const T=__PRIVATE_fieldPathFromArgument$1(e,b,s);if(!u.contains(T))throw new FirestoreError(N.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(_,T)||_.push(T)}m=new FieldMask(_),g=u.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,g=u.fieldTransforms;return new ParsedSetData(new ObjectValue(h),m,g)}class __PRIVATE_ServerTimestampFieldValueImpl extends FieldValue{_toFieldTransform(e){return new FieldTransform(e.path,new __PRIVATE_ServerTimestampTransform)}isEqual(e){return e instanceof __PRIVATE_ServerTimestampFieldValueImpl}}function __PRIVATE_parseQueryValue(n,e,s,o=!1){return __PRIVATE_parseData(s,n.Cc(o?4:3,e))}function __PRIVATE_parseData(n,e){if(__PRIVATE_looksLikeJsonObject(n=getModularInstance$1(n)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,n),__PRIVATE_parseObject(n,e);if(n instanceof FieldValue)return(function(o,a){if(!__PRIVATE_isWrite(a.Ac))throw a.Sc(`${o._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,a){const c=[];let u=0;for(const h of o){let m=__PRIVATE_parseData(h,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),u++}return{arrayValue:{values:c}}})(n,e)}return(function(o,a){if((o=getModularInstance$1(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return toNumber$1(a.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const c=Timestamp.fromDate(o);return{timestampValue:toTimestamp(a.serializer,c)}}if(o instanceof Timestamp){const c=new Timestamp(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:toTimestamp(a.serializer,c)}}if(o instanceof GeoPoint)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(a.serializer,o._byteString)};if(o instanceof DocumentReference){const c=a.databaseId,u=o.firestore._databaseId;if(!u.isEqual(c))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:__PRIVATE_toResourceName(o.firestore._databaseId||a.databaseId,o._key.path)}}if(o instanceof VectorValue)return(function(u,h){return{mapValue:{fields:{[ht]:{stringValue:It},[Et]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(h.serializer,g)}))}}}}}})(o,a);throw a.Sc(`Unsupported field value: ${__PRIVATE_valueDescription(o)}`)})(n,e)}function __PRIVATE_parseObject(n,e){const s={};return isEmpty(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(n,((o,a)=>{const c=__PRIVATE_parseData(a,e.mc(o));c!=null&&(s[o]=c)})),{mapValue:{fields:s}}}function __PRIVATE_looksLikeJsonObject(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Timestamp||n instanceof GeoPoint||n instanceof Bytes||n instanceof DocumentReference||n instanceof FieldValue||n instanceof VectorValue)}function __PRIVATE_validatePlainObject(n,e,s){if(!__PRIVATE_looksLikeJsonObject(s)||!__PRIVATE_isPlainObject(s)){const o=__PRIVATE_valueDescription(s);throw o==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+o)}}function __PRIVATE_fieldPathFromArgument$1(n,e,s){if((e=getModularInstance$1(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(n,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",n,!1,void 0,s)}const Pn=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(n,e,s){if(e.search(Pn)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,s);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,s)}}function __PRIVATE_createError(n,e,s,o,a){const c=o&&!o.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;s&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(c||u)&&(m+=" (found",c&&(m+=` in field ${o}`),u&&(m+=` in document ${a}`),m+=")"),new FirestoreError(N.INVALID_ARGUMENT,h+n+m)}function __PRIVATE_fieldMaskContains(n,e){return n.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,s,o,a,c){this._firestore=e,this._userDataWriter=s,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(n,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(n,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new FirestoreError(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(n,e,...s){let o=[];e instanceof AppliableConstraint&&o.push(e),o=o.concat(s),(function(c){const u=c.filter((m=>m instanceof QueryCompositeFilterConstraint)).length,h=c.filter((m=>m instanceof QueryFieldFilterConstraint)).length;if(u>1||u>0&&h>0)throw new FirestoreError(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const a of o)n=a._apply(n);return n}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,s,o){super(),this._field=e,this._op=s,this._value=o,this.type="where"}static _create(e,s,o){return new QueryFieldFilterConstraint(e,s,o)}_apply(e){const s=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,s),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,s))}_parse(e){const s=__PRIVATE_newUserDataReader(e.firestore);return(function(c,u,h,m,g,_,b){let T;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(b,_);const R=[];for(const w of b)R.push(__PRIVATE_parseDocumentIdValue(m,c,w));T={arrayValue:{values:R}}}else T=__PRIVATE_parseDocumentIdValue(m,c,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(b,_),T=__PRIVATE_parseQueryValue(h,u,b,_==="in"||_==="not-in");return FieldFilter.create(g,_,T)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new QueryCompositeFilterConstraint(e,s)}_parse(e){const s=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return s.length===1?s[0]:CompositeFilter.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(a,c){let u=a;const h=c.getFlattenedFilters();for(const m of h)__PRIVATE_validateNewFieldFilter(u,m),u=__PRIVATE_queryWithAddedFilter(u,m)})(e._query,s),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new QueryOrderByConstraint(e,s)}_apply(e){const s=(function(a,c,u){if(a.startAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(c,u)})(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,(function(a,c){const u=a.explicitOrderBy.concat([c]);return new __PRIVATE_QueryImpl(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,s))}}function orderBy(n,e="asc"){const s=e,o=__PRIVATE_fieldPathFromArgument("orderBy",n);return QueryOrderByConstraint._create(o,s)}class QueryLimitConstraint extends QueryConstraint{constructor(e,s,o){super(),this.type=e,this._limit=s,this._limitType=o}static _create(e,s,o){return new QueryLimitConstraint(e,s,o)}_apply(e){return new Query(e.firestore,e.converter,__PRIVATE_queryWithLimit(e._query,this._limit,this._limitType))}}function limit(n){return QueryLimitConstraint._create("limit",n,"F")}function __PRIVATE_parseDocumentIdValue(n,e,s){if(typeof(s=getModularInstance$1(s))=="string"){if(s==="")throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&s.indexOf("/")!==-1)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const o=e.path.child(ResourcePath.fromString(s));if(!DocumentKey.isDocumentKey(o))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return __PRIVATE_refValue(n,new DocumentKey(o))}if(s instanceof DocumentReference)return __PRIVATE_refValue(n,s._key);throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(s)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(n,e){if(!Array.isArray(n)||n.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(n,e){const s=(function(a,c){for(const u of a)for(const h of u.getFlattenedFilters())if(c.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,s="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const o={};return forEach(e,((a,c)=>{o[a]=this.convertValue(c,s)})),o}convertVectorValue(e){const s=e.fields?.[Et].arrayValue?.values?.map((o=>__PRIVATE_normalizeNumber(o.doubleValue)));return new VectorValue(s)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,s){return(e.values||[]).map((o=>this.convertValue(o,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const o=__PRIVATE_getPreviousValue(e);return o==null?null:this.convertValue(o,s);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const s=__PRIVATE_normalizeTimestamp(e);return new Timestamp(s.seconds,s.nanos)}convertDocumentKey(e,s){const o=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(o),9688,{name:e});const a=new DatabaseId(o.get(1),o.get(3)),c=new DocumentKey(o.popFirst(5));return a.isEqual(s)||__PRIVATE_logError(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(n,e,s){let o;return o=n?s&&(s.merge||s.mergeFields)?n.toFirestore(e,s):n.toFirestore(e):e,o}class SnapshotMetadata{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,s,o,a,c,u){super(e,s,o,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const o=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=DocumentSnapshot._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,s,o,a){this._firestore=e,this._userDataWriter=s,this._snapshot=a,this.metadata=new SnapshotMetadata(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((o=>{e.call(s,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,o.key,o,new SnapshotMetadata(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const m=new QueryDocumentSnapshot(a._firestore,a._userDataWriter,h.doc.key,h.doc,new SnapshotMetadata(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>c||h.type!==3)).map((h=>{const m=new QueryDocumentSnapshot(a._firestore,a._userDataWriter,h.doc.key,h.doc,new SnapshotMetadata(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return h.type!==0&&(g=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),_=u.indexOf(h.doc.key)),{type:__PRIVATE_resultChangeType(h.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],o=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(s.push(c._document),o.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(n){n=__PRIVATE_cast(n,DocumentReference);const e=__PRIVATE_cast(n.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),n._key).then((s=>__PRIVATE_convertToDocSnapshot(e,n,s)))}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,s)}}function getDocFromCache(n){n=__PRIVATE_cast(n,DocumentReference);const e=__PRIVATE_cast(n.firestore,Firestore),s=ensureFirestoreConfigured(e),o=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_firestoreClientGetDocumentFromLocalCache(s,n._key).then((a=>new DocumentSnapshot(e,o,n._key,a,new SnapshotMetadata(a!==null&&a.hasLocalMutations,!0),n.converter)))}function setDoc(n,e,s){n=__PRIVATE_cast(n,DocumentReference);const o=__PRIVATE_cast(n.firestore,Firestore),a=__PRIVATE_applyFirestoreDataConverter(n.converter,e,s);return executeWrite(o,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(o),"setDoc",n._key,a,n.converter!==null,s).toMutation(n._key,Precondition.none())])}function addDoc(n,e){const s=__PRIVATE_cast(n.firestore,Firestore),o=doc(n),a=__PRIVATE_applyFirestoreDataConverter(n.converter,e);return executeWrite(s,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(n.firestore),"addDoc",o._key,a,n.converter!==null,{}).toMutation(o._key,Precondition.exists(!1))]).then((()=>o))}function onSnapshot(n,...e){n=getModularInstance$1(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||__PRIVATE_isPartialObserver(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(__PRIVATE_isPartialObserver(e[o])){const m=e[o];e[o]=m.next?.bind(m),e[o+1]=m.error?.bind(m),e[o+2]=m.complete?.bind(m)}let c,u,h;if(n instanceof DocumentReference)u=__PRIVATE_cast(n.firestore,Firestore),h=__PRIVATE_newQueryForPath(n._key.path),c={next:m=>{e[o]&&e[o](__PRIVATE_convertToDocSnapshot(u,n,m))},error:e[o+1],complete:e[o+2]};else{const m=__PRIVATE_cast(n,Query);u=__PRIVATE_cast(m.firestore,Firestore),h=m._query;const g=new __PRIVATE_ExpUserDataWriter(u);c={next:_=>{e[o]&&e[o](new QuerySnapshot(u,g,m,_))},error:e[o+1],complete:e[o+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(n._query)}return(function(g,_,b,T){const A=new __PRIVATE_AsyncObserver(T),R=new __PRIVATE_QueryListener(_,A,b);return g.asyncQueue.enqueueAndForget((async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(g),R))),()=>{A.Nu(),g.asyncQueue.enqueueAndForget((async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(g),R)))}})(ensureFirestoreConfigured(u),h,a,c)}function executeWrite(n,e){return(function(o,a){const c=new __PRIVATE_Deferred;return o.asyncQueue.enqueueAndForget((async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(o),a,c))),c.promise})(ensureFirestoreConfigured(n),e)}function __PRIVATE_convertToDocSnapshot(n,e,s){const o=s.docs.get(e._key),a=new __PRIVATE_ExpUserDataWriter(n);return new DocumentSnapshot(n,a,e._key,o,new SnapshotMetadata(s.hasPendingWrites,s.fromCache),e.converter)}function serverTimestamp(){return new __PRIVATE_ServerTimestampFieldValueImpl("serverTimestamp")}(function(e,s=!0){(function(a){x=a})(SDK_VERSION),_registerComponent(new Component$1("firestore",((o,{instanceIdentifier:a,options:c})=>{const u=o.getProvider("app").getImmediate(),h=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(o.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(u,o.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new FirestoreError(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(g.options.projectId,_)})(u,a),u);return c={useFetchStreams:s,...c},h._setSettings(c),h}),"PUBLIC").setMultipleInstances(!0)),registerVersion(F,M,e),registerVersion(F,M,"esm2020")})();function addDomEvent$1(n,e,s,o){return n.addEventListener(e,s,o),()=>{n.removeEventListener(e,s,o)}}function isHTMLElement$1(n){return n!=null&&typeof n=="object"&&"nodeType"in n&&n.nodeType===Node.ELEMENT_NODE}function isBrowser$2(){return!!globalThis?.document}function isHiddenElement(n){return n.parentElement&&isHiddenElement(n.parentElement)?!0:n.hidden}function isContentEditableElement(n){const e=n.getAttribute("contenteditable");return e!=="false"&&e!=null}function isDisabledElement(n){return!!n.getAttribute("disabled")||!!n.getAttribute("aria-disabled")}function getEventWindow(n){return n.view??window}function isMouseEvent(n){const e=getEventWindow(n);return typeof e.PointerEvent<"u"&&n instanceof e.PointerEvent?n.pointerType==="mouse":n instanceof e.MouseEvent}function isTouchEvent(n){return!!n.touches}function isMultiTouchEvent(n){return isTouchEvent(n)&&n.touches.length>1}function pointFromTouch(n,e="page"){const s=n.touches[0]||n.changedTouches[0];return{x:s[`${e}X`],y:s[`${e}Y`]}}function pointFromMouse(n,e="page"){return{x:n[`${e}X`],y:n[`${e}Y`]}}function getEventPoint(n,e="page"){return isTouchEvent(n)?pointFromTouch(n,e):pointFromMouse(n,e)}function filter$2(n){return e=>{const s=isMouseEvent(e);(!s||s&&e.button===0)&&n(e)}}function wrap$1(n,e=!1){function s(a){n(a,{point:getEventPoint(a)})}return e?filter$2(s):s}function addPointerEvent$1(n,e,s,o){return addDomEvent$1(n,e,wrap$1(s,e==="pointerdown"),o)}function assignAfter(n,...e){if(n==null)throw new TypeError("Cannot convert undefined or null to object");const s={...n};for(const o of e)if(o!=null)for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&(a in s&&delete s[a],s[a]=o[a]);return s}const dataAttr=n=>n?"":void 0,ariaAttr=n=>n?!0:void 0;function isArray(n){return Array.isArray(n)}function isObject$1(n){const e=typeof n;return n!=null&&(e==="object"||e==="function")&&!isArray(n)}function getLastItem(n){const e=n==null?0:n.length;return e?n[e-1]:void 0}function analyzeCSSValue$1(n){const e=parseFloat(n.toString()),s=n.toString().replace(String(e),"");return{unitless:!s,value:e,unit:s}}function px$1(n){if(n==null)return n;const{unitless:e}=analyzeCSSValue$1(n);return e||typeof n=="number"?`${n}px`:n}const sortByBreakpointValue=(n,e)=>parseInt(n[1],10)>parseInt(e[1],10)?1:-1,sortBps=n=>Object.fromEntries(Object.entries(n).sort(sortByBreakpointValue));function normalize$3(n){const e=sortBps(n);return Object.assign(Object.values(e),e)}function keys(n){const e=Object.keys(sortBps(n));return new Set(e)}function subtract$3(n){if(!n)return n;n=px$1(n)??n;const e=-.02;return typeof n=="number"?`${n+e}`:n.replace(/(\d+\.?\d*)/u,s=>`${parseFloat(s)+e}`)}function toMediaQueryString(n,e){const s=["@media screen"];return n&&s.push("and",`(min-width: ${px$1(n)})`),e&&s.push("and",`(max-width: ${px$1(e)})`),s.join(" ")}function analyzeBreakpoints(n){if(!n)return null;n.base=n.base??"0px";const e=normalize$3(n),s=Object.entries(n).sort(sortByBreakpointValue).map(([c,u],h,m)=>{let[,g]=m[h+1]??[];return g=parseFloat(g)>0?subtract$3(g):void 0,{_minW:subtract$3(u),breakpoint:c,minW:u,maxW:g,maxWQuery:toMediaQueryString(null,g),minWQuery:toMediaQueryString(u),minMaxQuery:toMediaQueryString(u,g)}}),o=keys(n),a=Array.from(o.values());return{keys:o,normalized:e,isResponsive(c){const u=Object.keys(c);return u.length>0&&u.every(h=>o.has(h))},asObject:sortBps(n),asArray:normalize$3(n),details:s,get(c){return s.find(u=>u.breakpoint===c)},media:[null,...e.map(c=>toMediaQueryString(c)).slice(1)],toArrayValue(c){if(!isObject$1(c))throw new Error("toArrayValue: value must be an object");const u=a.map(h=>c[h]??null);for(;getLastItem(u)===null;)u.pop();return u},toObjectValue(c){if(!Array.isArray(c))throw new Error("toObjectValue: value must be an array");return c.reduce((u,h,m)=>{const g=a[m];return g!=null&&h!=null&&(u[g]=h),u},{})}}}function callAllHandlers(...n){return function(s){n.some(o=>(o?.(s),s?.defaultPrevented))}}function getValidChildren(n){return reactExports.Children.toArray(n).filter(e=>reactExports.isValidElement(e))}function compact(n){const e=Object.assign({},n);for(let s in e)e[s]===void 0&&delete e[s];return e}function getErrorMessage(n,e){return`${n} returned \`undefined\`. Seems you forgot to wrap component within ${e}`}function createContext(n={}){const{name:e,strict:s=!0,hookName:o="useContext",providerName:a="Provider",errorMessage:c,defaultValue:u}=n,h=reactExports.createContext(u);h.displayName=e;function m(){const g=reactExports.useContext(h);if(!g&&s){const _=new Error(c??getErrorMessage(o,a));throw _.name="ContextError",Error.captureStackTrace?.(_,m),_}return g}return[h.Provider,m,h]}const cx=(...n)=>n.filter(Boolean).join(" "),hasTabIndex=n=>n.hasAttribute("tabindex");function isFocusable(n){if(!isHTMLElement$1(n)||isHiddenElement(n)||isDisabledElement(n))return!1;const{localName:e}=n;if(["input","select","textarea","button"].indexOf(e)>=0)return!0;const o={a:()=>n.hasAttribute("href"),audio:()=>n.hasAttribute("controls"),video:()=>n.hasAttribute("controls")};return e in o?o[e]():isContentEditableElement(n)?!0:hasTabIndex(n)}const focusableElList=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],focusableElSelector=focusableElList.join(),isVisible=n=>n.offsetWidth>0&&n.offsetHeight>0;function getAllFocusable(n){const e=Array.from(n.querySelectorAll(focusableElSelector));return e.unshift(n),e.filter(s=>isFocusable(s)&&isVisible(s))}function get$2(n,e,s,o){const a=typeof e=="string"?e.split("."):[e];for(o=0;o<a.length&&n;o+=1)n=n[a[o]];return n===void 0?s:n}const memoize$2=n=>{const e=new WeakMap;return(o,a,c,u)=>{if(typeof o>"u")return n(o,a,c);e.has(o)||e.set(o,new Map);const h=e.get(o);if(h.has(a))return h.get(a);const m=n(o,a,c,u);return h.set(a,m),m}},memoizedGet$1=memoize$2(get$2),interopDefault=n=>n.default||n;function toNumber(n){const e=parseFloat(n);return typeof e!="number"||Number.isNaN(e)?0:e}function toPrecision(n,e){let s=toNumber(n);const o=10**(e??10);return s=Math.round(s*o)/o,e?s.toFixed(e):s.toString()}function countDecimalPlaces(n){if(!Number.isFinite(n))return 0;let e=1,s=0;for(;Math.round(n*e)/e!==n;)e*=10,s+=1;return s}function valueToPercent$1(n,e,s){return(n-e)*100/(s-e)}function percentToValue(n,e,s){return(s-e)*n+e}function roundValueToStep(n,e,s){const o=Math.round((n-e)/s)*s+e,a=countDecimalPlaces(s);return toPrecision(o,a)}function clampValue(n,e,s){return n==null?n:(s<e&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(n,e),s))}function omit(n,e=[]){const s=Object.assign({},n);for(const o of e)o in s&&delete s[o];return s}function pick(n,e){const s={};for(const o of e)o in n&&(s[o]=n[o]);return s}function mapResponsive(n,e){return Array.isArray(n)?n.map(s=>s===null?null:e(s)):isObject$1(n)?Object.keys(n).reduce((s,o)=>(s[o]=e(n[o]),s),{}):n!=null?e(n):null}const isFunction$1=n=>typeof n=="function";function runIfFn$1(n,...e){return isFunction$1(n)?n(...e):n}function split(n,e){const s={},o={};for(const[a,c]of Object.entries(n))e.includes(a)?s[a]=c:o[a]=c;return[s,o]}function splitProps(n,...e){const s=Object.getOwnPropertyDescriptors(n),o=Object.keys(s),a=u=>{const h={};for(let m=0;m<u.length;m++){const g=u[m];s[g]&&(Object.defineProperty(h,g,s[g]),delete s[g])}return h},c=u=>a(Array.isArray(u)?u:o.filter(u));return e.map(c).concat(a(o))}function walkObject(n,e,s={}){const{stop:o,getKey:a}=s;function c(u,h=[]){if(isObject$1(u)||Array.isArray(u)){const m={};for(const[g,_]of Object.entries(u)){const b=a?.(g)??g,T=[...h,b];if(o?.(u,T))return e(u,h);m[b]=c(_,T)}return m}return e(u,h)}return c(n)}var lodash_mergewith={exports:{}};lodash_mergewith.exports;var hasRequiredLodash_mergewith;function requireLodash_mergewith(){return hasRequiredLodash_mergewith||(hasRequiredLodash_mergewith=1,(function(n,e){var s=200,o="__lodash_hash_undefined__",a=800,c=16,u=9007199254740991,h="[object Arguments]",m="[object Array]",g="[object AsyncFunction]",_="[object Boolean]",b="[object Date]",T="[object Error]",A="[object Function]",R="[object GeneratorFunction]",w="[object Map]",D="[object Number]",fn="[object Null]",yn="[object Object]",pn="[object Proxy]",wn="[object RegExp]",V="[object Set]",bn="[object String]",wt="[object Undefined]",jt="[object WeakMap]",ln="[object ArrayBuffer]",vn="[object DataView]",dn="[object Float32Array]",mn="[object Float64Array]",zt="[object Int8Array]",$n="[object Int16Array]",Sn="[object Int32Array]",En="[object Uint8Array]",Cn="[object Uint8ClampedArray]",On="[object Uint16Array]",Fn="[object Uint32Array]",An=/[\\^$.*+?()[\]{}|]/g,Vn=/^\[object .+?Constructor\]$/,Bn=/^(?:0|[1-9]\d*)$/,Ln={};Ln[dn]=Ln[mn]=Ln[zt]=Ln[$n]=Ln[Sn]=Ln[En]=Ln[Cn]=Ln[On]=Ln[Fn]=!0,Ln[h]=Ln[m]=Ln[ln]=Ln[_]=Ln[vn]=Ln[b]=Ln[T]=Ln[A]=Ln[w]=Ln[D]=Ln[yn]=Ln[wn]=Ln[V]=Ln[bn]=Ln[jt]=!1;var Xn=typeof commonjsGlobal$2=="object"&&commonjsGlobal$2&&commonjsGlobal$2.Object===Object&&commonjsGlobal$2,er=typeof self=="object"&&self&&self.Object===Object&&self,rr=Xn||er||Function("return this")(),cr=e&&!e.nodeType&&e,ar=cr&&!0&&n&&!n.nodeType&&n,pr=ar&&ar.exports===cr,_r=pr&&Xn.process,jr=(function(){try{var In=ar&&ar.require&&ar.require("util").types;return In||_r&&_r.binding&&_r.binding("util")}catch{}})(),Sr=jr&&jr.isTypedArray;function Tr(In,Mn,Kn){switch(Kn.length){case 0:return In.call(Mn);case 1:return In.call(Mn,Kn[0]);case 2:return In.call(Mn,Kn[0],Kn[1]);case 3:return In.call(Mn,Kn[0],Kn[1],Kn[2])}return In.apply(Mn,Kn)}function sr(In,Mn){for(var Kn=-1,lr=Array(In);++Kn<In;)lr[Kn]=Mn(Kn);return lr}function Ar(In){return function(Mn){return In(Mn)}}function qr(In,Mn){return In?.[Mn]}function Vr(In,Mn){return function(Kn){return In(Mn(Kn))}}var ui=Array.prototype,si=Function.prototype,ni=Object.prototype,pi=rr["__core-js_shared__"],ii=si.toString,di=ni.hasOwnProperty,Zi=(function(){var In=/[^.]+$/.exec(pi&&pi.keys&&pi.keys.IE_PROTO||"");return In?"Symbol(src)_1."+In:""})(),Ei=ni.toString,Ur=ii.call(Object),gn=RegExp("^"+ii.call(di).replace(An,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=pr?rr.Buffer:void 0,C=rr.Symbol,xn=rr.Uint8Array;P&&P.allocUnsafe;var kn=Vr(Object.getPrototypeOf,Object),Hn=Object.create,Qn=ni.propertyIsEnumerable,hr=ui.splice,Zn=C?C.toStringTag:void 0,or=(function(){try{var In=ai(Object,"defineProperty");return In({},"",{}),In}catch{}})(),ur=P?P.isBuffer:void 0,fr=Math.max,Fr=Date.now,vr=ai(rr,"Map"),Mr=ai(Object,"create"),Pr=(function(){function In(){}return function(Mn){if(!wi(Mn))return{};if(Hn)return Hn(Mn);In.prototype=Mn;var Kn=new In;return In.prototype=void 0,Kn}})();function Rr(In){var Mn=-1,Kn=In==null?0:In.length;for(this.clear();++Mn<Kn;){var lr=In[Mn];this.set(lr[0],lr[1])}}function Si(){this.__data__=Mr?Mr(null):{},this.size=0}function vi(In){var Mn=this.has(In)&&delete this.__data__[In];return this.size-=Mn?1:0,Mn}function Ai(In){var Mn=this.__data__;if(Mr){var Kn=Mn[In];return Kn===o?void 0:Kn}return di.call(Mn,In)?Mn[In]:void 0}function Ji(In){var Mn=this.__data__;return Mr?Mn[In]!==void 0:di.call(Mn,In)}function ki(In,Mn){var Kn=this.__data__;return this.size+=this.has(In)?0:1,Kn[In]=Mr&&Mn===void 0?o:Mn,this}Rr.prototype.clear=Si,Rr.prototype.delete=vi,Rr.prototype.get=Ai,Rr.prototype.has=Ji,Rr.prototype.set=ki;function oi(In){var Mn=-1,Kn=In==null?0:In.length;for(this.clear();++Mn<Kn;){var lr=In[Mn];this.set(lr[0],lr[1])}}function Er(){this.__data__=[],this.size=0}function $r(In){var Mn=this.__data__,Kn=to(Mn,In);if(Kn<0)return!1;var lr=Mn.length-1;return Kn==lr?Mn.pop():hr.call(Mn,Kn,1),--this.size,!0}function ei(In){var Mn=this.__data__,Kn=to(Mn,In);return Kn<0?void 0:Mn[Kn][1]}function mi(In){return to(this.__data__,In)>-1}function is(In,Mn){var Kn=this.__data__,lr=to(Kn,In);return lr<0?(++this.size,Kn.push([In,Mn])):Kn[lr][1]=Mn,this}oi.prototype.clear=Er,oi.prototype.delete=$r,oi.prototype.get=ei,oi.prototype.has=mi,oi.prototype.set=is;function js(In){var Mn=-1,Kn=In==null?0:In.length;for(this.clear();++Mn<Kn;){var lr=In[Mn];this.set(lr[0],lr[1])}}function Us(){this.size=0,this.__data__={hash:new Rr,map:new(vr||oi),string:new Rr}}function Pa(In){var Mn=Vo(this,In).delete(In);return this.size-=Mn?1:0,Mn}function eo(In){return Vo(this,In).get(In)}function zs(In){return Vo(this,In).has(In)}function Ds(In,Mn){var Kn=Vo(this,In),lr=Kn.size;return Kn.set(In,Mn),this.size+=Kn.size==lr?0:1,this}js.prototype.clear=Us,js.prototype.delete=Pa,js.prototype.get=eo,js.prototype.has=zs,js.prototype.set=Ds;function Li(In){var Mn=this.__data__=new oi(In);this.size=Mn.size}function Ts(){this.__data__=new oi,this.size=0}function Fi(In){var Mn=this.__data__,Kn=Mn.delete(In);return this.size=Mn.size,Kn}function fi(In){return this.__data__.get(In)}function na(In){return this.__data__.has(In)}function Ro(In,Mn){var Kn=this.__data__;if(Kn instanceof oi){var lr=Kn.__data__;if(!vr||lr.length<s-1)return lr.push([In,Mn]),this.size=++Kn.size,this;Kn=this.__data__=new js(lr)}return Kn.set(In,Mn),this.size=Kn.size,this}Li.prototype.clear=Ts,Li.prototype.delete=Fi,Li.prototype.get=fi,Li.prototype.has=na,Li.prototype.set=Ro;function ss(In,Mn){var Kn=cs(In),lr=!Kn&&Gi(In),wr=!Kn&&!lr&&ds(In),Nr=!Kn&&!lr&&!wr&&fs(In),Gr=Kn||lr||wr||Nr,xr=Gr?sr(In.length,String):[],zr=xr.length;for(var li in In)Gr&&(li=="length"||wr&&(li=="offset"||li=="parent")||Nr&&(li=="buffer"||li=="byteLength"||li=="byteOffset")||Ms(li,zr))||xr.push(li);return xr}function os(In,Mn,Kn){(Kn!==void 0&&!es(In[Mn],Kn)||Kn===void 0&&!(Mn in In))&&$s(In,Mn,Kn)}function Ca(In,Mn,Kn){var lr=In[Mn];(!(di.call(In,Mn)&&es(lr,Kn))||Kn===void 0&&!(Mn in In))&&$s(In,Mn,Kn)}function to(In,Mn){for(var Kn=In.length;Kn--;)if(es(In[Kn][0],Mn))return Kn;return-1}function $s(In,Mn,Kn){Mn=="__proto__"&&or?or(In,Mn,{configurable:!0,enumerable:!0,value:Kn,writable:!0}):In[Mn]=Kn}var Va=ro();function as(In){return In==null?In===void 0?wt:fn:Zn&&Zn in Object(In)?Ki(In):Da(In)}function ls(In){return Di(In)&&as(In)==h}function Ri(In){if(!wi(In)||so(In))return!1;var Mn=Do(In)?gn:Vn;return Mn.test(ko(In))}function no(In){return Di(In)&&Hs(In.length)&&!!Ln[as(In)]}function ka(In){if(!wi(In))return oo(In);var Mn=Yi(In),Kn=[];for(var lr in In)lr=="constructor"&&(Mn||!di.call(In,lr))||Kn.push(lr);return Kn}function xs(In,Mn,Kn,lr,wr){In!==Mn&&Va(Mn,function(Nr,Gr){if(wr||(wr=new Li),wi(Nr))wo(In,Mn,Gr,Kn,xs,lr,wr);else{var xr=lr?lr(ao(In,Gr),Nr,Gr+"",In,Mn,wr):void 0;xr===void 0&&(xr=Nr),os(In,Gr,xr)}},Ss)}function wo(In,Mn,Kn,lr,wr,Nr,Gr){var xr=ao(In,Kn),zr=ao(Mn,Kn),li=Gr.get(zr);if(li){os(In,Kn,li);return}var $i=Nr?Nr(xr,zr,Kn+"",In,Mn,Gr):void 0,co=$i===void 0;if(co){var Bs=cs(zr),Gs=!Bs&&ds(zr),$o=!Bs&&!Gs&&fs(zr);$i=zr,Bs||Gs||$o?cs(xr)?$i=xr:aa(xr)?$i=fl(xr):Gs?(co=!1,$i=Po(zr)):$o?(co=!1,$i=ia(zr)):$i=[]:lo(zr)||Gi(zr)?($i=xr,Gi(xr)?$i=qs(xr):(!wi(xr)||Do(xr))&&($i=io(zr))):co=!1}co&&(Gr.set(zr,$i),wr($i,zr,lr,Nr,Gr),Gr.delete(zr)),os(In,Kn,$i)}function Io(In,Mn){return hl(oa(In,Mn,hs),In+"")}var ra=or?function(In,Mn){return or(In,"toString",{configurable:!0,enumerable:!1,value:As(Mn),writable:!0})}:hs;function Po(In,Mn){return In.slice()}function ji(In){var Mn=new In.constructor(In.byteLength);return new xn(Mn).set(new xn(In)),Mn}function ia(In,Mn){var Kn=ji(In.buffer);return new In.constructor(Kn,In.byteOffset,In.length)}function fl(In,Mn){var Kn=-1,lr=In.length;for(Mn||(Mn=Array(lr));++Kn<lr;)Mn[Kn]=In[Kn];return Mn}function Co(In,Mn,Kn,lr){var wr=!Kn;Kn||(Kn={});for(var Nr=-1,Gr=Mn.length;++Nr<Gr;){var xr=Mn[Nr],zr=void 0;zr===void 0&&(zr=In[xr]),wr?$s(Kn,xr,zr):Ca(Kn,xr,zr)}return Kn}function sa(In){return Io(function(Mn,Kn){var lr=-1,wr=Kn.length,Nr=wr>1?Kn[wr-1]:void 0,Gr=wr>2?Kn[2]:void 0;for(Nr=In.length>3&&typeof Nr=="function"?(wr--,Nr):void 0,Gr&&Ns(Kn[0],Kn[1],Gr)&&(Nr=wr<3?void 0:Nr,wr=1),Mn=Object(Mn);++lr<wr;){var xr=Kn[lr];xr&&In(Mn,xr,lr,Nr)}return Mn})}function ro(In){return function(Mn,Kn,lr){for(var wr=-1,Nr=Object(Mn),Gr=lr(Mn),xr=Gr.length;xr--;){var zr=Gr[++wr];if(Kn(Nr[zr],zr,Nr)===!1)break}return Mn}}function Vo(In,Mn){var Kn=In.__data__;return Kr(Mn)?Kn[typeof Mn=="string"?"string":"hash"]:Kn.map}function ai(In,Mn){var Kn=qr(In,Mn);return Ri(Kn)?Kn:void 0}function Ki(In){var Mn=di.call(In,Zn),Kn=In[Zn];try{In[Zn]=void 0;var lr=!0}catch{}var wr=Ei.call(In);return lr&&(Mn?In[Zn]=Kn:delete In[Zn]),wr}function io(In){return typeof In.constructor=="function"&&!Yi(In)?Pr(kn(In)):{}}function Ms(In,Mn){var Kn=typeof In;return Mn=Mn??u,!!Mn&&(Kn=="number"||Kn!="symbol"&&Bn.test(In))&&In>-1&&In%1==0&&In<Mn}function Ns(In,Mn,Kn){if(!wi(Kn))return!1;var lr=typeof Mn;return(lr=="number"?us(Kn)&&Ms(Mn,Kn.length):lr=="string"&&Mn in Kn)?es(Kn[Mn],In):!1}function Kr(In){var Mn=typeof In;return Mn=="string"||Mn=="number"||Mn=="symbol"||Mn=="boolean"?In!=="__proto__":In===null}function so(In){return!!Zi&&Zi in In}function Yi(In){var Mn=In&&In.constructor,Kn=typeof Mn=="function"&&Mn.prototype||ni;return In===Kn}function oo(In){var Mn=[];if(In!=null)for(var Kn in Object(In))Mn.push(Kn);return Mn}function Da(In){return Ei.call(In)}function oa(In,Mn,Kn){return Mn=fr(Mn===void 0?In.length-1:Mn,0),function(){for(var lr=arguments,wr=-1,Nr=fr(lr.length-Mn,0),Gr=Array(Nr);++wr<Nr;)Gr[wr]=lr[Mn+wr];wr=-1;for(var xr=Array(Mn+1);++wr<Mn;)xr[wr]=lr[wr];return xr[Mn]=Kn(Gr),Tr(In,this,xr)}}function ao(In,Mn){if(!(Mn==="constructor"&&typeof In[Mn]=="function")&&Mn!="__proto__")return In[Mn]}var hl=pl(ra);function pl(In){var Mn=0,Kn=0;return function(){var lr=Fr(),wr=c-(lr-Kn);if(Kn=lr,wr>0){if(++Mn>=a)return arguments[0]}else Mn=0;return In.apply(void 0,arguments)}}function ko(In){if(In!=null){try{return ii.call(In)}catch{}try{return In+""}catch{}}return""}function es(In,Mn){return In===Mn||In!==In&&Mn!==Mn}var Gi=ls((function(){return arguments})())?ls:function(In){return Di(In)&&di.call(In,"callee")&&!Qn.call(In,"callee")},cs=Array.isArray;function us(In){return In!=null&&Hs(In.length)&&!Do(In)}function aa(In){return Di(In)&&us(In)}var ds=ur||ca;function Do(In){if(!wi(In))return!1;var Mn=as(In);return Mn==A||Mn==R||Mn==g||Mn==pn}function Hs(In){return typeof In=="number"&&In>-1&&In%1==0&&In<=u}function wi(In){var Mn=typeof In;return In!=null&&(Mn=="object"||Mn=="function")}function Di(In){return In!=null&&typeof In=="object"}function lo(In){if(!Di(In)||as(In)!=yn)return!1;var Mn=kn(In);if(Mn===null)return!0;var Kn=di.call(Mn,"constructor")&&Mn.constructor;return typeof Kn=="function"&&Kn instanceof Kn&&ii.call(Kn)==Ur}var fs=Sr?Ar(Sr):no;function qs(In){return Co(In,Ss(In))}function Ss(In){return us(In)?ss(In):ka(In)}var la=sa(function(In,Mn,Kn,lr){xs(In,Mn,Kn,lr)});function As(In){return function(){return In}}function hs(In){return In}function ca(){return!1}n.exports=la})(lodash_mergewith,lodash_mergewith.exports)),lodash_mergewith.exports}var lodash_mergewithExports=requireLodash_mergewith();const mergeWith=getDefaultExportFromCjs(lodash_mergewithExports);function useCallbackRef$1(n,e=[]){const s=reactExports.useRef(n);return reactExports.useEffect(()=>{s.current=n}),reactExports.useCallback((...o)=>s.current?.(...o),e)}function useControllableState(n){const{value:e,defaultValue:s,onChange:o,shouldUpdate:a=(T,A)=>T!==A}=n,c=useCallbackRef$1(o),u=useCallbackRef$1(a),[h,m]=reactExports.useState(s),g=e!==void 0,_=g?e:h,b=useCallbackRef$1(T=>{const R=typeof T=="function"?T(_):T;u(_,R)&&(g||m(R),c(R))},[g,c,_,u]);return[_,b]}function useDisclosure(n={}){const{onClose:e,onOpen:s,isOpen:o,id:a}=n,c=useCallbackRef$1(s),u=useCallbackRef$1(e),[h,m]=reactExports.useState(n.defaultIsOpen||!1),g=o!==void 0?o:h,_=o!==void 0,b=reactExports.useId(),T=a??`disclosure-${b}`,A=reactExports.useCallback(()=>{_||m(!1),u?.()},[_,u]),R=reactExports.useCallback(()=>{_||m(!0),c?.()},[_,c]),w=reactExports.useCallback(()=>{g?A():R()},[g,R,A]);function D(yn={}){return{...yn,"aria-expanded":g,"aria-controls":T,onClick(pn){yn.onClick?.(pn),w()}}}function fn(yn={}){return{...yn,hidden:!g,id:T}}return{isOpen:g,onOpen:R,onClose:A,onToggle:w,isControlled:_,getButtonProps:D,getDisclosureProps:fn}}const useSafeLayoutEffect$1=globalThis?.document?reactExports.useLayoutEffect:reactExports.useEffect,useUpdateEffect=(n,e)=>{const s=reactExports.useRef(!1),o=reactExports.useRef(!1);reactExports.useEffect(()=>{if(s.current&&o.current)return n();o.current=!0},e),reactExports.useEffect(()=>(s.current=!0,()=>{s.current=!1}),[])};function useLatestRef(n){const e=reactExports.useRef(null);return e.current=n,e}function assignRef$1(n,e){if(n!=null){if(typeof n=="function"){n(e);return}try{n.current=e}catch{throw new Error(`Cannot assign value '${e}' to ref '${n}'`)}}}function mergeRefs(...n){return e=>{n.forEach(s=>{assignRef$1(s,e)})}}function useMergeRefs$1(...n){return reactExports.useMemo(()=>mergeRefs(...n),n)}function useTimeout(n,e){const s=useCallbackRef$1(n);reactExports.useEffect(()=>{if(e==null)return;let o=null;return o=window.setTimeout(()=>{s()},e),()=>{o&&window.clearTimeout(o)}},[e,s])}const defaultTimestep=1/60*1e3,getCurrentTime=typeof performance<"u"?()=>performance.now():()=>Date.now(),onNextFrame=typeof window<"u"?n=>window.requestAnimationFrame(n):n=>setTimeout(()=>n(getCurrentTime()),defaultTimestep);function createRenderStep$1(n){let e=[],s=[],o=0,a=!1,c=!1;const u=new WeakSet,h={schedule:(m,g=!1,_=!1)=>{const b=_&&a,T=b?e:s;return g&&u.add(m),T.indexOf(m)===-1&&(T.push(m),b&&a&&(o=e.length)),m},cancel:m=>{const g=s.indexOf(m);g!==-1&&s.splice(g,1),u.delete(m)},process:m=>{if(a){c=!0;return}if(a=!0,[e,s]=[s,e],s.length=0,o=e.length,o)for(let g=0;g<o;g++){const _=e[g];_(m),u.has(_)&&(h.schedule(_),n())}a=!1,c&&(c=!1,h.process(m))}};return h}const maxElapsed$1=40;let useDefaultElapsed=!0,runNextFrame=!1,isProcessing=!1;const frame$1={delta:0,timestamp:0},stepsOrder$1=["read","update","preRender","render","postRender"],steps=stepsOrder$1.reduce((n,e)=>(n[e]=createRenderStep$1(()=>runNextFrame=!0),n),{}),sync=stepsOrder$1.reduce((n,e)=>{const s=steps[e];return n[e]=(o,a=!1,c=!1)=>(runNextFrame||startLoop(),s.schedule(o,a,c)),n},{}),cancelSync=stepsOrder$1.reduce((n,e)=>(n[e]=steps[e].cancel,n),{});stepsOrder$1.reduce((n,e)=>(n[e]=()=>steps[e].process(frame$1),n),{});const processStep=n=>steps[n].process(frame$1),processFrame=n=>{runNextFrame=!1,frame$1.delta=useDefaultElapsed?defaultTimestep:Math.max(Math.min(n-frame$1.timestamp,maxElapsed$1),1),frame$1.timestamp=n,isProcessing=!0,stepsOrder$1.forEach(processStep),isProcessing=!1,runNextFrame&&(useDefaultElapsed=!1,onNextFrame(processFrame))},startLoop=()=>{runNextFrame=!0,useDefaultElapsed=!0,isProcessing||onNextFrame(processFrame)},getFrameData=()=>frame$1;var __defProp$2=Object.defineProperty,__defNormalProp$1=(n,e,s)=>e in n?__defProp$2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,__publicField$1=(n,e,s)=>(__defNormalProp$1(n,typeof e!="symbol"?e+"":e,s),s);class PanEvent{constructor(e,s,o){if(__publicField$1(this,"history",[]),__publicField$1(this,"startEvent",null),__publicField$1(this,"lastEvent",null),__publicField$1(this,"lastEventInfo",null),__publicField$1(this,"handlers",{}),__publicField$1(this,"removeListeners",()=>{}),__publicField$1(this,"threshold",3),__publicField$1(this,"win"),__publicField$1(this,"updatePoint",()=>{if(!(this.lastEvent&&this.lastEventInfo))return;const h=getPanInfo$1(this.lastEventInfo,this.history),m=this.startEvent!==null,g=distance$1(h.offset,{x:0,y:0})>=this.threshold;if(!m&&!g)return;const{timestamp:_}=getFrameData();this.history.push({...h.point,timestamp:_});const{onStart:b,onMove:T}=this.handlers;m||(b?.(this.lastEvent,h),this.startEvent=this.lastEvent),T?.(this.lastEvent,h)}),__publicField$1(this,"onPointerMove",(h,m)=>{this.lastEvent=h,this.lastEventInfo=m,sync.update(this.updatePoint,!0)}),__publicField$1(this,"onPointerUp",(h,m)=>{const g=getPanInfo$1(m,this.history),{onEnd:_,onSessionEnd:b}=this.handlers;b?.(h,g),this.end(),!(!_||!this.startEvent)&&_?.(h,g)}),this.win=e.view??window,isMultiTouchEvent(e))return;this.handlers=s,o&&(this.threshold=o),e.stopPropagation(),e.preventDefault();const a={point:getEventPoint(e)},{timestamp:c}=getFrameData();this.history=[{...a.point,timestamp:c}];const{onSessionStart:u}=s;u?.(e,getPanInfo$1(a,this.history)),this.removeListeners=pipe$2(addPointerEvent$1(this.win,"pointermove",this.onPointerMove),addPointerEvent$1(this.win,"pointerup",this.onPointerUp),addPointerEvent$1(this.win,"pointercancel",this.onPointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners?.(),cancelSync.update(this.updatePoint)}}function subtract$2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function getPanInfo$1(n,e){return{point:n.point,delta:subtract$2(n.point,e[e.length-1]),offset:subtract$2(n.point,e[0]),velocity:getVelocity$1(e,.1)}}const toMilliseconds=n=>n*1e3;function getVelocity$1(n,e){if(n.length<2)return{x:0,y:0};let s=n.length-1,o=null;const a=n[n.length-1];for(;s>=0&&(o=n[s],!(a.timestamp-o.timestamp>toMilliseconds(e)));)s--;if(!o)return{x:0,y:0};const c=(a.timestamp-o.timestamp)/1e3;if(c===0)return{x:0,y:0};const u={x:(a.x-o.x)/c,y:(a.y-o.y)/c};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function pipe$2(...n){return e=>n.reduce((s,o)=>o(s),e)}function distance1D(n,e){return Math.abs(n-e)}function isPoint(n){return"x"in n&&"y"in n}function distance$1(n,e){if(typeof n=="number"&&typeof e=="number")return distance1D(n,e);if(isPoint(n)&&isPoint(e)){const s=distance1D(n.x,e.x),o=distance1D(n.y,e.y);return Math.sqrt(s**2+o**2)}return 0}function usePanEvent(n,e){const{onPan:s,onPanStart:o,onPanEnd:a,onPanSessionStart:c,onPanSessionEnd:u,threshold:h}=e,m=!!(s||o||a||c||u),g=reactExports.useRef(null),_=useLatestRef({onSessionStart:c,onSessionEnd:u,onStart:o,onMove:s,onEnd(b,T){g.current=null,a?.(b,T)}});reactExports.useEffect(()=>{g.current?.updateHandlers(_.current)}),reactExports.useEffect(()=>{const b=n.current;if(!b||!m)return;function T(A){g.current=new PanEvent(A,_.current,h)}return addPointerEvent$1(b,"pointerdown",T)},[n,m,_,h]),reactExports.useEffect(()=>()=>{g.current?.end(),g.current=null},[])}const state={open:(n,e)=>`${n}[data-open], ${n}[open], ${n}[data-state=open] ${e}`,closed:(n,e)=>`${n}[data-closed], ${n}[data-state=closed] ${e}`,hover:(n,e)=>`${n}:hover ${e}, ${n}[data-hover] ${e}`,focus:(n,e)=>`${n}:focus ${e}, ${n}[data-focus] ${e}`,focusVisible:(n,e)=>`${n}:focus-visible ${e}`,focusWithin:(n,e)=>`${n}:focus-within ${e}`,active:(n,e)=>`${n}:active ${e}, ${n}[data-active] ${e}`,disabled:(n,e)=>`${n}:disabled ${e}, ${n}[data-disabled] ${e}`,invalid:(n,e)=>`${n}:invalid ${e}, ${n}[data-invalid] ${e}`,checked:(n,e)=>`${n}:checked ${e}, ${n}[data-checked] ${e}`,placeholderShown:(n,e)=>`${n}:placeholder-shown ${e}`},toGroup=n=>merge(e=>n(e,"&"),"[role=group]","[data-group]",".group"),toPeer=n=>merge(e=>n(e,"~ &"),"[data-peer]",".peer"),merge=(n,...e)=>e.map(n).join(", "),pseudoSelectors={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within, &[data-focus-within]",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty, &[data-empty]",_expanded:"&[aria-expanded=true], &[data-expanded], &[data-state=expanded]",_checked:"&[aria-checked=true], &[data-checked], &[data-state=checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate], &[data-state=indeterminate]",_groupOpen:toGroup(state.open),_groupClosed:toGroup(state.closed),_groupHover:toGroup(state.hover),_peerHover:toPeer(state.hover),_groupFocus:toGroup(state.focus),_peerFocus:toPeer(state.focus),_groupFocusVisible:toGroup(state.focusVisible),_peerFocusVisible:toPeer(state.focusVisible),_groupActive:toGroup(state.active),_peerActive:toPeer(state.active),_groupDisabled:toGroup(state.disabled),_peerDisabled:toPeer(state.disabled),_groupInvalid:toGroup(state.invalid),_peerInvalid:toPeer(state.invalid),_groupChecked:toGroup(state.checked),_peerChecked:toPeer(state.checked),_groupFocusWithin:toGroup(state.focusWithin),_peerFocusWithin:toPeer(state.focusWithin),_peerPlaceholderShown:toPeer(state.placeholderShown),_placeholder:"&::placeholder, &[data-placeholder]",_placeholderShown:"&:placeholder-shown, &[data-placeholder-shown]",_fullScreen:"&:fullscreen, &[data-fullscreen]",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]",_open:"&[data-open], &[open], &[data-state=open]",_closed:"&[data-closed], &[data-state=closed]",_complete:"&[data-complete]",_incomplete:"&[data-incomplete]",_current:"&[data-current]"},pseudoPropNames=Object.keys(pseudoSelectors),isImportant=n=>/!(important)?$/.test(n),withoutImportant=n=>typeof n=="string"?n.replace(/!(important)?$/,"").trim():n,tokenToCSSVar=(n,e)=>s=>{const o=String(e),a=isImportant(o),c=withoutImportant(o),u=n?`${n}.${c}`:c;let h=isObject$1(s.__cssMap)&&u in s.__cssMap?s.__cssMap[u].varRef:e;return h=withoutImportant(h),a?`${h} !important`:h};function createTransform(n){const{scale:e,transform:s,compose:o}=n;return(c,u)=>{const h=tokenToCSSVar(e,c)(u);let m=s?.(h,u)??h;return o&&(m=o(m,u)),m}}const pipe$1=(...n)=>e=>n.reduce((s,o)=>o(s),e);function toConfig(n,e){return s=>{const o={property:s,scale:n};return o.transform=createTransform({scale:n,transform:e}),o}}const getRtl=({rtl:n,ltr:e})=>s=>s.direction==="rtl"?n:e;function logical(n){const{property:e,scale:s,transform:o}=n;return{scale:s,property:getRtl(e),transform:s?createTransform({scale:s,compose:o}):o}}const transformTemplate=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function getTransformTemplate(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...transformTemplate].join(" ")}function getTransformGpuTemplate(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...transformTemplate].join(" ")}const filterTemplate={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},backdropFilterTemplate={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function getRingTemplate(n){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":n,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}const flexDirectionTemplate={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},directionMap={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},valueSet=new Set(Object.values(directionMap)),globalSet=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),trimSpace=n=>n.trim();function parseGradient(n,e){if(n==null||globalSet.has(n))return n;if(!(isCSSFunction(n)||globalSet.has(n)))return`url('${n}')`;const a=/(^[a-z-A-Z]+)\((.*)\)/g.exec(n),c=a?.[1],u=a?.[2];if(!c||!u)return n;const h=c.includes("-gradient")?c:`${c}-gradient`,[m,...g]=u.split(",").map(trimSpace).filter(Boolean);if(g?.length===0)return n;const _=m in directionMap?directionMap[m]:m;g.unshift(_);const b=g.map(T=>{if(valueSet.has(T))return T;const A=T.indexOf(" "),[R,w]=A!==-1?[T.substr(0,A),T.substr(A+1)]:[T],D=isCSSFunction(w)?w:w&&w.split(" "),fn=`colors.${R}`,yn=fn in e.__cssMap?e.__cssMap[fn].varRef:R;return D?[yn,...Array.isArray(D)?D:[D]].join(" "):yn});return`${h}(${b.join(", ")})`}const isCSSFunction=n=>typeof n=="string"&&n.includes("(")&&n.includes(")"),gradientTransform=(n,e)=>parseGradient(n,e??{});function isCssVar$1(n){return/^var\(--.+\)$/.test(n)}const analyzeCSSValue=n=>{const e=parseFloat(n.toString()),s=n.toString().replace(String(e),"");return{unitless:!s,value:e,unit:s}},wrap=n=>e=>`${n}(${e})`,transformFunctions={filter(n){return n!=="auto"?n:filterTemplate},backdropFilter(n){return n!=="auto"?n:backdropFilterTemplate},ring(n){return getRingTemplate(transformFunctions.px(n))},bgClip(n){return n==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:n}},transform(n){return n==="auto"?getTransformTemplate():n==="auto-gpu"?getTransformGpuTemplate():n},vh(n){return n==="$100vh"?"var(--chakra-vh)":n},px(n){if(n==null)return n;const{unitless:e}=analyzeCSSValue(n);return e||typeof n=="number"?`${n}px`:n},fraction(n){return typeof n!="number"||n>1?n:`${n*100}%`},float(n,e){const s={left:"right",right:"left"};return e.direction==="rtl"?s[n]:n},degree(n){if(isCssVar$1(n)||n==null)return n;const e=typeof n=="string"&&!n.endsWith("deg");return typeof n=="number"||e?`${n}deg`:n},gradient:gradientTransform,blur:wrap("blur"),opacity:wrap("opacity"),brightness:wrap("brightness"),contrast:wrap("contrast"),dropShadow:wrap("drop-shadow"),grayscale:wrap("grayscale"),hueRotate:n=>wrap("hue-rotate")(transformFunctions.degree(n)),invert:wrap("invert"),saturate:wrap("saturate"),sepia:wrap("sepia"),bgImage(n){return n==null||isCSSFunction(n)||globalSet.has(n)?n:`url(${n})`},outline(n){const e=String(n)==="0"||String(n)==="none";return n!==null&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:n}},flexDirection(n){const{space:e,divide:s}=flexDirectionTemplate[n]??{},o={flexDirection:n};return e&&(o[e]=1),s&&(o[s]=1),o}},t={borderWidths:toConfig("borderWidths"),borderStyles:toConfig("borderStyles"),colors:toConfig("colors"),borders:toConfig("borders"),gradients:toConfig("gradients",transformFunctions.gradient),radii:toConfig("radii",transformFunctions.px),space:toConfig("space",pipe$1(transformFunctions.vh,transformFunctions.px)),spaceT:toConfig("space",pipe$1(transformFunctions.vh,transformFunctions.px)),degreeT(n){return{property:n,transform:transformFunctions.degree}},prop(n,e,s){return{property:n,scale:e,...e&&{transform:createTransform({scale:e,transform:s})}}},propT(n,e){return{property:n,transform:e}},sizes:toConfig("sizes",pipe$1(transformFunctions.vh,transformFunctions.px)),sizesT:toConfig("sizes",pipe$1(transformFunctions.vh,transformFunctions.fraction)),shadows:toConfig("shadows"),logical,blur:toConfig("blur",transformFunctions.blur)},background={background:t.colors("background"),backgroundColor:t.colors("backgroundColor"),backgroundImage:t.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:transformFunctions.bgClip},bgSize:t.prop("backgroundSize"),bgPosition:t.prop("backgroundPosition"),bg:t.colors("background"),bgColor:t.colors("backgroundColor"),bgPos:t.prop("backgroundPosition"),bgRepeat:t.prop("backgroundRepeat"),bgAttachment:t.prop("backgroundAttachment"),bgGradient:t.gradients("backgroundImage"),bgClip:{transform:transformFunctions.bgClip}};Object.assign(background,{bgImage:background.backgroundImage,bgImg:background.backgroundImage});const border={border:t.borders("border"),borderWidth:t.borderWidths("borderWidth"),borderStyle:t.borderStyles("borderStyle"),borderColor:t.colors("borderColor"),borderRadius:t.radii("borderRadius"),borderTop:t.borders("borderTop"),borderBlockStart:t.borders("borderBlockStart"),borderTopLeftRadius:t.radii("borderTopLeftRadius"),borderStartStartRadius:t.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:t.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:t.radii("borderTopRightRadius"),borderStartEndRadius:t.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:t.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:t.borders("borderRight"),borderInlineEnd:t.borders("borderInlineEnd"),borderBottom:t.borders("borderBottom"),borderBlockEnd:t.borders("borderBlockEnd"),borderBottomLeftRadius:t.radii("borderBottomLeftRadius"),borderBottomRightRadius:t.radii("borderBottomRightRadius"),borderLeft:t.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:t.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:t.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:t.borders(["borderLeft","borderRight"]),borderInline:t.borders("borderInline"),borderY:t.borders(["borderTop","borderBottom"]),borderBlock:t.borders("borderBlock"),borderTopWidth:t.borderWidths("borderTopWidth"),borderBlockStartWidth:t.borderWidths("borderBlockStartWidth"),borderTopColor:t.colors("borderTopColor"),borderBlockStartColor:t.colors("borderBlockStartColor"),borderTopStyle:t.borderStyles("borderTopStyle"),borderBlockStartStyle:t.borderStyles("borderBlockStartStyle"),borderBottomWidth:t.borderWidths("borderBottomWidth"),borderBlockEndWidth:t.borderWidths("borderBlockEndWidth"),borderBottomColor:t.colors("borderBottomColor"),borderBlockEndColor:t.colors("borderBlockEndColor"),borderBottomStyle:t.borderStyles("borderBottomStyle"),borderBlockEndStyle:t.borderStyles("borderBlockEndStyle"),borderLeftWidth:t.borderWidths("borderLeftWidth"),borderInlineStartWidth:t.borderWidths("borderInlineStartWidth"),borderLeftColor:t.colors("borderLeftColor"),borderInlineStartColor:t.colors("borderInlineStartColor"),borderLeftStyle:t.borderStyles("borderLeftStyle"),borderInlineStartStyle:t.borderStyles("borderInlineStartStyle"),borderRightWidth:t.borderWidths("borderRightWidth"),borderInlineEndWidth:t.borderWidths("borderInlineEndWidth"),borderRightColor:t.colors("borderRightColor"),borderInlineEndColor:t.colors("borderInlineEndColor"),borderRightStyle:t.borderStyles("borderRightStyle"),borderInlineEndStyle:t.borderStyles("borderInlineEndStyle"),borderTopRadius:t.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:t.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:t.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:t.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(border,{rounded:border.borderRadius,roundedTop:border.borderTopRadius,roundedTopLeft:border.borderTopLeftRadius,roundedTopRight:border.borderTopRightRadius,roundedTopStart:border.borderStartStartRadius,roundedTopEnd:border.borderStartEndRadius,roundedBottom:border.borderBottomRadius,roundedBottomLeft:border.borderBottomLeftRadius,roundedBottomRight:border.borderBottomRightRadius,roundedBottomStart:border.borderEndStartRadius,roundedBottomEnd:border.borderEndEndRadius,roundedLeft:border.borderLeftRadius,roundedRight:border.borderRightRadius,roundedStart:border.borderInlineStartRadius,roundedEnd:border.borderInlineEndRadius,borderStart:border.borderInlineStart,borderEnd:border.borderInlineEnd,borderTopStartRadius:border.borderStartStartRadius,borderTopEndRadius:border.borderStartEndRadius,borderBottomStartRadius:border.borderEndStartRadius,borderBottomEndRadius:border.borderEndEndRadius,borderStartRadius:border.borderInlineStartRadius,borderEndRadius:border.borderInlineEndRadius,borderStartWidth:border.borderInlineStartWidth,borderEndWidth:border.borderInlineEndWidth,borderStartColor:border.borderInlineStartColor,borderEndColor:border.borderInlineEndColor,borderStartStyle:border.borderInlineStartStyle,borderEndStyle:border.borderInlineEndStyle});const color$1={color:t.colors("color"),textColor:t.colors("color"),fill:t.colors("fill"),stroke:t.colors("stroke"),accentColor:t.colors("accentColor"),textFillColor:t.colors("textFillColor")},flexbox={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:transformFunctions.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:t.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:t.space("gap"),rowGap:t.space("rowGap"),columnGap:t.space("columnGap")};Object.assign(flexbox,{flexDir:flexbox.flexDirection});const layout$1={width:t.sizesT("width"),inlineSize:t.sizesT("inlineSize"),height:t.sizes("height"),blockSize:t.sizes("blockSize"),boxSize:t.sizes(["width","height"]),minWidth:t.sizes("minWidth"),minInlineSize:t.sizes("minInlineSize"),minHeight:t.sizes("minHeight"),minBlockSize:t.sizes("minBlockSize"),maxWidth:t.sizes("maxWidth"),maxInlineSize:t.sizes("maxInlineSize"),maxHeight:t.sizes("maxHeight"),maxBlockSize:t.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(n,e)=>({[`@media screen and (min-width: ${e.__breakpoints?.get(n)?.minW??n})`]:{display:"none"}})},hideBelow:{scale:"breakpoints",transform:(n,e)=>({[`@media screen and (max-width: ${e.__breakpoints?.get(n)?._minW??n})`]:{display:"none"}})},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:t.propT("float",transformFunctions.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(layout$1,{w:layout$1.width,h:layout$1.height,minW:layout$1.minWidth,maxW:layout$1.maxWidth,minH:layout$1.minHeight,maxH:layout$1.maxHeight,overscroll:layout$1.overscrollBehavior,overscrollX:layout$1.overscrollBehaviorX,overscrollY:layout$1.overscrollBehaviorY});const filter$1={filter:{transform:transformFunctions.filter},blur:t.blur("--chakra-blur"),brightness:t.propT("--chakra-brightness",transformFunctions.brightness),contrast:t.propT("--chakra-contrast",transformFunctions.contrast),hueRotate:t.propT("--chakra-hue-rotate",transformFunctions.hueRotate),invert:t.propT("--chakra-invert",transformFunctions.invert),saturate:t.propT("--chakra-saturate",transformFunctions.saturate),dropShadow:t.propT("--chakra-drop-shadow",transformFunctions.dropShadow),backdropFilter:{transform:transformFunctions.backdropFilter},backdropBlur:t.blur("--chakra-backdrop-blur"),backdropBrightness:t.propT("--chakra-backdrop-brightness",transformFunctions.brightness),backdropContrast:t.propT("--chakra-backdrop-contrast",transformFunctions.contrast),backdropHueRotate:t.propT("--chakra-backdrop-hue-rotate",transformFunctions.hueRotate),backdropInvert:t.propT("--chakra-backdrop-invert",transformFunctions.invert),backdropSaturate:t.propT("--chakra-backdrop-saturate",transformFunctions.saturate)},ring={ring:{transform:transformFunctions.ring},ringColor:t.colors("--chakra-ring-color"),ringOffset:t.prop("--chakra-ring-offset-width"),ringOffsetColor:t.colors("--chakra-ring-offset-color"),ringInset:t.prop("--chakra-ring-inset")},interactivity={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:transformFunctions.outline},outlineOffset:!0,outlineColor:t.colors("outlineColor")},grid={gridGap:t.space("gridGap"),gridColumnGap:t.space("gridColumnGap"),gridRowGap:t.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0};function get$1(n,e,s,o){const a=typeof e=="string"?e.split("."):[e];for(o=0;o<a.length&&n;o+=1)n=n[a[o]];return n===void 0?s:n}const memoize$1=n=>{const e=new WeakMap;return(o,a,c,u)=>{if(typeof o>"u")return n(o,a,c);e.has(o)||e.set(o,new Map);const h=e.get(o);if(h.has(a))return h.get(a);const m=n(o,a,c,u);return h.set(a,m),m}},memoizedGet=memoize$1(get$1),srOnly={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},srFocusable={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},getWithPriority=(n,e,s)=>{const o={},a=memoizedGet(n,e,{});for(const c in a)c in s&&s[c]!=null||(o[c]=a[c]);return o},others={srOnly:{transform(n){return n===!0?srOnly:n==="focusable"?srFocusable:{}}},layerStyle:{processResult:!0,transform:(n,e,s)=>getWithPriority(e,`layerStyles.${n}`,s)},textStyle:{processResult:!0,transform:(n,e,s)=>getWithPriority(e,`textStyles.${n}`,s)},apply:{processResult:!0,transform:(n,e,s)=>getWithPriority(e,n,s)}},position$1={position:!0,pos:t.prop("position"),zIndex:t.prop("zIndex","zIndices"),inset:t.spaceT("inset"),insetX:t.spaceT(["left","right"]),insetInline:t.spaceT("insetInline"),insetY:t.spaceT(["top","bottom"]),insetBlock:t.spaceT("insetBlock"),top:t.spaceT("top"),insetBlockStart:t.spaceT("insetBlockStart"),bottom:t.spaceT("bottom"),insetBlockEnd:t.spaceT("insetBlockEnd"),left:t.spaceT("left"),insetInlineStart:t.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:t.spaceT("right"),insetInlineEnd:t.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(position$1,{insetStart:position$1.insetInlineStart,insetEnd:position$1.insetInlineEnd});const effect={boxShadow:t.shadows("boxShadow"),mixBlendMode:!0,blendMode:t.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:t.prop("backgroundBlendMode"),opacity:!0};Object.assign(effect,{shadow:effect.boxShadow});const space={margin:t.spaceT("margin"),marginTop:t.spaceT("marginTop"),marginBlockStart:t.spaceT("marginBlockStart"),marginRight:t.spaceT("marginRight"),marginInlineEnd:t.spaceT("marginInlineEnd"),marginBottom:t.spaceT("marginBottom"),marginBlockEnd:t.spaceT("marginBlockEnd"),marginLeft:t.spaceT("marginLeft"),marginInlineStart:t.spaceT("marginInlineStart"),marginX:t.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:t.spaceT("marginInline"),marginY:t.spaceT(["marginTop","marginBottom"]),marginBlock:t.spaceT("marginBlock"),padding:t.space("padding"),paddingTop:t.space("paddingTop"),paddingBlockStart:t.space("paddingBlockStart"),paddingRight:t.space("paddingRight"),paddingBottom:t.space("paddingBottom"),paddingBlockEnd:t.space("paddingBlockEnd"),paddingLeft:t.space("paddingLeft"),paddingInlineStart:t.space("paddingInlineStart"),paddingInlineEnd:t.space("paddingInlineEnd"),paddingX:t.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:t.space("paddingInline"),paddingY:t.space(["paddingTop","paddingBottom"]),paddingBlock:t.space("paddingBlock")};Object.assign(space,{m:space.margin,mt:space.marginTop,mr:space.marginRight,me:space.marginInlineEnd,marginEnd:space.marginInlineEnd,mb:space.marginBottom,ml:space.marginLeft,ms:space.marginInlineStart,marginStart:space.marginInlineStart,mx:space.marginX,my:space.marginY,p:space.padding,pt:space.paddingTop,py:space.paddingY,px:space.paddingX,pb:space.paddingBottom,pl:space.paddingLeft,ps:space.paddingInlineStart,paddingStart:space.paddingInlineStart,pr:space.paddingRight,pe:space.paddingInlineEnd,paddingEnd:space.paddingInlineEnd});const scroll={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:t.spaceT("scrollMargin"),scrollMarginTop:t.spaceT("scrollMarginTop"),scrollMarginBottom:t.spaceT("scrollMarginBottom"),scrollMarginLeft:t.spaceT("scrollMarginLeft"),scrollMarginRight:t.spaceT("scrollMarginRight"),scrollMarginX:t.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:t.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:t.spaceT("scrollPadding"),scrollPaddingTop:t.spaceT("scrollPaddingTop"),scrollPaddingBottom:t.spaceT("scrollPaddingBottom"),scrollPaddingLeft:t.spaceT("scrollPaddingLeft"),scrollPaddingRight:t.spaceT("scrollPaddingRight"),scrollPaddingX:t.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:t.spaceT(["scrollPaddingTop","scrollPaddingBottom"])},typography$1={fontFamily:t.prop("fontFamily","fonts"),fontSize:t.prop("fontSize","fontSizes",transformFunctions.px),fontWeight:t.prop("fontWeight","fontWeights"),lineHeight:t.prop("lineHeight","lineHeights"),letterSpacing:t.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(n){if(n===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},textDecoration={textDecorationColor:t.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:t.shadows("textShadow")},transform={clipPath:!0,transform:t.propT("transform",transformFunctions.transform),transformOrigin:!0,translateX:t.spaceT("--chakra-translate-x"),translateY:t.spaceT("--chakra-translate-y"),skewX:t.degreeT("--chakra-skew-x"),skewY:t.degreeT("--chakra-skew-y"),scaleX:t.prop("--chakra-scale-x"),scaleY:t.prop("--chakra-scale-y"),scale:t.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:t.degreeT("--chakra-rotate")},list={listStyleType:!0,listStylePosition:!0,listStylePos:t.prop("listStylePosition"),listStyleImage:!0,listStyleImg:t.prop("listStyleImage")},transition$1={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:t.prop("transitionDuration","transition.duration"),transitionProperty:t.prop("transitionProperty","transition.property"),transitionTimingFunction:t.prop("transitionTimingFunction","transition.easing")},systemProps=mergeWith({},background,border,color$1,flexbox,layout$1,filter$1,ring,interactivity,grid,others,position$1,effect,space,scroll,typography$1,textDecoration,transform,list,transition$1),layoutSystem=Object.assign({},space,layout$1,flexbox,grid,position$1),layoutPropNames=Object.keys(layoutSystem),propNames=[...Object.keys(systemProps),...pseudoPropNames],styleProps={...systemProps,...pseudoSelectors},isStyleProp=n=>n in styleProps,expandResponsive=n=>e=>{if(!e.__breakpoints)return n;const{isResponsive:s,toArrayValue:o,media:a}=e.__breakpoints,c={};for(const u in n){let h=runIfFn$1(n[u],e);if(h==null)continue;if(h=isObject$1(h)&&s(h)?o(h):h,!Array.isArray(h)){c[u]=h;continue}const m=h.slice(0,a.length).length;for(let g=0;g<m;g+=1){const _=a?.[g];if(!_){c[u]=h[g];continue}c[_]=c[_]||{},h[g]!=null&&(c[_][u]=h[g])}}return c};function splitByComma(n){const e=[];let s="",o=!1;for(let a=0;a<n.length;a++){const c=n[a];c==="("?(o=!0,s+=c):c===")"?(o=!1,s+=c):c===","&&!o?(e.push(s),s=""):s+=c}return s=s.trim(),s&&e.push(s),e}function isCssVar(n){return/^var\(--.+\)$/.test(n)}const isCSSVariableTokenValue=(n,e)=>n.startsWith("--")&&typeof e=="string"&&!isCssVar(e),resolveTokenValue=(n,e)=>{if(e==null)return e;const s=u=>n.__cssMap?.[u]?.varRef,o=u=>s(u)??u,[a,c]=splitByComma(e);return e=s(a)??o(c)??o(e),e};function getCss(n){const{configs:e={},pseudos:s={},theme:o}=n,a=(c,u=!1)=>{const h=runIfFn$1(c,o),m=expandResponsive(h)(o);let g={};for(let _ in m){const b=m[_];let T=runIfFn$1(b,o);_ in s&&(_=s[_]),isCSSVariableTokenValue(_,T)&&(T=resolveTokenValue(o,T));let A=e[_];if(A===!0&&(A={property:_}),isObject$1(T)){g[_]=g[_]??{},g[_]=mergeWith({},g[_],a(T,!0));continue}let R=A?.transform?.(T,o,h)??T;R=A?.processResult?a(R,!0):R;const w=runIfFn$1(A?.property,o);if(!u&&A?.static){const D=runIfFn$1(A.static,o);g=mergeWith({},g,D)}if(w&&Array.isArray(w)){for(const D of w)g[D]=R;continue}if(w){w==="&"&&isObject$1(R)?g=mergeWith({},g,R):g[w]=R;continue}if(isObject$1(R)){g=mergeWith({},g,R);continue}g[_]=R}return g};return a}const css$2=n=>e=>getCss({theme:e,pseudos:pseudoSelectors,configs:systemProps})(n);function defineStyle(n){return n}function defineStyleConfig(n){return n}function createMultiStyleConfigHelpers(n){return{definePartsStyle(e){return e},defineMultiStyleConfig(e){return{parts:n,...e}}}}function normalize$2(n,e){if(Array.isArray(n))return n;if(isObject$1(n))return e(n);if(n!=null)return[n]}function getNextIndex(n,e){for(let s=e+1;s<n.length;s++)if(n[s]!=null)return s;return-1}function createResolver(n){const e=n.__breakpoints;return function(o,a,c,u){if(!e)return;const h={},m=normalize$2(c,e.toArrayValue);if(!m)return h;const g=m.length,_=g===1,b=!!o.parts;for(let T=0;T<g;T++){const A=e.details[T],R=e.details[getNextIndex(m,T)],w=toMediaQueryString(A.minW,R?._minW),D=runIfFn$1(o[a]?.[m[T]],u);if(D){if(b){o.parts?.forEach(fn=>{mergeWith(h,{[fn]:_?D[fn]:{[w]:D[fn]}})});continue}if(!b){_?mergeWith(h,D):h[w]=D;continue}h[w]=D}}return h}}function resolveStyleConfig(n){return e=>{const{variant:s,size:o,theme:a}=e,c=createResolver(a);return mergeWith({},runIfFn$1(n.baseStyle??{},e),c(n,"sizes",o,e),c(n,"variants",s,e))}}function omitThemingProps(n){return omit(n,["styleConfig","size","variant","colorScheme"])}function resolveReference(n){return isObject$1(n)&&n.reference?n.reference:String(n)}const toExpression=(n,...e)=>e.map(resolveReference).join(` ${n} `).replace(/calc/g,""),add$1=(...n)=>`calc(${toExpression("+",...n)})`,subtract$1=(...n)=>`calc(${toExpression("-",...n)})`,multiply$1=(...n)=>`calc(${toExpression("*",...n)})`,divide$1=(...n)=>`calc(${toExpression("/",...n)})`,negate$1=n=>{const e=resolveReference(n);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:multiply$1(e,-1)},calc$1=Object.assign(n=>({add:(...e)=>calc$1(add$1(n,...e)),subtract:(...e)=>calc$1(subtract$1(n,...e)),multiply:(...e)=>calc$1(multiply$1(n,...e)),divide:(...e)=>calc$1(divide$1(n,...e)),negate:()=>calc$1(negate$1(n)),toString:()=>n.toString()}),{add:add$1,subtract:subtract$1,multiply:multiply$1,divide:divide$1,negate:negate$1});function replaceWhiteSpace$1(n,e="-"){return n.replace(/\s+/g,e)}function escape$1(n){const e=replaceWhiteSpace$1(n.toString());return escapeSymbol(escapeDot(e))}function escapeDot(n){return n.includes("\\.")?n:!Number.isInteger(parseFloat(n.toString()))?n.replace(".","\\."):n}function escapeSymbol(n){return n.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function addPrefix$1(n,e=""){return[e,n].filter(Boolean).join("-")}function toVarReference(n,e){return`var(${n}${e?`, ${e}`:""})`}function toVarDefinition(n,e=""){return escape$1(`--${addPrefix$1(n,e)}`)}function cssVar$1(n,e,s){const o=toVarDefinition(n,s);return{variable:o,reference:toVarReference(o,e)}}function defineCssVars(n,e){const s={};for(const o of e){if(Array.isArray(o)){const[a,c]=o;s[a]=cssVar$1(`${n}-${a}`,c);continue}s[o]=cssVar$1(`${n}-${o}`)}return s}const tokens=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function extractTokens(n){return pick(n,tokens)}function extractSemanticTokens(n){return n.semanticTokens}function omitVars(n){const{__cssMap:e,__cssVars:s,__breakpoints:o,...a}=n;return a}function flattenTokens(n){const e=extractTokens(n),s=extractSemanticTokens(n),o=c=>pseudoPropNames.includes(c)||c==="default",a={};return walkObject(e,(c,u)=>{c!=null&&(a[u.join(".")]={isSemantic:!1,value:c})}),walkObject(s,(c,u)=>{c!=null&&(a[u.join(".")]={isSemantic:!0,value:c})},{stop:c=>Object.keys(c).every(o)}),a}function tokenToCssVar(n,e){return cssVar$1(String(n).replace(/\./g,"-"),void 0,e)}function createThemeVars(n){const e=flattenTokens(n),s=n.config?.cssVarPrefix;let o={};const a={};function c(u,h){const g=[String(u).split(".")[0],h].join(".");if(!e[g])return h;const{reference:b}=tokenToCssVar(g,s);return b}for(const[u,h]of Object.entries(e)){const{isSemantic:m,value:g}=h,{variable:_,reference:b}=tokenToCssVar(u,s);if(!m){if(u.startsWith("space")){const A=u.split("."),[R,...w]=A,D=`${R}.-${w.join(".")}`,fn=calc$1.negate(g),yn=calc$1.negate(b);a[D]={value:fn,var:_,varRef:yn}}o[_]=g,a[u]={value:g,var:_,varRef:b};continue}const T=isObject$1(g)?g:{default:g};o=mergeWith(o,Object.entries(T).reduce((A,[R,w])=>{if(!w)return A;const D=c(u,`${w}`);if(R==="default")return A[_]=D,A;const fn=pseudoSelectors?.[R]??R;return A[fn]={[_]:D},A},{})),a[u]={value:b,var:_,varRef:b}}return{cssVars:o,cssMap:a}}function toCSSVar(n){const e=omitVars(n),{cssMap:s,cssVars:o}=createThemeVars(e);return Object.assign(e,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...o},__cssMap:s,__breakpoints:analyzeBreakpoints(e.breakpoints)}),e}function anatomy(n,e={}){let s=!1;function o(){if(!s){s=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function a(..._){o();for(const b of _)e[b]=m(b);return anatomy(n,e)}function c(..._){for(const b of _)b in e||(e[b]=m(b));return anatomy(n,e)}function u(){return Object.fromEntries(Object.entries(e).map(([b,T])=>[b,T.selector]))}function h(){return Object.fromEntries(Object.entries(e).map(([b,T])=>[b,T.className]))}function m(_){const A=`chakra-${(["container","root"].includes(_??"")?[n]:[n,_]).filter(Boolean).join("__")}`;return{className:A,selector:`.${A}`,toString:()=>_}}return{parts:a,toPart:m,extend:c,selectors:u,classnames:h,get keys(){return Object.keys(e)},__type:{}}}const accordionAnatomy=anatomy("accordion").parts("root","container","button","panel","icon"),alertAnatomy=anatomy("alert").parts("title","description","container","icon","spinner"),avatarAnatomy=anatomy("avatar").parts("label","badge","container","excessLabel","group"),breadcrumbAnatomy=anatomy("breadcrumb").parts("link","item","container","separator");anatomy("button").parts();const checkboxAnatomy=anatomy("checkbox").parts("control","icon","container","label");anatomy("progress").parts("track","filledTrack","label");const drawerAnatomy=anatomy("drawer").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),editableAnatomy=anatomy("editable").parts("preview","input","textarea"),formAnatomy=anatomy("form").parts("container","requiredIndicator","helperText"),formErrorAnatomy=anatomy("formError").parts("text","icon"),inputAnatomy=anatomy("input").parts("addon","field","element","group"),listAnatomy=anatomy("list").parts("container","item","icon"),menuAnatomy=anatomy("menu").parts("button","list","item","groupTitle","icon","command","divider"),modalAnatomy=anatomy("modal").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),numberInputAnatomy=anatomy("numberinput").parts("root","field","stepperGroup","stepper");anatomy("pininput").parts("field");const popoverAnatomy=anatomy("popover").parts("content","header","body","footer","popper","arrow","closeButton"),progressAnatomy=anatomy("progress").parts("label","filledTrack","track"),radioAnatomy=anatomy("radio").parts("container","control","label"),selectAnatomy=anatomy("select").parts("field","icon"),sliderAnatomy=anatomy("slider").parts("container","track","thumb","filledTrack","mark"),statAnatomy=anatomy("stat").parts("container","label","helpText","number","icon"),switchAnatomy=anatomy("switch").parts("container","track","thumb","label"),tableAnatomy=anatomy("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),tabsAnatomy=anatomy("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),tagAnatomy=anatomy("tag").parts("container","label","closeButton"),cardAnatomy=anatomy("card").parts("container","header","body","footer");anatomy("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");const{definePartsStyle:definePartsStyle$p,defineMultiStyleConfig:defineMultiStyleConfig$p}=createMultiStyleConfigHelpers(accordionAnatomy.keys),baseStyleContainer$4={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},baseStyleButton$1={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},baseStylePanel={pt:"2",px:"4",pb:"5"},baseStyleIcon$6={fontSize:"1.25em"},baseStyle$F=definePartsStyle$p({container:baseStyleContainer$4,button:baseStyleButton$1,panel:baseStylePanel,icon:baseStyleIcon$6}),accordionTheme=defineMultiStyleConfig$p({baseStyle:baseStyle$F});function guard(n,e,s){return Math.min(Math.max(n,s),e)}class ColorError extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var ColorError$1=ColorError;function parseToRgba(n){if(typeof n!="string")throw new ColorError$1(n);if(n.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=n.trim();e=namedColorRegex.test(n)?nameToHex(n):n;const s=reducedHexRegex.exec(e);if(s){const u=Array.from(s).slice(1);return[...u.slice(0,3).map(h=>parseInt(r(h,2),16)),parseInt(r(u[3]||"f",2),16)/255]}const o=hexRegex.exec(e);if(o){const u=Array.from(o).slice(1);return[...u.slice(0,3).map(h=>parseInt(h,16)),parseInt(u[3]||"ff",16)/255]}const a=rgbaRegex.exec(e);if(a){const u=Array.from(a).slice(1);return[...u.slice(0,3).map(h=>parseInt(h,10)),parseFloat(u[3]||"1")]}const c=hslaRegex.exec(e);if(c){const[u,h,m,g]=Array.from(c).slice(1).map(parseFloat);if(guard(0,100,h)!==h)throw new ColorError$1(n);if(guard(0,100,m)!==m)throw new ColorError$1(n);return[...hslToRgb(u,h,m),Number.isNaN(g)?1:g]}throw new ColorError$1(n)}function hash$3(n){let e=5381,s=n.length;for(;s;)e=e*33^n.charCodeAt(--s);return(e>>>0)%2341}const colorToInt=n=>parseInt(n.replace(/_/g,""),36),compressedColorMap="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((n,e)=>{const s=colorToInt(e.substring(0,3)),o=colorToInt(e.substring(3)).toString(16);let a="";for(let c=0;c<6-o.length;c++)a+="0";return n[s]=`${a}${o}`,n},{});function nameToHex(n){const e=n.toLowerCase().trim(),s=compressedColorMap[hash$3(e)];if(!s)throw new ColorError$1(n);return`#${s}`}const r=(n,e)=>Array.from(Array(e)).map(()=>n).join(""),reducedHexRegex=new RegExp(`^#${r("([a-f0-9])",3)}([a-f0-9])?$`,"i"),hexRegex=new RegExp(`^#${r("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),rgbaRegex=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${r(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),hslaRegex=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,namedColorRegex=/^[a-z]+$/i,roundColor=n=>Math.round(n*255),hslToRgb=(n,e,s)=>{let o=s/100;if(e===0)return[o,o,o].map(roundColor);const a=(n%360+360)%360/60,c=(1-Math.abs(2*o-1))*(e/100),u=c*(1-Math.abs(a%2-1));let h=0,m=0,g=0;a>=0&&a<1?(h=c,m=u):a>=1&&a<2?(h=u,m=c):a>=2&&a<3?(m=c,g=u):a>=3&&a<4?(m=u,g=c):a>=4&&a<5?(h=u,g=c):a>=5&&a<6&&(h=c,g=u);const _=o-c/2,b=h+_,T=m+_,A=g+_;return[b,T,A].map(roundColor)};function rgba$1(n,e,s,o){return`rgba(${guard(0,255,n).toFixed()}, ${guard(0,255,e).toFixed()}, ${guard(0,255,s).toFixed()}, ${parseFloat(guard(0,1,o).toFixed(3))})`}function transparentize$1(n,e){const[s,o,a,c]=parseToRgba(n);return rgba$1(s,o,a,c-e)}function toHex(n){const[e,s,o,a]=parseToRgba(n);let c=u=>{const h=guard(0,255,u).toString(16);return h.length===1?`0${h}`:h};return`#${c(e)}${c(s)}${c(o)}${a<1?c(Math.round(a*255)):""}`}const isEmptyObject=n=>Object.keys(n).length===0;function get(n,e,s,o,a){for(e=e.split?e.split("."):e,o=0;o<e.length;o++)n=n?n[e[o]]:a;return n===a?s:n}const getColor=(n,e,s)=>{const o=get(n,`colors.${e}`,e);try{return toHex(o),o}catch{return s??"#000000"}},getBrightness=n=>{const[e,s,o]=parseToRgba(n);return(e*299+s*587+o*114)/1e3},tone=n=>e=>{const s=getColor(e,n);return getBrightness(s)<128?"dark":"light"},isDark=n=>e=>tone(n)(e)==="dark",transparentize=(n,e)=>s=>{const o=getColor(s,n);return transparentize$1(o,1-e)};function generateStripe(n="1rem",e="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${e} 25%,
    transparent 25%,
    transparent 50%,
    ${e} 50%,
    ${e} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${n} ${n}`}}const randomHex=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function randomColor(n){const e=randomHex();return!n||isEmptyObject(n)?e:n.string&&n.colors?randomColorFromList(n.string,n.colors):n.string&&!n.colors?randomColorFromString(n.string):n.colors&&!n.string?randomFromList(n.colors):e}function randomColorFromString(n){let e=0;if(n.length===0)return e.toString();for(let o=0;o<n.length;o+=1)e=n.charCodeAt(o)+((e<<5)-e),e=e&e;let s="#";for(let o=0;o<3;o+=1){const a=e>>o*8&255;s+=`00${a.toString(16)}`.substr(-2)}return s}function randomColorFromList(n,e){let s=0;if(n.length===0)return e[0];for(let o=0;o<n.length;o+=1)s=n.charCodeAt(o)+((s<<5)-s),s=s&s;return s=(s%e.length+e.length)%e.length,e[s]}function randomFromList(n){return n[Math.floor(Math.random()*n.length)]}function mode(n,e){return s=>s.colorMode==="dark"?e:n}function orient$2(n){const{orientation:e,vertical:s,horizontal:o}=n;return e?e==="vertical"?s:o:{}}function toRef(n){return isObject$1(n)&&n.reference?n.reference:String(n)}const toExpr=(n,...e)=>e.map(toRef).join(` ${n} `).replace(/calc/g,""),add=(...n)=>`calc(${toExpr("+",...n)})`,subtract=(...n)=>`calc(${toExpr("-",...n)})`,multiply=(...n)=>`calc(${toExpr("*",...n)})`,divide=(...n)=>`calc(${toExpr("/",...n)})`,negate=n=>{const e=toRef(n);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:multiply(e,-1)},calc=Object.assign(n=>({add:(...e)=>calc(add(n,...e)),subtract:(...e)=>calc(subtract(n,...e)),multiply:(...e)=>calc(multiply(n,...e)),divide:(...e)=>calc(divide(n,...e)),negate:()=>calc(negate(n)),toString:()=>n.toString()}),{add,subtract,multiply,divide,negate});function isDecimal(n){return!Number.isInteger(parseFloat(n.toString()))}function replaceWhiteSpace(n,e="-"){return n.replace(/\s+/g,e)}function escape(n){const e=replaceWhiteSpace(n.toString());return e.includes("\\.")?n:isDecimal(n)?e.replace(".","\\."):n}function addPrefix(n,e=""){return[e,escape(n)].filter(Boolean).join("-")}function toVarRef(n,e){return`var(${escape(n)}${e?`, ${e}`:""})`}function toVar(n,e=""){return`--${addPrefix(n,e)}`}function cssVar(n,e){const s=toVar(n,e?.prefix);return{variable:s,reference:toVarRef(s,getFallback(e?.fallback))}}function getFallback(n){return n?.reference}const{definePartsStyle:definePartsStyle$o,defineMultiStyleConfig:defineMultiStyleConfig$o}=createMultiStyleConfigHelpers(alertAnatomy.keys),$fg$5=cssVar$1("alert-fg"),$bg$f=cssVar$1("alert-bg"),baseStyle$E=definePartsStyle$o({container:{bg:$bg$f.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:$fg$5.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:$fg$5.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function getBg(n){const{theme:e,colorScheme:s}=n,o=transparentize(`${s}.200`,.16)(e);return{light:`colors.${s}.100`,dark:o}}const variantSubtle$1=definePartsStyle$o(n=>{const{colorScheme:e}=n,s=getBg(n);return{container:{[$fg$5.variable]:`colors.${e}.600`,[$bg$f.variable]:s.light,_dark:{[$fg$5.variable]:`colors.${e}.200`,[$bg$f.variable]:s.dark}}}}),variantLeftAccent=definePartsStyle$o(n=>{const{colorScheme:e}=n,s=getBg(n);return{container:{[$fg$5.variable]:`colors.${e}.600`,[$bg$f.variable]:s.light,_dark:{[$fg$5.variable]:`colors.${e}.200`,[$bg$f.variable]:s.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:$fg$5.reference}}}),variantTopAccent=definePartsStyle$o(n=>{const{colorScheme:e}=n,s=getBg(n);return{container:{[$fg$5.variable]:`colors.${e}.600`,[$bg$f.variable]:s.light,_dark:{[$fg$5.variable]:`colors.${e}.200`,[$bg$f.variable]:s.dark},pt:"2",borderTopWidth:"4px",borderTopColor:$fg$5.reference}}}),variantSolid$3=definePartsStyle$o(n=>{const{colorScheme:e}=n;return{container:{[$fg$5.variable]:"colors.white",[$bg$f.variable]:`colors.${e}.600`,_dark:{[$fg$5.variable]:"colors.gray.900",[$bg$f.variable]:`colors.${e}.200`},color:$fg$5.reference}}}),variants$d={subtle:variantSubtle$1,"left-accent":variantLeftAccent,"top-accent":variantTopAccent,solid:variantSolid$3},alertTheme=defineMultiStyleConfig$o({baseStyle:baseStyle$E,variants:variants$d,defaultProps:{variant:"subtle",colorScheme:"blue"}}),spacing={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},largeSizes={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},container={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},sizes$m={...spacing,...largeSizes,container},isFunction=n=>typeof n=="function";function runIfFn(n,...e){return isFunction(n)?n(...e):n}const{definePartsStyle:definePartsStyle$n,defineMultiStyleConfig:defineMultiStyleConfig$n}=createMultiStyleConfigHelpers(avatarAnatomy.keys),$border$3=cssVar$1("avatar-border-color"),$bg$e=cssVar$1("avatar-bg"),$fs=cssVar$1("avatar-font-size"),$size$4=cssVar$1("avatar-size"),baseStyleBadge={borderRadius:"full",border:"0.2em solid",borderColor:$border$3.reference,[$border$3.variable]:"white",_dark:{[$border$3.variable]:"colors.gray.800"}},baseStyleExcessLabel={bg:$bg$e.reference,fontSize:$fs.reference,width:$size$4.reference,height:$size$4.reference,lineHeight:"1",[$bg$e.variable]:"colors.gray.200",_dark:{[$bg$e.variable]:"colors.whiteAlpha.400"}},baseStyleContainer$3=n=>{const{name:e,theme:s}=n,o=e?randomColor({string:e}):"colors.gray.400",a=isDark(o)(s);let c="white";return a||(c="gray.800"),{bg:$bg$e.reference,fontSize:$fs.reference,color:c,borderColor:$border$3.reference,verticalAlign:"top",width:$size$4.reference,height:$size$4.reference,"&:not([data-loaded])":{[$bg$e.variable]:o},[$border$3.variable]:"colors.white",_dark:{[$border$3.variable]:"colors.gray.800"}}},baseStyleLabel$4={fontSize:$fs.reference,lineHeight:"1"},baseStyle$D=definePartsStyle$n(n=>({badge:runIfFn(baseStyleBadge,n),excessLabel:runIfFn(baseStyleExcessLabel,n),container:runIfFn(baseStyleContainer$3,n),label:baseStyleLabel$4}));function getSize$3(n){const e=n!=="100%"?sizes$m[n]:void 0;return definePartsStyle$n({container:{[$size$4.variable]:e??n,[$fs.variable]:`calc(${e??n} / 2.5)`},excessLabel:{[$size$4.variable]:e??n,[$fs.variable]:`calc(${e??n} / 2.5)`}})}const sizes$l={"2xs":getSize$3(4),xs:getSize$3(6),sm:getSize$3(8),md:getSize$3(12),lg:getSize$3(16),xl:getSize$3(24),"2xl":getSize$3(32),full:getSize$3("100%")},avatarTheme=defineMultiStyleConfig$n({baseStyle:baseStyle$D,sizes:sizes$l,defaultProps:{size:"md"}}),vars=defineCssVars("badge",["bg","color","shadow"]),baseStyle$C={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:vars.bg.reference,color:vars.color.reference,boxShadow:vars.shadow.reference},variantSolid$2=n=>{const{colorScheme:e,theme:s}=n,o=transparentize(`${e}.500`,.6)(s);return{[vars.bg.variable]:`colors.${e}.500`,[vars.color.variable]:"colors.white",_dark:{[vars.bg.variable]:o,[vars.color.variable]:"colors.whiteAlpha.800"}}},variantSubtle=n=>{const{colorScheme:e,theme:s}=n,o=transparentize(`${e}.200`,.16)(s);return{[vars.bg.variable]:`colors.${e}.100`,[vars.color.variable]:`colors.${e}.800`,_dark:{[vars.bg.variable]:o,[vars.color.variable]:`colors.${e}.200`}}},variantOutline$2=n=>{const{colorScheme:e,theme:s}=n,o=transparentize(`${e}.200`,.8)(s);return{[vars.color.variable]:`colors.${e}.500`,_dark:{[vars.color.variable]:o},[vars.shadow.variable]:`inset 0 0 0px 1px ${vars.color.reference}`}},variants$c={solid:variantSolid$2,subtle:variantSubtle,outline:variantOutline$2},badgeTheme={baseStyle:baseStyle$C,variants:variants$c,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:defineMultiStyleConfig$m,definePartsStyle:definePartsStyle$m}=createMultiStyleConfigHelpers(breadcrumbAnatomy.keys),$decor=cssVar$1("breadcrumb-link-decor"),baseStyleLink={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:$decor.reference,[$decor.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[$decor.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},baseStyle$B=definePartsStyle$m({link:baseStyleLink}),breadcrumbTheme=defineMultiStyleConfig$m({baseStyle:baseStyle$B}),baseStyle$A={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variantGhost=n=>{const{colorScheme:e,theme:s}=n;if(e==="gray")return{color:mode("gray.800","whiteAlpha.900")(n),_hover:{bg:mode("gray.100","whiteAlpha.200")(n)},_active:{bg:mode("gray.200","whiteAlpha.300")(n)}};const o=transparentize(`${e}.200`,.12)(s),a=transparentize(`${e}.200`,.24)(s);return{color:mode(`${e}.600`,`${e}.200`)(n),bg:"transparent",_hover:{bg:mode(`${e}.50`,o)(n)},_active:{bg:mode(`${e}.100`,a)(n)}}},variantOutline$1=n=>{const{colorScheme:e}=n,s=mode("gray.200","whiteAlpha.300")(n);return{border:"1px solid",borderColor:e==="gray"?s:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...runIfFn(variantGhost,n)}},accessibleColorMap={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},variantSolid$1=n=>{const{colorScheme:e}=n;if(e==="gray"){const h=mode("gray.100","whiteAlpha.200")(n);return{bg:h,color:mode("gray.800","whiteAlpha.900")(n),_hover:{bg:mode("gray.200","whiteAlpha.300")(n),_disabled:{bg:h}},_active:{bg:mode("gray.300","whiteAlpha.400")(n)}}}const{bg:s=`${e}.500`,color:o="white",hoverBg:a=`${e}.600`,activeBg:c=`${e}.700`}=accessibleColorMap[e]??{},u=mode(s,`${e}.200`)(n);return{bg:u,color:mode(o,"gray.800")(n),_hover:{bg:mode(a,`${e}.300`)(n),_disabled:{bg:u}},_active:{bg:mode(c,`${e}.400`)(n)}}},variantLink=n=>{const{colorScheme:e}=n;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:mode(`${e}.500`,`${e}.200`)(n),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:mode(`${e}.700`,`${e}.500`)(n)}}},variantUnstyled$2={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},variants$b={ghost:variantGhost,outline:variantOutline$1,solid:variantSolid$1,link:variantLink,unstyled:variantUnstyled$2},sizes$k={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},buttonTheme={baseStyle:baseStyle$A,variants:variants$b,sizes:sizes$k,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:definePartsStyle$l,defineMultiStyleConfig:defineMultiStyleConfig$l}=createMultiStyleConfigHelpers(cardAnatomy.keys),$bg$d=cssVar$1("card-bg"),$padding$1=cssVar$1("card-padding"),$shadow$3=cssVar$1("card-shadow"),$radius=cssVar$1("card-radius"),$border$2=cssVar$1("card-border-width","0"),$borderColor=cssVar$1("card-border-color"),baseStyle$z=definePartsStyle$l({container:{[$bg$d.variable]:"colors.chakra-body-bg",backgroundColor:$bg$d.reference,boxShadow:$shadow$3.reference,borderRadius:$radius.reference,color:"chakra-body-text",borderWidth:$border$2.reference,borderColor:$borderColor.reference},body:{padding:$padding$1.reference,flex:"1 1 0%"},header:{padding:$padding$1.reference},footer:{padding:$padding$1.reference}}),sizes$j={sm:definePartsStyle$l({container:{[$radius.variable]:"radii.base",[$padding$1.variable]:"space.3"}}),md:definePartsStyle$l({container:{[$radius.variable]:"radii.md",[$padding$1.variable]:"space.5"}}),lg:definePartsStyle$l({container:{[$radius.variable]:"radii.xl",[$padding$1.variable]:"space.7"}})},variants$a={elevated:definePartsStyle$l({container:{[$shadow$3.variable]:"shadows.base",_dark:{[$bg$d.variable]:"colors.gray.700"}}}),outline:definePartsStyle$l({container:{[$border$2.variable]:"1px",[$borderColor.variable]:"colors.chakra-border-color"}}),filled:definePartsStyle$l({container:{[$bg$d.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[$padding$1.variable]:0},header:{[$padding$1.variable]:0},footer:{[$padding$1.variable]:0}}},cardTheme=defineMultiStyleConfig$l({baseStyle:baseStyle$z,variants:variants$a,sizes:sizes$j,defaultProps:{variant:"elevated",size:"md"}}),{definePartsStyle:definePartsStyle$k,defineMultiStyleConfig:defineMultiStyleConfig$k}=createMultiStyleConfigHelpers(checkboxAnatomy.keys),$size$3=cssVar$1("checkbox-size"),baseStyleControl$1=n=>{const{colorScheme:e}=n;return{w:$size$3.reference,h:$size$3.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:mode(`${e}.500`,`${e}.200`)(n),borderColor:mode(`${e}.500`,`${e}.200`)(n),color:mode("white","gray.900")(n),_hover:{bg:mode(`${e}.600`,`${e}.300`)(n),borderColor:mode(`${e}.600`,`${e}.300`)(n)},_disabled:{borderColor:mode("gray.200","transparent")(n),bg:mode("gray.200","whiteAlpha.300")(n),color:mode("gray.500","whiteAlpha.500")(n)}},_indeterminate:{bg:mode(`${e}.500`,`${e}.200`)(n),borderColor:mode(`${e}.500`,`${e}.200`)(n),color:mode("white","gray.900")(n)},_disabled:{bg:mode("gray.100","whiteAlpha.100")(n),borderColor:mode("gray.100","transparent")(n)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:mode("red.500","red.300")(n)}}},baseStyleContainer$2={_disabled:{cursor:"not-allowed"}},baseStyleLabel$3={userSelect:"none",_disabled:{opacity:.4}},baseStyleIcon$5={transitionProperty:"transform",transitionDuration:"normal"},baseStyle$y=definePartsStyle$k(n=>({icon:baseStyleIcon$5,container:baseStyleContainer$2,control:runIfFn(baseStyleControl$1,n),label:baseStyleLabel$3})),sizes$i={sm:definePartsStyle$k({control:{[$size$3.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:definePartsStyle$k({control:{[$size$3.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:definePartsStyle$k({control:{[$size$3.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},checkboxTheme=defineMultiStyleConfig$k({baseStyle:baseStyle$y,sizes:sizes$i,defaultProps:{size:"md",colorScheme:"blue"}}),$size$2=cssVar("close-button-size"),$bg$c=cssVar("close-button-bg"),baseStyle$x={w:[$size$2.reference],h:[$size$2.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[$bg$c.variable]:"colors.blackAlpha.100",_dark:{[$bg$c.variable]:"colors.whiteAlpha.100"}},_active:{[$bg$c.variable]:"colors.blackAlpha.200",_dark:{[$bg$c.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:$bg$c.reference},sizes$h={lg:{[$size$2.variable]:"sizes.10",fontSize:"md"},md:{[$size$2.variable]:"sizes.8",fontSize:"xs"},sm:{[$size$2.variable]:"sizes.6",fontSize:"2xs"}},closeButtonTheme={baseStyle:baseStyle$x,sizes:sizes$h,defaultProps:{size:"md"}},{variants:variants$9,defaultProps}=badgeTheme,baseStyle$w={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:vars.bg.reference,color:vars.color.reference,boxShadow:vars.shadow.reference},codeTheme={baseStyle:baseStyle$w,variants:variants$9,defaultProps},baseStyle$v={w:"100%",mx:"auto",maxW:"prose",px:"4"},containerTheme={baseStyle:baseStyle$v},baseStyle$u={opacity:.6,borderColor:"inherit"},variantSolid={borderStyle:"solid"},variantDashed={borderStyle:"dashed"},variants$8={solid:variantSolid,dashed:variantDashed},dividerTheme={baseStyle:baseStyle$u,variants:variants$8,defaultProps:{variant:"solid"}},{definePartsStyle:definePartsStyle$j,defineMultiStyleConfig:defineMultiStyleConfig$j}=createMultiStyleConfigHelpers(drawerAnatomy.keys),$bg$b=cssVar$1("drawer-bg"),$bs=cssVar$1("drawer-box-shadow");function getSize$2(n){return definePartsStyle$j(n==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:n}})}const baseStyleOverlay$1={bg:"blackAlpha.600",zIndex:"modal"},baseStyleDialogContainer$1={display:"flex",zIndex:"modal",justifyContent:"center"},baseStyleDialog$1=n=>{const{isFullHeight:e}=n;return{...e&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[$bg$b.variable]:"colors.white",[$bs.variable]:"shadows.lg",_dark:{[$bg$b.variable]:"colors.gray.700",[$bs.variable]:"shadows.dark-lg"},bg:$bg$b.reference,boxShadow:$bs.reference}},baseStyleHeader$2={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},baseStyleCloseButton$3={position:"absolute",top:"2",insetEnd:"3"},baseStyleBody$2={px:"6",py:"2",flex:"1",overflow:"auto"},baseStyleFooter$2={px:"6",py:"4"},baseStyle$t=definePartsStyle$j(n=>({overlay:baseStyleOverlay$1,dialogContainer:baseStyleDialogContainer$1,dialog:runIfFn(baseStyleDialog$1,n),header:baseStyleHeader$2,closeButton:baseStyleCloseButton$3,body:baseStyleBody$2,footer:baseStyleFooter$2})),sizes$g={xs:getSize$2("xs"),sm:getSize$2("md"),md:getSize$2("lg"),lg:getSize$2("2xl"),xl:getSize$2("4xl"),full:getSize$2("full")},drawerTheme=defineMultiStyleConfig$j({baseStyle:baseStyle$t,sizes:sizes$g,defaultProps:{size:"xs"}}),{definePartsStyle:definePartsStyle$i,defineMultiStyleConfig:defineMultiStyleConfig$i}=createMultiStyleConfigHelpers(editableAnatomy.keys),baseStylePreview={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},baseStyleInput={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},baseStyleTextarea={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},baseStyle$s=definePartsStyle$i({preview:baseStylePreview,input:baseStyleInput,textarea:baseStyleTextarea}),editableTheme=defineMultiStyleConfig$i({baseStyle:baseStyle$s}),{definePartsStyle:definePartsStyle$h,defineMultiStyleConfig:defineMultiStyleConfig$h}=createMultiStyleConfigHelpers(formAnatomy.keys),$fg$4=cssVar$1("form-control-color"),baseStyleRequiredIndicator={marginStart:"1",[$fg$4.variable]:"colors.red.500",_dark:{[$fg$4.variable]:"colors.red.300"},color:$fg$4.reference},baseStyleHelperText={mt:"2",[$fg$4.variable]:"colors.gray.600",_dark:{[$fg$4.variable]:"colors.whiteAlpha.600"},color:$fg$4.reference,lineHeight:"normal",fontSize:"sm"},baseStyle$r=definePartsStyle$h({container:{width:"100%",position:"relative"},requiredIndicator:baseStyleRequiredIndicator,helperText:baseStyleHelperText}),formTheme=defineMultiStyleConfig$h({baseStyle:baseStyle$r}),{definePartsStyle:definePartsStyle$g,defineMultiStyleConfig:defineMultiStyleConfig$g}=createMultiStyleConfigHelpers(formErrorAnatomy.keys),$fg$3=cssVar$1("form-error-color"),baseStyleText={[$fg$3.variable]:"colors.red.500",_dark:{[$fg$3.variable]:"colors.red.300"},color:$fg$3.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},baseStyleIcon$4={marginEnd:"0.5em",[$fg$3.variable]:"colors.red.500",_dark:{[$fg$3.variable]:"colors.red.300"},color:$fg$3.reference},baseStyle$q=definePartsStyle$g({text:baseStyleText,icon:baseStyleIcon$4}),formErrorTheme=defineMultiStyleConfig$g({baseStyle:baseStyle$q}),baseStyle$p={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},formLabelTheme={baseStyle:baseStyle$p},baseStyle$o={fontFamily:"heading",fontWeight:"bold"},sizes$f={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},headingTheme={baseStyle:baseStyle$o,sizes:sizes$f,defaultProps:{size:"xl"}},{definePartsStyle:definePartsStyle$f,defineMultiStyleConfig:defineMultiStyleConfig$f}=createMultiStyleConfigHelpers(inputAnatomy.keys),$height$1=cssVar$1("input-height"),$fontSize$1=cssVar$1("input-font-size"),$padding=cssVar$1("input-padding"),$borderRadius=cssVar$1("input-border-radius"),baseStyle$n=definePartsStyle$f({addon:{height:$height$1.reference,fontSize:$fontSize$1.reference,px:$padding.reference,borderRadius:$borderRadius.reference},field:{width:"100%",height:$height$1.reference,fontSize:$fontSize$1.reference,px:$padding.reference,borderRadius:$borderRadius.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),size={lg:{[$fontSize$1.variable]:"fontSizes.lg",[$padding.variable]:"space.4",[$borderRadius.variable]:"radii.md",[$height$1.variable]:"sizes.12"},md:{[$fontSize$1.variable]:"fontSizes.md",[$padding.variable]:"space.4",[$borderRadius.variable]:"radii.md",[$height$1.variable]:"sizes.10"},sm:{[$fontSize$1.variable]:"fontSizes.sm",[$padding.variable]:"space.3",[$borderRadius.variable]:"radii.sm",[$height$1.variable]:"sizes.8"},xs:{[$fontSize$1.variable]:"fontSizes.xs",[$padding.variable]:"space.2",[$borderRadius.variable]:"radii.sm",[$height$1.variable]:"sizes.6"}},sizes$e={lg:definePartsStyle$f({field:size.lg,group:size.lg}),md:definePartsStyle$f({field:size.md,group:size.md}),sm:definePartsStyle$f({field:size.sm,group:size.sm}),xs:definePartsStyle$f({field:size.xs,group:size.xs})};function getDefaults(n){const{focusBorderColor:e,errorBorderColor:s}=n;return{focusBorderColor:e||mode("blue.500","blue.300")(n),errorBorderColor:s||mode("red.500","red.300")(n)}}const variantOutline=definePartsStyle$f(n=>{const{theme:e}=n,{focusBorderColor:s,errorBorderColor:o}=getDefaults(n);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:mode("gray.300","whiteAlpha.400")(n)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:getColor(e,o),boxShadow:`0 0 0 1px ${getColor(e,o)}`},_focusVisible:{zIndex:1,borderColor:getColor(e,s),boxShadow:`0 0 0 1px ${getColor(e,s)}`}},addon:{border:"1px solid",borderColor:mode("inherit","whiteAlpha.50")(n),bg:mode("gray.100","whiteAlpha.300")(n)}}}),variantFilled=definePartsStyle$f(n=>{const{theme:e}=n,{focusBorderColor:s,errorBorderColor:o}=getDefaults(n);return{field:{border:"2px solid",borderColor:"transparent",bg:mode("gray.100","whiteAlpha.50")(n),_hover:{bg:mode("gray.200","whiteAlpha.100")(n)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:getColor(e,o)},_focusVisible:{bg:"transparent",borderColor:getColor(e,s)}},addon:{border:"2px solid",borderColor:"transparent",bg:mode("gray.100","whiteAlpha.50")(n)}}}),variantFlushed=definePartsStyle$f(n=>{const{theme:e}=n,{focusBorderColor:s,errorBorderColor:o}=getDefaults(n);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:getColor(e,o),boxShadow:`0px 1px 0px 0px ${getColor(e,o)}`},_focusVisible:{borderColor:getColor(e,s),boxShadow:`0px 1px 0px 0px ${getColor(e,s)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),variantUnstyled$1=definePartsStyle$f({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),variants$7={outline:variantOutline,filled:variantFilled,flushed:variantFlushed,unstyled:variantUnstyled$1},inputTheme=defineMultiStyleConfig$f({baseStyle:baseStyle$n,sizes:sizes$e,variants:variants$7,defaultProps:{size:"md",variant:"outline"}}),$bg$a=cssVar$1("kbd-bg"),baseStyle$m={[$bg$a.variable]:"colors.gray.100",_dark:{[$bg$a.variable]:"colors.whiteAlpha.100"},bg:$bg$a.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},kbdTheme={baseStyle:baseStyle$m},baseStyle$l={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},linkTheme={baseStyle:baseStyle$l},{defineMultiStyleConfig:defineMultiStyleConfig$e,definePartsStyle:definePartsStyle$e}=createMultiStyleConfigHelpers(listAnatomy.keys),baseStyleIcon$3={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},baseStyle$k=definePartsStyle$e({icon:baseStyleIcon$3}),listTheme=defineMultiStyleConfig$e({baseStyle:baseStyle$k}),{defineMultiStyleConfig:defineMultiStyleConfig$d,definePartsStyle:definePartsStyle$d}=createMultiStyleConfigHelpers(menuAnatomy.keys),$bg$9=cssVar$1("menu-bg"),$shadow$2=cssVar$1("menu-shadow"),baseStyleList={[$bg$9.variable]:"#fff",[$shadow$2.variable]:"shadows.sm",_dark:{[$bg$9.variable]:"colors.gray.700",[$shadow$2.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:"dropdown",borderRadius:"md",borderWidth:"1px",bg:$bg$9.reference,boxShadow:$shadow$2.reference},baseStyleItem={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[$bg$9.variable]:"colors.gray.100",_dark:{[$bg$9.variable]:"colors.whiteAlpha.100"}},_active:{[$bg$9.variable]:"colors.gray.200",_dark:{[$bg$9.variable]:"colors.whiteAlpha.200"}},_expanded:{[$bg$9.variable]:"colors.gray.100",_dark:{[$bg$9.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:$bg$9.reference},baseStyleGroupTitle={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},baseStyleIcon$2={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},baseStyleCommand={opacity:.6},baseStyleDivider={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},baseStyleButton={transitionProperty:"common",transitionDuration:"normal"},baseStyle$j=definePartsStyle$d({button:baseStyleButton,list:baseStyleList,item:baseStyleItem,groupTitle:baseStyleGroupTitle,icon:baseStyleIcon$2,command:baseStyleCommand,divider:baseStyleDivider}),menuTheme=defineMultiStyleConfig$d({baseStyle:baseStyle$j}),{defineMultiStyleConfig:defineMultiStyleConfig$c,definePartsStyle:definePartsStyle$c}=createMultiStyleConfigHelpers(modalAnatomy.keys),$bg$8=cssVar$1("modal-bg"),$shadow$1=cssVar$1("modal-shadow"),baseStyleOverlay={bg:"blackAlpha.600",zIndex:"modal"},baseStyleDialogContainer=n=>{const{isCentered:e,scrollBehavior:s}=n;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:s==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},baseStyleDialog=n=>{const{isCentered:e,scrollBehavior:s}=n;return{borderRadius:"md",color:"inherit",my:e?"auto":"16",mx:e?"auto":void 0,zIndex:"modal",maxH:s==="inside"?"calc(100% - 7.5rem)":void 0,[$bg$8.variable]:"colors.white",[$shadow$1.variable]:"shadows.lg",_dark:{[$bg$8.variable]:"colors.gray.700",[$shadow$1.variable]:"shadows.dark-lg"},bg:$bg$8.reference,boxShadow:$shadow$1.reference}},baseStyleHeader$1={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},baseStyleCloseButton$2={position:"absolute",top:"2",insetEnd:"3"},baseStyleBody$1=n=>{const{scrollBehavior:e}=n;return{px:"6",py:"2",flex:"1",overflow:e==="inside"?"auto":void 0}},baseStyleFooter$1={px:"6",py:"4"},baseStyle$i=definePartsStyle$c(n=>({overlay:baseStyleOverlay,dialogContainer:runIfFn(baseStyleDialogContainer,n),dialog:runIfFn(baseStyleDialog,n),header:baseStyleHeader$1,closeButton:baseStyleCloseButton$2,body:runIfFn(baseStyleBody$1,n),footer:baseStyleFooter$1}));function getSize$1(n){return definePartsStyle$c(n==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:n}})}const sizes$d={xs:getSize$1("xs"),sm:getSize$1("sm"),md:getSize$1("md"),lg:getSize$1("lg"),xl:getSize$1("xl"),"2xl":getSize$1("2xl"),"3xl":getSize$1("3xl"),"4xl":getSize$1("4xl"),"5xl":getSize$1("5xl"),"6xl":getSize$1("6xl"),full:getSize$1("full")},modalTheme=defineMultiStyleConfig$c({baseStyle:baseStyle$i,sizes:sizes$d,defaultProps:{size:"md"}}),typography={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},{defineMultiStyleConfig:defineMultiStyleConfig$b,definePartsStyle:definePartsStyle$b}=createMultiStyleConfigHelpers(numberInputAnatomy.keys),$stepperWidth=cssVar("number-input-stepper-width"),$inputPadding=cssVar("number-input-input-padding"),inputPaddingValue=calc($stepperWidth).add("0.5rem").toString(),$bg$7=cssVar("number-input-bg"),$fg$2=cssVar("number-input-color"),$border$1=cssVar("number-input-border-color"),baseStyleRoot$1={[$stepperWidth.variable]:"sizes.6",[$inputPadding.variable]:inputPaddingValue},baseStyleField$1=n=>runIfFn(inputTheme.baseStyle,n)?.field??{},baseStyleStepperGroup={width:$stepperWidth.reference},baseStyleStepper={borderStart:"1px solid",borderStartColor:$border$1.reference,color:$fg$2.reference,bg:$bg$7.reference,[$fg$2.variable]:"colors.chakra-body-text",[$border$1.variable]:"colors.chakra-border-color",_dark:{[$fg$2.variable]:"colors.whiteAlpha.800",[$border$1.variable]:"colors.whiteAlpha.300"},_active:{[$bg$7.variable]:"colors.gray.200",_dark:{[$bg$7.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},baseStyle$h=definePartsStyle$b(n=>({root:baseStyleRoot$1,field:runIfFn(baseStyleField$1,n)??{},stepperGroup:baseStyleStepperGroup,stepper:baseStyleStepper}));function getSize(n){const e=inputTheme.sizes?.[n],s={lg:"md",md:"md",sm:"sm",xs:"sm"},o=e.field?.fontSize??"md",a=typography.fontSizes[o];return definePartsStyle$b({field:{...e.field,paddingInlineEnd:$inputPadding.reference,verticalAlign:"top"},stepper:{fontSize:calc(a).multiply(.75).toString(),_first:{borderTopEndRadius:s[n]},_last:{borderBottomEndRadius:s[n],mt:"-1px",borderTopWidth:1}}})}const sizes$c={xs:getSize("xs"),sm:getSize("sm"),md:getSize("md"),lg:getSize("lg")},numberInputTheme=defineMultiStyleConfig$b({baseStyle:baseStyle$h,sizes:sizes$c,variants:inputTheme.variants,defaultProps:inputTheme.defaultProps}),baseStyle$g={...inputTheme.baseStyle?.field,textAlign:"center"},sizes$b={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},variants$6={outline:n=>runIfFn(inputTheme.variants?.outline,n)?.field??{},flushed:n=>runIfFn(inputTheme.variants?.flushed,n)?.field??{},filled:n=>runIfFn(inputTheme.variants?.filled,n)?.field??{},unstyled:inputTheme.variants?.unstyled.field??{}},pinInputTheme={baseStyle:baseStyle$g,sizes:sizes$b,variants:variants$6,defaultProps:inputTheme.defaultProps},{defineMultiStyleConfig:defineMultiStyleConfig$a,definePartsStyle:definePartsStyle$a}=createMultiStyleConfigHelpers(popoverAnatomy.keys),$popperBg=cssVar("popper-bg"),$arrowBg$1=cssVar("popper-arrow-bg"),$arrowShadowColor=cssVar("popper-arrow-shadow-color"),baseStylePopper={zIndex:"popover"},baseStyleContent={[$popperBg.variable]:"colors.white",bg:$popperBg.reference,[$arrowBg$1.variable]:$popperBg.reference,[$arrowShadowColor.variable]:"colors.gray.200",_dark:{[$popperBg.variable]:"colors.gray.700",[$arrowShadowColor.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},baseStyleHeader={px:3,py:2,borderBottomWidth:"1px"},baseStyleBody={px:3,py:2},baseStyleFooter={px:3,py:2,borderTopWidth:"1px"},baseStyleCloseButton$1={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},baseStyle$f=definePartsStyle$a({popper:baseStylePopper,content:baseStyleContent,header:baseStyleHeader,body:baseStyleBody,footer:baseStyleFooter,closeButton:baseStyleCloseButton$1}),popoverTheme=defineMultiStyleConfig$a({baseStyle:baseStyle$f}),{defineMultiStyleConfig:defineMultiStyleConfig$9,definePartsStyle:definePartsStyle$9}=createMultiStyleConfigHelpers(progressAnatomy.keys),filledStyle=n=>{const{colorScheme:e,theme:s,isIndeterminate:o,hasStripe:a}=n,c=mode(generateStripe(),generateStripe("1rem","rgba(0,0,0,0.1)"))(n),u=mode(`${e}.500`,`${e}.200`)(n),h=`linear-gradient(
    to right,
    transparent 0%,
    ${getColor(s,u)} 50%,
    transparent 100%
  )`;return{...!o&&a&&c,...o?{bgImage:h}:{bgColor:u}}},baseStyleLabel$2={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},baseStyleTrack$2=n=>({bg:mode("gray.100","whiteAlpha.300")(n)}),baseStyleFilledTrack$1=n=>({transitionProperty:"common",transitionDuration:"slow",...filledStyle(n)}),baseStyle$e=definePartsStyle$9(n=>({label:baseStyleLabel$2,filledTrack:baseStyleFilledTrack$1(n),track:baseStyleTrack$2(n)})),sizes$a={xs:definePartsStyle$9({track:{h:"1"}}),sm:definePartsStyle$9({track:{h:"2"}}),md:definePartsStyle$9({track:{h:"3"}}),lg:definePartsStyle$9({track:{h:"4"}})},progressTheme=defineMultiStyleConfig$9({sizes:sizes$a,baseStyle:baseStyle$e,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:defineMultiStyleConfig$8,definePartsStyle:definePartsStyle$8}=createMultiStyleConfigHelpers(radioAnatomy.keys),baseStyleControl=n=>{const e=runIfFn(checkboxTheme.baseStyle,n)?.control;return{...e,borderRadius:"full",_checked:{...e?._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},baseStyle$d=definePartsStyle$8(n=>({label:checkboxTheme.baseStyle?.(n).label,container:checkboxTheme.baseStyle?.(n).container,control:baseStyleControl(n)})),sizes$9={md:definePartsStyle$8({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:definePartsStyle$8({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:definePartsStyle$8({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},radioTheme=defineMultiStyleConfig$8({baseStyle:baseStyle$d,sizes:sizes$9,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:defineMultiStyleConfig$7,definePartsStyle:definePartsStyle$7}=createMultiStyleConfigHelpers(selectAnatomy.keys),$bg$6=cssVar$1("select-bg"),baseStyleField={...inputTheme.baseStyle?.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:$bg$6.reference,[$bg$6.variable]:"colors.white",_dark:{[$bg$6.variable]:"colors.gray.700"},"> option, > optgroup":{bg:$bg$6.reference}},baseStyleIcon$1={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},baseStyle$c=definePartsStyle$7({field:baseStyleField,icon:baseStyleIcon$1}),iconSpacing={paddingInlineEnd:"8"},sizes$8={lg:{...inputTheme.sizes?.lg,field:{...inputTheme.sizes?.lg.field,...iconSpacing}},md:{...inputTheme.sizes?.md,field:{...inputTheme.sizes?.md.field,...iconSpacing}},sm:{...inputTheme.sizes?.sm,field:{...inputTheme.sizes?.sm.field,...iconSpacing}},xs:{...inputTheme.sizes?.xs,field:{...inputTheme.sizes?.xs.field,...iconSpacing},icon:{insetEnd:"1"}}},selectTheme=defineMultiStyleConfig$7({baseStyle:baseStyle$c,sizes:sizes$8,variants:inputTheme.variants,defaultProps:inputTheme.defaultProps}),$startColor=cssVar$1("skeleton-start-color"),$endColor=cssVar$1("skeleton-end-color"),baseStyle$b={[$startColor.variable]:"colors.gray.100",[$endColor.variable]:"colors.gray.400",_dark:{[$startColor.variable]:"colors.gray.800",[$endColor.variable]:"colors.gray.600"},background:$startColor.reference,borderColor:$endColor.reference,opacity:.7,borderRadius:"sm"},skeletonTheme={baseStyle:baseStyle$b},$bg$5=cssVar$1("skip-link-bg"),baseStyle$a={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[$bg$5.variable]:"colors.white",_dark:{[$bg$5.variable]:"colors.gray.700"},bg:$bg$5.reference}},skipLinkTheme={baseStyle:baseStyle$a},{defineMultiStyleConfig:defineMultiStyleConfig$6,definePartsStyle:definePartsStyle$6}=createMultiStyleConfigHelpers(sliderAnatomy.keys),$thumbSize=cssVar$1("slider-thumb-size"),$trackSize=cssVar$1("slider-track-size"),$bg$4=cssVar$1("slider-bg"),baseStyleContainer$1=n=>{const{orientation:e}=n;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...orient$2({orientation:e,vertical:{h:"100%",px:calc$1($thumbSize.reference).divide(2).toString()},horizontal:{w:"100%",py:calc$1($thumbSize.reference).divide(2).toString()}})}},baseStyleTrack$1=n=>({...orient$2({orientation:n.orientation,horizontal:{h:$trackSize.reference},vertical:{w:$trackSize.reference}}),overflow:"hidden",borderRadius:"sm",[$bg$4.variable]:"colors.gray.200",_dark:{[$bg$4.variable]:"colors.whiteAlpha.200"},_disabled:{[$bg$4.variable]:"colors.gray.300",_dark:{[$bg$4.variable]:"colors.whiteAlpha.300"}},bg:$bg$4.reference}),baseStyleThumb$1=n=>{const{orientation:e}=n;return{...orient$2({orientation:e,vertical:{left:"50%"},horizontal:{top:"50%"}}),w:$thumbSize.reference,h:$thumbSize.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_active:{"--slider-thumb-scale":"1.15"},_disabled:{bg:"gray.300"}}},baseStyleFilledTrack=n=>{const{colorScheme:e}=n;return{width:"inherit",height:"inherit",[$bg$4.variable]:`colors.${e}.500`,_dark:{[$bg$4.variable]:`colors.${e}.200`},bg:$bg$4.reference}},baseStyle$9=definePartsStyle$6(n=>({container:baseStyleContainer$1(n),track:baseStyleTrack$1(n),thumb:baseStyleThumb$1(n),filledTrack:baseStyleFilledTrack(n)})),sizeLg=definePartsStyle$6({container:{[$thumbSize.variable]:"sizes.4",[$trackSize.variable]:"sizes.1"}}),sizeMd=definePartsStyle$6({container:{[$thumbSize.variable]:"sizes.3.5",[$trackSize.variable]:"sizes.1"}}),sizeSm=definePartsStyle$6({container:{[$thumbSize.variable]:"sizes.2.5",[$trackSize.variable]:"sizes.0.5"}}),sizes$7={lg:sizeLg,md:sizeMd,sm:sizeSm},sliderTheme=defineMultiStyleConfig$6({baseStyle:baseStyle$9,sizes:sizes$7,defaultProps:{size:"md",colorScheme:"blue"}}),$size$1=cssVar("spinner-size"),baseStyle$8={width:[$size$1.reference],height:[$size$1.reference]},sizes$6={xs:{[$size$1.variable]:"sizes.3"},sm:{[$size$1.variable]:"sizes.4"},md:{[$size$1.variable]:"sizes.6"},lg:{[$size$1.variable]:"sizes.8"},xl:{[$size$1.variable]:"sizes.12"}},spinnerTheme={baseStyle:baseStyle$8,sizes:sizes$6,defaultProps:{size:"md"}},{defineMultiStyleConfig:defineMultiStyleConfig$5,definePartsStyle:definePartsStyle$5}=createMultiStyleConfigHelpers(statAnatomy.keys),baseStyleLabel$1={fontWeight:"medium"},baseStyleHelpText={opacity:.8,marginBottom:"2"},baseStyleNumber={verticalAlign:"baseline",fontWeight:"semibold"},baseStyleIcon={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},baseStyle$7=definePartsStyle$5({container:{},label:baseStyleLabel$1,helpText:baseStyleHelpText,number:baseStyleNumber,icon:baseStyleIcon}),sizes$5={md:definePartsStyle$5({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},statTheme=defineMultiStyleConfig$5({baseStyle:baseStyle$7,sizes:sizes$5,defaultProps:{size:"md"}}),{defineMultiStyleConfig:defineMultiStyleConfig$4,definePartsStyle:definePartsStyle$4}=createMultiStyleConfigHelpers(["stepper","step","title","description","indicator","separator","icon","number"]),$size=cssVar$1("stepper-indicator-size"),$iconSize=cssVar$1("stepper-icon-size"),$titleFontSize=cssVar$1("stepper-title-font-size"),$descFontSize=cssVar$1("stepper-description-font-size"),$accentColor=cssVar$1("stepper-accent-color"),baseStyle$6=definePartsStyle$4(({colorScheme:n})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[$accentColor.variable]:`colors.${n}.500`,_dark:{[$accentColor.variable]:`colors.${n}.200`}},title:{fontSize:$titleFontSize.reference,fontWeight:"medium"},description:{fontSize:$descFontSize.reference,color:"chakra-subtle-text"},number:{fontSize:$titleFontSize.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:$iconSize.reference,height:$iconSize.reference},indicator:{flexShrink:0,borderRadius:"full",width:$size.reference,height:$size.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:$accentColor.reference},"&[data-status=complete]":{bg:$accentColor.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:$accentColor.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${$size.reference} - 8px)`,top:`calc(${$size.reference} + 4px)`,insetStart:`calc(${$size.reference} / 2 - 1px)`}}})),stepperTheme=defineMultiStyleConfig$4({baseStyle:baseStyle$6,sizes:{xs:definePartsStyle$4({stepper:{[$size.variable]:"sizes.4",[$iconSize.variable]:"sizes.3",[$titleFontSize.variable]:"fontSizes.xs",[$descFontSize.variable]:"fontSizes.xs"}}),sm:definePartsStyle$4({stepper:{[$size.variable]:"sizes.6",[$iconSize.variable]:"sizes.4",[$titleFontSize.variable]:"fontSizes.sm",[$descFontSize.variable]:"fontSizes.xs"}}),md:definePartsStyle$4({stepper:{[$size.variable]:"sizes.8",[$iconSize.variable]:"sizes.5",[$titleFontSize.variable]:"fontSizes.md",[$descFontSize.variable]:"fontSizes.sm"}}),lg:definePartsStyle$4({stepper:{[$size.variable]:"sizes.10",[$iconSize.variable]:"sizes.6",[$titleFontSize.variable]:"fontSizes.lg",[$descFontSize.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:defineMultiStyleConfig$3,definePartsStyle:definePartsStyle$3}=createMultiStyleConfigHelpers(switchAnatomy.keys),$width=cssVar("switch-track-width"),$height=cssVar("switch-track-height"),$diff=cssVar("switch-track-diff"),diffValue=calc.subtract($width,$height),$translateX=cssVar("switch-thumb-x"),$bg$3=cssVar("switch-bg"),baseStyleTrack=n=>{const{colorScheme:e}=n;return{borderRadius:"full",p:"0.5",width:[$width.reference],height:[$height.reference],transitionProperty:"common",transitionDuration:"fast",[$bg$3.variable]:"colors.gray.300",_dark:{[$bg$3.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[$bg$3.variable]:`colors.${e}.500`,_dark:{[$bg$3.variable]:`colors.${e}.200`}},bg:$bg$3.reference}},baseStyleThumb={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[$height.reference],height:[$height.reference],_checked:{transform:`translateX(${$translateX.reference})`}},baseStyle$5=definePartsStyle$3(n=>({container:{[$diff.variable]:diffValue,[$translateX.variable]:$diff.reference,_rtl:{[$translateX.variable]:calc($diff).negate().toString()}},track:baseStyleTrack(n),thumb:baseStyleThumb})),sizes$4={sm:definePartsStyle$3({container:{[$width.variable]:"1.375rem",[$height.variable]:"sizes.3"}}),md:definePartsStyle$3({container:{[$width.variable]:"1.875rem",[$height.variable]:"sizes.4"}}),lg:definePartsStyle$3({container:{[$width.variable]:"2.875rem",[$height.variable]:"sizes.6"}})},switchTheme=defineMultiStyleConfig$3({baseStyle:baseStyle$5,sizes:sizes$4,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:defineMultiStyleConfig$2,definePartsStyle:definePartsStyle$2}=createMultiStyleConfigHelpers(tableAnatomy.keys),baseStyle$4=definePartsStyle$2({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),numericStyles={"&[data-is-numeric=true]":{textAlign:"end"}},variantSimple=definePartsStyle$2(n=>{const{colorScheme:e}=n;return{th:{color:mode("gray.600","gray.400")(n),borderBottom:"1px",borderColor:mode(`${e}.100`,`${e}.700`)(n),...numericStyles},td:{borderBottom:"1px",borderColor:mode(`${e}.100`,`${e}.700`)(n),...numericStyles},caption:{color:mode("gray.600","gray.100")(n)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),variantStripe=definePartsStyle$2(n=>{const{colorScheme:e}=n;return{th:{color:mode("gray.600","gray.400")(n),borderBottom:"1px",borderColor:mode(`${e}.100`,`${e}.700`)(n),...numericStyles},td:{borderBottom:"1px",borderColor:mode(`${e}.100`,`${e}.700`)(n),...numericStyles},caption:{color:mode("gray.600","gray.100")(n)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:mode(`${e}.100`,`${e}.700`)(n)},td:{background:mode(`${e}.100`,`${e}.700`)(n)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),variants$5={simple:variantSimple,striped:variantStripe,unstyled:{}},sizes$3={sm:definePartsStyle$2({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:definePartsStyle$2({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:definePartsStyle$2({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},tableTheme=defineMultiStyleConfig$2({baseStyle:baseStyle$4,variants:variants$5,sizes:sizes$3,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),$fg$1=cssVar$1("tabs-color"),$bg$2=cssVar$1("tabs-bg"),$border=cssVar$1("tabs-border-color"),{defineMultiStyleConfig:defineMultiStyleConfig$1,definePartsStyle:definePartsStyle$1}=createMultiStyleConfigHelpers(tabsAnatomy.keys),baseStyleRoot=n=>{const{orientation:e}=n;return{display:e==="vertical"?"flex":"block"}},baseStyleTab=n=>{const{isFitted:e}=n;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},baseStyleTablist=n=>{const{align:e="start",orientation:s}=n;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:s==="vertical"?"column":"row"}},baseStyleTabpanel={p:4},baseStyle$3=definePartsStyle$1(n=>({root:baseStyleRoot(n),tab:baseStyleTab(n),tablist:baseStyleTablist(n),tabpanel:baseStyleTabpanel})),sizes$2={sm:definePartsStyle$1({tab:{py:1,px:4,fontSize:"sm"}}),md:definePartsStyle$1({tab:{fontSize:"md",py:2,px:4}}),lg:definePartsStyle$1({tab:{fontSize:"lg",py:3,px:4}})},variantLine=definePartsStyle$1(n=>{const{colorScheme:e,orientation:s}=n,o=s==="vertical",a=o?"borderStart":"borderBottom",c=o?"marginStart":"marginBottom";return{tablist:{[a]:"2px solid",borderColor:"inherit"},tab:{[a]:"2px solid",borderColor:"transparent",[c]:"-2px",_selected:{[$fg$1.variable]:`colors.${e}.600`,_dark:{[$fg$1.variable]:`colors.${e}.300`},borderColor:"currentColor"},_active:{[$bg$2.variable]:"colors.gray.200",_dark:{[$bg$2.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:$fg$1.reference,bg:$bg$2.reference}}}),variantEnclosed=definePartsStyle$1(n=>{const{colorScheme:e}=n;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[$border.variable]:"transparent",_selected:{[$fg$1.variable]:`colors.${e}.600`,[$border.variable]:"colors.white",_dark:{[$fg$1.variable]:`colors.${e}.300`,[$border.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:$border.reference},color:$fg$1.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),variantEnclosedColored=definePartsStyle$1(n=>{const{colorScheme:e}=n;return{tab:{border:"1px solid",borderColor:"inherit",[$bg$2.variable]:"colors.gray.50",_dark:{[$bg$2.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[$bg$2.variable]:"colors.white",[$fg$1.variable]:`colors.${e}.600`,_dark:{[$bg$2.variable]:"colors.gray.800",[$fg$1.variable]:`colors.${e}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:$fg$1.reference,bg:$bg$2.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),variantSoftRounded=definePartsStyle$1(n=>{const{colorScheme:e,theme:s}=n;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:getColor(s,`${e}.700`),bg:getColor(s,`${e}.100`)}}}}),variantSolidRounded=definePartsStyle$1(n=>{const{colorScheme:e}=n;return{tab:{borderRadius:"full",fontWeight:"semibold",[$fg$1.variable]:"colors.gray.600",_dark:{[$fg$1.variable]:"inherit"},_selected:{[$fg$1.variable]:"colors.white",[$bg$2.variable]:`colors.${e}.600`,_dark:{[$fg$1.variable]:"colors.gray.800",[$bg$2.variable]:`colors.${e}.300`}},color:$fg$1.reference,bg:$bg$2.reference}}}),variantUnstyled=definePartsStyle$1({}),variants$4={line:variantLine,enclosed:variantEnclosed,"enclosed-colored":variantEnclosedColored,"soft-rounded":variantSoftRounded,"solid-rounded":variantSolidRounded,unstyled:variantUnstyled},tabsTheme=defineMultiStyleConfig$1({baseStyle:baseStyle$3,sizes:sizes$2,variants:variants$4,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),{defineMultiStyleConfig,definePartsStyle}=createMultiStyleConfigHelpers(tagAnatomy.keys),$bg$1=cssVar$1("tag-bg"),$color=cssVar$1("tag-color"),$shadow=cssVar$1("tag-shadow"),$minH=cssVar$1("tag-min-height"),$minW=cssVar$1("tag-min-width"),$fontSize=cssVar$1("tag-font-size"),$paddingX=cssVar$1("tag-padding-inline"),baseStyleContainer={fontWeight:"medium",lineHeight:1.2,outline:0,[$color.variable]:vars.color.reference,[$bg$1.variable]:vars.bg.reference,[$shadow.variable]:vars.shadow.reference,color:$color.reference,bg:$bg$1.reference,boxShadow:$shadow.reference,borderRadius:"md",minH:$minH.reference,minW:$minW.reference,fontSize:$fontSize.reference,px:$paddingX.reference,_focusVisible:{[$shadow.variable]:"shadows.outline"}},baseStyleLabel={lineHeight:1.2,overflow:"visible"},baseStyleCloseButton={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},baseStyle$2=definePartsStyle({container:baseStyleContainer,label:baseStyleLabel,closeButton:baseStyleCloseButton}),sizes$1={sm:definePartsStyle({container:{[$minH.variable]:"sizes.5",[$minW.variable]:"sizes.5",[$fontSize.variable]:"fontSizes.xs",[$paddingX.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:definePartsStyle({container:{[$minH.variable]:"sizes.6",[$minW.variable]:"sizes.6",[$fontSize.variable]:"fontSizes.sm",[$paddingX.variable]:"space.2"}}),lg:definePartsStyle({container:{[$minH.variable]:"sizes.8",[$minW.variable]:"sizes.8",[$fontSize.variable]:"fontSizes.md",[$paddingX.variable]:"space.3"}})},variants$3={subtle:definePartsStyle(n=>({container:badgeTheme.variants?.subtle(n)})),solid:definePartsStyle(n=>({container:badgeTheme.variants?.solid(n)})),outline:definePartsStyle(n=>({container:badgeTheme.variants?.outline(n)}))},tagTheme=defineMultiStyleConfig({variants:variants$3,baseStyle:baseStyle$2,sizes:sizes$1,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),baseStyle$1={...inputTheme.baseStyle?.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},variants$2={outline:n=>inputTheme.variants?.outline(n).field??{},flushed:n=>inputTheme.variants?.flushed(n).field??{},filled:n=>inputTheme.variants?.filled(n).field??{},unstyled:inputTheme.variants?.unstyled.field??{}},sizes={xs:inputTheme.sizes?.xs.field??{},sm:inputTheme.sizes?.sm.field??{},md:inputTheme.sizes?.md.field??{},lg:inputTheme.sizes?.lg.field??{}},textareaTheme={baseStyle:baseStyle$1,sizes,variants:variants$2,defaultProps:{size:"md",variant:"outline"}},$bg=cssVar("tooltip-bg"),$fg=cssVar("tooltip-fg"),$arrowBg=cssVar("popper-arrow-bg"),baseStyle={bg:$bg.reference,color:$fg.reference,[$bg.variable]:"colors.gray.700",[$fg.variable]:"colors.whiteAlpha.900",_dark:{[$bg.variable]:"colors.gray.300",[$fg.variable]:"colors.gray.900"},[$arrowBg.variable]:$bg.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},tooltipTheme={baseStyle},components={Accordion:accordionTheme,Alert:alertTheme,Avatar:avatarTheme,Badge:badgeTheme,Breadcrumb:breadcrumbTheme,Button:buttonTheme,Checkbox:checkboxTheme,CloseButton:closeButtonTheme,Code:codeTheme,Container:containerTheme,Divider:dividerTheme,Drawer:drawerTheme,Editable:editableTheme,Form:formTheme,FormError:formErrorTheme,FormLabel:formLabelTheme,Heading:headingTheme,Input:inputTheme,Kbd:kbdTheme,Link:linkTheme,List:listTheme,Menu:menuTheme,Modal:modalTheme,NumberInput:numberInputTheme,PinInput:pinInputTheme,Popover:popoverTheme,Progress:progressTheme,Radio:radioTheme,Select:selectTheme,Skeleton:skeletonTheme,SkipLink:skipLinkTheme,Slider:sliderTheme,Spinner:spinnerTheme,Stat:statTheme,Switch:switchTheme,Table:tableTheme,Tabs:tabsTheme,Tag:tagTheme,Textarea:textareaTheme,Tooltip:tooltipTheme,Card:cardTheme,Stepper:stepperTheme},borders$1={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},breakpoints={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},colors={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"}},radii={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},shadows={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},transitionProperty={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},transitionTimingFunction={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},transitionDuration={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},transition={property:transitionProperty,easing:transitionTimingFunction,duration:transitionDuration},zIndices={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},blur={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},foundations={breakpoints,zIndices,radii,blur,colors,...typography,sizes:sizes$m,shadows,space:spacing,borders:borders$1,transition},semanticTokens={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},styles={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},direction="ltr",config={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},theme={semanticTokens,direction,...foundations,components,styles,config};function sheetForTag(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function createStyleElement(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var StyleSheet=(function(){function n(s){var o=this;this._insertTag=function(a){var c;o.tags.length===0?o.insertionPoint?c=o.insertionPoint.nextSibling:o.prepend?c=o.container.firstChild:c=o.before:c=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(a,c),o.tags.push(a)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(o){o.forEach(this._insertTag)},e.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var c=sheetForTag(a);try{c.insertRule(o,c.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(o));this.ctr++},e.flush=function(){this.tags.forEach(function(o){var a;return(a=o.parentNode)==null?void 0:a.removeChild(o)}),this.tags=[],this.ctr=0},n})(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(n,e){return charat(n,0)^45?(((e<<2^charat(n,0))<<2^charat(n,1))<<2^charat(n,2))<<2^charat(n,3):0}function trim(n){return n.trim()}function match(n,e){return(n=e.exec(n))?n[0]:n}function replace(n,e,s){return n.replace(e,s)}function indexof(n,e){return n.indexOf(e)}function charat(n,e){return n.charCodeAt(e)|0}function substr(n,e,s){return n.slice(e,s)}function strlen(n){return n.length}function sizeof(n){return n.length}function append(n,e){return e.push(n),n}function combine(n,e){return n.map(e).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(n,e,s,o,a,c,u){return{value:n,root:e,parent:s,type:o,props:a,children:c,line,column,length:u,return:""}}function copy(n,e){return assign(node("",null,null,"",null,null,0),n,{length:-n.length},e)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(n,e){return substr(characters,n,e)}function token(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(n){return line=column=1,length=strlen(characters=n),position=0,[]}function dealloc(n){return characters="",n}function delimit(n){return trim(slice(position-1,delimiter(n===91?n+2:n===40?n+1:n)))}function whitespace(n){for(;(character=peek())&&character<33;)next();return token(n)>2||token(character)>3?"":" "}function escaping(n,e){for(;--e&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(n,caret()+(e<6&&peek()==32&&next()==32))}function delimiter(n){for(;next();)switch(character){case n:return position;case 34:case 39:n!==34&&n!==39&&delimiter(character);break;case 40:n===41&&delimiter(n);break;case 92:next();break}return position}function commenter(n,e){for(;next()&&n+character!==57;)if(n+character===84&&peek()===47)break;return"/*"+slice(e,position-1)+"*"+from(n===47?n:next())}function identifier(n){for(;!token(peek());)next();return slice(n,position)}function compile(n){return dealloc(parse$2("",null,null,null,[""],n=alloc(n),0,[0],n))}function parse$2(n,e,s,o,a,c,u,h,m){for(var g=0,_=0,b=u,T=0,A=0,R=0,w=1,D=1,fn=1,yn=0,pn="",wn=a,V=c,bn=o,wt=pn;D;)switch(R=yn,yn=next()){case 40:if(R!=108&&charat(wt,b-1)==58){indexof(wt+=replace(delimit(yn),"&","&\f"),"&\f")!=-1&&(fn=-1);break}case 34:case 39:case 91:wt+=delimit(yn);break;case 9:case 10:case 13:case 32:wt+=whitespace(R);break;case 92:wt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),e,s),m);break;default:wt+="/"}break;case 123*w:h[g++]=strlen(wt)*fn;case 125*w:case 59:case 0:switch(yn){case 0:case 125:D=0;case 59+_:fn==-1&&(wt=replace(wt,/\f/g,"")),A>0&&strlen(wt)-b&&append(A>32?declaration(wt+";",o,s,b-1):declaration(replace(wt," ","")+";",o,s,b-2),m);break;case 59:wt+=";";default:if(append(bn=ruleset(wt,e,s,g,_,a,h,pn,wn=[],V=[],b),c),yn===123)if(_===0)parse$2(wt,e,bn,bn,wn,c,b,h,V);else switch(T===99&&charat(wt,3)===110?100:T){case 100:case 108:case 109:case 115:parse$2(n,bn,bn,o&&append(ruleset(n,bn,bn,0,0,a,h,pn,a,wn=[],b),V),a,V,b,h,o?wn:V);break;default:parse$2(wt,bn,bn,bn,[""],V,0,h,V)}}g=_=A=0,w=fn=1,pn=wt="",b=u;break;case 58:b=1+strlen(wt),A=R;default:if(w<1){if(yn==123)--w;else if(yn==125&&w++==0&&prev()==125)continue}switch(wt+=from(yn),yn*w){case 38:fn=_>0?1:(wt+="\f",-1);break;case 44:h[g++]=(strlen(wt)-1)*fn,fn=1;break;case 64:peek()===45&&(wt+=delimit(next())),T=peek(),_=b=strlen(pn=wt+=identifier(caret())),yn++;break;case 45:R===45&&strlen(wt)==2&&(w=0)}}return c}function ruleset(n,e,s,o,a,c,u,h,m,g,_){for(var b=a-1,T=a===0?c:[""],A=sizeof(T),R=0,w=0,D=0;R<o;++R)for(var fn=0,yn=substr(n,b+1,b=abs(w=u[R])),pn=n;fn<A;++fn)(pn=trim(w>0?T[fn]+" "+yn:replace(yn,/&\f/g,T[fn])))&&(m[D++]=pn);return node(n,e,s,a===0?RULESET:h,m,g,_)}function comment(n,e,s){return node(n,e,s,COMMENT,from(char()),substr(n,2,-2),0)}function declaration(n,e,s,o){return node(n,e,s,DECLARATION,substr(n,0,o),substr(n,o+1,-1),o)}function serialize$1(n,e){for(var s="",o=sizeof(n),a=0;a<o;a++)s+=e(n[a],a,n,e)||"";return s}function stringify(n,e,s,o){switch(n.type){case LAYER:if(n.children.length)break;case IMPORT:case DECLARATION:return n.return=n.return||n.value;case COMMENT:return"";case KEYFRAMES:return n.return=n.value+"{"+serialize$1(n.children,o)+"}";case RULESET:n.value=n.props.join(",")}return strlen(s=serialize$1(n.children,o))?n.return=n.value+"{"+s+"}":""}function middleware(n){var e=sizeof(n);return function(s,o,a,c){for(var u="",h=0;h<e;h++)u+=n[h](s,o,a,c)||"";return u}}function rulesheet(n){return function(e){e.root||(e=e.return)&&n(e)}}var weakMemoize=function(e){var s=new WeakMap;return function(o){if(s.has(o))return s.get(o);var a=e(o);return s.set(o,a),a}};function memoize(n){var e=Object.create(null);return function(s){return e[s]===void 0&&(e[s]=n(s)),e[s]}}var identifierWithPointTracking=function(e,s,o){for(var a=0,c=0;a=c,c=peek(),a===38&&c===12&&(s[o]=1),!token(c);)next();return slice(e,position)},toRules=function(e,s){var o=-1,a=44;do switch(token(a)){case 0:a===38&&peek()===12&&(s[o]=1),e[o]+=identifierWithPointTracking(position-1,s,o);break;case 2:e[o]+=delimit(a);break;case 4:if(a===44){e[++o]=peek()===58?"&\f":"",s[o]=e[o].length;break}default:e[o]+=from(a)}while(a=next());return e},getRules=function(e,s){return dealloc(toRules(alloc(e),s))},fixedElements=new WeakMap,compat=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var s=e.value,o=e.parent,a=e.column===o.column&&e.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(e.props.length===1&&s.charCodeAt(0)!==58&&!fixedElements.get(o))&&!a){fixedElements.set(e,!0);for(var c=[],u=getRules(s,c),h=o.props,m=0,g=0;m<u.length;m++)for(var _=0;_<h.length;_++,g++)e.props[g]=c[m]?u[m].replace(/&\f/g,h[_]):h[_]+" "+u[m]}}},removeLabel=function(e){if(e.type==="decl"){var s=e.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(e.return="",e.value="")}};function prefix(n,e){switch(hash$2(n,e)){case 5103:return WEBKIT+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+n+MOZ+n+MS+n+n;case 6828:case 4268:return WEBKIT+n+MS+n+n;case 6165:return WEBKIT+n+MS+"flex-"+n+n;case 5187:return WEBKIT+n+replace(n,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+n;case 5443:return WEBKIT+n+MS+"flex-item-"+replace(n,/flex-|-self/,"")+n;case 4675:return WEBKIT+n+MS+"flex-line-pack"+replace(n,/align-content|flex-|-self/,"")+n;case 5548:return WEBKIT+n+MS+replace(n,"shrink","negative")+n;case 5292:return WEBKIT+n+MS+replace(n,"basis","preferred-size")+n;case 6060:return WEBKIT+"box-"+replace(n,"-grow","")+WEBKIT+n+MS+replace(n,"grow","positive")+n;case 4554:return WEBKIT+replace(n,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+n;case 6187:return replace(replace(replace(n,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),n,"")+n;case 5495:case 3959:return replace(n,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(n,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+n+n;case 4095:case 3583:case 4068:case 2532:return replace(n,/(.+)-inline(.+)/,WEBKIT+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(n)-1-e>6)switch(charat(n,e+1)){case 109:if(charat(n,e+4)!==45)break;case 102:return replace(n,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~indexof(n,"stretch")?prefix(replace(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(charat(n,e+1)!==115)break;case 6444:switch(charat(n,strlen(n)-3-(~indexof(n,"!important")&&10))){case 107:return replace(n,":",":"+WEBKIT)+n;case 101:return replace(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(n,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+n}break;case 5936:switch(charat(n,e+11)){case 114:return WEBKIT+n+MS+replace(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return WEBKIT+n+MS+replace(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return WEBKIT+n+MS+replace(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return WEBKIT+n+MS+n+n}return n}var prefixer=function(e,s,o,a){if(e.length>-1&&!e.return)switch(e.type){case DECLARATION:e.return=prefix(e.value,e.length);break;case KEYFRAMES:return serialize$1([copy(e,{value:replace(e.value,"@","@"+WEBKIT)})],a);case RULESET:if(e.length)return combine(e.props,function(c){switch(match(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize$1([copy(e,{props:[replace(c,/:(read-\w+)/,":"+MOZ+"$1")]})],a);case"::placeholder":return serialize$1([copy(e,{props:[replace(c,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(e,{props:[replace(c,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(e,{props:[replace(c,/:(plac\w+)/,MS+"input-$1")]})],a)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(e){var s=e.key;if(s==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(w){var D=w.getAttribute("data-emotion");D.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var a=e.stylisPlugins||defaultStylisPlugins,c={},u,h=[];u=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(w){for(var D=w.getAttribute("data-emotion").split(" "),fn=1;fn<D.length;fn++)c[D[fn]]=!0;h.push(w)});var m,g=[compat,removeLabel];{var _,b=[stringify,rulesheet(function(w){_.insert(w)})],T=middleware(g.concat(a,b)),A=function(D){return serialize$1(compile(D),T)};m=function(D,fn,yn,pn){_=yn,A(D?D+"{"+fn.styles+"}":fn.styles),pn&&(R.inserted[fn.name]=!0)}}var R={key:s,sheet:new StyleSheet({key:s,container:u,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:c,registered:{},insert:m};return R.sheet.hydrate(h),R};function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)({}).hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},_extends$1.apply(null,arguments)}var reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,c=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,m=n?Symbol.for("react.async_mode"):60111,g=n?Symbol.for("react.concurrent_mode"):60111,_=n?Symbol.for("react.forward_ref"):60112,b=n?Symbol.for("react.suspense"):60113,T=n?Symbol.for("react.suspense_list"):60120,A=n?Symbol.for("react.memo"):60115,R=n?Symbol.for("react.lazy"):60116,w=n?Symbol.for("react.block"):60121,D=n?Symbol.for("react.fundamental"):60117,fn=n?Symbol.for("react.responder"):60118,yn=n?Symbol.for("react.scope"):60119;function pn(V){if(typeof V=="object"&&V!==null){var bn=V.$$typeof;switch(bn){case e:switch(V=V.type,V){case m:case g:case o:case c:case a:case b:return V;default:switch(V=V&&V.$$typeof,V){case h:case _:case R:case A:case u:return V;default:return bn}}case s:return bn}}}function wn(V){return pn(V)===g}return reactIs_production_min.AsyncMode=m,reactIs_production_min.ConcurrentMode=g,reactIs_production_min.ContextConsumer=h,reactIs_production_min.ContextProvider=u,reactIs_production_min.Element=e,reactIs_production_min.ForwardRef=_,reactIs_production_min.Fragment=o,reactIs_production_min.Lazy=R,reactIs_production_min.Memo=A,reactIs_production_min.Portal=s,reactIs_production_min.Profiler=c,reactIs_production_min.StrictMode=a,reactIs_production_min.Suspense=b,reactIs_production_min.isAsyncMode=function(V){return wn(V)||pn(V)===m},reactIs_production_min.isConcurrentMode=wn,reactIs_production_min.isContextConsumer=function(V){return pn(V)===h},reactIs_production_min.isContextProvider=function(V){return pn(V)===u},reactIs_production_min.isElement=function(V){return typeof V=="object"&&V!==null&&V.$$typeof===e},reactIs_production_min.isForwardRef=function(V){return pn(V)===_},reactIs_production_min.isFragment=function(V){return pn(V)===o},reactIs_production_min.isLazy=function(V){return pn(V)===R},reactIs_production_min.isMemo=function(V){return pn(V)===A},reactIs_production_min.isPortal=function(V){return pn(V)===s},reactIs_production_min.isProfiler=function(V){return pn(V)===c},reactIs_production_min.isStrictMode=function(V){return pn(V)===a},reactIs_production_min.isSuspense=function(V){return pn(V)===b},reactIs_production_min.isValidElementType=function(V){return typeof V=="string"||typeof V=="function"||V===o||V===g||V===c||V===a||V===b||V===T||typeof V=="object"&&V!==null&&(V.$$typeof===R||V.$$typeof===A||V.$$typeof===u||V.$$typeof===h||V.$$typeof===_||V.$$typeof===D||V.$$typeof===fn||V.$$typeof===yn||V.$$typeof===w)},reactIs_production_min.typeOf=pn,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var n=requireReactIs(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[n.ForwardRef]=o,c[n.Memo]=a;function u(R){return n.isMemo(R)?a:c[R.$$typeof]||e}var h=Object.defineProperty,m=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,b=Object.getPrototypeOf,T=Object.prototype;function A(R,w,D){if(typeof w!="string"){if(T){var fn=b(w);fn&&fn!==T&&A(R,fn,D)}var yn=m(w);g&&(yn=yn.concat(g(w)));for(var pn=u(R),wn=u(w),V=0;V<yn.length;++V){var bn=yn[V];if(!s[bn]&&!(D&&D[bn])&&!(wn&&wn[bn])&&!(pn&&pn[bn])){var wt=_(w,bn);try{h(R,bn,wt)}catch{}}}}return R}return hoistNonReactStatics_cjs=A,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();var isBrowser$1=!0;function getRegisteredStyles(n,e,s){var o="";return s.split(" ").forEach(function(a){n[a]!==void 0?e.push(n[a]+";"):a&&(o+=a+" ")}),o}var registerStyles=function(e,s,o){var a=e.key+"-"+s.name;(o===!1||isBrowser$1===!1)&&e.registered[a]===void 0&&(e.registered[a]=s.styles)},insertStyles=function(e,s,o){registerStyles(e,s,o);var a=e.key+"-"+s.name;if(e.inserted[s.name]===void 0){var c=s;do e.insert(s===c?"."+a:"",c,e.sheet,!0),c=c.next;while(c!==void 0)}};function murmur2(n){for(var e=0,s,o=0,a=n.length;a>=4;++o,a-=4)s=n.charCodeAt(o)&255|(n.charCodeAt(++o)&255)<<8|(n.charCodeAt(++o)&255)<<16|(n.charCodeAt(++o)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,e=(s&65535)*1540483477+((s>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(n.charCodeAt(o+2)&255)<<16;case 2:e^=(n.charCodeAt(o+1)&255)<<8;case 1:e^=n.charCodeAt(o)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(e){return e.charCodeAt(1)===45},isProcessableValue=function(e){return e!=null&&typeof e!="boolean"},processStyleName=memoize(function(n){return isCustomProperty(n)?n:n.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(e,s){switch(e){case"animation":case"animationName":if(typeof s=="string")return s.replace(animationRegex,function(o,a,c){return cursor={name:a,styles:c,next:cursor},a})}return unitlessKeys[e]!==1&&!isCustomProperty(e)&&typeof s=="number"&&s!==0?s+"px":s};function handleInterpolation(n,e,s){if(s==null)return"";var o=s;if(o.__emotion_styles!==void 0)return o;switch(typeof s){case"boolean":return"";case"object":{var a=s;if(a.anim===1)return cursor={name:a.name,styles:a.styles,next:cursor},a.name;var c=s;if(c.styles!==void 0){var u=c.next;if(u!==void 0)for(;u!==void 0;)cursor={name:u.name,styles:u.styles,next:cursor},u=u.next;var h=c.styles+";";return h}return createStringFromObject(n,e,s)}case"function":{if(n!==void 0){var m=cursor,g=s(n);return cursor=m,handleInterpolation(n,e,g)}break}}var _=s;if(e==null)return _;var b=e[_];return b!==void 0?b:_}function createStringFromObject(n,e,s){var o="";if(Array.isArray(s))for(var a=0;a<s.length;a++)o+=handleInterpolation(n,e,s[a])+";";else for(var c in s){var u=s[c];if(typeof u!="object"){var h=u;e!=null&&e[h]!==void 0?o+=c+"{"+e[h]+"}":isProcessableValue(h)&&(o+=processStyleName(c)+":"+processStyleValue(c,h)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&(e==null||e[u[0]]===void 0))for(var m=0;m<u.length;m++)isProcessableValue(u[m])&&(o+=processStyleName(c)+":"+processStyleValue(c,u[m])+";");else{var g=handleInterpolation(n,e,u);switch(c){case"animation":case"animationName":{o+=processStyleName(c)+":"+g+";";break}default:o+=c+"{"+g+"}"}}}return o}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(n,e,s){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var o=!0,a="";cursor=void 0;var c=n[0];if(c==null||c.raw===void 0)o=!1,a+=handleInterpolation(s,e,c);else{var u=c;a+=u[0]}for(var h=1;h<n.length;h++)if(a+=handleInterpolation(s,e,n[h]),o){var m=c;a+=m[h]}labelPattern.lastIndex=0;for(var g="",_;(_=labelPattern.exec(a))!==null;)g+="-"+_[1];var b=murmur2(a)+g;return{name:b,styles:a,next:cursor}}var syncFallback=function(e){return e()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var __unsafe_useEmotionCache=function(){return reactExports.useContext(EmotionCacheContext)},withEmotionCache=function(e){return reactExports.forwardRef(function(s,o){var a=reactExports.useContext(EmotionCacheContext);return e(s,a,o)})},ThemeContext=reactExports.createContext({}),getTheme$1=function(e,s){if(typeof s=="function"){var o=s(e);return o}return _extends$1({},e,s)},createCacheWithTheme=weakMemoize(function(n){return weakMemoize(function(e){return getTheme$1(n,e)})}),ThemeProvider$1=function(e){var s=reactExports.useContext(ThemeContext);return e.theme!==s&&(s=createCacheWithTheme(s)(e.theme)),reactExports.createElement(ThemeContext.Provider,{value:s},e.children)},hasOwn={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(e,s){var o={};for(var a in s)hasOwn.call(s,a)&&(o[a]=s[a]);return o[typePropName]=e,o},Insertion$1=function(e){var s=e.cache,o=e.serialized,a=e.isStringTag;return registerStyles(s,o,a),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(s,o,a)}),null},Emotion=withEmotionCache(function(n,e,s){var o=n.css;typeof o=="string"&&e.registered[o]!==void 0&&(o=e.registered[o]);var a=n[typePropName],c=[o],u="";typeof n.className=="string"?u=getRegisteredStyles(e.registered,c,n.className):n.className!=null&&(u=n.className+" ");var h=serializeStyles(c,void 0,reactExports.useContext(ThemeContext));u+=e.key+"-"+h.name;var m={};for(var g in n)hasOwn.call(n,g)&&g!=="css"&&g!==typePropName&&(m[g]=n[g]);return m.className=u,s&&(m.ref=s),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:e,serialized:h,isStringTag:typeof a=="string"}),reactExports.createElement(a,m))}),Emotion$1=Emotion,jsx=function(e,s){var o=arguments;if(s==null||!hasOwn.call(s,"css"))return reactExports.createElement.apply(void 0,o);var a=o.length,c=new Array(a);c[0]=Emotion$1,c[1]=createEmotionProps(e,s);for(var u=2;u<a;u++)c[u]=o[u];return reactExports.createElement.apply(null,c)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(jsx||(jsx={}));var Global=withEmotionCache(function(n,e){var s=n.styles,o=serializeStyles([s],void 0,reactExports.useContext(ThemeContext)),a=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var c=e.key+"-global",u=new e.sheet.constructor({key:c,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),h=!1,m=document.querySelector('style[data-emotion="'+c+" "+o.name+'"]');return e.sheet.tags.length&&(u.before=e.sheet.tags[0]),m!==null&&(h=!0,m.setAttribute("data-emotion",c),u.hydrate([m])),a.current=[u,h],function(){u.flush()}},[e]),useInsertionEffectWithLayoutFallback(function(){var c=a.current,u=c[0],h=c[1];if(h){c[1]=!1;return}if(o.next!==void 0&&insertStyles(e,o.next,!0),u.tags.length){var m=u.tags[u.tags.length-1].nextElementSibling;u.before=m,u.flush()}e.insert("",o,u,!1)},[e,o.name]),null});function css$1(){for(var n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return serializeStyles(e)}function keyframes$1(){var n=css$1.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const ColorModeContext=reactExports.createContext({});ColorModeContext.displayName="ColorModeContext";function useColorMode(){const n=reactExports.useContext(ColorModeContext);if(n===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return n}const classNames={light:"chakra-ui-light",dark:"chakra-ui-dark"};function getColorModeUtils(n={}){const{preventTransition:e=!0,nonce:s}=n,o={setDataset:a=>{const c=e?o.preventTransition():void 0;document.documentElement.dataset.theme=a,document.documentElement.style.colorScheme=a,c?.()},setClassName(a){document.body.classList.add(a?classNames.dark:classNames.light),document.body.classList.remove(a?classNames.light:classNames.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(a){return o.query().matches??a==="dark"?"dark":"light"},addListener(a){const c=o.query(),u=h=>{a(h.matches?"dark":"light")};return typeof c.addListener=="function"?c.addListener(u):c.addEventListener("change",u),()=>{typeof c.removeListener=="function"?c.removeListener(u):c.removeEventListener("change",u)}},preventTransition(){const a=document.createElement("style");return a.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),s!==void 0&&(a.nonce=s),document.head.appendChild(a),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(a)})})}}};return o}const STORAGE_KEY="chakra-ui-color-mode";function createLocalStorageManager(n){return{ssr:!1,type:"localStorage",get(e){if(!globalThis?.document)return e;let s;try{s=localStorage.getItem(n)||e}catch{}return s||e},set(e){try{localStorage.setItem(n,e)}catch{}}}}const localStorageManager=createLocalStorageManager(STORAGE_KEY),noop$1=()=>{},useSafeLayoutEffect=isBrowser$2()?reactExports.useLayoutEffect:reactExports.useEffect;function getTheme(n,e){return n.type==="cookie"&&n.ssr?n.get(e):e}const ColorModeProvider=function(e){const{value:s,children:o,options:{useSystemColorMode:a,initialColorMode:c,disableTransitionOnChange:u}={},colorModeManager:h=localStorageManager}=e,m=__unsafe_useEmotionCache(),g=c==="dark"?"dark":"light",[_,b]=reactExports.useState(()=>getTheme(h,g)),[T,A]=reactExports.useState(()=>getTheme(h)),{getSystemTheme:R,setClassName:w,setDataset:D,addListener:fn}=reactExports.useMemo(()=>getColorModeUtils({preventTransition:u,nonce:m?.nonce}),[u,m?.nonce]),yn=c==="system"&&!_?T:_,pn=reactExports.useCallback(bn=>{const wt=bn==="system"?R():bn;b(wt),w(wt==="dark"),D(wt),h.set(wt)},[h,R,w,D]);useSafeLayoutEffect(()=>{c==="system"&&A(R())},[]),reactExports.useEffect(()=>{const bn=h.get();if(bn){pn(bn);return}if(c==="system"){pn("system");return}pn(g)},[h,g,c,pn]);const wn=reactExports.useCallback(()=>{pn(yn==="dark"?"light":"dark")},[yn,pn]);reactExports.useEffect(()=>{if(a)return fn(pn)},[a,fn,pn]);const V=reactExports.useMemo(()=>({colorMode:s??yn,toggleColorMode:s?noop$1:wn,setColorMode:s?noop$1:pn,forced:s!==void 0}),[yn,wn,pn,s]);return jsxRuntimeExports.jsx(ColorModeContext.Provider,{value:V,children:o})};ColorModeProvider.displayName="ColorModeProvider";const css=String.raw,vhPolyfill=css`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,CSSPolyfill=()=>jsxRuntimeExports.jsx(Global,{styles:vhPolyfill}),CSSReset=({scope:n=""})=>jsxRuntimeExports.jsx(Global,{styles:css`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${n} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${n} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${n} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${n} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${n} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${n} :where(b, strong) {
        font-weight: bold;
      }

      ${n} small {
        font-size: 80%;
      }

      ${n} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${n} sub {
        bottom: -0.25em;
      }

      ${n} sup {
        top: -0.5em;
      }

      ${n} img {
        border-style: none;
      }

      ${n} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${n} :where(button, input) {
        overflow: visible;
      }

      ${n} :where(button, select) {
        text-transform: none;
      }

      ${n} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${n} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${n} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${n} progress {
        vertical-align: baseline;
      }

      ${n} textarea {
        overflow: auto;
      }

      ${n} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${n} input[type="number"]::-webkit-inner-spin-button,
      ${n} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${n} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${n} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${n} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${n} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${n} details {
        display: block;
      }

      ${n} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${n} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${n} button {
        background: transparent;
        padding: 0;
      }

      ${n} fieldset {
        margin: 0;
        padding: 0;
      }

      ${n} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${n} textarea {
        resize: vertical;
      }

      ${n} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${n} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${n} table {
        border-collapse: collapse;
      }

      ${n} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${n} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${n} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${n} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${n} select::-ms-expand {
        display: none;
      }

      ${vhPolyfill}
    `});function ThemeProvider(n){const{cssVarsRoot:e,theme:s,children:o}=n,a=reactExports.useMemo(()=>toCSSVar(s),[s]);return jsxRuntimeExports.jsxs(ThemeProvider$1,{theme:a,children:[jsxRuntimeExports.jsx(CSSVars,{root:e}),o]})}function CSSVars({root:n=":host, :root"}){const e=[n,"[data-theme]"].join(",");return jsxRuntimeExports.jsx(Global,{styles:s=>({[e]:s.__cssVars})})}createContext({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function GlobalStyle(){const{colorMode:n}=useColorMode();return jsxRuntimeExports.jsx(Global,{styles:e=>{const s=memoizedGet$1(e,"styles.global"),o=runIfFn$1(s,{theme:e,colorMode:n});return o?css$2(o)(e):void 0}})}const[PortalManagerContextProvider,usePortalManager]=createContext({strict:!1,name:"PortalManagerContext"});function PortalManager(n){const{children:e,zIndex:s}=n;return jsxRuntimeExports.jsx(PortalManagerContextProvider,{value:{zIndex:s},children:e})}PortalManager.displayName="PortalManager";const EnvironmentContext=reactExports.createContext({getDocument(){return document},getWindow(){return window}});EnvironmentContext.displayName="EnvironmentContext";function EnvironmentProvider(n){const{children:e,environment:s,disabled:o}=n,a=reactExports.useRef(null),c=reactExports.useMemo(()=>s||{getDocument:()=>a.current?.ownerDocument??document,getWindow:()=>a.current?.ownerDocument.defaultView??window},[s]),u=!o||!s;return jsxRuntimeExports.jsxs(EnvironmentContext.Provider,{value:c,children:[e,u&&jsxRuntimeExports.jsx("span",{id:"__chakra_env",hidden:!0,ref:a})]})}EnvironmentProvider.displayName="EnvironmentProvider";const Provider=n=>{const{children:e,colorModeManager:s,portalZIndex:o,resetScope:a,resetCSS:c=!0,theme:u={},environment:h,cssVarsRoot:m,disableEnvironment:g,disableGlobalStyle:_}=n,b=jsxRuntimeExports.jsx(EnvironmentProvider,{environment:h,disabled:g,children:e});return jsxRuntimeExports.jsx(ThemeProvider,{theme:u,cssVarsRoot:m,children:jsxRuntimeExports.jsxs(ColorModeProvider,{colorModeManager:s,options:u.config,children:[c?jsxRuntimeExports.jsx(CSSReset,{scope:a}):jsxRuntimeExports.jsx(CSSPolyfill,{}),!_&&jsxRuntimeExports.jsx(GlobalStyle,{}),o?jsxRuntimeExports.jsx(PortalManager,{zIndex:o,children:b}):b]})})},LayoutGroupContext=reactExports.createContext({});function useConstant(n){const e=reactExports.useRef(null);return e.current===null&&(e.current=n()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(n,e){n.indexOf(e)===-1&&n.push(e)}function removeItem(n,e){const s=n.indexOf(e);s>-1&&n.splice(s,1)}const clamp=(n,e,s)=>s>e?e:s<n?n:s;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function isObject(n){return typeof n=="object"&&n!==null}const isZeroValueString=n=>/^0[^.\s]+$/u.test(n);function memo(n){let e;return()=>(e===void 0&&(e=n()),e)}const noop=n=>n,combineFunctions=(n,e)=>s=>e(n(s)),pipe=(...n)=>n.reduce(combineFunctions),progress$1=(n,e,s)=>{const o=e-n;return o===0?1:(s-n)/o};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,s,o){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,o);else for(let c=0;c<a;c++){const u=this.subscriptions[c];u&&u(e,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=n=>n*1e3,millisecondsToSeconds=n=>n/1e3;function velocityPerSecond(n,e){return e?n*(1e3/e):0}const calcBezier=(n,e,s)=>(((1-3*s+3*e)*n+(3*s-6*e))*n+3*e)*n,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(n,e,s,o,a){let c,u,h=0;do u=e+(s-e)/2,c=calcBezier(u,o,a)-n,c>0?s=u:e=u;while(Math.abs(c)>subdivisionPrecision&&++h<subdivisionMaxIterations);return u}function cubicBezier(n,e,s,o){if(n===e&&s===o)return noop;const a=c=>binarySubdivide(c,0,1,n,s);return c=>c===0||c===1?c:calcBezier(a(c),e,o)}const mirrorEasing=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,reverseEasing=n=>e=>1-n(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=n=>(n*=2)<1?.5*backIn(n):.5*(2-Math.pow(2,-10*(n-1))),circIn=n=>1-Math.sin(Math.acos(n)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=n=>Array.isArray(n)&&typeof n[0]!="number",isBezierDefinition=n=>Array.isArray(n)&&typeof n[0]=="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=n=>typeof n=="string",easingDefinitionToFunction=n=>{if(isBezierDefinition(n)){invariant(n.length===4);const[e,s,o,a]=n;return cubicBezier(e,s,o,a)}else if(isValidEasing(n))return easingLookup[n];return n},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(n,e){let s=new Set,o=new Set,a=!1,c=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(_){u.has(_)&&(g.schedule(_),n()),_(h)}const g={schedule:(_,b=!1,T=!1)=>{const R=T&&a?s:o;return b&&u.add(_),R.has(_)||R.add(_),_},cancel:_=>{o.delete(_),u.delete(_)},process:_=>{if(h=_,a){c=!0;return}a=!0,[s,o]=[o,s],s.forEach(m),s.clear(),a=!1,c&&(c=!1,g.process(_))}};return g}const maxElapsed=40;function createRenderBatcher(n,e){let s=!1,o=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=()=>s=!0,u=stepsOrder.reduce((pn,wn)=>(pn[wn]=createRenderStep(c),pn),{}),{setup:h,read:m,resolveKeyframes:g,preUpdate:_,update:b,preRender:T,render:A,postRender:R}=u,w=()=>{const pn=MotionGlobalConfig.useManualTiming?a.timestamp:performance.now();s=!1,MotionGlobalConfig.useManualTiming||(a.delta=o?1e3/60:Math.max(Math.min(pn-a.timestamp,maxElapsed),1)),a.timestamp=pn,a.isProcessing=!0,h.process(a),m.process(a),g.process(a),_.process(a),b.process(a),T.process(a),A.process(a),R.process(a),a.isProcessing=!1,s&&e&&(o=!1,n(w))},D=()=>{s=!0,o=!0,a.isProcessing||n(w)};return{schedule:stepsOrder.reduce((pn,wn)=>{const V=u[wn];return pn[wn]=(bn,wt=!1,jt=!1)=>(s||D(),V.schedule(bn,wt,jt)),pn},{}),cancel:pn=>{for(let wn=0;wn<stepsOrder.length;wn++)u[stepsOrder[wn]].cancel(pn)},state:a,steps:u}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now$1;function clearTime(){now$1=void 0}const time={now:()=>(now$1===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:n=>{now$1=n,queueMicrotask(clearTime)}},checkStringStartsWith=n=>e=>typeof e=="string"&&e.startsWith(n),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=n=>startsAsVariableToken(n)?singleCssVariableRegex.test(n.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number$3={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},alpha={...number$3,transform:n=>clamp(0,1,n)},scale={...number$3,default:1},sanitize=n=>Math.round(n*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(n){return n==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(n,e)=>s=>!!(typeof s=="string"&&singleColorRegex.test(s)&&s.startsWith(n)||e&&!isNullish(s)&&Object.prototype.hasOwnProperty.call(s,e)),splitColor=(n,e,s)=>o=>{if(typeof o!="string")return o;const[a,c,u,h]=o.match(floatRegex);return{[n]:parseFloat(a),[e]:parseFloat(c),[s]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},clampRgbUnit=n=>clamp(0,255,n),rgbUnit={...number$3,transform:n=>Math.round(clampRgbUnit(n))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:n,green:e,blue:s,alpha:o=1})=>"rgba("+rgbUnit.transform(n)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(o))+")"};function parseHex(n){let e="",s="",o="",a="";return n.length>5?(e=n.substring(1,3),s=n.substring(3,5),o=n.substring(5,7),a=n.substring(7,9)):(e=n.substring(1,2),s=n.substring(2,3),o=n.substring(3,4),a=n.substring(4,5),e+=e,s+=s,o+=o,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:a?parseInt(a,16)/255:1}}const hex$1={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:n=>percent.parse(n)/100,transform:n=>percent.transform(n*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:s,alpha:o=1})=>"hsla("+Math.round(n)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(o))+")"},color={test:n=>rgba.test(n)||hex$1.test(n)||hsla.test(n),parse:n=>rgba.test(n)?rgba.parse(n):hsla.test(n)?hsla.parse(n):hex$1.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?rgba.transform(n):hsla.transform(n),getAnimatableNone:n=>{const e=color.parse(n);return e.alpha=0,color.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(n){return isNaN(n)&&typeof n=="string"&&(n.match(floatRegex)?.length||0)+(n.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(n){const e=n.toString(),s=[],o={color:[],number:[],var:[]},a=[];let c=0;const h=e.replace(complexRegex,m=>(color.test(m)?(o.color.push(c),a.push(COLOR_TOKEN),s.push(color.parse(m))):m.startsWith(VAR_FUNCTION_TOKEN)?(o.var.push(c),a.push(VAR_TOKEN),s.push(m)):(o.number.push(c),a.push(NUMBER_TOKEN),s.push(parseFloat(m))),++c,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:s,split:h,indexes:o,types:a}}function parseComplexValue(n){return analyseComplexValue(n).values}function createTransformer(n){const{split:e,types:s}=analyseComplexValue(n),o=e.length;return a=>{let c="";for(let u=0;u<o;u++)if(c+=e[u],a[u]!==void 0){const h=s[u];h===NUMBER_TOKEN?c+=sanitize(a[u]):h===COLOR_TOKEN?c+=color.transform(a[u]):c+=a[u]}return c}}const convertNumbersToZero=n=>typeof n=="number"?0:color.test(n)?color.getAnimatableNone(n):n;function getAnimatableNone$1(n){const e=parseComplexValue(n);return createTransformer(n)(e.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(n,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?n+(e-n)*6*s:s<1/2?e:s<2/3?n+(e-n)*(2/3-s)*6:n}function hslaToRgba({hue:n,saturation:e,lightness:s,alpha:o}){n/=360,e/=100,s/=100;let a=0,c=0,u=0;if(!e)a=c=u=s;else{const h=s<.5?s*(1+e):s+e-s*e,m=2*s-h;a=hueToRgb(m,h,n+1/3),c=hueToRgb(m,h,n),u=hueToRgb(m,h,n-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(u*255),alpha:o}}function mixImmediate(n,e){return s=>s>0?e:n}const mixNumber$1=(n,e,s)=>n+(e-n)*s,mixLinearColor=(n,e,s)=>{const o=n*n,a=s*(e*e-o)+o;return a<0?0:Math.sqrt(a)},colorTypes=[hex$1,rgba,hsla],getColorType=n=>colorTypes.find(e=>e.test(n));function asRGBA(n){const e=getColorType(n);if(!e)return!1;let s=e.parse(n);return e===hsla&&(s=hslaToRgba(s)),s}const mixColor=(n,e)=>{const s=asRGBA(n),o=asRGBA(e);if(!s||!o)return mixImmediate(n,e);const a={...s};return c=>(a.red=mixLinearColor(s.red,o.red,c),a.green=mixLinearColor(s.green,o.green,c),a.blue=mixLinearColor(s.blue,o.blue,c),a.alpha=mixNumber$1(s.alpha,o.alpha,c),rgba.transform(a))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(n,e){return invisibleValues.has(n)?s=>s<=0?n:e:s=>s>=1?e:n}function mixNumber(n,e){return s=>mixNumber$1(n,e,s)}function getMixer(n){return typeof n=="number"?mixNumber:typeof n=="string"?isCSSVariableToken(n)?mixImmediate:color.test(n)?mixColor:mixComplex:Array.isArray(n)?mixArray:typeof n=="object"?color.test(n)?mixColor:mixObject:mixImmediate}function mixArray(n,e){const s=[...n],o=s.length,a=n.map((c,u)=>getMixer(c)(c,e[u]));return c=>{for(let u=0;u<o;u++)s[u]=a[u](c);return s}}function mixObject(n,e){const s={...n,...e},o={};for(const a in s)n[a]!==void 0&&e[a]!==void 0&&(o[a]=getMixer(n[a])(n[a],e[a]));return a=>{for(const c in o)s[c]=o[c](a);return s}}function matchOrder(n,e){const s=[],o={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const c=e.types[a],u=n.indexes[c][o[c]],h=n.values[u]??0;s[a]=h,o[c]++}return s}const mixComplex=(n,e)=>{const s=complex.createTransformer(e),o=analyseComplexValue(n),a=analyseComplexValue(e);return o.indexes.var.length===a.indexes.var.length&&o.indexes.color.length===a.indexes.color.length&&o.indexes.number.length>=a.indexes.number.length?invisibleValues.has(n)&&!a.values.length||invisibleValues.has(e)&&!o.values.length?mixVisibility(n,e):pipe(mixArray(matchOrder(o,a),a.values),s):mixImmediate(n,e)};function mix(n,e,s){return typeof n=="number"&&typeof e=="number"&&typeof s=="number"?mixNumber$1(n,e,s):getMixer(n)(n,e)}const frameloopDriver=n=>{const e=({timestamp:s})=>n(s);return{start:(s=!0)=>frame.update(e,s),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(n,e,s=10)=>{let o="";const a=Math.max(Math.round(e/s),2);for(let c=0;c<a;c++)o+=Math.round(n(c/(a-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(n){let e=0;const s=50;let o=n.next(e);for(;!o.done&&e<maxGeneratorDuration;)e+=s,o=n.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(n,e=100,s){const o=s({...n,keyframes:[0,e]}),a=Math.min(calcGeneratorDuration(o),maxGeneratorDuration);return{type:"keyframes",ease:c=>o.next(a*c).value/e,duration:millisecondsToSeconds(a)}}const velocitySampleDuration=5;function calcGeneratorVelocity(n,e,s){const o=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(s-n(o),e-o)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:n=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:s=springDefaults.velocity,mass:o=springDefaults.mass}){let a,c,u=1-e;u=clamp(springDefaults.minDamping,springDefaults.maxDamping,u),n=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(n)),u<1?(a=g=>{const _=g*u,b=_*n,T=_-s,A=calcAngularFreq(g,u),R=Math.exp(-b);return safeMin-T/A*R},c=g=>{const b=g*u*n,T=b*s+s,A=Math.pow(u,2)*Math.pow(g,2)*n,R=Math.exp(-b),w=calcAngularFreq(Math.pow(g,2),u);return(-a(g)+safeMin>0?-1:1)*((T-A)*R)/w}):(a=g=>{const _=Math.exp(-g*n),b=(g-s)*n+1;return-safeMin+_*b},c=g=>{const _=Math.exp(-g*n),b=(s-g)*(n*n);return _*b});const h=5/n,m=approximateRoot(a,c,h);if(n=secondsToMilliseconds(n),isNaN(m))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:n};{const g=Math.pow(m,2)*o;return{stiffness:g,damping:u*2*Math.sqrt(o*g),duration:n}}}const rootIterations=12;function approximateRoot(n,e,s){let o=s;for(let a=1;a<rootIterations;a++)o=o-n(o)/e(o);return o}function calcAngularFreq(n,e){return n*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(n,e){return e.some(s=>n[s]!==void 0)}function getSpringOptions(n){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...n};if(!isSpringType(n,physicsKeys)&&isSpringType(n,durationKeys))if(n.visualDuration){const s=n.visualDuration,o=2*Math.PI/(s*1.2),a=o*o,c=2*clamp(.05,1,1-(n.bounce||0))*Math.sqrt(a);e={...e,mass:springDefaults.mass,stiffness:a,damping:c}}else{const s=findSpring(n);e={...e,...s,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(n=springDefaults.visualDuration,e=springDefaults.bounce){const s=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:o,restDelta:a}=s;const c=s.keyframes[0],u=s.keyframes[s.keyframes.length-1],h={done:!1,value:c},{stiffness:m,damping:g,mass:_,duration:b,velocity:T,isResolvedFromDuration:A}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),R=T||0,w=g/(2*Math.sqrt(m*_)),D=u-c,fn=millisecondsToSeconds(Math.sqrt(m/_)),yn=Math.abs(D)<5;o||(o=yn?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),a||(a=yn?springDefaults.restDelta.granular:springDefaults.restDelta.default);let pn;if(w<1){const V=calcAngularFreq(fn,w);pn=bn=>{const wt=Math.exp(-w*fn*bn);return u-wt*((R+w*fn*D)/V*Math.sin(V*bn)+D*Math.cos(V*bn))}}else if(w===1)pn=V=>u-Math.exp(-fn*V)*(D+(R+fn*D)*V);else{const V=fn*Math.sqrt(w*w-1);pn=bn=>{const wt=Math.exp(-w*fn*bn),jt=Math.min(V*bn,300);return u-wt*((R+w*fn*D)*Math.sinh(jt)+V*D*Math.cosh(jt))/V}}const wn={calculatedDuration:A&&b||null,next:V=>{const bn=pn(V);if(A)h.done=V>=b;else{let wt=V===0?R:0;w<1&&(wt=V===0?secondsToMilliseconds(R):calcGeneratorVelocity(pn,V,bn));const jt=Math.abs(wt)<=o,ln=Math.abs(u-bn)<=a;h.done=jt&&ln}return h.value=h.done?u:bn,h},toString:()=>{const V=Math.min(calcGeneratorDuration(wn),maxGeneratorDuration),bn=generateLinearEasing(wt=>wn.next(V*wt).value,V,30);return V+"ms "+bn},toTransition:()=>{}};return wn}spring.applyToOptions=n=>{const e=createGeneratorEasing(n,100,spring);return n.ease=e.ease,n.duration=secondsToMilliseconds(e.duration),n.type="keyframes",n};function inertia({keyframes:n,velocity:e=0,power:s=.8,timeConstant:o=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:u,min:h,max:m,restDelta:g=.5,restSpeed:_}){const b=n[0],T={done:!1,value:b},A=jt=>h!==void 0&&jt<h||m!==void 0&&jt>m,R=jt=>h===void 0?m:m===void 0||Math.abs(h-jt)<Math.abs(m-jt)?h:m;let w=s*e;const D=b+w,fn=u===void 0?D:u(D);fn!==D&&(w=fn-b);const yn=jt=>-w*Math.exp(-jt/o),pn=jt=>fn+yn(jt),wn=jt=>{const ln=yn(jt),vn=pn(jt);T.done=Math.abs(ln)<=g,T.value=T.done?fn:vn};let V,bn;const wt=jt=>{A(T.value)&&(V=jt,bn=spring({keyframes:[T.value,R(T.value)],velocity:calcGeneratorVelocity(pn,jt,T.value),damping:a,stiffness:c,restDelta:g,restSpeed:_}))};return wt(0),{calculatedDuration:null,next:jt=>{let ln=!1;return!bn&&V===void 0&&(ln=!0,wn(jt),wt(jt)),V!==void 0&&jt>=V?bn.next(jt-V):(!ln&&wn(jt),T)}}}function createMixers(n,e,s){const o=[],a=s||MotionGlobalConfig.mix||mix,c=n.length-1;for(let u=0;u<c;u++){let h=a(n[u],n[u+1]);if(e){const m=Array.isArray(e)?e[u]||noop:e;h=pipe(m,h)}o.push(h)}return o}function interpolate(n,e,{clamp:s=!0,ease:o,mixer:a}={}){const c=n.length;if(invariant(c===e.length),c===1)return()=>e[0];if(c===2&&e[0]===e[1])return()=>e[1];const u=n[0]===n[1];n[0]>n[c-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=createMixers(e,o,a),m=h.length,g=_=>{if(u&&_<n[0])return e[0];let b=0;if(m>1)for(;b<n.length-2&&!(_<n[b+1]);b++);const T=progress$1(n[b],n[b+1],_);return h[b](T)};return s?_=>g(clamp(n[0],n[c-1],_)):g}function fillOffset(n,e){const s=n[n.length-1];for(let o=1;o<=e;o++){const a=progress$1(0,e,o);n.push(mixNumber$1(s,1,a))}}function defaultOffset(n){const e=[0];return fillOffset(e,n.length-1),e}function convertOffsetToTimes(n,e){return n.map(s=>s*e)}function defaultEasing(n,e){return n.map(()=>e||easeInOut).splice(0,n.length-1)}function keyframes({duration:n=300,keyframes:e,times:s,ease:o="easeInOut"}){const a=isEasingArray(o)?o.map(easingDefinitionToFunction):easingDefinitionToFunction(o),c={done:!1,value:e[0]},u=convertOffsetToTimes(s&&s.length===e.length?s:defaultOffset(e),n),h=interpolate(u,e,{ease:Array.isArray(a)?a:defaultEasing(e,a)});return{calculatedDuration:n,next:m=>(c.value=h(m),c.done=m>=n,c)}}const isNotNull$1=n=>n!==null;function getFinalKeyframe$1(n,{repeat:e,repeatType:s="loop"},o,a=1){const c=n.filter(isNotNull$1),h=a<0||e&&s!=="loop"&&e%2===1?0:c.length-1;return!h||o===void 0?c[h]:o}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(n){typeof n.type=="string"&&(n.type=transitionTypeMap[n.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const percentToProgress=n=>n/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:s=keyframes,repeat:o=0,repeatDelay:a=0,repeatType:c,velocity:u=0}=e;let{keyframes:h}=e;const m=s||keyframes;m!==keyframes&&typeof h[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(h[0],h[1])),h=[0,100]);const g=m({...e,keyframes:h});c==="mirror"&&(this.mirroredGenerator=m({...e,keyframes:[...h].reverse(),velocity:-u})),g.calculatedDuration===null&&(g.calculatedDuration=calcGeneratorDuration(g));const{calculatedDuration:_}=g;this.calculatedDuration=_,this.resolvedDuration=_+a,this.totalDuration=this.resolvedDuration*(o+1)-a,this.generator=g}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:o,totalDuration:a,mixKeyframes:c,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return o.next(0);const{delay:g=0,keyframes:_,repeat:b,repeatType:T,repeatDelay:A,type:R,onUpdate:w,finalKeyframe:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const fn=this.currentTime-g*(this.playbackSpeed>=0?1:-1),yn=this.playbackSpeed>=0?fn<0:fn>a;this.currentTime=Math.max(fn,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let pn=this.currentTime,wn=o;if(b){const jt=Math.min(this.currentTime,a)/h;let ln=Math.floor(jt),vn=jt%1;!vn&&jt>=1&&(vn=1),vn===1&&ln--,ln=Math.min(ln,b+1),!!(ln%2)&&(T==="reverse"?(vn=1-vn,A&&(vn-=A/h)):T==="mirror"&&(wn=u)),pn=clamp(0,1,vn)*h}const V=yn?{done:!1,value:_[0]}:wn.next(pn);c&&(V.value=c(V.value));let{done:bn}=V;!yn&&m!==null&&(bn=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const wt=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&bn);return wt&&R!==inertia&&(V.value=getFinalKeyframe$1(_,this.options,D,this.speed)),w&&w(V.value),wt&&this.finish(),V}then(e,s){return this.finished.then(e,s)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:s}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=s??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const radToDeg=n=>n*180/Math.PI,rotate=n=>{const e=radToDeg(Math.atan2(n[1],n[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate,rotateZ:rotate,skewX:n=>radToDeg(Math.atan(n[1])),skewY:n=>radToDeg(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},rebaseAngle=n=>(n=n%360,n<0&&(n+=360),n),rotateZ=rotate,scaleX=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),scaleY=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:n=>(scaleX(n)+scaleY(n))/2,rotateX:n=>rebaseAngle(radToDeg(Math.atan2(n[6],n[5]))),rotateY:n=>rebaseAngle(radToDeg(Math.atan2(-n[2],n[0]))),rotateZ,rotate:rotateZ,skewX:n=>radToDeg(Math.atan(n[4])),skewY:n=>radToDeg(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function defaultTransformValue(n){return n.includes("scale")?1:0}function parseValueFromTransform(n,e){if(!n||n==="none")return defaultTransformValue(e);const s=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,a;if(s)o=matrix3dParsers,a=s;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=matrix2dParsers,a=h}if(!a)return defaultTransformValue(e);const c=o[e],u=a[1].split(",").map(convertTransformToNumber);return typeof c=="function"?c(u):u[c]}const readTransformValue=(n,e)=>{const{transform:s="none"}=getComputedStyle(n);return parseValueFromTransform(s,e)};function convertTransformToNumber(n){return parseFloat(n.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=n=>n===number$3||n===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(n=>!transformKeys.has(n));function removeNonTranslationalTransform(n){const e=[];return nonTranslationalTransformKeys.forEach(s=>{const o=n.getValue(s);o!==void 0&&(e.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:n},{paddingLeft:e="0",paddingRight:s="0"})=>n.max-n.min-parseFloat(e)-parseFloat(s),height:({y:n},{paddingTop:e="0",paddingBottom:s="0"})=>n.max-n.min-parseFloat(e)-parseFloat(s),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>parseValueFromTransform(e,"x"),y:(n,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const n=Array.from(toResolve).filter(o=>o.needsMeasurement),e=new Set(n.map(o=>o.element)),s=new Map;e.forEach(o=>{const a=removeNonTranslationalTransform(o);a.length&&(s.set(o,a),o.render())}),n.forEach(o=>o.measureInitialState()),e.forEach(o=>{o.render();const a=s.get(o);a&&a.forEach(([c,u])=>{o.getValue(c)?.set(u)})}),n.forEach(o=>o.measureEndState()),n.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(n=>n.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,s,o,a,c,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=o,this.motionValue=a,this.element=c,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:o,motionValue:a}=this;if(e[0]===null){const c=a?.get(),u=e[e.length-1];if(c!==void 0)e[0]=c;else if(o&&s){const h=o.readValue(s,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),a&&c===void 0&&a.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=n=>n.startsWith("--");function setStyle(n,e,s){isCSSVar(e)?n.style.setProperty(e,s):n.style[e]=s}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(n,e){const s=memo(n);return()=>supportsFlags[e]??s()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([n,e,s,o])=>`cubic-bezier(${n}, ${e}, ${s}, ${o})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(n,e){if(n)return typeof n=="function"?supportsLinearEasing()?generateLinearEasing(n,e):"ease-out":isBezierDefinition(n)?cubicBezierAsString(n):Array.isArray(n)?n.map(s=>mapEasingToNativeEasing(s,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[n]}function startWaapiAnimation(n,e,s,{delay:o=0,duration:a=300,repeat:c=0,repeatType:u="loop",ease:h="easeOut",times:m}={},g=void 0){const _={[e]:s};m&&(_.offset=m);const b=mapEasingToNativeEasing(h,a);Array.isArray(b)&&(_.easing=b);const T={delay:o,duration:a,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:c+1,direction:u==="reverse"?"alternate":"normal"};return g&&(T.pseudoElement=g),n.animate(_,T)}function isGenerator(n){return typeof n=="function"&&"applyToOptions"in n}function applyGeneratorOptions({type:n,...e}){return isGenerator(n)&&supportsLinearEasing()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:o,keyframes:a,pseudoElement:c,allowFlatten:u=!1,finalKeyframe:h,onComplete:m}=e;this.isPseudoElement=!!c,this.allowFlatten=u,this.options=e,invariant(typeof e.type!="string");const g=applyGeneratorOptions(e);this.animation=startWaapiAnimation(s,o,a,g,c),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const _=getFinalKeyframe$1(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(_):setStyle(s,o,_),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop):s(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(n){return n in unsupportedEasingFunctions}function replaceStringEasing(n){typeof n.ease=="string"&&isUnsupportedEase(n.ease)&&(n.ease=unsupportedEasingFunctions[n.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:o,onComplete:a,element:c,...u}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const h=new JSAnimation({...u,autoplay:!1}),m=secondsToMilliseconds(this.finishedTime??this.time);s.setWithVelocity(h.sample(m-sampleDelta).value,h.sample(m).value,sampleDelta),h.stop()}}const isAnimatable=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(complex.test(n)||n==="0")&&!n.startsWith("url("));function hasKeyframesChanged(n){const e=n[0];if(n.length===1)return!0;for(let s=0;s<n.length;s++)if(n[s]!==e)return!0}function canAnimate(n,e,s,o){const a=n[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const c=n[n.length-1],u=isAnimatable(a,e),h=isAnimatable(c,e);return!u||!h?!1:hasKeyframesChanged(n)||(s==="spring"||isGenerator(s))&&o}function makeAnimationInstant(n){n.duration=0,n.type}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(n){const{motionValue:e,name:s,repeatDelay:o,repeatType:a,damping:c,type:u}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=e.owner.getProps();return supportsWaapi()&&s&&acceleratedValues.has(s)&&(s!=="transform"||!g)&&!m&&!o&&a!=="mirror"&&c!==0&&u!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:s=0,type:o="keyframes",repeat:a=0,repeatDelay:c=0,repeatType:u="loop",keyframes:h,name:m,motionValue:g,element:_,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const T={autoplay:e,delay:s,type:o,repeat:a,repeatDelay:c,repeatType:u,name:m,motionValue:g,element:_,...b},A=_?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new A(h,(R,w,D)=>this.onKeyframesResolved(R,w,T,!D),m,g,_),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,s,o,a){this.keyframeResolver=void 0;const{name:c,type:u,velocity:h,delay:m,isHandoff:g,onUpdate:_}=o;this.resolvedAt=time.now(),canAnimate(e,c,u,h)||((MotionGlobalConfig.instantAnimations||!m)&&_?.(getFinalKeyframe$1(e,o,s)),e[0]=e[e.length-1],makeAnimationInstant(o),o.repeat=0);const T={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...o,keyframes:e},A=!g&&supportsBrowserAnimation(T)?new NativeAnimationExtended({...T,element:T.motionValue.owner.current}):new JSAnimation(T);A.finished.then(()=>this.notifyFinished()).catch(noop),this.pendingTimeline&&(this.stopTimeline=A.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=A}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(n){const e=splitCSSVariableRegex.exec(n);if(!e)return[,];const[,s,o,a]=e;return[`--${s??o}`,a]}function getVariableValue(n,e,s=1){const[o,a]=parseCSSVariable(n);if(!o)return;const c=window.getComputedStyle(e).getPropertyValue(o);if(c){const u=c.trim();return isNumericalString(u)?parseFloat(u):u}return isCSSVariableToken(a)?getVariableValue(a,e,s+1):a}function getValueTransition(n,e){return n?.[e]??n?.default??n}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:n=>n==="auto",parse:n=>n},testValueType=n=>e=>e.test(n),dimensionValueTypes=[number$3,px,percent,degrees,vw,vh,auto],findDimensionValueType=n=>dimensionValueTypes.find(testValueType(n));function isNone(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||isZeroValueString(n):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(n){const[e,s]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[o]=s.match(floatRegex)||[];if(!o)return n;const a=s.replace(o,"");let c=maxDefaults.has(e)?1:0;return o!==s&&(c*=100),e+"("+c+a+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:n=>{const e=n.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):n}},int={...number$3,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=n=>defaultValueTypes[n];function getAnimatableNone(n,e){let s=getDefaultValueType(n);return s!==filter&&(s=complex),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(n,e,s){let o=0,a;for(;o<n.length&&!a;){const c=n[o];typeof c=="string"&&!invalidTemplates.has(c)&&analyseComplexValue(c).values.length&&(a=n[o]),o++}if(a&&s)for(const c of e)n[c]=getAnimatableNone(s,a)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,s,o,a,c){super(e,s,o,a,c,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let g=e[m];if(typeof g=="string"&&(g=g.trim(),isCSSVariableToken(g))){const _=getVariableValue(g,s.current);_!==void 0&&(e[m]=_),m===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(o)||e.length!==2)return;const[a,c]=e,u=findDimensionValueType(a),h=findDimensionValueType(c);if(u!==h)if(isNumOrPxType(u)&&isNumOrPxType(h))for(let m=0;m<e.length;m++){const g=e[m];typeof g=="string"&&(e[m]=parseFloat(g))}else positionalValues[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,o=[];for(let a=0;a<e.length;a++)(e[a]===null||isNone(e[a]))&&o.push(a);o.length&&makeNoneKeyframesAnimatable(e,o,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:o}=this;if(!e||!e.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[o](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&e.getValue(o,a).jump(a,!1)}measureEndState(){const{element:e,name:s,unresolvedKeyframes:o}=this;if(!e||!e.current)return;const a=e.getValue(s);a&&a.jump(this.measuredOrigin,!1);const c=o.length-1,u=o[c];o[c]=positionalValues[s](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,m])=>{e.getValue(h).set(m)}),this.resolveNoneKeyframes()}}function resolveElements(n,e,s){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let o=document;const a=s?.[n]??o.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}const getValueAsType=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function isHTMLElement(n){return isObject(n)&&"offsetHeight"in n}const MAX_VELOCITY_DELTA=30,isFloat=n=>!isNaN(parseFloat(n));class MotionValue{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const a=time.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new SubscriptionManager);const o=this.events[e].add(s);return e==="change"?()=>{o(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-o}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(n,e){return new MotionValue(n,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(n){return n==="x"||n==="y"?isDragging[n]?null:(isDragging[n]=!0,()=>{isDragging[n]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(n,e){const s=resolveElements(n),o=new AbortController,a={passive:!0,...e,signal:o.signal};return[s,a,()=>o.abort()]}function isValidHover(n){return!(n.pointerType==="touch"||isDragActive())}function hover(n,e,s={}){const[o,a,c]=setupGesture(n,s),u=h=>{if(!isValidHover(h))return;const{target:m}=h,g=e(m,h);if(typeof g!="function"||!m)return;const _=b=>{isValidHover(b)&&(g(b),m.removeEventListener("pointerleave",_))};m.addEventListener("pointerleave",_,a)};return o.forEach(h=>{h.addEventListener("pointerenter",u,a)}),c}const isNodeOrChild=(n,e)=>e?n===e?!0:isNodeOrChild(n,e.parentElement):!1,isPrimaryPointer=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(n){return focusableElements.has(n.tagName)||n.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(n){return e=>{e.key==="Enter"&&n(e)}}function firePointerEvent(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(n,e)=>{const s=n.currentTarget;if(!s)return;const o=filterEvents(()=>{if(isPressing.has(s))return;firePointerEvent(s,"down");const a=filterEvents(()=>{firePointerEvent(s,"up")}),c=()=>firePointerEvent(s,"cancel");s.addEventListener("keyup",a,e),s.addEventListener("blur",c,e)});s.addEventListener("keydown",o,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),e)};function isValidPressEvent(n){return isPrimaryPointer(n)&&!isDragActive()}function press(n,e,s={}){const[o,a,c]=setupGesture(n,s),u=h=>{const m=h.currentTarget;if(!isValidPressEvent(h))return;isPressing.add(m);const g=e(m,h),_=(A,R)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",T),isPressing.has(m)&&isPressing.delete(m),isValidPressEvent(A)&&typeof g=="function"&&g(A,{success:R})},b=A=>{_(A,m===window||m===document||s.useGlobalTarget||isNodeOrChild(m,A.target))},T=A=>{_(A,!1)};window.addEventListener("pointerup",b,a),window.addEventListener("pointercancel",T,a)};return o.forEach(h=>{(s.useGlobalTarget?window:h).addEventListener("pointerdown",u,a),isHTMLElement(h)&&(h.addEventListener("focus",g=>enableKeyboardPress(g,a)),!isElementKeyboardAccessible(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),c}function isSVGElement(n){return isObject(n)&&"ownerSVGElement"in n}function isSVGSVGElement(n){return isSVGElement(n)&&n.tagName==="svg"}const isMotionValue=n=>!!(n&&n.getVelocity),valueTypes=[...dimensionValueTypes,color,complex],findValueType=n=>valueTypes.find(testValueType(n)),MotionConfigContext=reactExports.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const o=s.offsetParent,a=isHTMLElement(o)&&o.offsetWidth||0,c=this.props.sizeRef.current;c.height=s.offsetHeight||0,c.width=s.offsetWidth||0,c.top=s.offsetTop,c.left=s.offsetLeft,c.right=a-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:n,isPresent:e,anchorX:s,root:o}){const a=reactExports.useId(),c=reactExports.useRef(null),u=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:m,height:g,top:_,left:b,right:T}=u.current;if(e||!c.current||!m||!g)return;const A=s==="left"?`left: ${b}`:`right: ${T}`;c.current.dataset.motionPopId=a;const R=document.createElement("style");h&&(R.nonce=h);const w=o??document.head;return w.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${g}px !important;
            ${A}px !important;
            top: ${_}px !important;
          }
        `),()=>{w.contains(R)&&w.removeChild(R)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:c,sizeRef:u,children:reactExports.cloneElement(n,{ref:c})})}const PresenceChild=({children:n,initial:e,isPresent:s,onExitComplete:o,custom:a,presenceAffectsLayout:c,mode:u,anchorX:h,root:m})=>{const g=useConstant(newChildrenMap),_=reactExports.useId();let b=!0,T=reactExports.useMemo(()=>(b=!1,{id:_,initial:e,isPresent:s,custom:a,onExitComplete:A=>{g.set(A,!0);for(const R of g.values())if(!R)return;o&&o()},register:A=>(g.set(A,!1),()=>g.delete(A))}),[s,g,o]);return c&&b&&(T={...T}),reactExports.useMemo(()=>{g.forEach((A,R)=>g.set(R,!1))},[s]),reactExports.useEffect(()=>{!s&&!g.size&&o&&o()},[s]),u==="popLayout"&&(n=jsxRuntimeExports.jsx(PopChild,{isPresent:s,anchorX:h,root:m,children:n})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:T,children:n})};function newChildrenMap(){return new Map}function usePresence(n=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:a}=e,c=reactExports.useId();reactExports.useEffect(()=>{if(n)return a(c)},[n]);const u=reactExports.useCallback(()=>n&&o&&o(c),[c,o,n]);return!s&&o?[!1,u]:[!0]}function useIsPresent(){return isPresent(reactExports.useContext(PresenceContext))}function isPresent(n){return n===null?!0:n.isPresent}const getChildKey=n=>n.key||"";function onlyElements(n){const e=[];return reactExports.Children.forEach(n,s=>{reactExports.isValidElement(s)&&e.push(s)}),e}const AnimatePresence=({children:n,custom:e,initial:s=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:c="sync",propagate:u=!1,anchorX:h="left",root:m})=>{const[g,_]=usePresence(u),b=reactExports.useMemo(()=>onlyElements(n),[n]),T=u&&!g?[]:b.map(getChildKey),A=reactExports.useRef(!0),R=reactExports.useRef(b),w=useConstant(()=>new Map),[D,fn]=reactExports.useState(b),[yn,pn]=reactExports.useState(b);useIsomorphicLayoutEffect$1(()=>{A.current=!1,R.current=b;for(let bn=0;bn<yn.length;bn++){const wt=getChildKey(yn[bn]);T.includes(wt)?w.delete(wt):w.get(wt)!==!0&&w.set(wt,!1)}},[yn,T.length,T.join("-")]);const wn=[];if(b!==D){let bn=[...b];for(let wt=0;wt<yn.length;wt++){const jt=yn[wt],ln=getChildKey(jt);T.includes(ln)||(bn.splice(wt,0,jt),wn.push(jt))}return c==="wait"&&wn.length&&(bn=wn),pn(onlyElements(bn)),fn(b),null}const{forceRender:V}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:yn.map(bn=>{const wt=getChildKey(bn),jt=u&&!g?!1:b===yn||T.includes(wt),ln=()=>{if(w.has(wt))w.set(wt,!0);else return;let vn=!0;w.forEach(dn=>{dn||(vn=!1)}),vn&&(V?.(),pn(R.current),u&&_?.(),o&&o())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:jt,initial:!A.current||s?void 0:!1,custom:e,presenceAffectsLayout:a,mode:c,root:m,onExitComplete:jt?void 0:ln,anchorX:h,children:bn},wt)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const n in featureProps)featureDefinitions[n]={isEnabled:e=>featureProps[n].some(s=>!!e[s])};function loadFeatures(n){for(const e in n)featureDefinitions[e]={...featureDefinitions[e],...n[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||validMotionProps.has(n)}let shouldForward=n=>!isValidMotionProp(n);function loadExternalIsValidProp(n){typeof n=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):n(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(n,e,s){const o={};for(const a in n)a==="values"&&typeof n.values=="object"||(shouldForward(a)||s===!0&&isValidMotionProp(a)||!e&&!isValidMotionProp(a)||n.draggable&&a.startsWith("onDrag"))&&(o[a]=n[a]);return o}const MotionContext=reactExports.createContext({});function isAnimationControls(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function isVariantLabel(n){return typeof n=="string"||Array.isArray(n)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(n){return isAnimationControls(n.animate)||variantProps.some(e=>isVariantLabel(n[e]))}function isVariantNode(n){return!!(isControllingVariants(n)||n.variants)}function getCurrentTreeVariants(n,e){if(isControllingVariants(n)){const{initial:s,animate:o}=n;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(o)?o:void 0}}return n.inherit!==!1?e:{}}function useCreateMotionContext(n){const{initial:e,animate:s}=getCurrentTreeVariants(n,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:s}),[variantLabelsAsDependency(e),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(n){return Array.isArray(n)?n.join(" "):n}const scaleCorrectors={};function addScaleCorrector(n){for(const e in n)scaleCorrectors[e]=n[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(n,{layout:e,layoutId:s}){return transformProps.has(n)||n.startsWith("origin")||(e||s!==void 0)&&(!!scaleCorrectors[n]||n==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(n,e,s){let o="",a=!0;for(let c=0;c<numTransforms;c++){const u=transformPropOrder[c],h=n[u];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(u.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||s){const g=getValueAsType(h,numberValueTypes[u]);if(!m){a=!1;const _=translateAlias[u]||u;o+=`${_}(${g}) `}s&&(e[u]=g)}}return o=o.trim(),s?o=s(e,a?"":o):a&&(o="none"),o}function buildHTMLStyles(n,e,s){const{style:o,vars:a,transformOrigin:c}=n;let u=!1,h=!1;for(const m in e){const g=e[m];if(transformProps.has(m)){u=!0;continue}else if(isCSSVariableName(m)){a[m]=g;continue}else{const _=getValueAsType(g,numberValueTypes[m]);m.startsWith("origin")?(h=!0,c[m]=_):o[m]=_}}if(e.transform||(u||s?o.transform=buildTransform(e,n.transform,s):o.transform&&(o.transform="none")),h){const{originX:m="50%",originY:g="50%",originZ:_=0}=c;o.transformOrigin=`${m} ${g} ${_}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(n,e,s){for(const o in e)!isMotionValue(e[o])&&!isForcedMotionValue(o,s)&&(n[o]=e[o])}function useInitialMotionValues({transformTemplate:n},e){return reactExports.useMemo(()=>{const s=createHtmlRenderState();return buildHTMLStyles(s,e,n),Object.assign({},s.vars,s.style)},[e])}function useStyle(n,e){const s=n.style||{},o={};return copyRawValuesOnly(o,s,n),Object.assign(o,useInitialMotionValues(n,e)),o}function useHTMLProps(n,e){const s={},o=useStyle(n,e);return n.drag&&n.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(s.tabIndex=0),s.style=o,s}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(n,e,s=1,o=0,a=!0){n.pathLength=1;const c=a?dashKeys:camelKeys;n[c.offset]=px.transform(-o);const u=px.transform(e),h=px.transform(s);n[c.array]=`${u} ${h}`}function buildSVGAttrs(n,{attrX:e,attrY:s,attrScale:o,pathLength:a,pathSpacing:c=1,pathOffset:u=0,...h},m,g,_){if(buildHTMLStyles(n,h,g),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:b,style:T}=n;b.transform&&(T.transform=b.transform,delete b.transform),(T.transform||b.transformOrigin)&&(T.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),T.transform&&(T.transformBox=_?.transformBox??"fill-box",delete b.transformBox),e!==void 0&&(b.x=e),s!==void 0&&(b.y=s),o!==void 0&&(b.scale=o),a!==void 0&&buildSVGPath(b,a,c,u,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=n=>typeof n=="string"&&n.toLowerCase()==="svg";function useSVGProps(n,e,s,o){const a=reactExports.useMemo(()=>{const c=createSvgRenderState();return buildSVGAttrs(c,e,isSVGTag(o),n.transformTemplate,n.style),{...c.attrs,style:{...c.style}}},[e]);if(n.style){const c={};copyRawValuesOnly(c,n.style,n),a.style={...c,...a.style}}return a}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(n){return typeof n!="string"||n.includes("-")?!1:!!(lowercaseSVGElements.indexOf(n)>-1||/[A-Z]/u.test(n))}function useRender(n,e,s,{latestValues:o},a,c=!1){const h=(isSVGComponent(n)?useSVGProps:useHTMLProps)(e,o,a,n),m=filterProps(e,typeof n=="string",c),g=n!==reactExports.Fragment?{...m,...h,ref:s}:{},{children:_}=e,b=reactExports.useMemo(()=>isMotionValue(_)?_.get():_,[_]);return reactExports.createElement(n,{...g,children:b})}function getValueState(n){const e=[{},{}];return n?.values.forEach((s,o)=>{e[0][o]=s.get(),e[1][o]=s.getVelocity()}),e}function resolveVariantFromProps(n,e,s,o){if(typeof e=="function"){const[a,c]=getValueState(o);e=e(s!==void 0?s:n.custom,a,c)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[a,c]=getValueState(o);e=e(s!==void 0?s:n.custom,a,c)}return e}function resolveMotionValue(n){return isMotionValue(n)?n.get():n}function makeState({scrapeMotionValuesFromProps:n,createRenderState:e},s,o,a){return{latestValues:makeLatestValues(s,o,a,n),renderState:e()}}function makeLatestValues(n,e,s,o){const a={},c=o(n,{});for(const T in c)a[T]=resolveMotionValue(c[T]);let{initial:u,animate:h}=n;const m=isControllingVariants(n),g=isVariantNode(n);e&&g&&!m&&n.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let _=s?s.initial===!1:!1;_=_||u===!1;const b=_?h:u;if(b&&typeof b!="boolean"&&!isAnimationControls(b)){const T=Array.isArray(b)?b:[b];for(let A=0;A<T.length;A++){const R=resolveVariantFromProps(n,T[A]);if(R){const{transitionEnd:w,transition:D,...fn}=R;for(const yn in fn){let pn=fn[yn];if(Array.isArray(pn)){const wn=_?pn.length-1:0;pn=pn[wn]}pn!==null&&(a[yn]=pn)}for(const yn in w)a[yn]=w[yn]}}}return a}const makeUseVisualState=n=>(e,s)=>{const o=reactExports.useContext(MotionContext),a=reactExports.useContext(PresenceContext),c=()=>makeState(n,e,o,a);return s?c():useConstant(c)};function scrapeMotionValuesFromProps$1(n,e,s){const{style:o}=n,a={};for(const c in o)(isMotionValue(o[c])||e.style&&isMotionValue(e.style[c])||isForcedMotionValue(c,n)||s?.getValue(c)?.liveStyle!==void 0)&&(a[c]=o[c]);return a}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(n,e,s){const o=scrapeMotionValuesFromProps$1(n,e,s);for(const a in n)if(isMotionValue(n[a])||isMotionValue(e[a])){const c=transformPropOrder.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;o[c]=n[a]}return o}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function useMotionRef(n,e,s){return reactExports.useCallback(o=>{o&&n.onMount&&n.onMount(o),e&&(o?e.mount(o):e.unmount()),s&&(typeof s=="function"?s(o):isRefObject(s)&&(s.current=o))},[e])}const camelToDash=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(n,e,s,o,a){const{visualElement:c}=reactExports.useContext(MotionContext),u=reactExports.useContext(LazyContext),h=reactExports.useContext(PresenceContext),m=reactExports.useContext(MotionConfigContext).reducedMotion,g=reactExports.useRef(null);o=o||u.renderer,!g.current&&o&&(g.current=o(n,{visualState:e,parent:c,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const _=g.current,b=reactExports.useContext(SwitchLayoutGroupContext);_&&!_.projection&&a&&(_.type==="html"||_.type==="svg")&&createProjectionNode$1(g.current,s,a,b);const T=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{_&&T.current&&_.update(s,h)});const A=s[optimizedAppearDataAttribute],R=reactExports.useRef(!!A&&!window.MotionHandoffIsComplete?.(A)&&window.MotionHasOptimisedAnimation?.(A));return useIsomorphicLayoutEffect$1(()=>{_&&(T.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),_.scheduleRenderMicrotask(),R.current&&_.animationState&&_.animationState.animateChanges())}),reactExports.useEffect(()=>{_&&(!R.current&&_.animationState&&_.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(A)}),R.current=!1),_.enteringChildren=void 0)}),_}function createProjectionNode$1(n,e,s,o){const{layoutId:a,layout:c,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:g,layoutCrossfade:_}=e;n.projection=new s(n.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(n.parent)),n.projection.setOptions({layoutId:a,layout:c,alwaysMeasureLayout:!!u||h&&isRefObject(h),visualElement:n,animationType:typeof c=="string"?c:"both",initialPromotionConfig:o,crossfade:_,layoutScroll:m,layoutRoot:g})}function getClosestProjectingNode(n){if(n)return n.options.allowProjection!==!1?n.projection:getClosestProjectingNode(n.parent)}function createMotionComponent(n,{forwardMotionProps:e=!1}={},s,o){s&&loadFeatures(s);const a=isSVGComponent(n)?useSVGVisualState:useHTMLVisualState;function c(h,m){let g;const _={...reactExports.useContext(MotionConfigContext),...h,layoutId:useLayoutId(h)},{isStatic:b}=_,T=useCreateMotionContext(h),A=a(h,b);if(!b&&isBrowser){useStrictMode();const R=getProjectionFunctionality(_);g=R.MeasureLayout,T.visualElement=useVisualElement(n,A,_,o,R.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:T,children:[g&&T.visualElement?jsxRuntimeExports.jsx(g,{visualElement:T.visualElement,..._}):null,useRender(n,h,useMotionRef(A,T.visualElement,m),A,b,e)]})}c.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const u=reactExports.forwardRef(c);return u[motionComponentSymbol]=n,u}function useLayoutId({layoutId:n}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&n!==void 0?e+"-"+n:n}function useStrictMode(n,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(n){const{drag:e,layout:s}=featureDefinitions;if(!e&&!s)return{};const o={...e,...s};return{MeasureLayout:e?.isEnabled(n)||s?.isEnabled(n)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function createMotionProxy(n,e){if(typeof Proxy>"u")return createMotionComponent;const s=new Map,o=(c,u)=>createMotionComponent(c,u,n,e),a=(c,u)=>o(c,u);return new Proxy(a,{get:(c,u)=>u==="create"?o:(s.has(u)||s.set(u,createMotionComponent(u,void 0,n,e)),s.get(u))})}function convertBoundingBoxToBox({top:n,left:e,right:s,bottom:o}){return{x:{min:e,max:s},y:{min:n,max:o}}}function convertBoxToBoundingBox({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function transformBoxPoints(n,e){if(!e)return n;const s=e({x:n.left,y:n.top}),o=e({x:n.right,y:n.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function isIdentityScale(n){return n===void 0||n===1}function hasScale({scale:n,scaleX:e,scaleY:s}){return!isIdentityScale(n)||!isIdentityScale(e)||!isIdentityScale(s)}function hasTransform(n){return hasScale(n)||has2DTranslate(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function has2DTranslate(n){return is2DTranslate(n.x)||is2DTranslate(n.y)}function is2DTranslate(n){return n&&n!=="0%"}function scalePoint(n,e,s){const o=n-s,a=e*o;return s+a}function applyPointDelta(n,e,s,o,a){return a!==void 0&&(n=scalePoint(n,a,o)),scalePoint(n,s,o)+e}function applyAxisDelta(n,e=0,s=1,o,a){n.min=applyPointDelta(n.min,e,s,o,a),n.max=applyPointDelta(n.max,e,s,o,a)}function applyBoxDelta(n,{x:e,y:s}){applyAxisDelta(n.x,e.translate,e.scale,e.originPoint),applyAxisDelta(n.y,s.translate,s.scale,s.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(n,e,s,o=!1){const a=s.length;if(!a)return;e.x=e.y=1;let c,u;for(let h=0;h<a;h++){c=s[h],u=c.projectionDelta;const{visualElement:m}=c.options;m&&m.props.style&&m.props.style.display==="contents"||(o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&transformBox(n,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,applyBoxDelta(n,u)),o&&hasTransform(c.latestValues)&&transformBox(n,c.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(n,e){n.min=n.min+e,n.max=n.max+e}function transformAxis(n,e,s,o,a=.5){const c=mixNumber$1(n.min,n.max,a);applyAxisDelta(n,e,s,c,o)}function transformBox(n,e){transformAxis(n.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(n.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(n,e){return convertBoundingBoxToBox(transformBoxPoints(n.getBoundingClientRect(),e))}function measurePageBox(n,e,s){const o=measureViewportBox(n,s),{scroll:a}=e;return a&&(translateAxis(o.x,a.offset.x),translateAxis(o.y,a.offset.y)),o}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=n.matches;n.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(n,e,s){for(const o in e){const a=e[o],c=s[o];if(isMotionValue(a))n.addValue(o,a);else if(isMotionValue(c))n.addValue(o,motionValue(a,{owner:n}));else if(c!==a)if(n.hasValue(o)){const u=n.getValue(o);u.liveStyle===!0?u.jump(a):u.hasAnimated||u.set(a)}else{const u=n.getStaticValue(o);n.addValue(o,motionValue(u!==void 0?u:a,{owner:n}))}}for(const o in s)e[o]===void 0&&n.removeValue(o);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,s,o){return{}}constructor({parent:e,props:s,presenceContext:o,reducedMotionConfig:a,blockInitialAnimation:c,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=time.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,frame.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=u;this.latestValues=m,this.baseTarget={...m},this.initialValues=s.initial?{...m}:{},this.renderState=g,this.parent=e,this.props=s,this.presenceContext=o,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!c,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...b}=this.scrapeMotionValuesFromProps(s,{},this);for(const T in b){const A=b[T];m[T]!==void 0&&isMotionValue(A)&&A.set(m[T])}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const o=transformProps.has(e);o&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&frame.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{a(),c&&c(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const s=featureDefinitions[e];if(!s)continue;const{isEnabled:o,Feature:a}=s;if(!this.features[e]&&a&&o(this.props)&&(this.features[e]=new a(this)),this.features[e]){const c=this.features[e];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<propEventHandlers.length;o++){const a=propEventHandlers[o];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c="on"+a,u=e[c];u&&(this.propEventSubscriptions[a]=this.on(a,u))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const o=this.values.get(e);s!==o&&(o&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let o=this.values.get(e);return o===void 0&&s!==void 0&&(o=motionValue(s===null?void 0:s,{owner:this}),this.addValue(e,o)),o}readValue(e,s){let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(isNumericalString(o)||isZeroValueString(o))?o=parseFloat(o):!findValueType(o)&&complex.test(s)&&(o=getAnimatableNone(e,s)),this.setBaseTarget(e,isMotionValue(o)?o.get():o)),isMotionValue(o)?o.get():o}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const c=resolveVariantFromProps(this.props,s,this.presenceContext?.custom);c&&(o=c[e])}if(s&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!isMotionValue(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:o}){delete s[e],delete o[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function renderHTML(n,{style:e,vars:s},o,a){const c=n.style;let u;for(u in e)c[u]=e[u];a?.applyProjectionStyles(c,o);for(u in s)c.setProperty(u,s[u])}function getComputedStyle$1(n){return window.getComputedStyle(n)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,s){if(transformProps.has(s))return this.projection?.isProjecting?defaultTransformValue(s):readTransformValue(e,s);{const o=getComputedStyle$1(e),a=(isCSSVariableName(s)?o.getPropertyValue(s):o[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:s}){return measureViewportBox(e,s)}build(e,s,o){buildHTMLStyles(e,s,o.transformTemplate)}scrapeMotionValuesFromProps(e,s,o){return scrapeMotionValuesFromProps$1(e,s,o)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(n,e,s,o){renderHTML(n,e,void 0,o);for(const a in e.attrs)n.setAttribute(camelCaseAttributes.has(a)?a:camelToDash(a),e.attrs[a])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(transformProps.has(s)){const o=getDefaultValueType(s);return o&&o.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,o){return scrapeMotionValuesFromProps(e,s,o)}build(e,s,o){buildSVGAttrs(e,s,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(e,s,o,a){renderSVG(e,s,o,a)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(n,e)=>isSVGComponent(n)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:n!==reactExports.Fragment});function resolveVariant(n,e,s){const o=n.getProps();return resolveVariantFromProps(o,e,s!==void 0?s:o.custom,n)}const isKeyframesTarget=n=>Array.isArray(n);function setMotionValue(n,e,s){n.hasValue(e)?n.getValue(e).set(s):n.addValue(e,motionValue(s))}function resolveFinalValueInKeyframes(n){return isKeyframesTarget(n)?n[n.length-1]||0:n}function setTarget(n,e){const s=resolveVariant(n,e);let{transitionEnd:o={},transition:a={},...c}=s||{};c={...c,...o};for(const u in c){const h=resolveFinalValueInKeyframes(c[u]);setMotionValue(n,u,h)}}function isWillChangeMotionValue(n){return!!(isMotionValue(n)&&n.add)}function addValueToWillChange(n,e){const s=n.getValue("willChange");if(isWillChangeMotionValue(s))return s.add(e);if(!s&&MotionGlobalConfig.WillChange){const o=new MotionGlobalConfig.WillChange("auto");n.addValue("willChange",o),o.add(e)}}function getOptimisedAppearId(n){return n.props[optimizedAppearDataAttribute]}const isNotNull=n=>n!==null;function getFinalKeyframe(n,{repeat:e,repeatType:s="loop"},o){const a=n.filter(isNotNull),c=e&&s!=="loop"&&e%2===1?0:a.length-1;return a[c]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(n,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(n)?n.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:n,delay:e,delayChildren:s,staggerChildren:o,staggerDirection:a,repeat:c,repeatType:u,repeatDelay:h,from:m,elapsed:g,..._}){return!!Object.keys(_).length}const animateMotionValue=(n,e,s,o={},a,c)=>u=>{const h=getValueTransition(o,n)||{},m=h.delay||o.delay||0;let{elapsed:g=0}=o;g=g-secondsToMilliseconds(m);const _={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-g,onUpdate:T=>{e.set(T),h.onUpdate&&h.onUpdate(T)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:c?void 0:a};isTransitionDefined(h)||Object.assign(_,getDefaultTransition(n,_)),_.duration&&(_.duration=secondsToMilliseconds(_.duration)),_.repeatDelay&&(_.repeatDelay=secondsToMilliseconds(_.repeatDelay)),_.from!==void 0&&(_.keyframes[0]=_.from);let b=!1;if((_.type===!1||_.duration===0&&!_.repeatDelay)&&(makeAnimationInstant(_),_.delay===0&&(b=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(b=!0,makeAnimationInstant(_),_.delay=0),_.allowFlatten=!h.type&&!h.ease,b&&!c&&e.get()!==void 0){const T=getFinalKeyframe(_.keyframes,h);if(T!==void 0){frame.update(()=>{_.onUpdate(T),_.onComplete()});return}}return h.isSync?new JSAnimation(_):new AsyncMotionValueAnimation(_)};function shouldBlockAnimation({protectedKeys:n,needsAnimating:e},s){const o=n.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,o}function animateTarget(n,e,{delay:s=0,transitionOverride:o,type:a}={}){let{transition:c=n.getDefaultTransition(),transitionEnd:u,...h}=e;o&&(c=o);const m=[],g=a&&n.animationState&&n.animationState.getState()[a];for(const _ in h){const b=n.getValue(_,n.latestValues[_]??null),T=h[_];if(T===void 0||g&&shouldBlockAnimation(g,_))continue;const A={delay:s,...getValueTransition(c||{},_)},R=b.get();if(R!==void 0&&!b.isAnimating&&!Array.isArray(T)&&T===R&&!A.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const fn=getOptimisedAppearId(n);if(fn){const yn=window.MotionHandoffAnimation(fn,_,frame);yn!==null&&(A.startTime=yn,w=!0)}}addValueToWillChange(n,_),b.start(animateMotionValue(_,b,T,n.shouldReduceMotion&&positionalKeys.has(_)?{type:!1}:A,n,w));const D=b.animation;D&&m.push(D)}return u&&Promise.all(m).then(()=>{frame.update(()=>{u&&setTarget(n,u)})}),m}function calcChildStagger(n,e,s,o=0,a=1){const c=Array.from(n).sort((g,_)=>g.sortNodePosition(_)).indexOf(e),u=n.size,h=(u-1)*o;return typeof s=="function"?s(c,u):a===1?c*o:h-c*o}function animateVariant(n,e,s={}){const o=resolveVariant(n,e,s.type==="exit"?n.presenceContext?.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(a=s.transitionOverride);const c=o?()=>Promise.all(animateTarget(n,o,s)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:_,staggerDirection:b}=a;return animateChildren(n,e,m,g,_,b,s)}:()=>Promise.resolve(),{when:h}=a;if(h){const[m,g]=h==="beforeChildren"?[c,u]:[u,c];return m().then(()=>g())}else return Promise.all([c(),u(s.delay)])}function animateChildren(n,e,s=0,o=0,a=0,c=1,u){const h=[];for(const m of n.variantChildren)m.notify("AnimationStart",e),h.push(animateVariant(m,e,{...u,delay:s+(typeof o=="function"?0:o)+calcChildStagger(n.variantChildren,m,o,a,c)}).then(()=>m.notify("AnimationComplete",e)));return Promise.all(h)}function animateVisualElement(n,e,s={}){n.notify("AnimationStart",e);let o;if(Array.isArray(e)){const a=e.map(c=>animateVariant(n,c,s));o=Promise.all(a)}else if(typeof e=="string")o=animateVariant(n,e,s);else{const a=typeof e=="function"?resolveVariant(n,e,s.custom):e;o=Promise.all(animateTarget(n,a,s))}return o.then(()=>{n.notify("AnimationComplete",e)})}function shallowCompare(n,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==n.length)return!1;for(let o=0;o<s;o++)if(e[o]!==n[o])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(n){if(!n)return;if(!n.isControllingVariants){const s=n.parent?getVariantContext(n.parent)||{}:{};return n.props.initial!==void 0&&(s.initial=n.props.initial),s}const e={};for(let s=0;s<numVariantProps;s++){const o=variantProps[s],a=n.props[o];(isVariantLabel(a)||a===!1)&&(e[o]=a)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(n){return e=>Promise.all(e.map(({animation:s,options:o})=>animateVisualElement(n,s,o)))}function createAnimationState(n){let e=animateList(n),s=createState(),o=!0;const a=m=>(g,_)=>{const b=resolveVariant(n,_,m==="exit"?n.presenceContext?.custom:void 0);if(b){const{transition:T,transitionEnd:A,...R}=b;g={...g,...R,...A}}return g};function c(m){e=m(n)}function u(m){const{props:g}=n,_=getVariantContext(n.parent)||{},b=[],T=new Set;let A={},R=1/0;for(let D=0;D<numAnimationTypes;D++){const fn=reversePriorityOrder[D],yn=s[fn],pn=g[fn]!==void 0?g[fn]:_[fn],wn=isVariantLabel(pn),V=fn===m?yn.isActive:null;V===!1&&(R=D);let bn=pn===_[fn]&&pn!==g[fn]&&wn;if(bn&&o&&n.manuallyAnimateOnMount&&(bn=!1),yn.protectedKeys={...A},!yn.isActive&&V===null||!pn&&!yn.prevProp||isAnimationControls(pn)||typeof pn=="boolean")continue;const wt=checkVariantsDidChange(yn.prevProp,pn);let jt=wt||fn===m&&yn.isActive&&!bn&&wn||D>R&&wn,ln=!1;const vn=Array.isArray(pn)?pn:[pn];let dn=vn.reduce(a(fn),{});V===!1&&(dn={});const{prevResolvedValues:mn={}}=yn,zt={...mn,...dn},$n=Cn=>{jt=!0,T.has(Cn)&&(ln=!0,T.delete(Cn)),yn.needsAnimating[Cn]=!0;const On=n.getValue(Cn);On&&(On.liveStyle=!1)};for(const Cn in zt){const On=dn[Cn],Fn=mn[Cn];if(A.hasOwnProperty(Cn))continue;let An=!1;isKeyframesTarget(On)&&isKeyframesTarget(Fn)?An=!shallowCompare(On,Fn):An=On!==Fn,An?On!=null?$n(Cn):T.add(Cn):On!==void 0&&T.has(Cn)?$n(Cn):yn.protectedKeys[Cn]=!0}yn.prevProp=pn,yn.prevResolvedValues=dn,yn.isActive&&(A={...A,...dn}),o&&n.blockInitialAnimation&&(jt=!1);const Sn=bn&&wt;jt&&(!Sn||ln)&&b.push(...vn.map(Cn=>{const On={type:fn};if(typeof Cn=="string"&&o&&!Sn&&n.manuallyAnimateOnMount&&n.parent){const{parent:Fn}=n,An=resolveVariant(Fn,Cn);if(Fn.enteringChildren&&An){const{delayChildren:Vn}=An.transition||{};On.delay=calcChildStagger(Fn.enteringChildren,n,Vn)}}return{animation:Cn,options:On}}))}if(T.size){const D={};if(typeof g.initial!="boolean"){const fn=resolveVariant(n,Array.isArray(g.initial)?g.initial[0]:g.initial);fn&&fn.transition&&(D.transition=fn.transition)}T.forEach(fn=>{const yn=n.getBaseTarget(fn),pn=n.getValue(fn);pn&&(pn.liveStyle=!0),D[fn]=yn??null}),b.push({animation:D})}let w=!!b.length;return o&&(g.initial===!1||g.initial===g.animate)&&!n.manuallyAnimateOnMount&&(w=!1),o=!1,w?e(b):Promise.resolve()}function h(m,g){if(s[m].isActive===g)return Promise.resolve();n.variantChildren?.forEach(b=>b.animationState?.setActive(m,g)),s[m].isActive=g;const _=u(m);for(const b in s)s[b].protectedKeys={};return _}return{animateChanges:u,setActive:h,setAnimateFunction:c,getState:()=>s,reset:()=>{s=createState(),o=!0}}}function checkVariantsDidChange(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!shallowCompare(e,n):!1}function createTypeState(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const a=this.node.animationState.setActive("exit",!e);s&&!e&&a.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(n,e,s,o={passive:!0}){return n.addEventListener(e,s,o),()=>n.removeEventListener(e,s)}function extractEventInfo(n){return{point:{x:n.pageX,y:n.pageY}}}const addPointerInfo=n=>e=>isPrimaryPointer(e)&&n(e,extractEventInfo(e));function addPointerEvent(n,e,s,o){return addDomEvent(n,e,addPointerInfo(s),o)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(n){return n.max-n.min}function isNear(n,e,s){return Math.abs(n-e)<=s}function calcAxisDelta(n,e,s,o=.5){n.origin=o,n.originPoint=mixNumber$1(e.min,e.max,n.origin),n.scale=calcLength(s)/calcLength(e),n.translate=mixNumber$1(s.min,s.max,n.origin)-n.originPoint,(n.scale>=SCALE_MIN&&n.scale<=SCALE_MAX||isNaN(n.scale))&&(n.scale=1),(n.translate>=TRANSLATE_MIN&&n.translate<=TRANSLATE_MAX||isNaN(n.translate))&&(n.translate=0)}function calcBoxDelta(n,e,s,o){calcAxisDelta(n.x,e.x,s.x,o?o.originX:void 0),calcAxisDelta(n.y,e.y,s.y,o?o.originY:void 0)}function calcRelativeAxis(n,e,s){n.min=s.min+e.min,n.max=n.min+calcLength(e)}function calcRelativeBox(n,e,s){calcRelativeAxis(n.x,e.x,s.x),calcRelativeAxis(n.y,e.y,s.y)}function calcRelativeAxisPosition(n,e,s){n.min=e.min-s.min,n.max=n.min+calcLength(e)}function calcRelativePosition(n,e,s){calcRelativeAxisPosition(n.x,e.x,s.x),calcRelativeAxisPosition(n.y,e.y,s.y)}function eachAxis(n){return[n("x"),n("y")]}const getContextWindow=({current:n})=>n?n.ownerDocument.defaultView:null,distance=(n,e)=>Math.abs(n-e);function distance2D(n,e){const s=distance(n.x,e.x),o=distance(n.y,e.y);return Math.sqrt(s**2+o**2)}class PanSession{constructor(e,s,{transformPagePoint:o,contextWindow:a=window,dragSnapToOrigin:c=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=getPanInfo(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,R=distance2D(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!A&&!R)return;const{point:w}=T,{timestamp:D}=frameData;this.history.push({...w,timestamp:D});const{onStart:fn,onMove:yn}=this.handlers;A||(fn&&fn(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),yn&&yn(this.lastMoveEvent,T)},this.handlePointerMove=(T,A)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=transformPoint(A,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(T,A)=>{this.end();const{onEnd:R,onSessionEnd:w,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const fn=getPanInfo(T.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(A,this.transformPagePoint),this.history);this.startEvent&&R&&R(T,fn),w&&w(T,fn)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=c,this.handlers=s,this.transformPagePoint=o,this.distanceThreshold=u,this.contextWindow=a||window;const h=extractEventInfo(e),m=transformPoint(h,this.transformPagePoint),{point:g}=m,{timestamp:_}=frameData;this.history=[{...g,timestamp:_}];const{onSessionStart:b}=s;b&&b(e,getPanInfo(m,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(n,e){return e?{point:e(n.point)}:n}function subtractPoint(n,e){return{x:n.x-e.x,y:n.y-e.y}}function getPanInfo({point:n},e){return{point:n,delta:subtractPoint(n,lastDevicePoint(e)),offset:subtractPoint(n,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(n){return n[0]}function lastDevicePoint(n){return n[n.length-1]}function getVelocity(n,e){if(n.length<2)return{x:0,y:0};let s=n.length-1,o=null;const a=lastDevicePoint(n);for(;s>=0&&(o=n[s],!(a.timestamp-o.timestamp>secondsToMilliseconds(e)));)s--;if(!o)return{x:0,y:0};const c=millisecondsToSeconds(a.timestamp-o.timestamp);if(c===0)return{x:0,y:0};const u={x:(a.x-o.x)/c,y:(a.y-o.y)/c};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function applyConstraints(n,{min:e,max:s},o){return e!==void 0&&n<e?n=o?mixNumber$1(e,n,o.min):Math.max(n,e):s!==void 0&&n>s&&(n=o?mixNumber$1(s,n,o.max):Math.min(n,s)),n}function calcRelativeAxisConstraints(n,e,s){return{min:e!==void 0?n.min+e:void 0,max:s!==void 0?n.max+s-(n.max-n.min):void 0}}function calcRelativeConstraints(n,{top:e,left:s,bottom:o,right:a}){return{x:calcRelativeAxisConstraints(n.x,s,a),y:calcRelativeAxisConstraints(n.y,e,o)}}function calcViewportAxisConstraints(n,e){let s=e.min-n.min,o=e.max-n.max;return e.max-e.min<n.max-n.min&&([s,o]=[o,s]),{min:s,max:o}}function calcViewportConstraints(n,e){return{x:calcViewportAxisConstraints(n.x,e.x),y:calcViewportAxisConstraints(n.y,e.y)}}function calcOrigin(n,e){let s=.5;const o=calcLength(n),a=calcLength(e);return a>o?s=progress$1(e.min,e.max-o,n.min):o>a&&(s=progress$1(n.min,n.max-a,e.min)),clamp(0,1,s)}function rebaseAxisConstraints(n,e){const s={};return e.min!==void 0&&(s.min=e.min-n.min),e.max!==void 0&&(s.max=e.max-n.min),s}const defaultElastic=.35;function resolveDragElastic(n=defaultElastic){return n===!1?n=0:n===!0&&(n=defaultElastic),{x:resolveAxisElastic(n,"left","right"),y:resolveAxisElastic(n,"top","bottom")}}function resolveAxisElastic(n,e,s){return{min:resolvePointElastic(n,e),max:resolvePointElastic(n,s)}}function resolvePointElastic(n,e){return typeof n=="number"?n:n[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:s=!1,distanceThreshold:o}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const c=b=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(extractEventInfo(b).point)},u=(b,T)=>{const{drag:A,dragPropagation:R,onDragStart:w}=this.getProps();if(A&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(A),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(fn=>{let yn=this.getAxisMotionValue(fn).get()||0;if(percent.test(yn)){const{projection:pn}=this.visualElement;if(pn&&pn.layout){const wn=pn.layout.layoutBox[fn];wn&&(yn=calcLength(wn)*(parseFloat(yn)/100))}}this.originPoint[fn]=yn}),w&&frame.postRender(()=>w(b,T)),addValueToWillChange(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},h=(b,T)=>{this.latestPointerEvent=b,this.latestPanInfo=T;const{dragPropagation:A,dragDirectionLock:R,onDirectionLock:w,onDrag:D}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:fn}=T;if(R&&this.currentDirection===null){this.currentDirection=getCurrentDirection(fn),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",T.point,fn),this.updateAxis("y",T.point,fn),this.visualElement.render(),D&&D(b,T)},m=(b,T)=>{this.latestPointerEvent=b,this.latestPanInfo=T,this.stop(b,T),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>eachAxis(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:_}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:c,onStart:u,onMove:h,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:_,distanceThreshold:o,contextWindow:getContextWindow(this.visualElement)})}stop(e,s){const o=e||this.latestPointerEvent,a=s||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!a||!o)return;const{velocity:u}=a;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&frame.postRender(()=>h(o,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,o){const{drag:a}=this.getProps();if(!o||!shouldDrag(e,a,this.currentDirection))return;const c=this.getAxisMotionValue(e);let u=this.originPoint[e]+o[e];this.constraints&&this.constraints[e]&&(u=applyConstraints(u,this.constraints[e],this.elastic[e])),c.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&o?this.constraints=calcRelativeConstraints(o.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(s),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=rebaseAxisConstraints(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!isRefObject(e))return!1;const o=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=measurePageBox(o,a.root,this.visualElement.getTransformPagePoint());let u=calcViewportConstraints(a.layout.layoutBox,c);if(s){const h=s(convertBoxToBoundingBox(u));this.hasMutatedConstraints=!!h,h&&(u=convertBoundingBoxToBox(h))}return u}startAnimation(e){const{drag:s,dragMomentum:o,dragElastic:a,dragTransition:c,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},g=eachAxis(_=>{if(!shouldDrag(_,s,this.currentDirection))return;let b=m&&m[_]||{};u&&(b={min:0,max:0});const T=a?200:1e6,A=a?40:1e7,R={type:"inertia",velocity:o?e[_]:0,bounceStiffness:T,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...c,...b};return this.startAxisValueAnimation(_,R)});return Promise.all(g).then(h)}startAxisValueAnimation(e,s){const o=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),o.start(animateMotionValue(e,o,0,s,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,o=this.visualElement.getProps(),a=o[s];return a||this.visualElement.getValue(e,(o.initial?o.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(s=>{const{drag:o}=this.getProps();if(!shouldDrag(s,o,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(s);if(a&&a.layout){const{min:u,max:h}=a.layout.layoutBox[s];c.set(e[s]-mixNumber$1(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!isRefObject(s)||!o||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};eachAxis(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const m=h.get();a[u]=calcOrigin({min:m,max:m},this.constraints[u])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),eachAxis(u=>{if(!shouldDrag(u,e,null))return;const h=this.getAxisMotionValue(u),{min:m,max:g}=this.constraints[u];h.set(mixNumber$1(m,g,a[u]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,s=addPointerEvent(e,"pointerdown",m=>{const{drag:g,dragListener:_=!0}=this.getProps();g&&_&&this.start(m)}),o=()=>{const{dragConstraints:m}=this.getProps();isRefObject(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",o);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),frame.read(o);const u=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(eachAxis(_=>{const b=this.getAxisMotionValue(_);b&&(this.originPoint[_]+=m[_].translate,b.set(b.get()+m[_].translate))}),this.visualElement.render())}));return()=>{u(),s(),c(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:u=defaultElastic,dragMomentum:h=!0}=e;return{...e,drag:s,dragDirectionLock:o,dragPropagation:a,dragConstraints:c,dragElastic:u,dragMomentum:h}}}function shouldDrag(n,e,s){return(e===!0||e===n)&&(s===null||s===n)}function getCurrentDirection(n,e=10){let s=null;return Math.abs(n.y)>e?s="y":Math.abs(n.x)>e&&(s="x"),s}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=n=>(e,s)=>{n&&frame.postRender(()=>n(e,s))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:o,onPanEnd:a}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(s),onMove:o,onEnd:(c,u)=>{delete this.session,a&&frame.postRender(()=>a(c,u))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const correctBorderRadius={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(px.test(n))n=parseFloat(n);else return n;const s=pixelsToPercent(n,e.target.x),o=pixelsToPercent(n,e.target.y);return`${s}% ${o}%`}},correctBoxShadow={correct:(n,{treeScale:e,projectionDelta:s})=>{const o=n,a=complex.parse(n);if(a.length>5)return o;const c=complex.createTransformer(n),u=typeof a[0]!="number"?1:0,h=s.x.scale*e.x,m=s.y.scale*e.y;a[0+u]/=h,a[1+u]/=m;const g=mixNumber$1(h,m,.5);return typeof a[2+u]=="number"&&(a[2+u]/=g),typeof a[3+u]=="number"&&(a[3+u]/=g),c(a)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:o,layoutId:a}=this.props,{projection:c}=e;addScaleCorrector(defaultScaleCorrectors),c&&(s.group&&s.group.add(c),o&&o.register&&a&&o.register(c),hasTakenAnySnapshot&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:o,drag:a,isPresent:c}=this.props,{projection:u}=o;return u&&(u.isPresent=c,hasTakenAnySnapshot=!0,a||e.layoutDependency!==s||s===void 0||e.isPresent!==c?u.willUpdate():this.safeToRemove(),e.isPresent!==c&&(c?u.promote():u.relegate()||frame.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:a}=e;hasTakenAnySnapshot=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),o&&o.deregister&&o.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(n){const[e,s]=usePresence(),o=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...n,layoutGroup:o,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:s})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(n,e,s){const o=isMotionValue(n)?n:motionValue(n);return o.start(animateMotionValue("",o,e,s)),o.animation}const compareByDepth=(n,e)=>n.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(n,e){const s=time.now(),o=({timestamp:a})=>{const c=a-s;c>=e&&(cancelFrame(o),n(c-e))};return frame.setup(o,!0),()=>cancelFrame(o)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=n=>typeof n=="string"?parseFloat(n):n,isPx=n=>typeof n=="number"||px.test(n);function mixValues(n,e,s,o,a,c){a?(n.opacity=mixNumber$1(0,s.opacity??1,easeCrossfadeIn(o)),n.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(o))):c&&(n.opacity=mixNumber$1(e.opacity??1,s.opacity??1,o));for(let u=0;u<numBorders;u++){const h=`border${borders[u]}Radius`;let m=getRadius(e,h),g=getRadius(s,h);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||isPx(m)===isPx(g)?(n[h]=Math.max(mixNumber$1(asNumber(m),asNumber(g),o),0),(percent.test(g)||percent.test(m))&&(n[h]+="%")):n[h]=g}(e.rotate||s.rotate)&&(n.rotate=mixNumber$1(e.rotate||0,s.rotate||0,o))}function getRadius(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(n,e,s){return o=>o<n?0:o>e?1:s(progress$1(n,e,o))}function copyAxisInto(n,e){n.min=e.min,n.max=e.max}function copyBoxInto(n,e){copyAxisInto(n.x,e.x),copyAxisInto(n.y,e.y)}function copyAxisDeltaInto(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function removePointDelta(n,e,s,o,a){return n-=e,n=scalePoint(n,1/s,o),a!==void 0&&(n=scalePoint(n,1/a,o)),n}function removeAxisDelta(n,e=0,s=1,o=.5,a,c=n,u=n){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=mixNumber$1(c.min,c.max,o);n===c&&(h-=e),n.min=removePointDelta(n.min,e,s,h,a),n.max=removePointDelta(n.max,e,s,h,a)}function removeAxisTransforms(n,e,[s,o,a],c,u){removeAxisDelta(n,e[s],e[o],e[a],e.scale,c,u)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(n,e,s,o){removeAxisTransforms(n.x,e,xKeys,s?s.x:void 0,o?o.x:void 0),removeAxisTransforms(n.y,e,yKeys,s?s.y:void 0,o?o.y:void 0)}function isAxisDeltaZero(n){return n.translate===0&&n.scale===1}function isDeltaZero(n){return isAxisDeltaZero(n.x)&&isAxisDeltaZero(n.y)}function axisEquals(n,e){return n.min===e.min&&n.max===e.max}function boxEquals(n,e){return axisEquals(n.x,e.x)&&axisEquals(n.y,e.y)}function axisEqualsRounded(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function boxEqualsRounded(n,e){return axisEqualsRounded(n.x,e.x)&&axisEqualsRounded(n.y,e.y)}function aspectRatio(n){return calcLength(n.x)/calcLength(n.y)}function axisDeltaEquals(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let o;for(let a=s;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){o=c;break}}return o?(this.promote(o),!0):!1}promote(e,s){const o=this.lead;if(e!==o&&(this.prevLead=o,this.lead=e,e.show(),o)){o.instance&&o.scheduleRender(),e.scheduleRender(),e.resumeFrom=o,s&&(e.resumeFrom.preserveOpacity=!0),o.snapshot&&(e.snapshot=o.snapshot,e.snapshot.latestValues=o.animationValues||o.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:o}=e;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(n,e,s){let o="";const a=n.x.translate/e.x,c=n.y.translate/e.y,u=s?.z||0;if((a||c||u)&&(o=`translate3d(${a}px, ${c}px, ${u}px) `),(e.x!==1||e.y!==1)&&(o+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:g,rotate:_,rotateX:b,rotateY:T,skewX:A,skewY:R}=s;g&&(o=`perspective(${g}px) ${o}`),_&&(o+=`rotate(${_}deg) `),b&&(o+=`rotateX(${b}deg) `),T&&(o+=`rotateY(${T}deg) `),A&&(o+=`skewX(${A}deg) `),R&&(o+=`skewY(${R}deg) `)}const h=n.x.scale*e.x,m=n.y.scale*e.y;return(h!==1||m!==1)&&(o+=`scale(${h}, ${m})`),o||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(n,e,s,o){const{latestValues:a}=e;a[n]&&(s[n]=a[n],e.setStaticValue(n,0),o&&(o[n]=0))}function cancelTreeOptimisedTransformAnimations(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const s=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:c}=n.options;window.MotionCancelOptimisedAnimation(s,"transform",frame,!(a||c))}const{parent:o}=n;o&&!o.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(o)}function createProjectionNode({attachResizeListener:n,defaultParent:e,measureScroll:s,checkIsScrollRoot:o,resetTransform:a}){return class{constructor(u={},h=e?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new SubscriptionManager),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const m=this.eventHandlers.get(u);m&&m.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=isSVGElement(u)&&!isSVGSVGElement(u),this.instance=u;const{layoutId:h,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),n){let _,b=0;const T=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{b=window.innerWidth}),n(u,()=>{const A=window.innerWidth;A!==b&&(b=A,this.root.updateBlockedByResize=!0,_&&_(),_=delay(T,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||m)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:b,hasRelativeLayoutChanged:T,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||g.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:w,onLayoutAnimationComplete:D}=g.getProps(),fn=!this.targetLayout||!boxEqualsRounded(this.targetLayout,A),yn=!b&&T;if(this.options.layoutRoot||this.resumeFrom||yn||b&&(fn||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const pn={...getValueTransition(R,"layout"),onPlay:w,onComplete:D};(g.shouldReduceMotion||this.options.layoutRoot)&&(pn.delay=0,pn.type=!1),this.startAnimation(pn),this.setAnimationOrigin(_,yn)}else b||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _=0;_<this.path.length;_++){const b=this.path[_];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const h=time.now();frameData.delta=clamp(0,1e3/60,h-frameData.timestamp),frameData.timestamp=h,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const m=o(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:m,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!isDeltaZero(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,_=g!==this.prevTransformTemplateValue;u&&this.instance&&(h||hasTransform(this.latestValues)||_)&&(a(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return u&&(m=this.removeTransform(m)),roundBox(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return createBox();const h=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:g}=this.root;g&&(translateAxis(h.x,g.offset.x),translateAxis(h.y,g.offset.y))}return h}removeElementScroll(u){const h=createBox();if(copyBoxInto(h,u),this.scroll?.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:_,options:b}=g;g!==this.root&&_&&b.layoutScroll&&(_.wasRoot&&copyBoxInto(h,u),translateAxis(h.x,_.offset.x),translateAxis(h.y,_.offset.y))}return h}applyTransform(u,h=!1){const m=createBox();copyBoxInto(m,u);for(let g=0;g<this.path.length;g++){const _=this.path[g];!h&&_.options.layoutScroll&&_.scroll&&_!==_.root&&transformBox(m,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),hasTransform(_.latestValues)&&transformBox(m,_.latestValues)}return hasTransform(this.latestValues)&&transformBox(m,this.latestValues),m}removeTransform(u){const h=createBox();copyBoxInto(h,u);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!hasTransform(g.latestValues))continue;hasScale(g.latestValues)&&g.updateSnapshot();const _=createBox(),b=g.measurePageBox();copyBoxInto(_,b),removeBoxTransforms(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,_)}return hasTransform(this.latestValues)&&removeBoxTransforms(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:b}=this.options;if(!(!this.layout||!(_||b))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,T.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),h=!!this.resumingFrom||this!==u;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(m=!1),m)return;const{layout:g,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||_))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,T=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=createBox());const{target:A}=u;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==T||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(u,h=!1){const m=this.snapshot,g=m?m.latestValues:{},_={...this.latestValues},b=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const T=createBox(),A=m?m.source:void 0,R=this.layout?this.layout.source:void 0,w=A!==R,D=this.getStack(),fn=!D||D.members.length<=1,yn=!!(w&&!fn&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let pn;this.mixTargetDelta=wn=>{const V=wn/1e3;mixAxisDelta(b.x,u.x,V),mixAxisDelta(b.y,u.y,V),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,T,V),pn&&boxEquals(this.relativeTarget,pn)&&(this.isProjectionDirty=!1),pn||(pn=createBox()),copyBoxInto(pn,this.relativeTarget)),w&&(this.animationValues=_,mixValues(_,g,this.latestValues,V,yn,fn)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:m,layout:g,latestValues:_}=u;if(!(!h||!m||!g)){if(this!==u&&this.layout&&g&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||createBox();const b=calcLength(this.layout.layoutBox.x);m.x.min=u.target.x.min,m.x.max=m.x.min+b;const T=calcLength(this.layout.layoutBox.y);m.y.min=u.target.y.min,m.y.max=m.y.min+T}copyBoxInto(h,m),transformBox(h,_),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,h,_)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new NodeStack),this.sharedNodes.get(u).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:m}=u;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const g={};m.z&&resetDistortingTransform("z",u,g,this.animationValues);for(let _=0;_<transformAxes.length;_++)resetDistortingTransform(`rotate${transformAxes[_]}`,u,g,this.animationValues),resetDistortingTransform(`skew${transformAxes[_]}`,u,g,this.animationValues);u.render();for(const _ in g)u.setStaticValue(_,g[_]),this.animationValues&&(this.animationValues[_]=g[_]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=resolveMotionValue(h?.pointerEvents)||"",u.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=resolveMotionValue(h?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(u.transform=m?m({},""):"none",this.hasProjected=!1);return}u.visibility="";const _=g.animationValues||g.latestValues;this.applyTransformsToTarget();let b=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,_);m&&(b=m(_,b)),u.transform=b;const{x:T,y:A}=this.projectionDelta;u.transformOrigin=`${T.origin*100}% ${A.origin*100}% 0`,g.animationValues?u.opacity=g===this?_.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:u.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const R in scaleCorrectors){if(_[R]===void 0)continue;const{correct:w,applyTo:D,isCSSVariable:fn}=scaleCorrectors[R],yn=b==="none"?_[R]:w(_[R],g);if(D){const pn=D.length;for(let wn=0;wn<pn;wn++)u[D[wn]]=yn}else fn?this.options.visualElement.renderState.vars[R]=yn:u[R]=yn}this.options.layoutId&&(u.pointerEvents=g===this?resolveMotionValue(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(n){n.updateLayout()}function notifyLayoutUpdate(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=n.layout,{animationType:a}=n.options,c=e.source!==n.layout.source;a==="size"?eachAxis(_=>{const b=c?e.measuredBox[_]:e.layoutBox[_],T=calcLength(b);b.min=s[_].min,b.max=b.min+T}):shouldAnimatePositionOnly(a,e.layoutBox,s)&&eachAxis(_=>{const b=c?e.measuredBox[_]:e.layoutBox[_],T=calcLength(s[_]);b.max=b.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[_].max=n.relativeTarget[_].min+T)});const u=createDelta();calcBoxDelta(u,s,e.layoutBox);const h=createDelta();c?calcBoxDelta(h,n.applyTransform(o,!0),e.measuredBox):calcBoxDelta(h,s,e.layoutBox);const m=!isDeltaZero(u);let g=!1;if(!n.resumeFrom){const _=n.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:b,layout:T}=_;if(b&&T){const A=createBox();calcRelativePosition(A,e.layoutBox,b.layoutBox);const R=createBox();calcRelativePosition(R,s,T.layoutBox),boxEqualsRounded(A,R)||(g=!0),_.options.layoutRoot&&(n.relativeTarget=R,n.relativeTargetOrigin=A,n.relativeParent=_)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function propagateDirtyNodes(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function cleanDirtyNodes(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function clearSnapshot(n){n.clearSnapshot()}function clearMeasurements(n){n.clearMeasurements()}function clearIsLayoutDirty(n){n.isLayoutDirty=!1}function resetTransformStyle(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function finishAnimation(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function resolveTargetDelta(n){n.resolveTargetDelta()}function calcProjection(n){n.calcProjection()}function resetSkewAndRotation(n){n.resetSkewAndRotation()}function removeLeadSnapshots(n){n.removeLeadSnapshot()}function mixAxisDelta(n,e,s){n.translate=mixNumber$1(e.translate,0,s),n.scale=mixNumber$1(e.scale,1,s),n.origin=e.origin,n.originPoint=e.originPoint}function mixAxis(n,e,s,o){n.min=mixNumber$1(e.min,s.min,o),n.max=mixNumber$1(e.max,s.max,o)}function mixBox(n,e,s,o){mixAxis(n.x,e.x,s.x,o),mixAxis(n.y,e.y,s.y,o)}function hasOpacityCrossfade(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(n){n.min=roundPoint(n.min),n.max=roundPoint(n.max)}function roundBox(n){roundAxis(n.x),roundAxis(n.y)}function shouldAnimatePositionOnly(n,e,s){return n==="position"||n==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(s),.2)}function checkNodeWasScrollRoot(n){return n!==n.root&&n.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(n,e)=>addDomEvent(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const n=new DocumentProjectionNode({});n.mount(window),n.setOptions({layoutScroll:!0}),rootProjectionNode.current=n}return rootProjectionNode.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(n,e,s){const{props:o}=n;n.animationState&&o.whileHover&&n.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,c=o[a];c&&frame.postRender(()=>c(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(s,o)=>(handleHoverEvent(this.node,o,"Start"),a=>handleHoverEvent(this.node,a,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(n,e,s){const{props:o}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&o.whileTap&&n.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),c=o[a];c&&frame.postRender(()=>c(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(s,o)=>(handlePressEvent(this.node,o,"Start"),(a,{success:c})=>handlePressEvent(this.node,a,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=n=>{const e=observerCallbacks.get(n.target);e&&e(n)},fireAllObserverCallbacks=n=>{n.forEach(fireObserverCallback)};function initIntersectionObserver({root:n,...e}){const s=n||document;observers.has(s)||observers.set(s,{});const o=observers.get(s),a=JSON.stringify(e);return o[a]||(o[a]=new IntersectionObserver(fireAllObserverCallbacks,{root:n,...e})),o[a]}function observeIntersection(n,e,s){const o=initIntersectionObserver(e);return observerCallbacks.set(n,s),o.observe(n),()=>{observerCallbacks.delete(n),o.unobserve(n)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:o,amount:a="some",once:c}=e,u={root:s?s.current:void 0,rootMargin:o,threshold:typeof a=="number"?a:thresholdNames[a]},h=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,c&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:_,onViewportLeave:b}=this.node.getProps(),T=g?_:b;T&&T(m)};return observeIntersection(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:n={}},{viewport:e={}}={}){return s=>n[s]!==e[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement),findById=(n,e)=>n.find(s=>s.id===e);function findToast(n,e){const s=getToastPosition(n,e),o=s?n[s].findIndex(a=>a.id===e):-1;return{position:s,index:o}}function getToastPosition(n,e){for(const[s,o]of Object.entries(n))if(findById(o,e))return s}function getToastStyle(n){const e=n.includes("right"),s=n.includes("left");let o="center";return e&&(o="flex-end"),s&&(o="flex-start"),{display:"flex",flexDirection:"column",alignItems:o}}function getToastListStyle(n){const s=n==="top"||n==="bottom"?"0 auto":void 0,o=n.includes("top")?"env(safe-area-inset-top, 0px)":void 0,a=n.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,c=n.includes("left")?void 0:"env(safe-area-inset-right, 0px)",u=n.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:s,top:o,bottom:a,right:c,left:u}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize(function(n){return reactPropsRegex.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(e){return e!=="theme"},getDefaultShouldForwardProp=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(e,s,o){var a;if(s){var c=s.shouldForwardProp;a=e.__emotion_forwardProp&&c?function(u){return e.__emotion_forwardProp(u)&&c(u)}:c}return typeof a!="function"&&o&&(a=e.__emotion_forwardProp),a},Insertion=function(e){var s=e.cache,o=e.serialized,a=e.isStringTag;return registerStyles(s,o,a),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(s,o,a)}),null},createStyled=function n(e,s){var o=e.__emotion_real===e,a=o&&e.__emotion_base||e,c,u;s!==void 0&&(c=s.label,u=s.target);var h=composeShouldForwardProps(e,s,o),m=h||getDefaultShouldForwardProp(a),g=!m("as");return function(){var _=arguments,b=o&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(c!==void 0&&b.push("label:"+c+";"),_[0]==null||_[0].raw===void 0)b.push.apply(b,_);else{var T=_[0];b.push(T[0]);for(var A=_.length,R=1;R<A;R++)b.push(_[R],T[R])}var w=withEmotionCache(function(D,fn,yn){var pn=g&&D.as||a,wn="",V=[],bn=D;if(D.theme==null){bn={};for(var wt in D)bn[wt]=D[wt];bn.theme=reactExports.useContext(ThemeContext)}typeof D.className=="string"?wn=getRegisteredStyles(fn.registered,V,D.className):D.className!=null&&(wn=D.className+" ");var jt=serializeStyles(b.concat(V),fn.registered,bn);wn+=fn.key+"-"+jt.name,u!==void 0&&(wn+=" "+u);var ln=g&&h===void 0?getDefaultShouldForwardProp(pn):m,vn={};for(var dn in D)g&&dn==="as"||ln(dn)&&(vn[dn]=D[dn]);return vn.className=wn,yn&&(vn.ref=yn),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:fn,serialized:jt,isStringTag:typeof pn=="string"}),reactExports.createElement(pn,vn))});return w.displayName=c!==void 0?c:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",w.defaultProps=e.defaultProps,w.__emotion_real=w,w.__emotion_base=a,w.__emotion_styles=b,w.__emotion_forwardProp=h,Object.defineProperty(w,"toString",{value:function(){return"."+u}}),w.withComponent=function(D,fn){var yn=n(D,_extends$1({},s,fn,{shouldForwardProp:composeShouldForwardProps(w,fn,!0)}));return yn.apply(void 0,b)},w}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],styled$1=createStyled.bind(null);tags.forEach(function(n){styled$1[n]=styled$1(n)});const allPropNames=new Set([...propNames,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),validHTMLProps=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function shouldForwardProp(n){return(validHTMLProps.has(n)||!allPropNames.has(n))&&n[0]!=="_"}const emotion_styled=interopDefault(styled$1),toCSSObject=({baseStyle:n})=>e=>{const{theme:s,css:o,__css:a,sx:c,...u}=e,[h]=splitProps(u,isStyleProp),m=runIfFn$1(n,e),g=assignAfter({},a,m,compact(h),c),_=css$2(g)(e.theme);return o?[_,o]:_};function styled(n,e){const{baseStyle:s,...o}=e??{};o.shouldForwardProp||(o.shouldForwardProp=shouldForwardProp);const a=toCSSObject({baseStyle:s}),c=emotion_styled(n,o)(a);return reactExports.forwardRef(function(m,g){const{children:_,...b}=m,{colorMode:T,forced:A}=useColorMode(),R=A?T:void 0;return reactExports.createElement(c,{ref:g,"data-theme":R,...b},_)})}function factory(){const n=new Map;return new Proxy(styled,{apply(e,s,o){return styled(...o)},get(e,s){return n.has(s)||n.set(s,styled(s)),n.get(s)}})}const chakra=factory(),toastMotionVariants={initial:n=>{const{position:e}=n,s=["top","bottom"].includes(e)?"y":"x";let o=["top-right","bottom-right"].includes(e)?1:-1;return e==="bottom"&&(o=1),{opacity:0,[s]:o*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},ToastComponent=reactExports.memo(n=>{const{id:e,message:s,onCloseComplete:o,onRequestRemove:a,requestClose:c=!1,position:u="bottom",duration:h=5e3,containerStyle:m,motionVariants:g=toastMotionVariants,toastSpacing:_="0.5rem"}=n,[b,T]=reactExports.useState(h),A=useIsPresent();useUpdateEffect(()=>{A||o?.()},[A]),useUpdateEffect(()=>{T(h)},[h]);const R=()=>T(null),w=()=>T(h),D=()=>{A&&a()};reactExports.useEffect(()=>{A&&c&&a()},[A,c,a]),useTimeout(D,b);const fn=reactExports.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:_,...m}),[m,_]),yn=reactExports.useMemo(()=>getToastStyle(u),[u]);return jsxRuntimeExports.jsx(motion.div,{layout:!0,className:"chakra-toast",variants:g,initial:"initial",animate:"animate",exit:"exit",onHoverStart:R,onHoverEnd:w,custom:{position:u},style:yn,children:jsxRuntimeExports.jsx(chakra.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:fn,children:runIfFn$1(s,{id:e,onClose:D})})})});ToastComponent.displayName="ToastComponent";function forwardRef(n){return reactExports.forwardRef(n)}var reactFastCompare,hasRequiredReactFastCompare;function requireReactFastCompare(){if(hasRequiredReactFastCompare)return reactFastCompare;hasRequiredReactFastCompare=1;var n=typeof Element<"u",e=typeof Map=="function",s=typeof Set=="function",o=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function a(c,u){if(c===u)return!0;if(c&&u&&typeof c=="object"&&typeof u=="object"){if(c.constructor!==u.constructor)return!1;var h,m,g;if(Array.isArray(c)){if(h=c.length,h!=u.length)return!1;for(m=h;m--!==0;)if(!a(c[m],u[m]))return!1;return!0}var _;if(e&&c instanceof Map&&u instanceof Map){if(c.size!==u.size)return!1;for(_=c.entries();!(m=_.next()).done;)if(!u.has(m.value[0]))return!1;for(_=c.entries();!(m=_.next()).done;)if(!a(m.value[1],u.get(m.value[0])))return!1;return!0}if(s&&c instanceof Set&&u instanceof Set){if(c.size!==u.size)return!1;for(_=c.entries();!(m=_.next()).done;)if(!u.has(m.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(c)&&ArrayBuffer.isView(u)){if(h=c.length,h!=u.length)return!1;for(m=h;m--!==0;)if(c[m]!==u[m])return!1;return!0}if(c.constructor===RegExp)return c.source===u.source&&c.flags===u.flags;if(c.valueOf!==Object.prototype.valueOf&&typeof c.valueOf=="function"&&typeof u.valueOf=="function")return c.valueOf()===u.valueOf();if(c.toString!==Object.prototype.toString&&typeof c.toString=="function"&&typeof u.toString=="function")return c.toString()===u.toString();if(g=Object.keys(c),h=g.length,h!==Object.keys(u).length)return!1;for(m=h;m--!==0;)if(!Object.prototype.hasOwnProperty.call(u,g[m]))return!1;if(n&&c instanceof Element)return!1;for(m=h;m--!==0;)if(!((g[m]==="_owner"||g[m]==="__v"||g[m]==="__o")&&c.$$typeof)&&!a(c[g[m]],u[g[m]]))return!1;return!0}return c!==c&&u!==u}return reactFastCompare=function(u,h){try{return a(u,h)}catch(m){if((m.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw m}},reactFastCompare}var reactFastCompareExports=requireReactFastCompare();const isEqual=getDefaultExportFromCjs(reactFastCompareExports);function useTheme(){const n=reactExports.useContext(ThemeContext);if(!n)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return n}function useChakra(){const n=useColorMode(),e=useTheme();return{...n,theme:e}}function omitReactElements(n){return Object.fromEntries(Object.entries(n).filter(([e,s])=>s!==void 0&&e!=="children"&&!reactExports.isValidElement(s)))}function useStyleConfigImpl(n,e={}){const{styleConfig:s,...o}=e,{theme:a,colorMode:c}=useChakra(),u=n?memoizedGet$1(a,`components.${n}`):void 0,h=s||u,m=mergeWith({theme:a,colorMode:c},h?.defaultProps??{},omitReactElements(o),(_,b)=>_?void 0:b),g=reactExports.useRef({});if(h){const b=resolveStyleConfig(h)(m);isEqual(g.current,b)||(g.current=b)}return g.current}function useStyleConfig(n,e={}){return useStyleConfigImpl(n,e)}function useMultiStyleConfig(n,e={}){return useStyleConfigImpl(n,e)}const fallbackIcon={path:jsxRuntimeExports.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),jsxRuntimeExports.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),jsxRuntimeExports.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Icon=forwardRef((n,e)=>{const{as:s,viewBox:o,color:a="currentColor",focusable:c=!1,children:u,className:h,__css:m,...g}=n,_=cx("chakra-icon",h),b=useStyleConfig("Icon",n),T={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:a,...m,...b},A={ref:e,focusable:c,className:_,__css:T},R=o??fallbackIcon.viewBox;if(s&&typeof s!="string")return jsxRuntimeExports.jsx(chakra.svg,{as:s,...A,...g});const w=u??fallbackIcon.path;return jsxRuntimeExports.jsx(chakra.svg,{verticalAlign:"middle",viewBox:R,...A,...g,children:w})});Icon.displayName="Icon";function CheckIcon(n){return jsxRuntimeExports.jsx(Icon,{viewBox:"0 0 24 24",...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function InfoIcon(n){return jsxRuntimeExports.jsx(Icon,{viewBox:"0 0 24 24",...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function WarningIcon(n){return jsxRuntimeExports.jsx(Icon,{viewBox:"0 0 24 24",...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}const spin=keyframes$1({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Spinner=forwardRef((n,e)=>{const s=useStyleConfig("Spinner",n),{label:o="Loading...",thickness:a="2px",speed:c="0.45s",emptyColor:u="transparent",className:h,...m}=omitThemingProps(n),g=cx("chakra-spinner",h),_={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:a,borderBottomColor:u,borderLeftColor:u,animation:`${spin} ${c} linear infinite`,...s};return jsxRuntimeExports.jsx(chakra.div,{ref:e,__css:_,className:g,...m,children:o&&jsxRuntimeExports.jsx(chakra.span,{srOnly:!0,children:o})})});Spinner.displayName="Spinner";const[AlertProvider,useAlertContext]=createContext({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[AlertStylesProvider,useAlertStyles]=createContext({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),STATUSES={info:{icon:InfoIcon,colorScheme:"blue"},warning:{icon:WarningIcon,colorScheme:"orange"},success:{icon:CheckIcon,colorScheme:"green"},error:{icon:WarningIcon,colorScheme:"red"},loading:{icon:Spinner,colorScheme:"blue"}};function getStatusColorScheme(n){return STATUSES[n].colorScheme}function getStatusIcon(n){return STATUSES[n].icon}const Alert=forwardRef(function(e,s){const{status:o="info",addRole:a=!0,...c}=omitThemingProps(e),u=e.colorScheme??getStatusColorScheme(o),h=useMultiStyleConfig("Alert",{...e,colorScheme:u}),m={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...h.container};return jsxRuntimeExports.jsx(AlertProvider,{value:{status:o},children:jsxRuntimeExports.jsx(AlertStylesProvider,{value:h,children:jsxRuntimeExports.jsx(chakra.div,{"data-status":o,role:a?"alert":void 0,ref:s,...c,className:cx("chakra-alert",e.className),__css:m})})})});Alert.displayName="Alert";function AlertIcon(n){const{status:e}=useAlertContext(),s=getStatusIcon(e),o=useAlertStyles(),a=e==="loading"?o.spinner:o.icon;return jsxRuntimeExports.jsx(chakra.span,{display:"inherit","data-status":e,...n,className:cx("chakra-alert__icon",n.className),__css:a,children:n.children||jsxRuntimeExports.jsx(s,{h:"100%",w:"100%"})})}AlertIcon.displayName="AlertIcon";const AlertTitle=forwardRef(function(e,s){const o=useAlertStyles(),{status:a}=useAlertContext();return jsxRuntimeExports.jsx(chakra.div,{ref:s,"data-status":a,...e,className:cx("chakra-alert__title",e.className),__css:o.title})});AlertTitle.displayName="AlertTitle";const AlertDescription=forwardRef(function(e,s){const{status:o}=useAlertContext(),a=useAlertStyles(),c={display:"inline",...a.description};return jsxRuntimeExports.jsx(chakra.div,{ref:s,"data-status":o,...e,className:cx("chakra-alert__desc",e.className),__css:c})});AlertDescription.displayName="AlertDescription";function CloseIcon(n){return jsxRuntimeExports.jsx(Icon,{focusable:"false","aria-hidden":!0,...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}const CloseButton=forwardRef(function(e,s){const o=useStyleConfig("CloseButton",e),{children:a,isDisabled:c,__css:u,...h}=omitThemingProps(e),m={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return jsxRuntimeExports.jsx(chakra.button,{type:"button","aria-label":"Close",ref:s,disabled:c,__css:{...m,...o,...u},...h,children:a||jsxRuntimeExports.jsx(CloseIcon,{width:"1em",height:"1em"})})});CloseButton.displayName="CloseButton";const Toast=n=>{const{status:e,variant:s="solid",id:o,title:a,isClosable:c,onClose:u,description:h,colorScheme:m,icon:g}=n,_=o?{root:`toast-${o}`,title:`toast-${o}-title`,description:`toast-${o}-description`}:void 0;return jsxRuntimeExports.jsxs(Alert,{addRole:!1,status:e,variant:s,id:_?.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:m,children:[jsxRuntimeExports.jsx(AlertIcon,{children:g}),jsxRuntimeExports.jsxs(chakra.div,{flex:"1",maxWidth:"100%",children:[a&&jsxRuntimeExports.jsx(AlertTitle,{id:_?.title,children:a}),h&&jsxRuntimeExports.jsx(AlertDescription,{id:_?.description,display:"block",children:h})]}),c&&jsxRuntimeExports.jsx(CloseButton,{size:"sm",onClick:u,position:"absolute",insetEnd:1,top:1})]})};function createRenderToast(n={}){const{render:e,toastComponent:s=Toast}=n;return a=>typeof e=="function"?e({...a,...n}):jsxRuntimeExports.jsx(s,{...a,...n})}const initialState={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},toastStore=createStore(initialState);function createStore(n){let e=n;const s=new Set,o=a=>{e=a(e),s.forEach(c=>c())};return{getState:()=>e,subscribe:a=>(s.add(a),()=>{o(()=>n),s.delete(a)}),removeToast:(a,c)=>{o(u=>({...u,[c]:u[c].filter(h=>h.id!=a)}))},notify:(a,c)=>{const u=createToast(a,c),{position:h,id:m}=u;return o(g=>{const b=h.includes("top")?[u,...g[h]??[]]:[...g[h]??[],u];return{...g,[h]:b}}),m},update:(a,c)=>{a&&o(u=>{const h={...u},{position:m,index:g}=findToast(h,a);return m&&g!==-1&&(h[m][g]={...h[m][g],...c,message:createRenderToast(c)}),h})},closeAll:({positions:a}={})=>{o(c=>(a??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((m,g)=>(m[g]=c[g].map(_=>({..._,requestClose:!0})),m),{...c}))},close:a=>{o(c=>{const u=getToastPosition(c,a);return u?{...c,[u]:c[u].map(h=>h.id==a?{...h,requestClose:!0}:h)}:c})},isActive:a=>!!findToast(toastStore.getState(),a).position}}let counter=0;function createToast(n,e={}){counter+=1;const s=e.id??counter,o=e.position??"bottom";return{id:s,message:n,position:o,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>toastStore.removeToast(String(s),o),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}var reactDomExports=requireReactDom();const[PortalContextProvider,usePortalContext]=createContext({strict:!1,name:"PortalContext"}),PORTAL_CLASSNAME="chakra-portal",PORTAL_SELECTOR=".chakra-portal",Container=n=>jsxRuntimeExports.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:n.zIndex,top:0,left:0,right:0},children:n.children}),DefaultPortal=n=>{const{appendToParentPortal:e,children:s}=n,[o,a]=reactExports.useState(null),c=reactExports.useRef(null),[,u]=reactExports.useState({});reactExports.useEffect(()=>u({}),[]);const h=usePortalContext(),m=usePortalManager();useSafeLayoutEffect$1(()=>{if(!o)return;const _=o.ownerDocument,b=e?h??_.body:_.body;if(!b)return;c.current=_.createElement("div"),c.current.className=PORTAL_CLASSNAME,b.appendChild(c.current),u({});const T=c.current;return()=>{b.contains(T)&&b.removeChild(T)}},[o]);const g=m?.zIndex?jsxRuntimeExports.jsx(Container,{zIndex:m?.zIndex,children:s}):s;return c.current?reactDomExports.createPortal(jsxRuntimeExports.jsx(PortalContextProvider,{value:c.current,children:g}),c.current):jsxRuntimeExports.jsx("span",{ref:_=>{_&&a(_)}})},ContainerPortal=n=>{const{children:e,containerRef:s,appendToParentPortal:o}=n,a=s.current,c=a??(typeof window<"u"?document.body:void 0),u=reactExports.useMemo(()=>{const m=a?.ownerDocument.createElement("div");return m&&(m.className=PORTAL_CLASSNAME),m},[a]),[,h]=reactExports.useState({});return useSafeLayoutEffect$1(()=>h({}),[]),useSafeLayoutEffect$1(()=>{if(!(!u||!c))return c.appendChild(u),()=>{c.removeChild(u)}},[u,c]),c&&u?reactDomExports.createPortal(jsxRuntimeExports.jsx(PortalContextProvider,{value:o?u:null,children:e}),u):null};function Portal(n){const e={appendToParentPortal:!0,...n},{containerRef:s,...o}=e;return s?jsxRuntimeExports.jsx(ContainerPortal,{containerRef:s,...o}):jsxRuntimeExports.jsx(DefaultPortal,{...o})}Portal.className=PORTAL_CLASSNAME;Portal.selector=PORTAL_SELECTOR;Portal.displayName="Portal";const[ToastOptionProvider,useToastOptionContext]=createContext({name:"ToastOptionsContext",strict:!1}),ToastProvider=n=>{const e=reactExports.useSyncExternalStore(toastStore.subscribe,toastStore.getState,toastStore.getState),{motionVariants:s,component:o=ToastComponent,portalProps:a,animatePresenceProps:c}=n,h=Object.keys(e).map(m=>{const g=e[m];return jsxRuntimeExports.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${m}`,id:`chakra-toast-manager-${m}`,style:getToastListStyle(m),children:jsxRuntimeExports.jsx(AnimatePresence,{...c,initial:!1,children:g.map(_=>jsxRuntimeExports.jsx(o,{motionVariants:s,..._},_.id))})},m)});return jsxRuntimeExports.jsx(Portal,{...a,children:h})},createProvider=n=>function({children:s,theme:o=n,toastOptions:a,...c}){return jsxRuntimeExports.jsxs(Provider,{theme:o,...c,children:[jsxRuntimeExports.jsx(ToastOptionProvider,{value:a?.defaultOptions,children:s}),jsxRuntimeExports.jsx(ToastProvider,{...a})]})},ChakraProvider=createProvider(theme),TRANSITION_EASINGS={easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},TRANSITION_VARIANTS={slideLeft:{position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},slideRight:{position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},slideUp:{position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},slideDown:{position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}}};function getSlideTransition(n){switch(n?.direction??"right"){case"right":return TRANSITION_VARIANTS.slideRight;case"left":return TRANSITION_VARIANTS.slideLeft;case"bottom":return TRANSITION_VARIANTS.slideDown;case"top":return TRANSITION_VARIANTS.slideUp;default:return TRANSITION_VARIANTS.slideRight}}const TRANSITION_DEFAULTS={enter:{duration:.2,ease:TRANSITION_EASINGS.easeOut},exit:{duration:.1,ease:TRANSITION_EASINGS.easeIn}},withDelay={enter:(n,e)=>({...n,delay:typeof e=="number"?e:e?.enter}),exit:(n,e)=>({...n,delay:typeof e=="number"?e:e?.exit})},Badge=forwardRef(function(e,s){const o=useStyleConfig("Badge",e),{className:a,...c}=omitThemingProps(e);return jsxRuntimeExports.jsx(chakra.span,{ref:s,className:cx("chakra-badge",e.className),...c,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...o}})});Badge.displayName="Badge";const Box=chakra("div");Box.displayName="Box";const[ButtonGroupProvider,useButtonGroup]=createContext({strict:!1,name:"ButtonGroupContext"});function ButtonIcon(n){const{children:e,className:s,...o}=n,a=reactExports.isValidElement(e)?reactExports.cloneElement(e,{"aria-hidden":!0,focusable:!1}):e,c=cx("chakra-button__icon",s);return jsxRuntimeExports.jsx(chakra.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...o,className:c,children:a})}ButtonIcon.displayName="ButtonIcon";function ButtonSpinner(n){const{label:e,placement:s,spacing:o="0.5rem",children:a=jsxRuntimeExports.jsx(Spinner,{color:"currentColor",width:"1em",height:"1em"}),className:c,__css:u,...h}=n,m=cx("chakra-button__spinner",c),g=s==="start"?"marginEnd":"marginStart",_=reactExports.useMemo(()=>({display:"flex",alignItems:"center",position:e?"relative":"absolute",[g]:e?o:0,fontSize:"1em",lineHeight:"normal",...u}),[u,e,g,o]);return jsxRuntimeExports.jsx(chakra.div,{className:m,...h,__css:_,children:a})}ButtonSpinner.displayName="ButtonSpinner";function useButtonType(n){const[e,s]=reactExports.useState(!n);return{ref:reactExports.useCallback(c=>{c&&s(c.tagName==="BUTTON")},[]),type:e?"button":void 0}}const Button=forwardRef((n,e)=>{const s=useButtonGroup(),o=useStyleConfig("Button",{...s,...n}),{isDisabled:a=s?.isDisabled,isLoading:c,isActive:u,children:h,leftIcon:m,rightIcon:g,loadingText:_,iconSpacing:b="0.5rem",type:T,spinner:A,spinnerPlacement:R="start",className:w,as:D,shouldWrapChildren:fn,...yn}=omitThemingProps(n),pn=reactExports.useMemo(()=>{const wt={...o?._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...o,...!!s&&{_focus:wt}}},[o,s]),{ref:wn,type:V}=useButtonType(D),bn={rightIcon:g,leftIcon:m,iconSpacing:b,children:h,shouldWrapChildren:fn};return jsxRuntimeExports.jsxs(chakra.button,{disabled:a||c,ref:useMergeRefs$1(e,wn),as:D,type:T??V,"data-active":dataAttr(u),"data-loading":dataAttr(c),__css:pn,className:cx("chakra-button",w),...yn,children:[c&&R==="start"&&jsxRuntimeExports.jsx(ButtonSpinner,{className:"chakra-button__spinner--start",label:_,placement:"start",spacing:b,children:A}),c?_||jsxRuntimeExports.jsx(chakra.span,{opacity:0,children:jsxRuntimeExports.jsx(ButtonContent,{...bn})}):jsxRuntimeExports.jsx(ButtonContent,{...bn}),c&&R==="end"&&jsxRuntimeExports.jsx(ButtonSpinner,{className:"chakra-button__spinner--end",label:_,placement:"end",spacing:b,children:A})]})});Button.displayName="Button";function ButtonContent(n){const{leftIcon:e,rightIcon:s,children:o,iconSpacing:a,shouldWrapChildren:c}=n;return c?jsxRuntimeExports.jsxs("span",{style:{display:"contents"},children:[e&&jsxRuntimeExports.jsx(ButtonIcon,{marginEnd:a,children:e}),o,s&&jsxRuntimeExports.jsx(ButtonIcon,{marginStart:a,children:s})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e&&jsxRuntimeExports.jsx(ButtonIcon,{marginEnd:a,children:e}),o,s&&jsxRuntimeExports.jsx(ButtonIcon,{marginStart:a,children:s})]})}const IconButton=forwardRef((n,e)=>{const{icon:s,children:o,isRound:a,"aria-label":c,...u}=n,h=s||o,m=reactExports.isValidElement(h)?reactExports.cloneElement(h,{"aria-hidden":!0,focusable:!1}):null;return jsxRuntimeExports.jsx(Button,{px:"0",py:"0",borderRadius:a?"full":void 0,ref:e,"aria-label":c,...u,children:m})});IconButton.displayName="IconButton";const Center=chakra("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Center.displayName="Center";const centerStyles={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};forwardRef(function(e,s){const{axis:o="both",...a}=e;return jsxRuntimeExports.jsx(chakra.div,{ref:s,__css:centerStyles[o],...a,position:"absolute"})});var isDom=()=>typeof document<"u",hasSetup=!1,modality=null,hasEventBeforeFocus=!1,hasBlurredWindowRecently=!1,handlers=new Set;function trigger(n,e){handlers.forEach(s=>s(n,e))}var isMac=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function isValidKey(n){return!(n.metaKey||!isMac&&n.altKey||n.ctrlKey||n.key==="Control"||n.key==="Shift"||n.key==="Meta")}function onKeyboardEvent(n){hasEventBeforeFocus=!0,isValidKey(n)&&(modality="keyboard",trigger("keyboard",n))}function onPointerEvent(n){if(modality="pointer",n.type==="mousedown"||n.type==="pointerdown"){hasEventBeforeFocus=!0;const e=n.composedPath?n.composedPath()[0]:n.target;let s=!1;try{s=e.matches(":focus-visible")}catch{}if(s)return;trigger("pointer",n)}}function isVirtualClick(n){return n.mozInputSource===0&&n.isTrusted?!0:n.detail===0&&!n.pointerType}function onClickEvent(n){isVirtualClick(n)&&(hasEventBeforeFocus=!0,modality="virtual")}function onWindowFocus$1(n){n.target===window||n.target===document||n.target instanceof Element&&n.target.hasAttribute("tabindex")||(!hasEventBeforeFocus&&!hasBlurredWindowRecently&&(modality="virtual",trigger("virtual",n)),hasEventBeforeFocus=!1,hasBlurredWindowRecently=!1)}function onWindowBlur$1(){hasEventBeforeFocus=!1,hasBlurredWindowRecently=!0}function isFocusVisible(){return modality!=="pointer"}function setupGlobalFocusEvents(){if(!isDom()||hasSetup)return;const{focus:n}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...s){hasEventBeforeFocus=!0,n.apply(this,s)},document.addEventListener("keydown",onKeyboardEvent,!0),document.addEventListener("keyup",onKeyboardEvent,!0),document.addEventListener("click",onClickEvent,!0),window.addEventListener("focus",onWindowFocus$1,!0),window.addEventListener("blur",onWindowBlur$1,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",onPointerEvent,!0),document.addEventListener("pointermove",onPointerEvent,!0),document.addEventListener("pointerup",onPointerEvent,!0)):(document.addEventListener("mousedown",onPointerEvent,!0),document.addEventListener("mousemove",onPointerEvent,!0),document.addEventListener("mouseup",onPointerEvent,!0)),hasSetup=!0}function trackFocusVisible(n){setupGlobalFocusEvents(),n(isFocusVisible());const e=()=>n(isFocusVisible());return handlers.add(e),()=>{handlers.delete(e)}}const[FormControlStylesProvider,useFormControlStyles]=createContext({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[FormControlProvider,useFormControlContext]=createContext({strict:!1,name:"FormControlContext"});function useFormControlProvider(n){const{id:e,isRequired:s,isInvalid:o,isDisabled:a,isReadOnly:c,...u}=n,h=reactExports.useId(),m=e||`field-${h}`,g=`${m}-label`,_=`${m}-feedback`,b=`${m}-helptext`,[T,A]=reactExports.useState(!1),[R,w]=reactExports.useState(!1),[D,fn]=reactExports.useState(!1),yn=reactExports.useCallback((wt={},jt=null)=>({id:b,...wt,ref:mergeRefs(jt,ln=>{ln&&w(!0)})}),[b]),pn=reactExports.useCallback((wt={},jt=null)=>({...wt,ref:jt,"data-focus":dataAttr(D),"data-disabled":dataAttr(a),"data-invalid":dataAttr(o),"data-readonly":dataAttr(c),id:wt.id!==void 0?wt.id:g,htmlFor:wt.htmlFor!==void 0?wt.htmlFor:m}),[m,a,D,o,c,g]),wn=reactExports.useCallback((wt={},jt=null)=>({id:_,...wt,ref:mergeRefs(jt,ln=>{ln&&A(!0)}),"aria-live":"polite"}),[_]),V=reactExports.useCallback((wt={},jt=null)=>({...wt,...u,ref:jt,role:"group","data-focus":dataAttr(D),"data-disabled":dataAttr(a),"data-invalid":dataAttr(o),"data-readonly":dataAttr(c)}),[u,a,D,o,c]),bn=reactExports.useCallback((wt={},jt=null)=>({...wt,ref:jt,role:"presentation","aria-hidden":!0,children:wt.children||"*"}),[]);return{isRequired:!!s,isInvalid:!!o,isReadOnly:!!c,isDisabled:!!a,isFocused:!!D,onFocus:()=>fn(!0),onBlur:()=>fn(!1),hasFeedbackText:T,setHasFeedbackText:A,hasHelpText:R,setHasHelpText:w,id:m,labelId:g,feedbackId:_,helpTextId:b,htmlProps:u,getHelpTextProps:yn,getErrorMessageProps:wn,getRootProps:V,getLabelProps:pn,getRequiredIndicatorProps:bn}}const FormControl=forwardRef(function(e,s){const o=useMultiStyleConfig("Form",e),a=omitThemingProps(e),{getRootProps:c,htmlProps:u,...h}=useFormControlProvider(a),m=cx("chakra-form-control",e.className);return jsxRuntimeExports.jsx(FormControlProvider,{value:h,children:jsxRuntimeExports.jsx(FormControlStylesProvider,{value:o,children:jsxRuntimeExports.jsx(chakra.div,{...c({},s),className:m,__css:o.container})})})});FormControl.displayName="FormControl";const FormHelperText=forwardRef(function(e,s){const o=useFormControlContext(),a=useFormControlStyles(),c=cx("chakra-form__helper-text",e.className);return jsxRuntimeExports.jsx(chakra.div,{...o?.getHelpTextProps(e,s),__css:a.helperText,className:c})});FormHelperText.displayName="FormHelperText";function useFormControl(n){const{isDisabled:e,isInvalid:s,isReadOnly:o,isRequired:a,...c}=useFormControlProps(n);return{...c,disabled:e,readOnly:o,required:a,"aria-invalid":ariaAttr(s),"aria-required":ariaAttr(a),"aria-readonly":ariaAttr(o)}}function useFormControlProps(n){const e=useFormControlContext(),{id:s,disabled:o,readOnly:a,required:c,isRequired:u,isInvalid:h,isReadOnly:m,isDisabled:g,onFocus:_,onBlur:b,...T}=n,A=n["aria-describedby"]?[n["aria-describedby"]]:[];return e?.hasFeedbackText&&e?.isInvalid&&A.push(e.feedbackId),e?.hasHelpText&&A.push(e.helpTextId),{...T,"aria-describedby":A.join(" ")||void 0,id:s??e?.id,isDisabled:o??g??e?.isDisabled,isReadOnly:a??m??e?.isReadOnly,isRequired:c??u??e?.isRequired,isInvalid:h??e?.isInvalid,onFocus:callAllHandlers(e?.onFocus,_),onBlur:callAllHandlers(e?.onBlur,b)}}const visuallyHiddenStyle={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function useCheckbox(n={}){const e=useFormControlProps(n),{isDisabled:s,isReadOnly:o,isRequired:a,isInvalid:c,id:u,onBlur:h,onFocus:m,"aria-describedby":g}=e,{defaultChecked:_,isChecked:b,isFocusable:T,onChange:A,isIndeterminate:R,name:w,value:D,tabIndex:fn=void 0,"aria-label":yn,"aria-labelledby":pn,"aria-invalid":wn,...V}=n,bn=omit(V,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),wt=useCallbackRef$1(A),jt=useCallbackRef$1(h),ln=useCallbackRef$1(m),[vn,dn]=reactExports.useState(!1),[mn,zt]=reactExports.useState(!1),[$n,Sn]=reactExports.useState(!1),En=reactExports.useRef(!1);reactExports.useEffect(()=>trackFocusVisible(sr=>{En.current=sr}),[]);const Cn=reactExports.useRef(null),[On,Fn]=reactExports.useState(!0),[An,Vn]=reactExports.useState(!!_),Bn=b!==void 0,Ln=Bn?b:An,Xn=reactExports.useCallback(sr=>{if(o||s){sr.preventDefault();return}Bn||Vn(Ln?sr.currentTarget.checked:R?!0:sr.currentTarget.checked),wt?.(sr)},[o,s,Ln,Bn,R,wt]);useSafeLayoutEffect$1(()=>{Cn.current&&(Cn.current.indeterminate=!!R)},[R]),useUpdateEffect(()=>{s&&dn(!1)},[s,dn]),useSafeLayoutEffect$1(()=>{const sr=Cn.current;if(!sr?.form)return;const Ar=()=>{Vn(!!_)};return sr.form.addEventListener("reset",Ar),()=>sr.form?.removeEventListener("reset",Ar)},[]);const er=s&&!T,rr=reactExports.useCallback(sr=>{sr.key===" "&&Sn(!0)},[Sn]),cr=reactExports.useCallback(sr=>{sr.key===" "&&Sn(!1)},[Sn]);useSafeLayoutEffect$1(()=>{if(!Cn.current)return;Cn.current.checked!==Ln&&Vn(Cn.current.checked)},[Cn.current]);const ar=reactExports.useCallback((sr={},Ar=null)=>{const qr=Vr=>{vn&&Vr.preventDefault(),Sn(!0)};return{...sr,ref:Ar,"data-active":dataAttr($n),"data-hover":dataAttr(mn),"data-checked":dataAttr(Ln),"data-focus":dataAttr(vn),"data-focus-visible":dataAttr(vn&&En.current),"data-indeterminate":dataAttr(R),"data-disabled":dataAttr(s),"data-invalid":dataAttr(c),"data-readonly":dataAttr(o),"aria-hidden":!0,onMouseDown:callAllHandlers(sr.onMouseDown,qr),onMouseUp:callAllHandlers(sr.onMouseUp,()=>Sn(!1)),onMouseEnter:callAllHandlers(sr.onMouseEnter,()=>zt(!0)),onMouseLeave:callAllHandlers(sr.onMouseLeave,()=>zt(!1))}},[$n,Ln,s,vn,mn,R,c,o]),pr=reactExports.useCallback((sr={},Ar=null)=>({...sr,ref:Ar,"data-active":dataAttr($n),"data-hover":dataAttr(mn),"data-checked":dataAttr(Ln),"data-focus":dataAttr(vn),"data-focus-visible":dataAttr(vn&&En.current),"data-indeterminate":dataAttr(R),"data-disabled":dataAttr(s),"data-invalid":dataAttr(c),"data-readonly":dataAttr(o)}),[$n,Ln,s,vn,mn,R,c,o]),_r=reactExports.useCallback((sr={},Ar=null)=>({...bn,...sr,ref:mergeRefs(Ar,qr=>{qr&&Fn(qr.tagName==="LABEL")}),onClick:callAllHandlers(sr.onClick,()=>{On||(Cn.current?.click(),requestAnimationFrame(()=>{Cn.current?.focus({preventScroll:!0})}))}),"data-disabled":dataAttr(s),"data-checked":dataAttr(Ln),"data-invalid":dataAttr(c)}),[bn,s,Ln,c,On]),jr=reactExports.useCallback((sr={},Ar=null)=>({...sr,ref:mergeRefs(Cn,Ar),type:"checkbox",name:w,value:D,id:u,tabIndex:fn,onChange:callAllHandlers(sr.onChange,Xn),onBlur:callAllHandlers(sr.onBlur,jt,()=>dn(!1)),onFocus:callAllHandlers(sr.onFocus,ln,()=>dn(!0)),onKeyDown:callAllHandlers(sr.onKeyDown,rr),onKeyUp:callAllHandlers(sr.onKeyUp,cr),required:a,checked:Ln,disabled:er,readOnly:o,"aria-label":yn,"aria-labelledby":pn,"aria-invalid":wn?!!wn:c,"aria-describedby":g,"aria-disabled":s,"aria-checked":R?"mixed":Ln,style:visuallyHiddenStyle}),[w,D,u,fn,Xn,jt,ln,rr,cr,a,Ln,er,o,yn,pn,wn,c,g,s,R]),Sr=reactExports.useCallback((sr={},Ar=null)=>({...sr,ref:Ar,onMouseDown:callAllHandlers(sr.onMouseDown,stopEvent),"data-disabled":dataAttr(s),"data-checked":dataAttr(Ln),"data-invalid":dataAttr(c)}),[Ln,s,c]);return{state:{isInvalid:c,isFocused:vn,isChecked:Ln,isActive:$n,isHovered:mn,isIndeterminate:R,isDisabled:s,isReadOnly:o,isRequired:a},getRootProps:_r,getCheckboxProps:ar,getIndicatorProps:pr,getInputProps:jr,getLabelProps:Sr,htmlProps:bn}}function stopEvent(n){n.preventDefault(),n.stopPropagation()}function _objectWithoutPropertiesLoose$1(n,e){if(n==null)return{};var s={};for(var o in n)if({}.hasOwnProperty.call(n,o)){if(e.indexOf(o)!==-1)continue;s[o]=n[o]}return s}var FOCUS_GROUP="data-focus-lock",FOCUS_DISABLED="data-focus-lock-disabled",FOCUS_ALLOW="data-no-focus-lock",FOCUS_AUTO="data-autofocus-inside",FOCUS_NO_AUTOFOCUS="data-no-autofocus";function assignRef(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function useCallbackRef(n,e){var s=reactExports.useState(function(){return{value:n,callback:e,facade:{get current(){return s.value},set current(o){var a=s.value;a!==o&&(s.value=o,s.callback(o,a))}}}})[0];return s.callback=e,s.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(n,e){var s=useCallbackRef(null,function(o){return n.forEach(function(a){return assignRef(a,o)})});return useIsomorphicLayoutEffect(function(){var o=currentValues.get(s);if(o){var a=new Set(o),c=new Set(n),u=s.current;a.forEach(function(h){c.has(h)||assignRef(h,null)}),c.forEach(function(h){a.has(h)||assignRef(h,u)})}currentValues.set(s,n)},[n]),s}var hiddenGuard={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},__assign=function(){return __assign=Object.assign||function(e){for(var s,o=1,a=arguments.length;o<a;o++){s=arguments[o];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c])}return e},__assign.apply(this,arguments)};function __rest(n,e){var s={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(s[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(n);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(n,o[a])&&(s[o[a]]=n[o[a]]);return s}function __spreadArray(n,e,s){if(s||arguments.length===2)for(var o=0,a=e.length,c;o<a;o++)(c||!(o in e))&&(c||(c=Array.prototype.slice.call(e,0,o)),c[o]=e[o]);return n.concat(c||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;function ItoI(n){return n}function innerCreateMedium(n,e){e===void 0&&(e=ItoI);var s=[],o=!1,a={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:n},useMedium:function(c){var u=e(c,o);return s.push(u),function(){s=s.filter(function(h){return h!==u})}},assignSyncMedium:function(c){for(o=!0;s.length;){var u=s;s=[],u.forEach(c)}s={push:function(h){return c(h)},filter:function(){return s}}},assignMedium:function(c){o=!0;var u=[];if(s.length){var h=s;s=[],h.forEach(c),u=s}var m=function(){var _=u;u=[],_.forEach(c)},g=function(){return Promise.resolve().then(m)};g(),s={push:function(_){u.push(_),g()},filter:function(_){return u=u.filter(_),s}}}};return a}function createMedium(n,e){return e===void 0&&(e=ItoI),innerCreateMedium(n,e)}function createSidecarMedium(n){n===void 0&&(n={});var e=innerCreateMedium(null);return e.options=__assign({async:!0,ssr:!1},n),e}var SideCar$1=function(n){var e=n.sideCar,s=__rest(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=e.read();if(!o)throw new Error("Sidecar medium not found");return reactExports.createElement(o,__assign({},s))};SideCar$1.isSideCarExport=!0;function exportSidecar(n,e){return n.useMedium(e),SideCar$1}var mediumFocus=createMedium({},function(n){var e=n.target,s=n.currentTarget;return{target:e,currentTarget:s}}),mediumBlur=createMedium(),mediumEffect=createMedium(),mediumSidecar=createSidecarMedium({async:!0,ssr:typeof document<"u"}),focusScope=reactExports.createContext(void 0),emptyArray=[],FocusLock$1=reactExports.forwardRef(function(e,s){var o,a=reactExports.useState(),c=a[0],u=a[1],h=reactExports.useRef(),m=reactExports.useRef(!1),g=reactExports.useRef(null),_=reactExports.useState({}),b=_[1],T=e.children,A=e.disabled,R=A===void 0?!1:A,w=e.noFocusGuards,D=w===void 0?!1:w,fn=e.persistentFocus,yn=fn===void 0?!1:fn,pn=e.crossFrame,wn=pn===void 0?!0:pn,V=e.autoFocus,bn=V===void 0?!0:V;e.allowTextSelection;var wt=e.group,jt=e.className,ln=e.whiteList,vn=e.hasPositiveIndices,dn=e.shards,mn=dn===void 0?emptyArray:dn,zt=e.as,$n=zt===void 0?"div":zt,Sn=e.lockProps,En=Sn===void 0?{}:Sn,Cn=e.sideCar,On=e.returnFocus,Fn=On===void 0?!1:On,An=e.focusOptions,Vn=e.onActivation,Bn=e.onDeactivation,Ln=reactExports.useState({}),Xn=Ln[0],er=reactExports.useCallback(function(qr){var Vr=qr.captureFocusRestore;if(!g.current){var ui,si=(ui=document)==null?void 0:ui.activeElement;g.current=si,si!==document.body&&(g.current=Vr(si))}h.current&&Vn&&Vn(h.current),m.current=!0,b()},[Vn]),rr=reactExports.useCallback(function(){m.current=!1,Bn&&Bn(h.current),b()},[Bn]),cr=reactExports.useCallback(function(qr){var Vr=g.current;if(Vr){var ui=(typeof Vr=="function"?Vr():Vr)||document.body,si=typeof Fn=="function"?Fn(ui):Fn;if(si){var ni=typeof si=="object"?si:void 0;g.current=null,qr?Promise.resolve().then(function(){return ui.focus(ni)}):ui.focus(ni)}}},[Fn]),ar=reactExports.useCallback(function(qr){m.current&&mediumFocus.useMedium(qr)},[]),pr=mediumBlur.useMedium,_r=reactExports.useCallback(function(qr){h.current!==qr&&(h.current=qr,u(qr))},[]),jr=_extends$1((o={},o[FOCUS_DISABLED]=R&&"disabled",o[FOCUS_GROUP]=wt,o),En),Sr=D!==!0,Tr=Sr&&D!=="tail",sr=useMergeRefs([s,_r]),Ar=reactExports.useMemo(function(){return{observed:h,shards:mn,enabled:!R,active:m.current}},[R,m.current,mn,c]);return React.createElement(reactExports.Fragment,null,Sr&&[React.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:R?-1:0,style:hiddenGuard}),vn?React.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:R?-1:1,style:hiddenGuard}):null],!R&&React.createElement(Cn,{id:Xn,sideCar:mediumSidecar,observed:c,disabled:R,persistentFocus:yn,crossFrame:wn,autoFocus:bn,whiteList:ln,shards:mn,onActivation:er,onDeactivation:rr,returnFocus:cr,focusOptions:An,noFocusGuards:D}),React.createElement($n,_extends$1({ref:sr},jr,{className:jt,onBlur:pr,onFocus:ar}),React.createElement(focusScope.Provider,{value:Ar},T)),Tr&&React.createElement("div",{"data-focus-guard":!0,tabIndex:R?-1:0,style:hiddenGuard}))});FocusLock$1.propTypes={};function _setPrototypeOf(n,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},_setPrototypeOf(n,e)}function _inheritsLoose(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,_setPrototypeOf(n,e)}function _typeof(n){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(n)}function toPrimitive(n,e){if(_typeof(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,e);if(_typeof(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function toPropertyKey(n){var e=toPrimitive(n,"string");return _typeof(e)=="symbol"?e:e+""}function _defineProperty$1(n,e,s){return(e=toPropertyKey(e))in n?Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[e]=s,n}function withSideEffect(n,e){function s(o){return o.displayName||o.name||"Component"}return function(a){var c=[],u;function h(){u=n(c.map(function(g){return g.props})),e(u)}var m=(function(g){_inheritsLoose(_,g);function _(){return g.apply(this,arguments)||this}_.peek=function(){return u};var b=_.prototype;return b.componentDidMount=function(){c.push(this),h()},b.componentDidUpdate=function(){h()},b.componentWillUnmount=function(){var A=c.indexOf(this);c.splice(A,1),h()},b.render=function(){return React.createElement(a,this.props)},_})(reactExports.PureComponent);return _defineProperty$1(m,"displayName","SideEffect("+s(a)+")"),m}}var toArray=function(n){for(var e=Array(n.length),s=0;s<n.length;++s)e[s]=n[s];return e},asArray=function(n){return Array.isArray(n)?n:[n]},getFirst=function(n){return Array.isArray(n)?n[0]:n},isElementHidden=function(n){if(n.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(n,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},getParentNode=function(n){return n.parentNode&&n.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?n.parentNode.host:n.parentNode},isTopNode=function(n){return n===document||n&&n.nodeType===Node.DOCUMENT_NODE},isInert=function(n){return n.hasAttribute("inert")},isVisibleUncached=function(n,e){return!n||isTopNode(n)||!isElementHidden(n)&&!isInert(n)&&e(getParentNode(n))},isVisibleCached=function(n,e){var s=n.get(e);if(s!==void 0)return s;var o=isVisibleUncached(e,isVisibleCached.bind(void 0,n));return n.set(e,o),o},isAutoFocusAllowedUncached=function(n,e){return n&&!isTopNode(n)?isAutoFocusAllowed(n)?e(getParentNode(n)):!1:!0},isAutoFocusAllowedCached=function(n,e){var s=n.get(e);if(s!==void 0)return s;var o=isAutoFocusAllowedUncached(e,isAutoFocusAllowedCached.bind(void 0,n));return n.set(e,o),o},getDataset=function(n){return n.dataset},isHTMLButtonElement=function(n){return n.tagName==="BUTTON"},isHTMLInputElement=function(n){return n.tagName==="INPUT"},isRadioElement=function(n){return isHTMLInputElement(n)&&n.type==="radio"},notHiddenInput=function(n){return!((isHTMLInputElement(n)||isHTMLButtonElement(n))&&(n.type==="hidden"||n.disabled))},isAutoFocusAllowed=function(n){var e=n.getAttribute(FOCUS_NO_AUTOFOCUS);return![!0,"true",""].includes(e)},isGuard=function(n){var e;return!!(n&&(!((e=getDataset(n))===null||e===void 0)&&e.focusGuard))},isNotAGuard=function(n){return!isGuard(n)},isDefined=function(n){return!!n},tabSort=function(n,e){var s=Math.max(0,n.tabIndex),o=Math.max(0,e.tabIndex),a=s-o,c=n.index-e.index;if(a){if(!s)return 1;if(!o)return-1}return a||c},getTabIndex=function(n){return n.tabIndex<0&&!n.hasAttribute("tabindex")?0:n.tabIndex},orderByTabIndex=function(n,e,s){return toArray(n).map(function(o,a){var c=getTabIndex(o);return{node:o,index:a,tabIndex:s&&c===-1?(o.dataset||{}).focusGuard?0:-1:c}}).filter(function(o){return!e||o.tabIndex>=0}).sort(tabSort)},tabbables=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],queryTabbables=tabbables.join(","),queryGuardTabbables="".concat(queryTabbables,", [data-focus-guard]"),getFocusablesWithShadowDom=function(n,e){return toArray((n.shadowRoot||n).children).reduce(function(s,o){return s.concat(o.matches(e?queryGuardTabbables:queryTabbables)?[o]:[],getFocusablesWithShadowDom(o))},[])},getFocusablesWithIFrame=function(n,e){var s;return n instanceof HTMLIFrameElement&&(!((s=n.contentDocument)===null||s===void 0)&&s.body)?getFocusables([n.contentDocument.body],e):[n]},getFocusables=function(n,e){return n.reduce(function(s,o){var a,c=getFocusablesWithShadowDom(o,e),u=(a=[]).concat.apply(a,c.map(function(h){return getFocusablesWithIFrame(h,e)}));return s.concat(u,o.parentNode?toArray(o.parentNode.querySelectorAll(queryTabbables)).filter(function(h){return h===o}):[])},[])},getParentAutofocusables=function(n){var e=n.querySelectorAll("[".concat(FOCUS_AUTO,"]"));return toArray(e).map(function(s){return getFocusables([s])}).reduce(function(s,o){return s.concat(o)},[])},filterFocusable=function(n,e){return toArray(n).filter(function(s){return isVisibleCached(e,s)}).filter(function(s){return notHiddenInput(s)})},filterAutoFocusable=function(n,e){return e===void 0&&(e=new Map),toArray(n).filter(function(s){return isAutoFocusAllowedCached(e,s)})},getTabbableNodes=function(n,e,s){return orderByTabIndex(filterFocusable(getFocusables(n,s),e),!0,s)},getFocusableNodes=function(n,e){return orderByTabIndex(filterFocusable(getFocusables(n),e),!1)},parentAutofocusables=function(n,e){return filterFocusable(getParentAutofocusables(n),e)},contains=function(n,e){return n.shadowRoot?contains(n.shadowRoot,e):Object.getPrototypeOf(n).contains!==void 0&&Object.getPrototypeOf(n).contains.call(n,e)?!0:toArray(n.children).some(function(s){var o;if(s instanceof HTMLIFrameElement){var a=(o=s.contentDocument)===null||o===void 0?void 0:o.body;return a?contains(a,e):!1}return contains(s,e)})},filterNested=function(n){for(var e=new Set,s=n.length,o=0;o<s;o+=1)for(var a=o+1;a<s;a+=1){var c=n[o].compareDocumentPosition(n[a]);(c&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(a),(c&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(o)}return n.filter(function(u,h){return!e.has(h)})},getTopParent=function(n){return n.parentNode?getTopParent(n.parentNode):n},getAllAffectedNodes=function(n){var e=asArray(n);return e.filter(Boolean).reduce(function(s,o){var a=o.getAttribute(FOCUS_GROUP);return s.push.apply(s,a?filterNested(toArray(getTopParent(o).querySelectorAll("[".concat(FOCUS_GROUP,'="').concat(a,'"]:not([').concat(FOCUS_DISABLED,'="disabled"])')))):[o]),s},[])},safeProbe=function(n){try{return n()}catch{return}},getActiveElement=function(n){if(n===void 0&&(n=document),!(!n||!n.activeElement)){var e=n.activeElement;return e.shadowRoot?getActiveElement(e.shadowRoot):e instanceof HTMLIFrameElement&&safeProbe(function(){return e.contentWindow.document})?getActiveElement(e.contentWindow.document):e}},focusInFrame=function(n,e){return n===e},focusInsideIframe=function(n,e){return!!toArray(n.querySelectorAll("iframe")).some(function(s){return focusInFrame(s,e)})},focusInside=function(n,e){return e===void 0&&(e=getActiveElement(getFirst(n).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:getAllAffectedNodes(n).some(function(s){return contains(s,e)||focusInsideIframe(s,e)})},focusIsHidden=function(n){n===void 0&&(n=document);var e=getActiveElement(n);return e?toArray(n.querySelectorAll("[".concat(FOCUS_ALLOW,"]"))).some(function(s){return contains(s,e)}):!1},findSelectedRadio=function(n,e){return e.filter(isRadioElement).filter(function(s){return s.name===n.name}).filter(function(s){return s.checked})[0]||n},correctNode=function(n,e){return isRadioElement(n)&&n.name?findSelectedRadio(n,e):n},correctNodes=function(n){var e=new Set;return n.forEach(function(s){return e.add(correctNode(s,n))}),n.filter(function(s){return e.has(s)})},pickFirstFocus=function(n){return n[0]&&n.length>1?correctNode(n[0],n):n[0]},pickFocusable=function(n,e){return n.indexOf(correctNode(e,n))},NEW_FOCUS="NEW_FOCUS",newFocus=function(n,e,s,o,a){var c=n.length,u=n[0],h=n[c-1],m=isGuard(o);if(!(o&&n.indexOf(o)>=0)){var g=o!==void 0?s.indexOf(o):-1,_=a?s.indexOf(a):g,b=a?n.indexOf(a):-1;if(g===-1)return b!==-1?b:NEW_FOCUS;if(b===-1)return NEW_FOCUS;var T=g-_,A=s.indexOf(u),R=s.indexOf(h),w=correctNodes(s),D=o!==void 0?w.indexOf(o):-1,fn=a?w.indexOf(a):D,yn=w.filter(function(jt){return jt.tabIndex>=0}),pn=o!==void 0?yn.indexOf(o):-1,wn=a?yn.indexOf(a):pn,V=pn>=0&&wn>=0?wn-pn:fn-D;if(!T&&b>=0||e.length===0)return b;var bn=pickFocusable(n,e[0]),wt=pickFocusable(n,e[e.length-1]);if(g<=A&&m&&Math.abs(T)>1)return wt;if(g>=R&&m&&Math.abs(T)>1)return bn;if(T&&Math.abs(V)>1)return b;if(g<=A)return wt;if(g>R)return bn;if(T)return Math.abs(T)>1?b:(c+b+T)%c}},findAutoFocused=function(n){return function(e){var s,o=(s=getDataset(e))===null||s===void 0?void 0:s.autofocus;return e.autofocus||o!==void 0&&o!=="false"||n.indexOf(e)>=0}},pickAutofocus=function(n,e,s){var o=n.map(function(c){var u=c.node;return u}),a=filterAutoFocusable(o.filter(findAutoFocused(s)));return a&&a.length?pickFirstFocus(a):pickFirstFocus(filterAutoFocusable(e))},getParents=function(n,e){return e===void 0&&(e=[]),e.push(n),n.parentNode&&getParents(n.parentNode.host||n.parentNode,e),e},getCommonParent=function(n,e){for(var s=getParents(n),o=getParents(e),a=0;a<s.length;a+=1){var c=s[a];if(o.indexOf(c)>=0)return c}return!1},getTopCommonParent=function(n,e,s){var o=asArray(n),a=asArray(e),c=o[0],u=!1;return a.filter(Boolean).forEach(function(h){u=getCommonParent(u||h,h)||u,s.filter(Boolean).forEach(function(m){var g=getCommonParent(c,m);g&&(!u||contains(g,u)?u=g:u=getCommonParent(g,u))})}),u},allParentAutofocusables=function(n,e){return n.reduce(function(s,o){return s.concat(parentAutofocusables(o,e))},[])},reorderNodes=function(n,e){var s=new Map;return e.forEach(function(o){return s.set(o.node,o)}),n.map(function(o){return s.get(o)}).filter(isDefined)},focusSolver=function(n,e){var s=getActiveElement(asArray(n).length>0?document:getFirst(n).ownerDocument),o=getAllAffectedNodes(n).filter(isNotAGuard),a=getTopCommonParent(s||n,n,o),c=new Map,u=getFocusableNodes(o,c),h=u.filter(function(R){var w=R.node;return isNotAGuard(w)});if(h[0]){var m=getFocusableNodes([a],c).map(function(R){var w=R.node;return w}),g=reorderNodes(m,h),_=g.map(function(R){var w=R.node;return w}),b=g.filter(function(R){var w=R.tabIndex;return w>=0}).map(function(R){var w=R.node;return w}),T=newFocus(_,b,m,s,e);if(T===NEW_FOCUS){var A=pickAutofocus(u,b,allParentAutofocusables(o,c))||pickAutofocus(u,_,allParentAutofocusables(o,c));if(A)return{node:A};console.warn("focus-lock: cannot find any node to move focus into");return}return T===void 0?T:g[T]}},expandFocusableNodes=function(n){var e=getAllAffectedNodes(n).filter(isNotAGuard),s=getTopCommonParent(n,n,e),o=orderByTabIndex(getFocusables([s],!0),!0,!0),a=getFocusables(e,!1);return o.map(function(c){var u=c.node,h=c.index;return{node:u,index:h,lockItem:a.indexOf(u)>=0,guard:isGuard(u)}})},focusOn=function(n,e){n&&("focus"in n&&n.focus(e),"contentWindow"in n&&n.contentWindow&&n.contentWindow.focus())},guardCount=0,lockDisabled=!1,moveFocusInside=function(n,e,s){s===void 0&&(s={});var o=focusSolver(n,e);if(!lockDisabled&&o){if(guardCount>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),lockDisabled=!0,setTimeout(function(){lockDisabled=!1},1);return}guardCount++,focusOn(o.node,s.focusOptions),guardCount--}};function weakRef(n){if(!n)return null;if(typeof WeakRef>"u")return function(){return n||null};var e=n?new WeakRef(n):null;return function(){return e?.deref()||null}}var recordElementLocation=function(n){if(!n)return null;for(var e=[],s=n;s&&s!==document.body;)e.push({current:weakRef(s),parent:weakRef(s.parentElement),left:weakRef(s.previousElementSibling),right:weakRef(s.nextElementSibling)}),s=s.parentElement;return{element:weakRef(n),stack:e,ownerDocument:n.ownerDocument}},restoreFocusTo=function(n){var e,s,o,a,c;if(n)for(var u=n.stack,h=n.ownerDocument,m=new Map,g=0,_=u;g<_.length;g++){var b=_[g],T=(e=b.parent)===null||e===void 0?void 0:e.call(b);if(T&&h.contains(T)){for(var A=(s=b.left)===null||s===void 0?void 0:s.call(b),R=b.current(),w=T.contains(R)?R:void 0,D=(o=b.right)===null||o===void 0?void 0:o.call(b),fn=getTabbableNodes([T],m),yn=(c=(a=w??A?.nextElementSibling)!==null&&a!==void 0?a:D)!==null&&c!==void 0?c:A;yn;){for(var pn=0,wn=fn;pn<wn.length;pn++){var V=wn[pn];if(yn?.contains(V.node))return V.node}yn=yn.nextElementSibling}if(fn.length)return fn[0].node}}},captureFocusRestore=function(n){var e=recordElementLocation(n);return function(){return restoreFocusTo(e)}},getRelativeFocusable=function(n,e,s){if(!n||!e)return console.error("no element or scope given"),{};var o=asArray(e);if(o.every(function(u){return!contains(u,n)}))return console.error("Active element is not contained in the scope"),{};var a=s?getTabbableNodes(o,new Map):getFocusableNodes(o,new Map),c=a.findIndex(function(u){var h=u.node;return h===n});if(c!==-1)return{prev:a[c-1],next:a[c+1],first:a[0],last:a[a.length-1]}},getBoundary=function(n,e){var s=e?getTabbableNodes(asArray(n),new Map):getFocusableNodes(asArray(n),new Map);return{first:s[0],last:s[s.length-1]}},defaultOptions=function(n){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},n)},moveFocus=function(n,e,s){e===void 0&&(e={});var o=defaultOptions(e),a=getRelativeFocusable(n,o.scope,o.onlyTabbable);if(a){var c=s(a,o.cycle);c&&focusOn(c.node,o.focusOptions)}},focusNextElement=function(n,e){e===void 0&&(e={}),moveFocus(n,e,function(s,o){var a=s.next,c=s.first;return a||o&&c})},focusPrevElement=function(n,e){e===void 0&&(e={}),moveFocus(n,e,function(s,o){var a=s.prev,c=s.last;return a||o&&c})},pickBoundary=function(n,e,s){var o,a=getBoundary(n,(o=e.onlyTabbable)!==null&&o!==void 0?o:!0),c=a[s];c&&focusOn(c.node,e.focusOptions)},focusFirstElement=function(n,e){e===void 0&&(e={}),pickBoundary(n,e,"first")},focusLastElement=function(n,e){e===void 0&&(e={}),pickBoundary(n,e,"last")};function deferAction(n){setTimeout(n,1)}var extractRef$1=function(e){return e&&"current"in e?e.current:e},focusOnBody=function(){return document&&document.activeElement===document.body},isFreeFocus=function(){return focusOnBody()||focusIsHidden()},lastActiveTrap=null,lastActiveFocus=null,tryRestoreFocus=function(){return null},lastPortaledElement=null,focusWasOutsideWindow=!1,windowFocused=!1,defaultWhitelist=function(){return!0},focusWhitelisted=function(e){return(lastActiveTrap.whiteList||defaultWhitelist)(e)},recordPortal=function(e,s){lastPortaledElement={observerNode:e,portaledElement:s}},focusIsPortaledPair=function(e){return lastPortaledElement&&lastPortaledElement.portaledElement===e};function autoGuard(n,e,s,o){var a=null,c=n;do{var u=o[c];if(u.guard)u.node.dataset.focusAutoGuard&&(a=u);else if(u.lockItem){if(c!==n)return;a=null}else break}while((c+=s)!==e);a&&(a.node.tabIndex=0)}var focusWasOutside=function(e){return e?!!focusWasOutsideWindow:focusWasOutsideWindow==="meanwhile"},checkInHost=function n(e,s,o){return s&&(s.host===e&&(!s.activeElement||o.contains(s.activeElement))||s.parentNode&&n(e,s.parentNode,o))},withinHost=function(e,s){return s.some(function(o){return checkInHost(e,o,o)})},getNodeFocusables=function(e){return getFocusableNodes(e,new Map)},isNotFocusable=function(e){return!getNodeFocusables([e.parentNode]).some(function(s){return s.node===e})},activateTrap=function(){var e=!1;if(lastActiveTrap){var s=lastActiveTrap,o=s.observed,a=s.persistentFocus,c=s.autoFocus,u=s.shards,h=s.crossFrame,m=s.focusOptions,g=s.noFocusGuards,_=o||lastPortaledElement&&lastPortaledElement.portaledElement;if(focusOnBody()&&lastActiveFocus&&lastActiveFocus!==document.body&&(!document.body.contains(lastActiveFocus)||isNotFocusable(lastActiveFocus))){var b=tryRestoreFocus();b&&b.focus()}var T=document&&document.activeElement;if(_){var A=[_].concat(u.map(extractRef$1).filter(Boolean)),R=function(){if(!focusWasOutside(h)||!g||!lastActiveFocus||windowFocused)return!1;var pn=getNodeFocusables(A),wn=pn.findIndex(function(V){var bn=V.node;return bn===lastActiveFocus});return wn===0||wn===pn.length-1};if((!T||focusWhitelisted(T))&&(a||R()||!isFreeFocus()||!lastActiveFocus&&c)&&(_&&!(focusInside(A)||T&&withinHost(T,A)||focusIsPortaledPair(T))&&(document&&!lastActiveFocus&&T&&!c?(T.blur&&T.blur(),document.body.focus()):(e=moveFocusInside(A,lastActiveFocus,{focusOptions:m}),lastPortaledElement={})),lastActiveFocus=document&&document.activeElement,lastActiveFocus!==document.body&&(tryRestoreFocus=captureFocusRestore(lastActiveFocus)),focusWasOutsideWindow=!1),document&&T!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var w=document&&document.activeElement,D=expandFocusableNodes(A),fn=D.map(function(yn){var pn=yn.node;return pn}).indexOf(w);fn>-1&&(D.filter(function(yn){var pn=yn.guard,wn=yn.node;return pn&&wn.dataset.focusAutoGuard}).forEach(function(yn){var pn=yn.node;return pn.removeAttribute("tabIndex")}),autoGuard(fn,D.length,1,D),autoGuard(fn,-1,-1,D))}}}return e},onTrap=function(e){activateTrap()&&e&&(e.stopPropagation(),e.preventDefault())},onBlur=function(){return deferAction(activateTrap)},onFocus=function(e){var s=e.target,o=e.currentTarget;o.contains(s)||recordPortal(o,s)},FocusWatcher=function(){return null},onWindowFocus=function(){windowFocused=!0},onWindowBlur=function(){windowFocused=!1,focusWasOutsideWindow="just",deferAction(function(){focusWasOutsideWindow="meanwhile"})},attachHandler=function(){document.addEventListener("focusin",onTrap),document.addEventListener("focusout",onBlur),window.addEventListener("focus",onWindowFocus),window.addEventListener("blur",onWindowBlur)},detachHandler=function(){document.removeEventListener("focusin",onTrap),document.removeEventListener("focusout",onBlur),window.removeEventListener("focus",onWindowFocus),window.removeEventListener("blur",onWindowBlur)};function reducePropsToState(n){return n.filter(function(e){var s=e.disabled;return!s})}var focusLockAPI={moveFocusInside,focusInside,focusNextElement,focusPrevElement,focusFirstElement,focusLastElement,captureFocusRestore};function handleStateChangeOnClient(n){var e=n.slice(-1)[0];e&&!lastActiveTrap&&attachHandler();var s=lastActiveTrap,o=s&&e&&e.id===s.id;lastActiveTrap=e,s&&!o&&(s.onDeactivation(),n.filter(function(a){var c=a.id;return c===s.id}).length||s.returnFocus(!e)),e?(lastActiveFocus=null,(!o||s.observed!==e.observed)&&e.onActivation(focusLockAPI),activateTrap(),deferAction(activateTrap)):(detachHandler(),lastActiveFocus=null)}mediumFocus.assignSyncMedium(onFocus);mediumBlur.assignMedium(onBlur);mediumEffect.assignMedium(function(n){return n(focusLockAPI)});const FocusTrap$1=withSideEffect(reducePropsToState,handleStateChangeOnClient)(FocusWatcher);var FocusLockCombination=reactExports.forwardRef(function(e,s){return React.createElement(FocusLock$1,_extends$1({sideCar:FocusTrap$1,ref:s},e))}),_ref=FocusLock$1.propTypes||{};_ref.sideCar;_objectWithoutPropertiesLoose$1(_ref,["sideCar"]);FocusLockCombination.propTypes={};const FocusTrap=FocusLockCombination.default??FocusLockCombination,FocusLock=n=>{const{initialFocusRef:e,finalFocusRef:s,contentRef:o,restoreFocus:a,children:c,isDisabled:u,autoFocus:h,persistentFocus:m,lockFocusAcrossFrames:g}=n,_=reactExports.useCallback(()=>{e?.current?e.current.focus():o?.current&&getAllFocusable(o.current).length===0&&requestAnimationFrame(()=>{o.current?.focus()})},[e,o]),b=reactExports.useCallback(()=>{s?.current?.focus()},[s]),T=a&&!s;return jsxRuntimeExports.jsx(FocusTrap,{crossFrame:g,persistentFocus:m,autoFocus:h,disabled:u,onActivation:_,onDeactivation:b,returnFocus:T,children:c})};FocusLock.displayName="FocusLock";function createIcon(n){const{viewBox:e="0 0 24 24",d:s,displayName:o,defaultProps:a={}}=n,c=reactExports.Children.toArray(n.path),u=forwardRef((h,m)=>jsxRuntimeExports.jsx(Icon,{ref:m,viewBox:e,...a,...h,children:c.length?c:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:s})}));return u.displayName=o,u}const Input=forwardRef(function(e,s){const{htmlSize:o,...a}=e,c=useMultiStyleConfig("Input",a),u=omitThemingProps(a),h=useFormControl(u),m=cx("chakra-input",e.className);return jsxRuntimeExports.jsx(chakra.input,{size:o,...h,__css:c.field,ref:s,className:m})});Input.displayName="Input";Input.id="Input";const[InputGroupStylesProvider,useInputGroupStyles]=createContext({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),InputGroup=forwardRef(function(e,s){const o=useMultiStyleConfig("Input",e),{children:a,className:c,...u}=omitThemingProps(e),h=cx("chakra-input__group",c),m={},g=getValidChildren(a),_=o.field;g.forEach(T=>{o&&(_&&T.type.id==="InputLeftElement"&&(m.paddingStart=_.height??_.h),_&&T.type.id==="InputRightElement"&&(m.paddingEnd=_.height??_.h),T.type.id==="InputRightAddon"&&(m.borderEndRadius=0),T.type.id==="InputLeftAddon"&&(m.borderStartRadius=0))});const b=g.map(T=>{const A=compact({size:T.props?.size||e.size,variant:T.props?.variant||e.variant});return T.type.id!=="Input"?reactExports.cloneElement(T,A):reactExports.cloneElement(T,Object.assign(A,m,T.props))});return jsxRuntimeExports.jsx(chakra.div,{className:h,ref:s,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...o.group},"data-group":!0,...u,children:jsxRuntimeExports.jsx(InputGroupStylesProvider,{value:o,children:b})})});InputGroup.displayName="InputGroup";const StyledInputElement=chakra("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),InputElement=forwardRef(function(e,s){const{placement:o="left",...a}=e,c=useInputGroupStyles(),u=c.field,m={[o==="left"?"insetStart":"insetEnd"]:"0",width:u?.height??u?.h,height:u?.height??u?.h,fontSize:u?.fontSize,...c.element};return jsxRuntimeExports.jsx(StyledInputElement,{ref:s,__css:m,...a})});InputElement.id="InputElement";InputElement.displayName="InputElement";const InputLeftElement=forwardRef(function(e,s){const{className:o,...a}=e,c=cx("chakra-input__left-element",o);return jsxRuntimeExports.jsx(InputElement,{ref:s,placement:"left",className:c,...a})});InputLeftElement.id="InputLeftElement";InputLeftElement.displayName="InputLeftElement";const InputRightElement=forwardRef(function(e,s){const{className:o,...a}=e,c=cx("chakra-input__right-element",o);return jsxRuntimeExports.jsx(InputElement,{ref:s,placement:"right",className:c,...a})});InputRightElement.id="InputRightElement";InputRightElement.displayName="InputRightElement";var getDefaultParent=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(n){return n&&(n.host||unwrapHost(n.parentNode))},correctTargets=function(n,e){return e.map(function(s){if(n.contains(s))return s;var o=unwrapHost(s);return o&&n.contains(o)?o:(console.error("aria-hidden",s,"in not contained inside",n,". Doing nothing"),null)}).filter(function(s){return!!s})},applyAttributeToOthers=function(n,e,s,o){var a=correctTargets(e,Array.isArray(n)?n:[n]);markerMap[s]||(markerMap[s]=new WeakMap);var c=markerMap[s],u=[],h=new Set,m=new Set(a),g=function(b){!b||h.has(b)||(h.add(b),g(b.parentNode))};a.forEach(g);var _=function(b){!b||m.has(b)||Array.prototype.forEach.call(b.children,function(T){if(h.has(T))_(T);else try{var A=T.getAttribute(o),R=A!==null&&A!=="false",w=(counterMap.get(T)||0)+1,D=(c.get(T)||0)+1;counterMap.set(T,w),c.set(T,D),u.push(T),w===1&&R&&uncontrolledNodes.set(T,!0),D===1&&T.setAttribute(s,"true"),R||T.setAttribute(o,"true")}catch(fn){console.error("aria-hidden: cannot operate on ",T,fn)}})};return _(e),h.clear(),lockCount++,function(){u.forEach(function(b){var T=counterMap.get(b)-1,A=c.get(b)-1;counterMap.set(b,T),c.set(b,A),T||(uncontrolledNodes.has(b)||b.removeAttribute(o),uncontrolledNodes.delete(b)),A||b.removeAttribute(s)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(n,e,s){s===void 0&&(s="data-aria-hidden");var o=Array.from(Array.isArray(n)?n:[n]),a=getDefaultParent(n);return a?(o.push.apply(o,Array.from(a.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(o,a,s,"aria-hidden")):function(){return null}},__defProp$1=Object.defineProperty,__defNormalProp=(n,e,s)=>e in n?__defProp$1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,__publicField=(n,e,s)=>(__defNormalProp(n,e+"",s),s);class ModalManager{constructor(){__publicField(this,"modals"),this.modals=new Set}add(e){return this.modals.add(e),this.modals.size}remove(e){this.modals.delete(e)}isTopModal(e){if(!e)return!1;const s=Array.from(this.modals)[this.modals.size-1];return e===s}}const modalManager=new ModalManager;function useModalManager(n,e){const[s,o]=reactExports.useState(0);return reactExports.useEffect(()=>{const a=n.current;if(a){if(e){const c=modalManager.add(a);o(c)}return()=>{modalManager.remove(a),o(0)}}},[e,n]),s}function useModal(n){const{isOpen:e,onClose:s,id:o,closeOnOverlayClick:a=!0,closeOnEsc:c=!0,useInert:u=!0,onOverlayClick:h,onEsc:m}=n,g=reactExports.useRef(null),_=reactExports.useRef(null),[b,T,A]=useIds(o,"chakra-modal","chakra-modal--header","chakra-modal--body");useAriaHidden(g,e&&u);const R=useModalManager(g,e),w=reactExports.useRef(null),D=reactExports.useCallback(ln=>{w.current=ln.target},[]),fn=reactExports.useCallback(ln=>{ln.key==="Escape"&&(ln.stopPropagation(),c&&s?.(),m?.())},[c,s,m]),[yn,pn]=reactExports.useState(!1),[wn,V]=reactExports.useState(!1),bn=reactExports.useCallback((ln={},vn=null)=>({role:"dialog",...ln,ref:mergeRefs(vn,g),id:b,tabIndex:-1,"aria-modal":!0,"aria-labelledby":yn?T:void 0,"aria-describedby":wn?A:void 0,onClick:callAllHandlers(ln.onClick,dn=>dn.stopPropagation())}),[A,wn,b,T,yn]),wt=reactExports.useCallback(ln=>{ln.stopPropagation(),w.current===ln.target&&modalManager.isTopModal(g.current)&&(a&&s?.(),h?.())},[s,a,h]),jt=reactExports.useCallback((ln={},vn=null)=>({...ln,ref:mergeRefs(vn,_),onClick:callAllHandlers(ln.onClick,wt),onKeyDown:callAllHandlers(ln.onKeyDown,fn),onMouseDown:callAllHandlers(ln.onMouseDown,D)}),[fn,D,wt]);return{isOpen:e,onClose:s,headerId:T,bodyId:A,setBodyMounted:V,setHeaderMounted:pn,dialogRef:g,overlayRef:_,getDialogProps:bn,getDialogContainerProps:jt,index:R}}function useAriaHidden(n,e){const s=n.current;reactExports.useEffect(()=>{if(!(!n.current||!e))return hideOthers(n.current)},[e,n,s])}function useIds(n,...e){const s=reactExports.useId(),o=n||s;return reactExports.useMemo(()=>e.map(a=>`${a}-${o}`),[o,e])}const[ModalStylesProvider,useModalStyles]=createContext({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[ModalContextProvider,useModalContext]=createContext({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),Modal=n=>{const e={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,preserveScrollBarGap:!0,motionPreset:"scale",...n,lockFocusAcrossFrames:n.lockFocusAcrossFrames??!0},{portalProps:s,children:o,autoFocus:a,trapFocus:c,initialFocusRef:u,finalFocusRef:h,returnFocusOnClose:m,blockScrollOnMount:g,allowPinchZoom:_,preserveScrollBarGap:b,motionPreset:T,lockFocusAcrossFrames:A,animatePresenceProps:R,onCloseComplete:w}=e,D=useMultiStyleConfig("Modal",e),yn={...useModal(e),autoFocus:a,trapFocus:c,initialFocusRef:u,finalFocusRef:h,returnFocusOnClose:m,blockScrollOnMount:g,allowPinchZoom:_,preserveScrollBarGap:b,motionPreset:T,lockFocusAcrossFrames:A};return jsxRuntimeExports.jsx(ModalContextProvider,{value:yn,children:jsxRuntimeExports.jsx(ModalStylesProvider,{value:D,children:jsxRuntimeExports.jsx(AnimatePresence,{...R,onExitComplete:w,children:yn.isOpen&&jsxRuntimeExports.jsx(Portal,{...s,children:o})})})})};Modal.displayName="Modal";var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size",effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(n,e){var s=reactExports.useRef(null),o=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),a=o[0],c=o[1],u=n.forwardProps,h=n.children,m=n.className,g=n.removeScrollBar,_=n.enabled,b=n.shards,T=n.sideCar,A=n.noRelative,R=n.noIsolation,w=n.inert,D=n.allowPinchZoom,fn=n.as,yn=fn===void 0?"div":fn,pn=n.gapMode,wn=__rest(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),V=T,bn=useMergeRefs([s,e]),wt=__assign(__assign({},wn),a);return reactExports.createElement(reactExports.Fragment,null,_&&reactExports.createElement(V,{sideCar:effectCar,removeScrollBar:g,shards:b,noRelative:A,noIsolation:R,inert:w,setCallbacks:c,allowPinchZoom:!!D,lockRef:s,gapMode:pn}),u?reactExports.cloneElement(reactExports.Children.only(h),__assign(__assign({},wt),{ref:bn})):reactExports.createElement(yn,__assign({},wt,{className:m,ref:bn}),h))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=getNonce();return e&&n.setAttribute("nonce",e),n}function injectStyles(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function insertStyleTag(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var stylesheetSingleton=function(){var n=0,e=null;return{add:function(s){n==0&&(e=makeStyleTag())&&(injectStyles(e,s),insertStyleTag(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},styleHookSingleton=function(){var n=stylesheetSingleton();return function(e,s){reactExports.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&s])}},styleSingleton=function(){var n=styleHookSingleton(),e=function(s){var o=s.styles,a=s.dynamic;return n(o,a),null};return e},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(n){return parseInt(n||"",10)||0},getOffset=function(n){var e=window.getComputedStyle(document.body),s=e[n==="padding"?"paddingLeft":"marginLeft"],o=e[n==="padding"?"paddingTop":"marginTop"],a=e[n==="padding"?"paddingRight":"marginRight"];return[parse$1(s),parse$1(o),parse$1(a)]},getGapWidth=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return zeroGap;var e=getOffset(n),s=document.documentElement.clientWidth,o=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,o-s+e[2]-e[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles$1=function(n,e,s,o){var a=n.left,c=n.top,u=n.right,h=n.gap;return s===void 0&&(s="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(h,"px ").concat(o,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(o,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(o,`;
    `),s==="padding"&&"padding-right: ".concat(h,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(h,"px ").concat(o,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(h,"px ").concat(o,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(h,`px;
  }
`)},getCurrentUseCounter=function(){var n=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(n)?n:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var n=getCurrentUseCounter()-1;n<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,n.toString())}},[])},RemoveScrollBar=function(n){var e=n.noRelative,s=n.noImportant,o=n.gapMode,a=o===void 0?"margin":o;useLockAttribute();var c=reactExports.useMemo(function(){return getGapWidth(a)},[a]);return reactExports.createElement(Style,{styles:getStyles$1(c,!e,a,s?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(n){return n.tagName==="TEXTAREA"},elementCanBeScrolled=function(n,e){if(!(n instanceof Element))return!1;var s=window.getComputedStyle(n);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!alwaysContainsScroll(n)&&s[e]==="visible")},elementCouldBeVScrolled=function(n){return elementCanBeScrolled(n,"overflowY")},elementCouldBeHScrolled=function(n){return elementCanBeScrolled(n,"overflowX")},locationCouldBeScrolled=function(n,e){var s=e.ownerDocument,o=e;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var a=elementCouldBeScrolled(n,o);if(a){var c=getScrollVariables(n,o),u=c[1],h=c[2];if(u>h)return!0}o=o.parentNode}while(o&&o!==s.body);return!1},getVScrollVariables=function(n){var e=n.scrollTop,s=n.scrollHeight,o=n.clientHeight;return[e,s,o]},getHScrollVariables=function(n){var e=n.scrollLeft,s=n.scrollWidth,o=n.clientWidth;return[e,s,o]},elementCouldBeScrolled=function(n,e){return n==="v"?elementCouldBeVScrolled(e):elementCouldBeHScrolled(e)},getScrollVariables=function(n,e){return n==="v"?getVScrollVariables(e):getHScrollVariables(e)},getDirectionFactor=function(n,e){return n==="h"&&e==="rtl"?-1:1},handleScroll=function(n,e,s,o,a){var c=getDirectionFactor(n,window.getComputedStyle(e).direction),u=c*o,h=s.target,m=e.contains(h),g=!1,_=u>0,b=0,T=0;do{if(!h)break;var A=getScrollVariables(n,h),R=A[0],w=A[1],D=A[2],fn=w-D-c*R;(R||fn)&&elementCouldBeScrolled(n,h)&&(b+=fn,T+=R);var yn=h.parentNode;h=yn&&yn.nodeType===Node.DOCUMENT_FRAGMENT_NODE?yn.host:yn}while(!m&&h!==document.body||m&&(e.contains(h)||e===h));return(_&&Math.abs(b)<1||!_&&Math.abs(T)<1)&&(g=!0),g},getTouchXY=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(n){return[n.deltaX,n.deltaY]},extractRef=function(n){return n&&"current"in n?n.current:n},deltaCompare=function(n,e){return n[0]===e[0]&&n[1]===e[1]},generateStyle=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(n){var e=reactExports.useRef([]),s=reactExports.useRef([0,0]),o=reactExports.useRef(),a=reactExports.useState(idCounter++)[0],c=reactExports.useState(styleSingleton)[0],u=reactExports.useRef(n);reactExports.useEffect(function(){u.current=n},[n]),reactExports.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(a));var w=__spreadArray([n.lockRef.current],(n.shards||[]).map(extractRef),!0).filter(Boolean);return w.forEach(function(D){return D.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),w.forEach(function(D){return D.classList.remove("allow-interactivity-".concat(a))})}}},[n.inert,n.lockRef.current,n.shards]);var h=reactExports.useCallback(function(w,D){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!u.current.allowPinchZoom;var fn=getTouchXY(w),yn=s.current,pn="deltaX"in w?w.deltaX:yn[0]-fn[0],wn="deltaY"in w?w.deltaY:yn[1]-fn[1],V,bn=w.target,wt=Math.abs(pn)>Math.abs(wn)?"h":"v";if("touches"in w&&wt==="h"&&bn.type==="range")return!1;var jt=locationCouldBeScrolled(wt,bn);if(!jt)return!0;if(jt?V=wt:(V=wt==="v"?"h":"v",jt=locationCouldBeScrolled(wt,bn)),!jt)return!1;if(!o.current&&"changedTouches"in w&&(pn||wn)&&(o.current=V),!V)return!0;var ln=o.current||V;return handleScroll(ln,D,w,ln==="h"?pn:wn)},[]),m=reactExports.useCallback(function(w){var D=w;if(!(!lockStack.length||lockStack[lockStack.length-1]!==c)){var fn="deltaY"in D?getDeltaXY(D):getTouchXY(D),yn=e.current.filter(function(V){return V.name===D.type&&(V.target===D.target||D.target===V.shadowParent)&&deltaCompare(V.delta,fn)})[0];if(yn&&yn.should){D.cancelable&&D.preventDefault();return}if(!yn){var pn=(u.current.shards||[]).map(extractRef).filter(Boolean).filter(function(V){return V.contains(D.target)}),wn=pn.length>0?h(D,pn[0]):!u.current.noIsolation;wn&&D.cancelable&&D.preventDefault()}}},[]),g=reactExports.useCallback(function(w,D,fn,yn){var pn={name:w,delta:D,target:fn,should:yn,shadowParent:getOutermostShadowParent(fn)};e.current.push(pn),setTimeout(function(){e.current=e.current.filter(function(wn){return wn!==pn})},1)},[]),_=reactExports.useCallback(function(w){s.current=getTouchXY(w),o.current=void 0},[]),b=reactExports.useCallback(function(w){g(w.type,getDeltaXY(w),w.target,h(w,n.lockRef.current))},[]),T=reactExports.useCallback(function(w){g(w.type,getTouchXY(w),w.target,h(w,n.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(c),n.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:T}),document.addEventListener("wheel",m,nonPassive),document.addEventListener("touchmove",m,nonPassive),document.addEventListener("touchstart",_,nonPassive),function(){lockStack=lockStack.filter(function(w){return w!==c}),document.removeEventListener("wheel",m,nonPassive),document.removeEventListener("touchmove",m,nonPassive),document.removeEventListener("touchstart",_,nonPassive)}},[]);var A=n.removeScrollBar,R=n.inert;return reactExports.createElement(reactExports.Fragment,null,R?reactExports.createElement(c,{styles:generateStyle(a)}):null,A?reactExports.createElement(RemoveScrollBar,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function getOutermostShadowParent(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(n,e){return reactExports.createElement(RemoveScroll,__assign({},n,{ref:e,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;function ModalFocusScope(n){const{autoFocus:e,trapFocus:s,dialogRef:o,initialFocusRef:a,blockScrollOnMount:c,allowPinchZoom:u,finalFocusRef:h,returnFocusOnClose:m,preserveScrollBarGap:g,lockFocusAcrossFrames:_,isOpen:b}=useModalContext(),[T,A]=usePresence();reactExports.useEffect(()=>{!T&&A&&setTimeout(A)},[T,A]);const R=useModalManager(o,b);return jsxRuntimeExports.jsx(FocusLock,{autoFocus:e,isDisabled:!s,initialFocusRef:a,finalFocusRef:h,restoreFocus:m,contentRef:o,lockFocusAcrossFrames:_,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{removeScrollBar:!g,allowPinchZoom:u,enabled:R===1&&c,forwardProps:!0,children:n.children})})}const ModalBody=forwardRef((n,e)=>{const{className:s,...o}=n,{bodyId:a,setBodyMounted:c}=useModalContext();reactExports.useEffect(()=>(c(!0),()=>c(!1)),[c]);const u=cx("chakra-modal__body",s),h=useModalStyles();return jsxRuntimeExports.jsx(chakra.div,{ref:e,className:u,id:a,...o,__css:h.body})});ModalBody.displayName="ModalBody";const ModalHeader=forwardRef((n,e)=>{const{className:s,...o}=n,{headerId:a,setHeaderMounted:c}=useModalContext();reactExports.useEffect(()=>(c(!0),()=>c(!1)),[c]);const u=cx("chakra-modal__header",s),h=useModalStyles(),m={flex:0,...h.header};return jsxRuntimeExports.jsx(chakra.header,{ref:e,className:u,id:a,...o,__css:m})});ModalHeader.displayName="ModalHeader";const variants$1={enter:({transition:n,transitionEnd:e,delay:s}={})=>({opacity:1,transition:n?.enter??withDelay.enter(TRANSITION_DEFAULTS.enter,s),transitionEnd:e?.enter}),exit:({transition:n,transitionEnd:e,delay:s}={})=>({opacity:0,transition:n?.exit??withDelay.exit(TRANSITION_DEFAULTS.exit,s),transitionEnd:e?.exit})},fadeConfig={initial:"exit",animate:"enter",exit:"exit",variants:variants$1},Fade=reactExports.forwardRef(function(e,s){const{unmountOnExit:o,in:a,className:c,transition:u,transitionEnd:h,delay:m,animatePresenceProps:g,..._}=e,b=a||o?"enter":"exit",T=o?a&&o:!0,A={transition:u,transitionEnd:h,delay:m};return jsxRuntimeExports.jsx(AnimatePresence,{...g,custom:A,children:T&&jsxRuntimeExports.jsx(motion.div,{ref:s,className:cx("chakra-fade",c),custom:A,...fadeConfig,animate:b,..._})})});Fade.displayName="Fade";const MotionDiv$1=chakra(motion.div),ModalOverlay=forwardRef((n,e)=>{const{className:s,transition:o,motionProps:a,...c}=n,u=cx("chakra-modal__overlay",s),m={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",...useModalStyles().overlay},{motionPreset:g}=useModalContext(),b=a||(g==="none"?{}:fadeConfig);return jsxRuntimeExports.jsx(MotionDiv$1,{...b,__css:m,ref:e,className:u,...c})});ModalOverlay.displayName="ModalOverlay";const[DrawerContextProvider,useDrawerContext]=createContext(),placementMap={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function getDrawerPlacement(n,e){if(n)return placementMap[n]?.[e]??n}function Drawer(n){const{isOpen:e,onClose:s,placement:o="right",children:a,...c}=n,u=useTheme(),h=u.components?.Drawer,m=getDrawerPlacement(o,u.direction);return jsxRuntimeExports.jsx(DrawerContextProvider,{value:{placement:m},children:jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:s,styleConfig:h,...c,children:a})})}const defaultTransition={exit:{duration:.15,ease:TRANSITION_EASINGS.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},variants={exit:({direction:n,transition:e,transitionEnd:s,delay:o})=>{const{exit:a}=getSlideTransition({direction:n});return{...a,transition:e?.exit??withDelay.exit(defaultTransition.exit,o),transitionEnd:s?.exit}},enter:({direction:n,transitionEnd:e,transition:s,delay:o})=>{const{enter:a}=getSlideTransition({direction:n});return{...a,transition:s?.enter??withDelay.enter(defaultTransition.enter,o),transitionEnd:e?.enter}}},Slide=reactExports.forwardRef(function(e,s){const{direction:o="right",style:a,unmountOnExit:c,in:u,className:h,transition:m,transitionEnd:g,delay:_,motionProps:b,animatePresenceProps:T,...A}=e,R=getSlideTransition({direction:o}),w=Object.assign({position:"fixed"},R.position,a),D=c?u&&c:!0,fn=u||c?"enter":"exit",yn={transitionEnd:g,transition:m,direction:o,delay:_};return jsxRuntimeExports.jsx(AnimatePresence,{...T,custom:yn,children:D&&jsxRuntimeExports.jsx(motion.div,{...A,ref:s,initial:"exit",className:cx("chakra-slide",h),animate:fn,exit:"exit",custom:yn,variants,style:w,...b})})});Slide.displayName="Slide";const MotionDiv=chakra(Slide),DrawerContent=forwardRef((n,e)=>{const{className:s,children:o,motionProps:a,containerProps:c,...u}=n,{getDialogProps:h,getDialogContainerProps:m,isOpen:g}=useModalContext(),_=h(u,e),b=m(c),T=cx("chakra-modal__content",s),A=useModalStyles(),R={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...A.dialog},w={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...A.dialogContainer},{placement:D}=useDrawerContext();return jsxRuntimeExports.jsx(ModalFocusScope,{children:jsxRuntimeExports.jsx(chakra.div,{...b,className:"chakra-modal__content-container",__css:w,children:jsxRuntimeExports.jsx(MotionDiv,{motionProps:a,direction:D,in:g,className:T,..._,__css:R,children:o})})})});DrawerContent.displayName="DrawerContent";function valueToPercent(n,e,s){return(n-e)*100/(s-e)}keyframes$1({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}});keyframes$1({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});const progress=keyframes$1({"0%":{left:"-40%"},"100%":{left:"100%"}}),stripe=keyframes$1({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function getProgressProps(n){const{value:e=0,min:s,max:o,valueText:a,getValueText:c,isIndeterminate:u,role:h="progressbar"}=n,m=valueToPercent(e,s,o);return{bind:{"data-indeterminate":u?"":void 0,"aria-valuemax":o,"aria-valuemin":s,"aria-valuenow":u?void 0:e,"aria-valuetext":(()=>{if(e!=null)return typeof c=="function"?c(e,m):a})(),role:h},percent:m,value:e}}const[ProgressStylesProvider,useProgressStyles]=createContext({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),ProgressFilledTrack=forwardRef((n,e)=>{const{min:s,max:o,value:a,isIndeterminate:c,role:u,...h}=n,m=getProgressProps({value:a,min:s,max:o,isIndeterminate:c,role:u}),_={height:"100%",...useProgressStyles().filledTrack};return jsxRuntimeExports.jsx(chakra.div,{ref:e,style:{width:`${m.percent}%`,...h.style},...m.bind,...h,__css:_})}),Progress=forwardRef((n,e)=>{const{value:s,min:o=0,max:a=100,hasStripe:c,isAnimated:u,children:h,borderRadius:m,isIndeterminate:g,"aria-label":_,"aria-labelledby":b,"aria-valuetext":T,title:A,role:R,...w}=omitThemingProps(n),D=useMultiStyleConfig("Progress",n),fn=m??D.track?.borderRadius,yn={animation:`${stripe} 1s linear infinite`},V={...!g&&c&&u&&yn,...g&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${progress} 1s ease infinite normal none running`}},bn={overflow:"hidden",position:"relative",...D.track};return jsxRuntimeExports.jsx(chakra.div,{ref:e,borderRadius:fn,__css:bn,...w,children:jsxRuntimeExports.jsxs(ProgressStylesProvider,{value:D,children:[jsxRuntimeExports.jsx(ProgressFilledTrack,{"aria-label":_,"aria-labelledby":b,"aria-valuetext":T,min:o,max:a,value:s,isIndeterminate:g,css:V,borderRadius:fn,title:A,role:R}),h]})})});Progress.displayName="Progress";const SelectField=forwardRef(function(e,s){const{children:o,placeholder:a,className:c,...u}=e;return jsxRuntimeExports.jsxs(chakra.select,{...u,ref:s,className:cx("chakra-select",c),children:[a&&jsxRuntimeExports.jsx("option",{value:"",children:a}),o]})});SelectField.displayName="SelectField";const Select=forwardRef((n,e)=>{const s=useMultiStyleConfig("Select",n),{rootProps:o,placeholder:a,icon:c,color:u,height:h,h:m,minH:g,minHeight:_,iconColor:b,iconSize:T,...A}=omitThemingProps(n),[R,w]=split(A,layoutPropNames),D=useFormControl(w),fn={width:"100%",height:"fit-content",position:"relative",color:u},yn={paddingEnd:"2rem",...s.field,_focus:{zIndex:"unset",...s.field?._focus}};return jsxRuntimeExports.jsxs(chakra.div,{className:"chakra-select__wrapper",__css:fn,...R,...o,children:[jsxRuntimeExports.jsx(SelectField,{ref:e,height:m??h,minH:g??_,placeholder:a,...D,__css:yn,children:n.children}),jsxRuntimeExports.jsx(SelectIcon,{"data-disabled":dataAttr(D.disabled),...(b||u)&&{color:b||u},__css:s.icon,...T&&{fontSize:T},children:c})]})});Select.displayName="Select";const DefaultIcon=n=>jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),IconWrapper=chakra("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),SelectIcon=n=>{const{children:e=jsxRuntimeExports.jsx(DefaultIcon,{}),...s}=n,o=reactExports.cloneElement(e,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return jsxRuntimeExports.jsx(IconWrapper,{...s,className:"chakra-select__icon-wrapper",children:reactExports.isValidElement(e)?o:null})};SelectIcon.displayName="SelectIcon";function orient$1(n){const{orientation:e,vertical:s,horizontal:o}=n;return e==="vertical"?s:o}function getStyles(n){const{orientation:e,thumbPercents:s,isReversed:o}=n,a=A=>({position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...orient$1({orientation:e,vertical:{bottom:`${s[A]}%`,transform:"translate(-50%, 50%) scale(var(--slider-thumb-scale, 1))"},horizontal:{left:`${s[A]}%`,transform:"translate(-50%, -50%) scale(var(--slider-thumb-scale, 1))"}})}),c={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0},u={position:"absolute",...orient$1({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},h=s.length===1,m=[0,o?100-s[0]:s[0]],g=h?m:s;let _=g[0];!h&&o&&(_=100-_);const b=Math.abs(g[g.length-1]-g[0]),T={...u,...orient$1({orientation:e,vertical:o?{height:`${b}%`,top:`${_}%`}:{height:`${b}%`,bottom:`${_}%`},horizontal:o?{width:`${b}%`,right:`${_}%`}:{width:`${b}%`,left:`${_}%`}})};return{trackStyle:u,innerTrackStyle:T,rootStyle:c,getThumbStyle:a}}function getIsReversed(n){const{isReversed:e,direction:s,orientation:o}=n;return s==="ltr"||o==="vertical"?e:!e}function useSlider(n){const{min:e=0,max:s=100,onChange:o,value:a,defaultValue:c,isReversed:u,direction:h="ltr",orientation:m="horizontal",id:g,isDisabled:_,isReadOnly:b,onChangeStart:T,onChangeEnd:A,step:R=1,getAriaValueText:w,"aria-valuetext":D,"aria-label":fn,"aria-labelledby":yn,name:pn,focusThumbOnChange:wn=!0,...V}=n,bn=useCallbackRef$1(T),wt=useCallbackRef$1(A),jt=useCallbackRef$1(w),ln=getIsReversed({isReversed:u,direction:h,orientation:m}),[vn,dn]=useControllableState({value:a,defaultValue:c??getDefaultValue(e,s),onChange:o}),[mn,zt]=reactExports.useState(!1),[$n,Sn]=reactExports.useState(!1),En=!(_||b),Cn=(s-e)/10,On=R||(s-e)/100,Fn=clampValue(vn,e,s),An=s-Fn+e,Bn=valueToPercent$1(ln?An:Fn,e,s),Ln=m==="vertical",Xn=useLatestRef({min:e,max:s,step:R,isDisabled:_,value:Fn,isInteractive:En,isReversed:ln,isVertical:Ln,eventSource:null,focusThumbOnChange:wn,orientation:m}),er=reactExports.useRef(null),rr=reactExports.useRef(null),cr=reactExports.useRef(null),ar=reactExports.useId(),pr=g??ar,[_r,jr]=[`slider-thumb-${pr}`,`slider-track-${pr}`],Sr=reactExports.useCallback(xn=>{if(!er.current)return;const kn=Xn.current;kn.eventSource="pointer";const Hn=er.current.getBoundingClientRect(),{clientX:Qn,clientY:hr}=xn.touches?.[0]??xn,Zn=Ln?Hn.bottom-hr:Qn-Hn.left,or=Ln?Hn.height:Hn.width;let ur=Zn/or;ln&&(ur=1-ur);let fr=percentToValue(ur,kn.min,kn.max);return kn.step&&(fr=parseFloat(roundValueToStep(fr,kn.min,kn.step))),fr=clampValue(fr,kn.min,kn.max),fr},[Ln,ln,Xn]),Tr=reactExports.useCallback(xn=>{const kn=Xn.current;kn.isInteractive&&(xn=parseFloat(roundValueToStep(xn,kn.min,On)),xn=clampValue(xn,kn.min,kn.max),dn(xn))},[On,dn,Xn]),sr=reactExports.useMemo(()=>({stepUp(xn=On){const kn=ln?Fn-xn:Fn+xn;Tr(kn)},stepDown(xn=On){const kn=ln?Fn+xn:Fn-xn;Tr(kn)},reset(){Tr(c||0)},stepTo(xn){Tr(xn)}}),[Tr,ln,Fn,On,c]),Ar=reactExports.useCallback(xn=>{const kn=Xn.current,Qn={ArrowRight:()=>sr.stepUp(),ArrowUp:()=>sr.stepUp(),ArrowLeft:()=>sr.stepDown(),ArrowDown:()=>sr.stepDown(),PageUp:()=>sr.stepUp(Cn),PageDown:()=>sr.stepDown(Cn),Home:()=>Tr(kn.min),End:()=>Tr(kn.max)}[xn.key];Qn&&(xn.preventDefault(),xn.stopPropagation(),Qn(xn),kn.eventSource="keyboard")},[sr,Tr,Cn,Xn]),qr=jt?.(Fn)??D,{getThumbStyle:Vr,rootStyle:ui,trackStyle:si,innerTrackStyle:ni}=reactExports.useMemo(()=>{const xn=Xn.current;return getStyles({isReversed:ln,orientation:xn.orientation,thumbPercents:[Bn]})},[ln,Bn,Xn]),pi=reactExports.useCallback(()=>{Xn.current.focusThumbOnChange&&setTimeout(()=>rr.current?.focus())},[Xn]);useUpdateEffect(()=>{const xn=Xn.current;pi(),xn.eventSource==="keyboard"&&wt?.(xn.value)},[Fn,wt]);function ii(xn){const kn=Sr(xn);kn!=null&&kn!==Xn.current.value&&dn(kn)}usePanEvent(cr,{onPanSessionStart(xn){const kn=Xn.current;kn.isInteractive&&(zt(!0),pi(),ii(xn),bn?.(kn.value))},onPanSessionEnd(){const xn=Xn.current;xn.isInteractive&&(zt(!1),wt?.(xn.value))},onPan(xn){Xn.current.isInteractive&&ii(xn)}});const di=reactExports.useCallback((xn={},kn=null)=>({...xn,...V,ref:mergeRefs(kn,cr),tabIndex:-1,"aria-disabled":ariaAttr(_),"data-focused":dataAttr($n),style:{...xn.style,...ui}}),[V,_,$n,ui]),Zi=reactExports.useCallback((xn={},kn=null)=>({...xn,ref:mergeRefs(kn,er),id:jr,"data-disabled":dataAttr(_),style:{...xn.style,...si}}),[_,jr,si]),Ei=reactExports.useCallback((xn={},kn=null)=>({...xn,ref:kn,style:{...xn.style,...ni}}),[ni]),Ur=reactExports.useCallback((xn={},kn=null)=>({...xn,ref:mergeRefs(kn,rr),role:"slider",tabIndex:En?0:void 0,id:_r,"data-active":dataAttr(mn),"aria-valuetext":qr,"aria-valuemin":e,"aria-valuemax":s,"aria-valuenow":Fn,"aria-orientation":m,"aria-disabled":ariaAttr(_),"aria-readonly":ariaAttr(b),"aria-label":fn,"aria-labelledby":fn?void 0:yn,style:{...xn.style,...Vr(0)},onKeyDown:callAllHandlers(xn.onKeyDown,Ar),onFocus:callAllHandlers(xn.onFocus,()=>Sn(!0)),onBlur:callAllHandlers(xn.onBlur,()=>Sn(!1))}),[En,_r,mn,qr,e,s,Fn,m,_,b,fn,yn,Vr,Ar]),gn=reactExports.useCallback((xn,kn=null)=>{const Hn=!(xn.value<e||xn.value>s),Qn=Fn>=xn.value,hr=valueToPercent$1(xn.value,e,s),Zn={position:"absolute",pointerEvents:"none",...orient({orientation:m,vertical:{bottom:ln?`${100-hr}%`:`${hr}%`},horizontal:{left:ln?`${100-hr}%`:`${hr}%`}})};return{...xn,ref:kn,role:"presentation","aria-hidden":!0,"data-disabled":dataAttr(_),"data-invalid":dataAttr(!Hn),"data-highlighted":dataAttr(Qn),style:{...xn.style,...Zn}}},[_,ln,s,e,m,Fn]),P=reactExports.useCallback((xn={},kn=null)=>({...xn,ref:kn,type:"hidden",value:Fn,name:pn}),[pn,Fn]);return{state:{value:Fn,isFocused:$n,isDragging:mn},actions:sr,getRootProps:di,getTrackProps:Zi,getInnerTrackProps:Ei,getThumbProps:Ur,getMarkerProps:gn,getInputProps:P}}function orient(n){const{orientation:e,vertical:s,horizontal:o}=n;return e==="vertical"?s:o}function getDefaultValue(n,e){return e<n?n:n+(e-n)/2}const[SliderProvider,useSliderContext]=createContext({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[SliderStylesProvider,useSliderStyles]=createContext({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),Slider=forwardRef((n,e)=>{const s={...n,orientation:n?.orientation??"horizontal"},o=useMultiStyleConfig("Slider",s),a=omitThemingProps(s),{direction:c}=useTheme();a.direction=c;const{getInputProps:u,getRootProps:h,...m}=useSlider(a),g=h(),_=u({},e);return jsxRuntimeExports.jsx(SliderProvider,{value:m,children:jsxRuntimeExports.jsx(SliderStylesProvider,{value:o,children:jsxRuntimeExports.jsxs(chakra.div,{...g,className:cx("chakra-slider",s.className),__css:o.container,children:[s.children,jsxRuntimeExports.jsx("input",{..._})]})})})});Slider.displayName="Slider";const SliderThumb=forwardRef((n,e)=>{const{getThumbProps:s}=useSliderContext(),o=useSliderStyles(),a=s(n,e);return jsxRuntimeExports.jsx(chakra.div,{...a,className:cx("chakra-slider__thumb",n.className),__css:o.thumb})});SliderThumb.displayName="SliderThumb";const SliderTrack=forwardRef((n,e)=>{const{getTrackProps:s}=useSliderContext(),o=useSliderStyles(),a=s(n,e);return jsxRuntimeExports.jsx(chakra.div,{...a,className:cx("chakra-slider__track",n.className),__css:o.track})});SliderTrack.displayName="SliderTrack";const SliderFilledTrack=forwardRef((n,e)=>{const{getInnerTrackProps:s}=useSliderContext(),o=useSliderStyles(),a=s(n,e);return jsxRuntimeExports.jsx(chakra.div,{...a,className:cx("chakra-slider__filled-track",n.className),__css:o.filledTrack})});SliderFilledTrack.displayName="SliderFilledTrack";const SliderMark=forwardRef((n,e)=>{const{getMarkerProps:s}=useSliderContext(),o=useSliderStyles(),a=s(n,e);return jsxRuntimeExports.jsx(chakra.div,{...a,className:cx("chakra-slider__marker",n.className),__css:o.mark})});SliderMark.displayName="SliderMark";const StackItem=n=>jsxRuntimeExports.jsx(chakra.div,{className:"chakra-stack__item",...n,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...n.__css}});StackItem.displayName="StackItem";function getDividerStyles(n){const{spacing:e,direction:s}=n,o={column:{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":mapResponsive(s,a=>o[a])}}const Stack=forwardRef((n,e)=>{const{isInline:s,direction:o,align:a,justify:c,spacing:u="0.5rem",wrap:h,children:m,divider:g,className:_,shouldWrapChildren:b,...T}=n,A=s?"row":o??"column",R=reactExports.useMemo(()=>getDividerStyles({spacing:u,direction:A}),[u,A]),w=!!g,D=!b&&!w,fn=reactExports.useMemo(()=>{const pn=getValidChildren(m);return D?pn:pn.map((wn,V)=>{const bn=typeof wn.key<"u"?wn.key:V,wt=V+1===pn.length,ln=b?jsxRuntimeExports.jsx(StackItem,{children:wn},bn):wn;if(!w)return ln;const vn=reactExports.cloneElement(g,{__css:R}),dn=wt?null:vn;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[ln,dn]},bn)})},[g,R,w,D,b,m]),yn=cx("chakra-stack",_);return jsxRuntimeExports.jsx(chakra.div,{ref:e,display:"flex",alignItems:a,justifyContent:c,flexDirection:A,flexWrap:h,gap:w?void 0:u,className:yn,...T,children:fn})});Stack.displayName="Stack";const HStack=forwardRef((n,e)=>jsxRuntimeExports.jsx(Stack,{align:"center",...n,direction:"row",ref:e}));HStack.displayName="HStack";const VStack=forwardRef((n,e)=>jsxRuntimeExports.jsx(Stack,{align:"center",...n,direction:"column",ref:e}));VStack.displayName="VStack";const[StatStylesProvider,useStatStyles]=createContext({name:"StatStylesContext",errorMessage:`useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Stat />" `}),Stat=forwardRef(function(e,s){const o=useMultiStyleConfig("Stat",e),a={position:"relative",flex:"1 1 0%",...o.container},{className:c,children:u,...h}=omitThemingProps(e);return jsxRuntimeExports.jsx(StatStylesProvider,{value:o,children:jsxRuntimeExports.jsx(chakra.div,{ref:s,...h,className:cx("chakra-stat",c),__css:a,children:jsxRuntimeExports.jsx("dl",{children:u})})})});Stat.displayName="Stat";const StatLabel=forwardRef(function(e,s){const o=useStatStyles();return jsxRuntimeExports.jsx(chakra.dt,{ref:s,...e,className:cx("chakra-stat__label",e.className),__css:o.label})});StatLabel.displayName="StatLabel";const StatNumber=forwardRef(function(e,s){const o=useStatStyles();return jsxRuntimeExports.jsx(chakra.dd,{ref:s,...e,className:cx("chakra-stat__number",e.className),__css:{...o.number,fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}})});StatNumber.displayName="StatNumber";const Switch=forwardRef(function(e,s){const o=useMultiStyleConfig("Switch",e),{spacing:a="0.5rem",children:c,...u}=omitThemingProps(e),{getIndicatorProps:h,getInputProps:m,getCheckboxProps:g,getRootProps:_,getLabelProps:b}=useCheckbox(u),T=reactExports.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...o.container}),[o.container]),A=reactExports.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...o.track}),[o.track]),R=reactExports.useMemo(()=>({userSelect:"none",marginStart:a,...o.label}),[a,o.label]);return jsxRuntimeExports.jsxs(chakra.label,{..._(),className:cx("chakra-switch",e.className),__css:T,children:[jsxRuntimeExports.jsx("input",{className:"chakra-switch__input",...m({},s)}),jsxRuntimeExports.jsx(chakra.span,{...g(),className:"chakra-switch__track",__css:A,children:jsxRuntimeExports.jsx(chakra.span,{__css:o.thumb,className:"chakra-switch__thumb",...h()})}),c&&jsxRuntimeExports.jsx(chakra.span,{className:"chakra-switch__label",...b(),__css:R,children:c})]})});Switch.displayName="Switch";const[TagStylesProvider,useTagStyles]=createContext({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),Tag=forwardRef((n,e)=>{const s=useMultiStyleConfig("Tag",n),o=omitThemingProps(n),a={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...s.container};return jsxRuntimeExports.jsx(TagStylesProvider,{value:s,children:jsxRuntimeExports.jsx(chakra.span,{ref:e,...o,__css:a})})});Tag.displayName="Tag";const TagLabel=forwardRef((n,e)=>{const s=useTagStyles();return jsxRuntimeExports.jsx(chakra.span,{ref:e,noOfLines:1,...n,__css:s.label})});TagLabel.displayName="TagLabel";const TagLeftIcon=forwardRef((n,e)=>jsxRuntimeExports.jsx(Icon,{ref:e,verticalAlign:"top",marginEnd:"0.5rem",...n}));TagLeftIcon.displayName="TagLeftIcon";const TagRightIcon=forwardRef((n,e)=>jsxRuntimeExports.jsx(Icon,{ref:e,verticalAlign:"top",marginStart:"0.5rem",...n}));TagRightIcon.displayName="TagRightIcon";const TagCloseIcon=n=>jsxRuntimeExports.jsx(Icon,{verticalAlign:"inherit",viewBox:"0 0 512 512",...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});TagCloseIcon.displayName="TagCloseIcon";const TagCloseButton=forwardRef((n,e)=>{const{isDisabled:s,children:o,...a}=n,u={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...useTagStyles().closeButton};return jsxRuntimeExports.jsx(chakra.button,{ref:e,"aria-label":"close",...a,type:"button",disabled:s,__css:u,children:o||jsxRuntimeExports.jsx(TagCloseIcon,{})})});TagCloseButton.displayName="TagCloseButton";function getToastPlacement(n,e){const s=n??"bottom";return{"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[s]?.[e]??s}function createToastFn(n,e){const s=a=>({...e,...a,position:getToastPlacement(a?.position??e?.position,n)}),o=a=>{const c=s(a),u=createRenderToast(c);return toastStore.notify(u,c)};return o.update=(a,c)=>{toastStore.update(a,s(c))},o.promise=(a,c)=>{const u=o({...c.loading,status:"loading",duration:null});a.then(h=>o.update(u,{status:"success",duration:5e3,...runIfFn$1(c.success,h)})).catch(h=>o.update(u,{status:"error",duration:5e3,...runIfFn$1(c.error,h)}))},o.closeAll=toastStore.closeAll,o.close=toastStore.close,o.isActive=toastStore.isActive,o}function useToast(n){const{theme:e}=useChakra(),s=useToastOptionContext();return reactExports.useMemo(()=>createToastFn(e.direction,{...s,...n}),[n,e.direction,s])}const Text=forwardRef(function(e,s){const o=useStyleConfig("Text",e),{className:a,align:c,decoration:u,casing:h,...m}=omitThemingProps(e),g=compact({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return jsxRuntimeExports.jsx(chakra.p,{ref:s,className:cx("chakra-text",e.className),...g,...m,__css:o})});Text.displayName="Text";const Wrap=forwardRef(function(e,s){const{spacing:o="0.5rem",spacingX:a,spacingY:c,children:u,justify:h,direction:m,align:g,className:_,shouldWrapChildren:b,...T}=e,A=reactExports.useMemo(()=>b?reactExports.Children.map(u,(R,w)=>jsxRuntimeExports.jsx(WrapItem,{children:R},w)):u,[u,b]);return jsxRuntimeExports.jsx(chakra.div,{ref:s,className:cx("chakra-wrap",_),...T,children:jsxRuntimeExports.jsx(chakra.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:h,alignItems:g,flexDirection:m,listStyleType:"none",gap:o,columnGap:a,rowGap:c,padding:"0"},children:A})})});Wrap.displayName="Wrap";const WrapItem=forwardRef(function(e,s){const{className:o,...a}=e;return jsxRuntimeExports.jsx(chakra.li,{ref:s,__css:{display:"flex",alignItems:"flex-start"},className:cx("chakra-wrap__listitem",o),...a})});WrapItem.displayName="WrapItem";const SettingsIcon=createIcon({viewBox:"0 0 14 14",d:"M14,7.77 L14,6.17 L12.06,5.53 L11.61,4.44 L12.49,2.6 L11.36,1.47 L9.55,2.38 L8.46,1.93 L7.77,0.01 L6.17,0.01 L5.54,1.95 L4.43,2.4 L2.59,1.52 L1.46,2.65 L2.37,4.46 L1.92,5.55 L0,6.23 L0,7.82 L1.94,8.46 L2.39,9.55 L1.51,11.39 L2.64,12.52 L4.45,11.61 L5.54,12.06 L6.23,13.98 L7.82,13.98 L8.45,12.04 L9.56,11.59 L11.4,12.47 L12.53,11.34 L11.61,9.53 L12.08,8.44 L14,7.75 L14,7.77 Z M7,10 C5.34,10 4,8.66 4,7 C4,5.34 5.34,4 7,4 C8.66,4 10,5.34 10,7 C10,8.66 8.66,10 7,10 Z",displayName:"SettingsIcon"});var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(n,e){if(n==null)return{};var s=_objectWithoutPropertiesLoose(n,e),o,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(a=0;a<c.length;a++)o=c[a],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(n,o)&&(s[o]=n[o])}return s}function _objectWithoutPropertiesLoose(n,e){if(n==null)return{};var s={};for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){if(e.indexOf(o)>=0)continue;s[o]=n[o]}return s}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},_extends.apply(this,arguments)}function ownKeys(n,e){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),s.push.apply(s,o)}return s}function _objectSpread(n){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(s),!0).forEach(function(o){_defineProperty(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(s,o))})}return n}function _defineProperty(n,e,s){return e=_toPropertyKey(e),e in n?Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[e]=s,n}function _toPropertyKey(n){var e=_toPrimitive(n,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive(n,e){if(typeof n!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Tree2Element(n){return n&&n.map((e,s)=>React.createElement(e.tag,_objectSpread({key:s},e.attr),Tree2Element(e.child)))}function GenIcon(n){return e=>React.createElement(IconBase,_extends({attr:_objectSpread({},n.attr)},e),Tree2Element(n.child))}function IconBase(n){var e=s=>{var{attr:o,size:a,title:c}=n,u=_objectWithoutProperties(n,_excluded),h=a||s.size||"1em",m;return s.className&&(m=s.className),n.className&&(m=(m?m+" ":"")+n.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,o,u,{className:m,style:_objectSpread(_objectSpread({color:n.color||s.color},s.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),c&&React.createElement("title",null,c),n.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,s=>e(s)):e(DefaultContext)}function CiRepeat(n){return GenIcon({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Repeat"},child:[{tag:"path",attr:{d:"M2.078,17.562c-0.01,-0.039 -0.016,-0.08 -0.016,-0.123c0,-0.138 0.056,-0.263 0.147,-0.353c0.008,-0.009 1.416,-1.417 2,-2c0.198,-0.198 0.507,-0.183 0.707,-0c0.199,0.183 0.185,0.522 -0,0.707l-1.147,1.146l15.669,0c0.828,0 1.5,-0.671 1.5,-1.5l0,-3.439c0,-0.276 0.224,-0.5 0.5,-0.5c0.276,0 0.5,0.224 0.5,0.5l0,3.439c0,1.381 -1.12,2.5 -2.5,2.5l-15.669,0l1.147,1.147c0.198,0.198 0.183,0.507 -0,0.707c-0.183,0.199 -0.522,0.185 -0.707,-0l-2,-2c-0.066,-0.063 -0.11,-0.143 -0.131,-0.231Zm19.845,-11.105c0.01,0.039 0.015,0.08 0.015,0.122c0,0.138 -0.056,0.263 -0.147,0.354c-0.008,0.008 -1.416,1.417 -2,2c-0.197,0.198 -0.507,0.183 -0.707,-0c-0.199,-0.183 -0.185,-0.522 0,-0.707l1.147,-1.147l-15.669,0c-0.828,0 -1.5,0.672 -1.5,1.5l0,3.439c-0,0.276 -0.224,0.5 -0.5,0.5c-0.276,0 -0.5,-0.224 -0.5,-0.5l0,-3.439c0,-1.381 1.12,-2.5 2.5,-2.5l15.669,0l-1.146,-1.146c-0.198,-0.198 -0.183,-0.507 -0,-0.707c0.183,-0.199 0.522,-0.185 0.707,-0l2,2c0.065,0.063 0.11,0.143 0.131,0.231Z"},child:[]}]}]})(n)}function CiUser(n){return GenIcon({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(n)}var name$3="firebase",version$3="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$3,version$3,"app");const name$2="@firebase/installations",version$2="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$2}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=3600*1e3,SERVICE="installations",SERVICE_NAME="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_DESCRIPTION_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(n){return n instanceof FirebaseError&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getInstallationsEndpoint({projectId:n}){return`${INSTALLATIONS_API_URL}/projects/${n}/installations`}function extractAuthTokenInfoFromResponse(n){return{token:n.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(n.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(n,e){const o=(await e.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:n,serverCode:o.code,serverMessage:o.message,serverStatus:o.status})}function getHeaders$1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function getHeadersWithAuth(n,{refreshToken:e}){const s=getHeaders$1(n);return s.append("Authorization",getAuthorizationHeader(e)),s}async function retryIfServerError(n){const e=await n();return e.status>=500&&e.status<600?n():e}function getExpiresInFromResponseExpiresIn(n){return Number(n.replace("s","000"))}function getAuthorizationHeader(n){return`${INTERNAL_AUTH_VERSION} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function createInstallationRequest({appConfig:n,heartbeatServiceProvider:e},{fid:s}){const o=getInstallationsEndpoint(n),a=getHeaders$1(n),c=e.getImmediate({optional:!0});if(c){const g=await c.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const u={fid:s,authVersion:INTERNAL_AUTH_VERSION,appId:n.appId,sdkVersion:PACKAGE_VERSION},h={method:"POST",headers:a,body:JSON.stringify(u)},m=await retryIfServerError(()=>fetch(o,h));if(m.ok){const g=await m.json();return{fid:g.fid||s,registrationStatus:2,refreshToken:g.refreshToken,authToken:extractAuthTokenInfoFromResponse(g.authToken)}}else throw await getErrorFromResponse("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sleep(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bufferToBase64UrlSafe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const s=encode$1(n);return VALID_FID_PATTERN.test(s)?s:INVALID_FID}catch{return INVALID_FID}}function encode$1(n){return bufferToBase64UrlSafe(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getKey$1(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fidChangeCallbacks=new Map;function fidChanged(n,e){const s=getKey$1(n);callFidChangeCallbacks(s,e),broadcastFidChange(s,e)}function callFidChangeCallbacks(n,e){const s=fidChangeCallbacks.get(n);if(s)for(const o of s)o(e)}function broadcastFidChange(n,e){const s=getBroadcastChannel();s&&s.postMessage({key:n,fid:e}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=n=>{callFidChangeCallbacks(n.data.key,n.data.fid)}),broadcastChannel}function closeBroadcastChannel(){fidChangeCallbacks.size===0&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME$1="firebase-installations-database",DATABASE_VERSION$1=1,OBJECT_STORE_NAME$1="firebase-installations-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB(DATABASE_NAME$1,DATABASE_VERSION$1,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(OBJECT_STORE_NAME$1)}}})),dbPromise$1}async function set(n,e){const s=getKey$1(n),a=(await getDbPromise$1()).transaction(OBJECT_STORE_NAME$1,"readwrite"),c=a.objectStore(OBJECT_STORE_NAME$1),u=await c.get(s);return await c.put(e,s),await a.done,(!u||u.fid!==e.fid)&&fidChanged(n,e.fid),e}async function remove(n){const e=getKey$1(n),o=(await getDbPromise$1()).transaction(OBJECT_STORE_NAME$1,"readwrite");await o.objectStore(OBJECT_STORE_NAME$1).delete(e),await o.done}async function update(n,e){const s=getKey$1(n),a=(await getDbPromise$1()).transaction(OBJECT_STORE_NAME$1,"readwrite"),c=a.objectStore(OBJECT_STORE_NAME$1),u=await c.get(s),h=e(u);return h===void 0?await c.delete(s):await c.put(h,s),await a.done,h&&(!u||u.fid!==h.fid)&&fidChanged(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getInstallationEntry(n){let e;const s=await update(n.appConfig,o=>{const a=updateOrCreateInstallationEntry(o),c=triggerRegistrationIfNecessary(n,a);return e=c.registrationPromise,c.installationEntry});return s.fid===INVALID_FID?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function updateOrCreateInstallationEntry(n){const e=n||{fid:generateFid(),registrationStatus:0};return clearTimedOutRequest(e)}function triggerRegistrationIfNecessary(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(ERROR_FACTORY$1.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},o=registerInstallation(n,s);return{installationEntry:s,registrationPromise:o}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:waitUntilFidRegistration(n)}:{installationEntry:e}}async function registerInstallation(n,e){try{const s=await createInstallationRequest(n,e);return set(n.appConfig,s)}catch(s){throw isServerError(s)&&s.customData.serverCode===409?await remove(n.appConfig):await set(n.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function waitUntilFidRegistration(n){let e=await updateInstallationRequest(n.appConfig);for(;e.registrationStatus===1;)await sleep(100),e=await updateInstallationRequest(n.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:o}=await getInstallationEntry(n);return o||s}return e}function updateInstallationRequest(n){return update(n,e=>{if(!e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(e)})}function clearTimedOutRequest(n){return hasInstallationRequestTimedOut(n)?{fid:n.fid,registrationStatus:0}:n}function hasInstallationRequestTimedOut(n){return n.registrationStatus===1&&n.registrationTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateAuthTokenRequest({appConfig:n,heartbeatServiceProvider:e},s){const o=getGenerateAuthTokenEndpoint(n,s),a=getHeadersWithAuth(n,s),c=e.getImmediate({optional:!0});if(c){const g=await c.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const u={installation:{sdkVersion:PACKAGE_VERSION,appId:n.appId}},h={method:"POST",headers:a,body:JSON.stringify(u)},m=await retryIfServerError(()=>fetch(o,h));if(m.ok){const g=await m.json();return extractAuthTokenInfoFromResponse(g)}else throw await getErrorFromResponse("Generate Auth Token",m)}function getGenerateAuthTokenEndpoint(n,{fid:e}){return`${getInstallationsEndpoint(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function refreshAuthToken(n,e=!1){let s;const o=await update(n.appConfig,c=>{if(!isEntryRegistered(c))throw ERROR_FACTORY$1.create("not-registered");const u=c.authToken;if(!e&&isAuthTokenValid(u))return c;if(u.requestStatus===1)return s=waitUntilAuthTokenRequest(n,e),c;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const h=makeAuthTokenRequestInProgressEntry(c);return s=fetchAuthTokenFromServer(n,h),h}});return s?await s:o.authToken}async function waitUntilAuthTokenRequest(n,e){let s=await updateAuthTokenRequest(n.appConfig);for(;s.authToken.requestStatus===1;)await sleep(100),s=await updateAuthTokenRequest(n.appConfig);const o=s.authToken;return o.requestStatus===0?refreshAuthToken(n,e):o}function updateAuthTokenRequest(n){return update(n,e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");const s=e.authToken;return hasAuthTokenRequestTimedOut(s)?{...e,authToken:{requestStatus:0}}:e})}async function fetchAuthTokenFromServer(n,e){try{const s=await generateAuthTokenRequest(n,e),o={...e,authToken:s};return await set(n.appConfig,o),s}catch(s){if(isServerError(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await remove(n.appConfig);else{const o={...e,authToken:{requestStatus:0}};await set(n.appConfig,o)}throw s}}function isEntryRegistered(n){return n!==void 0&&n.registrationStatus===2}function isAuthTokenValid(n){return n.requestStatus===2&&!isAuthTokenExpired(n)}function isAuthTokenExpired(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function hasAuthTokenRequestTimedOut(n){return n.requestStatus===1&&n.requestTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getId(n){const e=n,{installationEntry:s,registrationPromise:o}=await getInstallationEntry(e);return o?o.catch(console.error):refreshAuthToken(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken$2(n,e=!1){const s=n;return await completeInstallationRegistration(s),(await refreshAuthToken(s,e)).token}async function completeInstallationRegistration(n){const{registrationPromise:e}=await getInstallationEntry(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig$1(n){if(!n||!n.options)throw getMissingValueError$1("App Configuration");if(!n.name)throw getMissingValueError$1("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!n.options[s])throw getMissingValueError$1(s);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function getMissingValueError$1(n){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=n=>{const e=n.getProvider("app").getImmediate(),s=extractAppConfig$1(e),o=_getProvider(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:o,_delete:()=>Promise.resolve()}},internalFactory=n=>{const e=n.getProvider("app").getImmediate(),s=_getProvider(e,INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(s),getToken:a=>getToken$2(s,a)}};function registerInstallations(){_registerComponent(new Component$1(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component$1(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations();registerVersion(name$2,version$2);registerVersion(name$2,version$2,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_SW_PATH="/firebase-messaging-sw.js",DEFAULT_SW_SCOPE="/firebase-cloud-messaging-push-scope",DEFAULT_VAPID_KEY="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ENDPOINT="https://fcmregistrations.googleapis.com/v1",CONSOLE_CAMPAIGN_ID="google.c.a.c_id",CONSOLE_CAMPAIGN_NAME="google.c.a.c_l",CONSOLE_CAMPAIGN_TIME="google.c.a.ts",CONSOLE_CAMPAIGN_ANALYTICS_ENABLED="google.c.a.e",DEFAULT_REGISTRATION_TIMEOUT=1e4;var MessageType$1;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(MessageType$1||(MessageType$1={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var MessageType;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(MessageType||(MessageType={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function arrayToBase64(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function base64ToArray(n){const e="=".repeat((4-n.length%4)%4),s=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),o=atob(s),a=new Uint8Array(o.length);for(let c=0;c<o.length;++c)a[c]=o.charCodeAt(c);return a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OLD_DB_NAME="fcm_token_details_db",OLD_DB_VERSION=5,OLD_OBJECT_STORE_NAME="fcm_token_object_Store";async function migrateOldDatabase(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(c=>c.name).includes(OLD_DB_NAME))return null;let e=null;return(await openDB(OLD_DB_NAME,OLD_DB_VERSION,{upgrade:async(o,a,c,u)=>{if(a<2||!o.objectStoreNames.contains(OLD_OBJECT_STORE_NAME))return;const h=u.objectStore(OLD_OBJECT_STORE_NAME),m=await h.index("fcmSenderId").get(n);if(await h.clear(),!!m){if(a===2){const g=m;if(!g.auth||!g.p256dh||!g.endpoint)return;e={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:arrayToBase64(g.vapidKey)}}}else if(a===3){const g=m;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:arrayToBase64(g.auth),p256dh:arrayToBase64(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:arrayToBase64(g.vapidKey)}}}else if(a===4){const g=m;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:arrayToBase64(g.auth),p256dh:arrayToBase64(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:arrayToBase64(g.vapidKey)}}}}}})).close(),await deleteDB(OLD_DB_NAME),await deleteDB("fcm_vapid_details_db"),await deleteDB("undefined"),checkTokenDetails(e)?e:null}function checkTokenDetails(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME="firebase-messaging-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-messaging-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(OBJECT_STORE_NAME)}}})),dbPromise}async function dbGet(n){const e=getKey(n),o=await(await getDbPromise()).transaction(OBJECT_STORE_NAME).objectStore(OBJECT_STORE_NAME).get(e);if(o)return o;{const a=await migrateOldDatabase(n.appConfig.senderId);if(a)return await dbSet(n,a),a}}async function dbSet(n,e){const s=getKey(n),a=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");return await a.objectStore(OBJECT_STORE_NAME).put(e,s),await a.done,e}function getKey({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ERROR_FACTORY=new ErrorFactory("messaging","Messaging",ERROR_MAP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestGetToken(n,e){const s=await getHeaders(n),o=getBody(e),a={method:"POST",headers:s,body:JSON.stringify(o)};let c;try{c=await(await fetch(getEndpoint(n.appConfig),a)).json()}catch(u){throw ERROR_FACTORY.create("token-subscribe-failed",{errorInfo:u?.toString()})}if(c.error){const u=c.error.message;throw ERROR_FACTORY.create("token-subscribe-failed",{errorInfo:u})}if(!c.token)throw ERROR_FACTORY.create("token-subscribe-no-token");return c.token}async function requestUpdateToken(n,e){const s=await getHeaders(n),o=getBody(e.subscriptionOptions),a={method:"PATCH",headers:s,body:JSON.stringify(o)};let c;try{c=await(await fetch(`${getEndpoint(n.appConfig)}/${e.token}`,a)).json()}catch(u){throw ERROR_FACTORY.create("token-update-failed",{errorInfo:u?.toString()})}if(c.error){const u=c.error.message;throw ERROR_FACTORY.create("token-update-failed",{errorInfo:u})}if(!c.token)throw ERROR_FACTORY.create("token-update-no-token");return c.token}async function requestDeleteToken(n,e){const o={method:"DELETE",headers:await getHeaders(n)};try{const c=await(await fetch(`${getEndpoint(n.appConfig)}/${e}`,o)).json();if(c.error){const u=c.error.message;throw ERROR_FACTORY.create("token-unsubscribe-failed",{errorInfo:u})}}catch(a){throw ERROR_FACTORY.create("token-unsubscribe-failed",{errorInfo:a?.toString()})}}function getEndpoint({projectId:n}){return`${ENDPOINT}/projects/${n}/registrations`}async function getHeaders({appConfig:n,installations:e}){const s=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${s}`})}function getBody({p256dh:n,auth:e,endpoint:s,vapidKey:o}){const a={web:{endpoint:s,auth:e,p256dh:n}};return o!==DEFAULT_VAPID_KEY&&(a.web.applicationPubKey=o),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TOKEN_EXPIRATION_MS=10080*60*1e3;async function getTokenInternal(n){const e=await getPushSubscription(n.swRegistration,n.vapidKey),s={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:arrayToBase64(e.getKey("auth")),p256dh:arrayToBase64(e.getKey("p256dh"))},o=await dbGet(n.firebaseDependencies);if(o){if(isTokenValid(o.subscriptionOptions,s))return Date.now()>=o.createTime+TOKEN_EXPIRATION_MS?updateToken(n,{token:o.token,createTime:Date.now(),subscriptionOptions:s}):o.token;try{await requestDeleteToken(n.firebaseDependencies,o.token)}catch(a){console.warn(a)}return getNewToken(n.firebaseDependencies,s)}else return getNewToken(n.firebaseDependencies,s)}async function updateToken(n,e){try{const s=await requestUpdateToken(n.firebaseDependencies,e),o={...e,token:s,createTime:Date.now()};return await dbSet(n.firebaseDependencies,o),s}catch(s){throw s}}async function getNewToken(n,e){const o={token:await requestGetToken(n,e),createTime:Date.now(),subscriptionOptions:e};return await dbSet(n,o),o.token}async function getPushSubscription(n,e){const s=await n.pushManager.getSubscription();return s||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:base64ToArray(e)})}function isTokenValid(n,e){const s=e.vapidKey===n.vapidKey,o=e.endpoint===n.endpoint,a=e.auth===n.auth,c=e.p256dh===n.p256dh;return s&&o&&a&&c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function externalizePayload(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return propagateNotificationPayload(e,n),propagateDataPayload(e,n),propagateFcmOptions(e,n),e}function propagateNotificationPayload(n,e){if(!e.notification)return;n.notification={};const s=e.notification.title;s&&(n.notification.title=s);const o=e.notification.body;o&&(n.notification.body=o);const a=e.notification.image;a&&(n.notification.image=a);const c=e.notification.icon;c&&(n.notification.icon=c)}function propagateDataPayload(n,e){e.data&&(n.data=e.data)}function propagateFcmOptions(n,e){if(!e.fcmOptions&&!e.notification?.click_action)return;n.fcmOptions={};const s=e.fcmOptions?.link??e.notification?.click_action;s&&(n.fcmOptions.link=s);const o=e.fcmOptions?.analytics_label;o&&(n.fcmOptions.analyticsLabel=o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isConsoleMessage(n){return typeof n=="object"&&!!n&&CONSOLE_CAMPAIGN_ID in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig(n){if(!n||!n.options)throw getMissingValueError("App Configuration Object");if(!n.name)throw getMissingValueError("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:s}=n;for(const o of e)if(!s[o])throw getMissingValueError(o);return{appName:n.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}function getMissingValueError(n){return ERROR_FACTORY.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MessagingService{constructor(e,s,o){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=extractAppConfig(e);this.firebaseDependencies={app:e,appConfig:a,installations:s,analyticsProvider:o}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function registerDefaultSw(n){try{n.swRegistration=await navigator.serviceWorker.register(DEFAULT_SW_PATH,{scope:DEFAULT_SW_SCOPE}),n.swRegistration.update().catch(()=>{}),await waitForRegistrationActive(n.swRegistration)}catch(e){throw ERROR_FACTORY.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function waitForRegistrationActive(n){return new Promise((e,s)=>{const o=setTimeout(()=>s(new Error(`Service worker not registered after ${DEFAULT_REGISTRATION_TIMEOUT} ms`)),DEFAULT_REGISTRATION_TIMEOUT),a=n.installing||n.waiting;n.active?(clearTimeout(o),e()):a?a.onstatechange=c=>{c.target?.state==="activated"&&(a.onstatechange=null,clearTimeout(o),e())}:(clearTimeout(o),s(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateSwReg(n,e){if(!e&&!n.swRegistration&&await registerDefaultSw(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ERROR_FACTORY.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateVapidKey(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=DEFAULT_VAPID_KEY)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken$1(n,e){if(!navigator)throw ERROR_FACTORY.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ERROR_FACTORY.create("permission-blocked");return await updateVapidKey(n,e?.vapidKey),await updateSwReg(n,e?.serviceWorkerRegistration),getTokenInternal(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function logToScion(n,e,s){const o=getEventType(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(o,{message_id:s[CONSOLE_CAMPAIGN_ID],message_name:s[CONSOLE_CAMPAIGN_NAME],message_time:s[CONSOLE_CAMPAIGN_TIME],message_device_time:Math.floor(Date.now()/1e3)})}function getEventType(n){switch(n){case MessageType.NOTIFICATION_CLICKED:return"notification_open";case MessageType.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function messageEventListener(n,e){const s=e.data;if(!s.isFirebaseMessaging)return;n.onMessageHandler&&s.messageType===MessageType.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(externalizePayload(s)):n.onMessageHandler.next(externalizePayload(s)));const o=s.data;isConsoleMessage(o)&&o[CONSOLE_CAMPAIGN_ANALYTICS_ENABLED]==="1"&&await logToScion(n,s.messageType,o)}const name$1="@firebase/messaging",version$1="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WindowMessagingFactory=n=>{const e=new MessagingService(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",s=>messageEventListener(e,s)),e},WindowMessagingInternalFactory=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:o=>getToken$1(e,o)}};function registerMessagingInWindow(){_registerComponent(new Component$1("messaging",WindowMessagingFactory,"PUBLIC")),_registerComponent(new Component$1("messaging-internal",WindowMessagingInternalFactory,"PRIVATE")),registerVersion(name$1,version$1),registerVersion(name$1,version$1,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function isWindowSupported(){try{await validateIndexedDBOpenable()}catch{return!1}return typeof window<"u"&&isIndexedDBAvailable()&&areCookiesEnabled()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getMessagingInWindow(n=getApp()){return isWindowSupported().then(e=>{if(!e)throw ERROR_FACTORY.create("unsupported-browser")},e=>{throw ERROR_FACTORY.create("indexed-db-unsupported")}),_getProvider(getModularInstance$1(n),"messaging").getImmediate()}registerMessagingInWindow();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(n){return n&&n._delegate?n._delegate:n}class Component{constructor(e,s,o){this.name=e,this.instanceFactory=s,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(n,e,...s)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),a=ConsoleMethod[e];if(a)console[a](`[${o}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}var name="@firebase/vertexai",version="1.2.4";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VERTEX_TYPE="vertexAI",DEFAULT_LOCATION="us-central1";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VertexAIService{constructor(e,s,o,a){var c;this.app=e,this.options=a;const u=o?.getImmediate({optional:!0}),h=s?.getImmediate({optional:!0});this.auth=h||null,this.appCheck=u||null,this.location=((c=this.options)===null||c===void 0?void 0:c.location)||DEFAULT_LOCATION}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Logger("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Task;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.PREDICT="predict"})(Task||(Task={}));var HarmCategory;(function(n){n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(HarmCategory||(HarmCategory={}));var HarmBlockThreshold;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(HarmBlockThreshold||(HarmBlockThreshold={}));var HarmBlockMethod;(function(n){n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(HarmBlockMethod||(HarmBlockMethod={}));var HarmProbability;(function(n){n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var HarmSeverity;(function(n){n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(HarmSeverity||(HarmSeverity={}));var BlockReason;(function(n){n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(BlockReason||(BlockReason={}));var FinishReason;(function(n){n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL"})(FinishReason||(FinishReason={}));var FunctionCallingMode;(function(n){n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(FunctionCallingMode||(FunctionCallingMode={}));var Modality;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Modality||(Modality={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SchemaType;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(SchemaType||(SchemaType={}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ImagenSafetyFilterLevel;(function(n){n.BLOCK_LOW_AND_ABOVE="block_low_and_above",n.BLOCK_MEDIUM_AND_ABOVE="block_medium_and_above",n.BLOCK_ONLY_HIGH="block_only_high",n.BLOCK_NONE="block_none"})(ImagenSafetyFilterLevel||(ImagenSafetyFilterLevel={}));var ImagenPersonFilterLevel;(function(n){n.BLOCK_ALL="dont_allow",n.ALLOW_ADULT="allow_adult",n.ALLOW_ALL="allow_all"})(ImagenPersonFilterLevel||(ImagenPersonFilterLevel={}));var ImagenAspectRatio;(function(n){n.SQUARE="1:1",n.LANDSCAPE_3x4="3:4",n.PORTRAIT_4x3="4:3",n.LANDSCAPE_16x9="16:9",n.PORTRAIT_9x16="9:16"})(ImagenAspectRatio||(ImagenAspectRatio={}));FinishReason.RECITATION,FinishReason.SAFETY;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVertexAI(n=getApp(),e){return n=getModularInstance(n),_getProvider(n,VERTEX_TYPE).getImmediate({identifier:DEFAULT_LOCATION})}function registerVertex(){_registerComponent(new Component(VERTEX_TYPE,(n,{instanceIdentifier:e})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new VertexAIService(s,o,a,{location:e})},"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version),registerVersion(name,version,"esm2017")}registerVertex();const firebaseConfig={apiKey:"AIzaSyA4GL5Uc-Nod0OvshPE3EsZRLkLLfJ07-c",authDomain:"nosabo-30dcb.firebaseapp.com",projectId:"nosabo-30dcb",storageBucket:"nosabo-30dcb.firebasestorage.app",messagingSenderId:"323662475274",appId:"1:323662475274:web:570aa2eb1beaf87810aff3",measurementId:"G-FX7CB1K22B"},app=initializeApp(firebaseConfig);console.log("app",app);const database=getFirestore(app);getVertexAI(app);getVertexAI(app);let messaging=null;async function initMessaging(){await isWindowSupported()?(messaging=getMessagingInWindow(app),console.log("messaging...",messaging)):console.warn("Firebase Messaging is not supported in this environment.")}initMessaging();const PALETTES={ocean:{primary:"#22d3ee",secondary:"#60a5fa",accent:"#58f7a2",ringListening:"rgba(14,165,233,0.6)",ringSpeaking:"rgba(34,211,238,0.65)",ringThinking:"rgba(255,220,0,0.55)",neutral:"#a0b3ff",bg:"linear-gradient(180deg,#0b1220 0%,#162033 100%)",stroke:"#2b3a55"},sunset:{primary:"#f59e0b",secondary:"#fb7185",accent:"#facc15",ringListening:"rgba(251,113,133,0.5)",ringSpeaking:"rgba(250,204,21,0.6)",ringThinking:"rgba(245,158,11,0.6)",neutral:"#ffb3a7",bg:"linear-gradient(180deg,#1b1020 0%,#2a1a14 100%)",stroke:"#4b2a20"},candy:{primary:"#f472b6",secondary:"#a78bfa",accent:"#34d399",ringListening:"rgba(167,139,250,0.55)",ringSpeaking:"rgba(52,211,153,0.65)",ringThinking:"rgba(244,114,182,0.6)",neutral:"#ffc6f2",bg:"linear-gradient(180deg,#171226 0%,#271a2b 100%)",stroke:"#3a2d4a"},mint:{primary:"#5eead4",secondary:"#86efac",accent:"#2dd4bf",ringListening:"rgba(94,234,212,0.55)",ringSpeaking:"rgba(45,212,191,0.6)",ringThinking:"rgba(134,239,172,0.55)",neutral:"#b7ffe8",bg:"linear-gradient(180deg,#0f1a17 0%,#11211e 100%)",stroke:"#29443d"},violet:{primary:"#8b5cf6",secondary:"#22d3ee",accent:"#ec4899",ringListening:"rgba(139,92,246,0.55)",ringSpeaking:"rgba(34,211,238,0.6)",ringThinking:"rgba(236,72,153,0.55)",neutral:"#cdbaff",bg:"linear-gradient(180deg,#130f1c 0%,#1b1630 100%)",stroke:"#332a56"}};function RobotBuddyPro({state:n="idle",mood:e="neutral",loudness:s=0,speakLoudness:o,variant:a="abstract",palette:c="ocean",showBadges:u=!0,compact:h=!1,maxW:m=420}){const g=PALETTES[c]??PALETTES.ocean,_=useAmp({state:n,loudness:s,speakLoudness:o}),b=usePrefersReducedMotion(),T=n==="listening"?g.ringListening:n==="speaking"?g.ringSpeaking:n==="thinking"?g.ringThinking:"rgba(255,255,255,0.18)";return jsxRuntimeExports.jsxs(Box,{w:"100%",maxW:`${m}px`,mx:"auto",mt:2,px:2,position:"relative",children:[jsxRuntimeExports.jsx(Box,{position:"absolute",inset:"-10px",borderRadius:"28px",filter:"blur(14px)",pointerEvents:"none",_before:{content:'""',position:"absolute",inset:0,borderRadius:"28px",boxShadow:`0 0 46px 10px ${T}`,animation:!b&&n==="speaking"?"rbproPulse 1.2s ease-in-out infinite":"none"}}),jsxRuntimeExports.jsx("style",{children:CSS_BLOCK}),jsxRuntimeExports.jsxs(Box,{bgGradient:g.bg,border:`1px solid ${hexWithAlpha(g.stroke,.55)}`,rounded:"2xl",p:h?2:3,boxShadow:"0 8px 24px rgba(0,0,0,0.45)",children:[a==="character"?jsxRuntimeExports.jsx(CharacterAvatar,{amp:_,state:n,mood:e,colors:g,reduced:b}):a==="sigil"?jsxRuntimeExports.jsx(SigilAvatar,{amp:_,state:n,mood:e,colors:g,reduced:b}):jsxRuntimeExports.jsx(AbstractAvatar,{amp:_,state:n,mood:e,colors:g,reduced:b}),u&&jsxRuntimeExports.jsxs(HStack,{justify:"center",mt:h?1.5:2,spacing:2,children:[jsxRuntimeExports.jsx(Badge,{colorScheme:n==="listening"?"cyan":n==="speaking"?"green":n==="thinking"?"yellow":"purple",variant:"solid",fontSize:h?"xs":"sm",children:n.charAt(0).toUpperCase()+n.slice(1)}),e!=="neutral"&&jsxRuntimeExports.jsx(Badge,{variant:"subtle",colorScheme:"teal",fontSize:h?"xs":"sm",children:e})]})]})]})}function useAmp({state:n,loudness:e,speakLoudness:s}){const[o,a]=reactExports.useState(0),c=n==="speaking"?typeof s=="number"?s:.45:n==="listening"?e:.12,u=n==="speaking"&&typeof s!="number"?.12*(Math.sin(o/120)*Math.sin(o/274)):0,h=Math.max(0,Math.min(1,c+u)),[m,g]=reactExports.useState(h);return reactExports.useEffect(()=>{let _;const b=()=>{a(performance.now()),_=requestAnimationFrame(b)};return _=requestAnimationFrame(b),()=>cancelAnimationFrame(_)},[]),reactExports.useEffect(()=>{g(b=>b+.22*(h-b))},[h]),m}function usePrefersReducedMotion(){const[n,e]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const s=window.matchMedia("(prefers-reduced-motion: reduce)"),o=()=>e(!!s.matches);return o(),s.addEventListener?.("change",o),()=>{s.removeEventListener?.("change",o)}},[]),n}function useClock(n=!1){const[e,s]=reactExports.useState(0);return reactExports.useEffect(()=>{if(n)return;let o;const a=()=>{s(performance.now()),o=requestAnimationFrame(a)};return o=requestAnimationFrame(a),()=>cancelAnimationFrame(o)},[n]),e}function hexWithAlpha(n,e=1){const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(!s)return n;const o=parseInt(s[1],16),a=parseInt(s[2],16),c=parseInt(s[3],16);return`rgba(${o},${a},${c},${e})`}function buildInfiniteRibbonPath({t:n,amp:e,yBase:s=196,height:o=36,freq:a=1.6,speed:c=700}){const g=6+e*22,_=n/c;let b=`M -360 ${s}`;for(let T=1;T<=90;T++){const A=-360+1080*T/90,R=Math.sin(T*a*Math.PI*2/90+_),w=Math.sin(T*(a*.5)*Math.PI*2/90+_*1.7),D=s-(R*g+w*(g*.45));b+=` L ${A.toFixed(2)} ${D.toFixed(2)}`}return b+=` L 720 ${s+o} L -360 ${s+o} Z`,b}function AbstractAvatar({amp:n,state:e,mood:s,colors:o,reduced:a}){const c=useClock(a),u=s==="happy"?o.secondary:s==="encourage"?o.primary:o.neutral,h=e==="thinking"?o.ringThinking:e==="listening"?o.ringListening:e==="speaking"?o.ringSpeaking:hexWithAlpha(o.stroke,.8),m=reactExports.useMemo(()=>buildInfiniteRibbonPath({t:c,amp:a?.1:n,yBase:196,height:36,freq:1.7,speed:640}),[c,n,a]),g=(A,R=0,w=.85,D=1.25)=>{const fn=Math.sin(c/A+R)*.5+.5;return w+(D-w)*fn},_=Math.round(10+n*32),b=Math.round(8+n*28),T=Math.round(12+n*36);return jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 360 240",width:"100%",height:"100%",style:{display:"block"},children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("radialGradient",{id:"rbgrad",cx:"50%",cy:"45%",r:"65%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:o.primary,stopOpacity:"0.35"}),jsxRuntimeExports.jsx("stop",{offset:"60%",stopColor:o.secondary,stopOpacity:"0.18"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),jsxRuntimeExports.jsxs("mask",{id:"orbMask",children:[jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"black"}),jsxRuntimeExports.jsx("circle",{cx:"180",cy:"120",r:"88",fill:"white"})]}),jsxRuntimeExports.jsxs("filter",{id:"rbgoo",children:[jsxRuntimeExports.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8",result:"blur"}),jsxRuntimeExports.jsx("feColorMatrix",{in:"blur",result:"goo",type:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -8"}),jsxRuntimeExports.jsx("feBlend",{in:"SourceGraphic",in2:"goo"})]}),jsxRuntimeExports.jsxs("filter",{id:"gelDispA",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[jsxRuntimeExports.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.012",numOctaves:"2",seed:"3",result:"n",children:!a&&jsxRuntimeExports.jsx("animate",{attributeName:"baseFrequency",dur:"7s",values:"0.01;0.02;0.01",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"n",scale:_,xChannelSelector:"R",yChannelSelector:"G"})]}),jsxRuntimeExports.jsxs("filter",{id:"gelDispB",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[jsxRuntimeExports.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.011",numOctaves:"2",seed:"7",result:"n",children:!a&&jsxRuntimeExports.jsx("animate",{attributeName:"baseFrequency",dur:"8s",values:"0.009;0.018;0.009",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"n",scale:b,xChannelSelector:"G",yChannelSelector:"B"})]}),jsxRuntimeExports.jsxs("filter",{id:"gelDispC",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[jsxRuntimeExports.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.013",numOctaves:"2",seed:"11",result:"n",children:!a&&jsxRuntimeExports.jsx("animate",{attributeName:"baseFrequency",dur:"6s",values:"0.012;0.022;0.012",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"n",scale:T,xChannelSelector:"R",yChannelSelector:"B"})]}),jsxRuntimeExports.jsxs("linearGradient",{id:"ribbonGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:hexWithAlpha(o.primary,.9)}),jsxRuntimeExports.jsx("stop",{offset:"80%",stopColor:hexWithAlpha(o.accent,.35)}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"transparent"})]})]}),jsxRuntimeExports.jsx("circle",{cx:"180",cy:"120",r:80+n*22,fill:"url(#rbgrad)"}),jsxRuntimeExports.jsxs("g",{mask:"url(#orbMask)",filter:"url(#rbgoo)",style:{mixBlendMode:"screen"},children:[jsxRuntimeExports.jsx("g",{filter:"url(#gelDispA)",children:jsxRuntimeExports.jsx("circle",{cx:152-Math.sin(c/1100)*10,cy:126+Math.cos(c/1300)*8,r:(26+n*14)*g(1400,.3),fill:hexWithAlpha(o.accent,.98)})}),jsxRuntimeExports.jsx("g",{filter:"url(#gelDispB)",children:jsxRuntimeExports.jsx("circle",{cx:208+Math.sin(c/1e3)*9,cy:110+Math.cos(c/1400)*7,r:(24+n*12)*g(1200,.9),fill:hexWithAlpha(o.secondary,.96)})}),jsxRuntimeExports.jsx("g",{filter:"url(#gelDispC)",children:jsxRuntimeExports.jsx("circle",{cx:180+Math.sin(c/900)*7,cy:120+Math.cos(c/1100)*6,r:(18+n*11)*g(1e3,1.6),fill:hexWithAlpha(u,.98)})})]}),jsxRuntimeExports.jsx("g",{style:{transformOrigin:"180px 120px",animation:!a&&e!=="idle"?"rbproOrbit 8s linear infinite":"none"},children:jsxRuntimeExports.jsx("circle",{cx:"180",cy:"120",r:66+n*6,fill:"none",stroke:h,strokeOpacity:"0.7",strokeDasharray:"6 10",strokeWidth:"2",style:{animation:a?"none":"rbproDash 4s linear infinite"}})}),jsxRuntimeExports.jsx("path",{d:m,fill:"url(#ribbonGrad)",opacity:"0.95"}),jsxRuntimeExports.jsx("path",{d:m.replace(/Z$/,""),fill:"none",stroke:hexWithAlpha(o.primary,.85),strokeWidth:"1.25",strokeLinejoin:"round",strokeLinecap:"round",opacity:"0.9"})]})}function SigilAvatar({amp:n,state:e,mood:s,colors:o,reduced:a}){const c=useClock(a),u=reactExports.useMemo(()=>{const _=64+n*18,b=38+n*12,T=3,A=2,R=Math.PI/2.6,w=180,D=120,fn=360,yn=[];for(let pn=0;pn<=fn;pn++){const wn=pn/fn*Math.PI*2+c/5e3,V=w+_*Math.sin(T*wn+R),bn=D+b*Math.sin(A*wn);yn.push(`${pn===0?"M":"L"} ${V.toFixed(2)} ${bn.toFixed(2)}`)}return yn.join(" ")},[n,c]),h=78+n*14,m=s==="happy"?o.secondary:s==="encourage"?o.accent:o.neutral,g=reactExports.useMemo(()=>buildInfiniteRibbonPath({t:c,amp:a?.1:n,yBase:196,height:32,freq:1.4,speed:680}),[c,n,a]);return jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 360 240",width:"100%",height:"100%",style:{display:"block"},children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("radialGradient",{id:"sigHalo",cx:"50%",cy:"50%",r:"60%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:o.secondary,stopOpacity:"0.25"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),jsxRuntimeExports.jsxs("linearGradient",{id:"sigRibbonGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:hexWithAlpha(o.secondary,.9)}),jsxRuntimeExports.jsx("stop",{offset:"90%",stopColor:hexWithAlpha(o.accent,.25)}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"transparent"})]})]}),jsxRuntimeExports.jsx("circle",{cx:"180",cy:"120",r:h,fill:"url(#sigHalo)"}),jsxRuntimeExports.jsx("path",{d:u,fill:"none",stroke:m,strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"drop-shadow(0 0 12px rgba(255,255,255,0.18))"}}),[0,1,2,3,4,5].map(_=>{const b=(performance.now()/2e3+_/6)%1*Math.PI*2,T=50+n*18,A=180+T*Math.cos(b),R=120+T*Math.sin(b)*.7;return jsxRuntimeExports.jsx("circle",{cx:A,cy:R,r:3+(_%3+1)*.6,fill:_%2?o.primary:o.accent,opacity:"0.9"},_)}),jsxRuntimeExports.jsx("path",{d:g,fill:"url(#sigRibbonGrad)",opacity:"0.95"}),jsxRuntimeExports.jsx("path",{d:g.replace(/Z$/,""),fill:"none",stroke:hexWithAlpha(o.secondary,.85),strokeWidth:"1.25",strokeLinejoin:"round",strokeLinecap:"round"})]})}function CharacterAvatar({amp:n,state:e,mood:s,colors:o,reduced:a}){const[c,u]=reactExports.useState({x:0,y:0});reactExports.useEffect(()=>{if(typeof window>"u")return;const _=b=>{const{clientX:T,clientY:A}=b.touches?.[0]||b,R=window.innerWidth,w=window.innerHeight,D=T/R*2-1,fn=A/w*2-1;u({x:Math.max(-1,Math.min(1,D)),y:Math.max(-1,Math.min(1,fn))})};return window.addEventListener("pointermove",_,{passive:!0}),window.addEventListener("touchstart",_,{passive:!0}),()=>{window.removeEventListener("pointermove",_),window.removeEventListener("touchstart",_)}},[]);const h=c.x*6,m=c.y*4,g=s==="happy"?o.secondary:s==="encourage"?o.accent:o.neutral;return jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 360 240",width:"100%",height:"100%",style:{display:"block"},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"headGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#0f172a"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#1f2937"})]})}),jsxRuntimeExports.jsxs("g",{style:{transformOrigin:"180px 120px",animation:a?"none":"rbproDriftY 6.5s ease-in-out infinite"},children:[jsxRuntimeExports.jsx("rect",{x:"40",y:"28",width:"280",height:"170",rx:"26",fill:"url(#headGrad)",stroke:o.stroke,strokeWidth:"2"}),jsxRuntimeExports.jsx("rect",{x:"66",y:"50",width:"228",height:"48",rx:"12",fill:"#0b1220"}),jsxRuntimeExports.jsx("g",{stroke:g,strokeWidth:"3",strokeLinecap:"round",opacity:"0.8",children:s==="encourage"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("line",{x1:"108",y1:"72",x2:"138",y2:"68"}),jsxRuntimeExports.jsx("line",{x1:"222",y1:"68",x2:"252",y2:"72"})]}):s==="happy"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("line",{x1:"108",y1:"70",x2:"138",y2:"70"}),jsxRuntimeExports.jsx("line",{x1:"222",y1:"70",x2:"252",y2:"70"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("line",{x1:"108",y1:"74",x2:"138",y2:"72"}),jsxRuntimeExports.jsx("line",{x1:"222",y1:"72",x2:"252",y2:"74"})]})}),jsxRuntimeExports.jsxs("g",{transform:`translate(${h}, ${m})`,children:[jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("ellipse",{cx:"128",cy:"92",rx:"18",ry:"12",fill:"#e2e8f0",style:{transformOrigin:"128px 92px",animation:a?"none":"rbproBlink 5.2s ease-in-out infinite"}}),jsxRuntimeExports.jsx("circle",{cx:"128",cy:"92",r:"6",fill:"#334155"})]}),jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("ellipse",{cx:"232",cy:"92",rx:"18",ry:"12",fill:"#e2e8f0",style:{transformOrigin:"232px 92px",animation:a?"none":"rbproBlink 6.1s ease-in-out infinite"}}),jsxRuntimeExports.jsx("circle",{cx:"232",cy:"92",r:"6",fill:"#334155"})]})]}),jsxRuntimeExports.jsx("circle",{cx:"112",cy:"122",r:8+n*3,fill:g,opacity:.25}),jsxRuntimeExports.jsx("circle",{cx:"248",cy:"122",r:8+n*3,fill:g,opacity:.25}),jsxRuntimeExports.jsxs("g",{transform:"translate(180, 138)",children:[jsxRuntimeExports.jsx("rect",{x:-30,y:-5-n*9,width:60,height:10+n*20,rx:12,fill:g,opacity:.9}),e==="speaking"&&jsxRuntimeExports.jsx("rect",{x:-44,y:-2-n*6,width:88,height:4+n*12,rx:8,fill:"#94a3b8",opacity:.28})]}),jsxRuntimeExports.jsx("line",{x1:"180",y1:"20",x2:"180",y2:"42",stroke:g,strokeWidth:"4"}),jsxRuntimeExports.jsx("circle",{cx:"180",cy:"16",r:"8",fill:g,children:!a&&jsxRuntimeExports.jsx("animate",{attributeName:"r",dur:"2s",values:"8;11;8",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("g",{transform:"translate(90, 190)",children:Array.from({length:14}).map((_,b)=>{const T=6+n*24*(.6+b%5*.08);return jsxRuntimeExports.jsx("rect",{x:b*14,y:-T,width:"8",height:T,rx:"2",fill:g,opacity:.9},b)})})]})]})}const CSS_BLOCK=`
@keyframes rbproPulse { 0%{ transform: scale(.985) } 50%{ transform: scale(1.025) } 100%{ transform: scale(.985) } }
@keyframes rbproDriftY { 0%{ transform: translateY(-6px) } 50%{ transform: translateY(6px) } 100%{ transform: translateY(-6px) } }
@keyframes rbproOrbit { 0%{ transform: rotate(0deg) } 100%{ transform: rotate(360deg) } }
@keyframes rbproBlink { 0%,92%,100% { transform: scaleY(1) } 96% { transform: scaleY(0.08) } }
@keyframes rbproDash { to { stroke-dashoffset: -200 } }
`,TALKTURN_URL="https://talkturn-hftgya63qa-uc.a.run.app",TTS_URL="https://tts-hftgya63qa-uc.a.run.app";function b64ToUint8(n){const e=atob(n),s=new Uint8Array(e.length);for(let o=0;o<e.length;o++)s[o]=e.charCodeAt(o);return s}function pcm16ToWav(n,e=24e3,s=1){const o=s*2,a=e*o,c=n.byteLength,u=new ArrayBuffer(44+c),h=new DataView(u),m=(g,_)=>{for(let b=0;b<_.length;b++)h.setUint8(g+b,_.charCodeAt(b))};return m(0,"RIFF"),h.setUint32(4,36+c,!0),m(8,"WAVE"),m(12,"fmt "),h.setUint32(16,16,!0),h.setUint16(20,1,!0),h.setUint16(22,s,!0),h.setUint32(24,e,!0),h.setUint32(28,a,!0),h.setUint16(32,o,!0),h.setUint16(34,16,!0),m(36,"data"),h.setUint32(40,c,!0),new Uint8Array(u,44).set(n),new Blob([u],{type:"audio/wav"})}function blobToBase64(n){return new Promise((e,s)=>{const o=new FileReader;o.onloadend=()=>e(String(o.result).split(",")[1]),o.onerror=s,o.readAsDataURL(n)})}async function blobToWavBase64Universal(n,e=24e3){const s=await n.arrayBuffer(),o=window.AudioContext||window.webkitAudioContext,a=new o,c=await new Promise((yn,pn)=>{a.decodeAudioData(s.slice(0),yn,pn)}),u=1,h=Math.ceil(c.duration*e),m=new OfflineAudioContext(u,h,e),g=m.createBuffer(1,c.length,c.sampleRate),_=g.getChannelData(0);for(let yn=0;yn<c.numberOfChannels;yn++){const pn=c.getChannelData(yn);for(let wn=0;wn<_.length;wn++)_[wn]+=pn[wn]/c.numberOfChannels}const b=m.createBufferSource();b.buffer=g,b.connect(m.destination),b.start(0);const T=await m.startRendering(),A=T.getChannelData(0),R=new Int16Array(A.length);for(let yn=0;yn<A.length;yn++){const pn=Math.max(-1,Math.min(1,A[yn]));R[yn]=pn<0?pn*32768:pn*32767}const w=new Uint8Array(R.buffer),D=pcm16ToWav(w,T.sampleRate,1);try{await a.close()}catch{}return{b64:await blobToBase64(D),mime:"audio/wav",wavBlob:D}}async function safeTranscodeToWavOrPassThrough(n){try{return await blobToWavBase64Universal(n)}catch{const e=await blobToBase64(n),s=(n.type||"application/octet-stream").split(";")[0];return{b64:e,mime:s,wavBlob:null}}}function pickRecorderMime(){const n=window.MediaRecorder;if(!n)return"";const e=["audio/webm;codecs=opus","audio/webm","audio/ogg;codecs=opus","audio/mp4;codecs=mp4a.40.2","audio/mp4","audio/3gpp"];for(const s of e)try{if(n.isTypeSupported?.(s))return s}catch{}return""}const CLIP_DB="NoSaboAudioDB",CLIP_STORE="clips",memClips=new Map;function openClipDB(){return new Promise(n=>{if(!("indexedDB"in window))return n(null);const e=indexedDB.open(CLIP_DB,1);e.onupgradeneeded=s=>{const o=s.target.result;o.objectStoreNames.contains(CLIP_STORE)||o.createObjectStore(CLIP_STORE)},e.onsuccess=()=>n(e.result),e.onerror=()=>n(null)})}async function saveClipBlob(n,e){if(!n||!e)return;const s=await openClipDB();if(!s){memClips.set(n,e);return}await new Promise(o=>{const a=s.transaction(CLIP_STORE,"readwrite");a.objectStore(CLIP_STORE).put(e,n),a.oncomplete=()=>{s.close(),o()},a.onerror=()=>{s.close(),memClips.set(n,e),o()}})}async function loadClipBlob(n){if(!n)return null;const e=await openClipDB();return e?await new Promise(s=>{const a=e.transaction(CLIP_STORE,"readonly").objectStore(CLIP_STORE).get(n);a.onsuccess=()=>{const c=a.result||null;e.close(),s(c)},a.onerror=()=>{e.close(),s(memClips.get(n)||null)}}):memClips.get(n)||null}async function sha256Hex(n){try{if(crypto?.subtle){const s=new TextEncoder().encode(n||""),o=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("")}}catch{}let e=5381;for(let s=0;s<(n||"").length;s++)e=e*33^n.charCodeAt(s);return(e>>>0).toString(16).padStart(8,"0")}const COLORS=["#91E0FF","#A0EBAF","#FFD48A","#C6B7FF","#FF9FB1","#B0F0FF"],colorFor=n=>COLORS[n%COLORS.length];function wrapFirst(n,e,s){if(!n||!e)return[n];const o=n.toLowerCase().indexOf(String(e).toLowerCase());if(o<0)return[n];const a=n.slice(0,o),c=n.slice(o,o+e.length),u=n.slice(o+e.length);return[a,jsxRuntimeExports.jsx("span",{"data-token":s,style:{borderBottom:"2px solid transparent",wordBreak:"break-word",overflowWrap:"anywhere",whiteSpace:"pre-wrap"},children:c},`${s}-${o}`),...wrapFirst(u,e,s+"_cont")]}function buildAlignedNodes(n,e,s){if(!e?.length||!n)return[n];const o=[...e].sort((c,u)=>(u?.[s]?.length||0)-(c?.[s]?.length||0));let a=[n];return o.forEach((c,u)=>{const h=c?.[s];if(!h)return;const m=`tok_${u}`,g=[];a.forEach(_=>{typeof _=="string"?g.push(...wrapFirst(_,h,m)):g.push(_)}),a=g}),a}function AlignedBubble({primaryLabel:n,secondaryLabel:e,primaryText:s,secondaryText:o,pairs:a,showSecondary:c,onReplay:u,canReplay:h}){const[m,g]=reactExports.useState(null);function _(A){return React.Children.map(A,R=>{if(typeof R=="string"||!R?.props?.["data-token"])return R;const w=R.props["data-token"].split("_")[0],D=parseInt(w.replace("tok_",""))||0,fn=m===w,yn={borderBottom:`2px solid ${fn?colorFor(D):"transparent"}`,paddingBottom:1,transition:"border-color 120ms ease"};return React.cloneElement(R,{onMouseEnter:()=>g(w),onMouseLeave:()=>g(null),onClick:()=>g(fn?null:w),style:{...R.props.style||{},...yn}})})}const b=_(buildAlignedNodes(s,a,"lhs")),T=_(buildAlignedNodes(o,a,"rhs"));return jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,borderRadius:"lg",maxW:"100%",overflowX:"hidden",children:[jsxRuntimeExports.jsxs(HStack,{spacing:2,mb:1,justify:"space-between",children:[jsxRuntimeExports.jsxs(HStack,{spacing:2,children:[jsxRuntimeExports.jsx(Badge,{colorScheme:"purple",children:n}),c&&o&&jsxRuntimeExports.jsx(Badge,{variant:"subtle",children:e})]}),jsxRuntimeExports.jsxs(Button,{size:"xs",variant:"ghost",onClick:u,isDisabled:!h,color:"white",children:[jsxRuntimeExports.jsx(CiRepeat,{}),"Repeat"]})]}),jsxRuntimeExports.jsx(Text,{fontSize:"md",lineHeight:"1.45",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere",children:b}),c&&o&&jsxRuntimeExports.jsx(Text,{opacity:.85,fontSize:"sm",mt:1,lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere",children:T}),!!a?.length&&c&&jsxRuntimeExports.jsx(Wrap,{spacing:2,mt:2,children:a.slice(0,COLORS.length).map((A,R)=>jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Tag,{size:"sm",style:{borderColor:colorFor(R),borderWidth:2,background:"transparent",color:"white"},children:[A.lhs,"  ",A.rhs]})},R))})]})}function CoachPanel({isOpen:n,onClose:e,coach:s,onRedo:o,onAcceptNext:a,targetLang:c="es"}){s||(s={});const{correction_en:u,tip_en:h,correction_es:m,tip_es:g,translation_en:_,translation_es:b,scores:T={},cefr:A,next_goal:R,goal_completed:w}=s,D=s?.[`vocab_${c}`]||(c==="es"?s?.vocab_es:[])||[],fn=s?.[`redo_${c}`]||(c==="es"?s?.redo_es:null),yn=((T?.pronunciation??0)+(T?.grammar??0)+(T?.vocab??0)+(T?.fluency??0))/12*100,pn=c==="nah"?"Nhuatl":"Spanish";return jsxRuntimeExports.jsxs(Drawer,{isOpen:n,placement:"bottom",onClose:e,children:[jsxRuntimeExports.jsx(ModalOverlay,{bg:"blackAlpha.600"}),jsxRuntimeExports.jsxs(DrawerContent,{bg:"gray.900",color:"gray.100",borderTopRadius:"24px",children:[jsxRuntimeExports.jsx(ModalHeader,{pb:2,children:jsxRuntimeExports.jsxs(HStack,{justify:"space-between",align:"start",children:[jsxRuntimeExports.jsx(Text,{fontWeight:"bold",children:"Coach"}),jsxRuntimeExports.jsxs(HStack,{children:[w?jsxRuntimeExports.jsx(Badge,{colorScheme:"green",children:"Goal completed"}):jsxRuntimeExports.jsx(Badge,{colorScheme:"orange",children:"Keep going"}),A&&jsxRuntimeExports.jsx(Badge,{colorScheme:"purple",children:A})]})]})}),jsxRuntimeExports.jsxs(ModalBody,{pb:6,children:[(_||u||h)&&jsxRuntimeExports.jsxs(Box,{mb:3,children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",opacity:.8,children:"English"}),_&&jsxRuntimeExports.jsx(Text,{whiteSpace:"pre-wrap",children:_}),u&&jsxRuntimeExports.jsxs(Text,{mt:1,fontSize:"sm",children:[jsxRuntimeExports.jsx("b",{children:"Correction:"})," ",u]}),h&&jsxRuntimeExports.jsxs(Text,{mt:1,fontSize:"sm",opacity:.9,children:[" ",h]})]}),(b||m||g)&&jsxRuntimeExports.jsxs(Box,{mb:3,children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",opacity:.8,children:"Espaol"}),b&&jsxRuntimeExports.jsx(Text,{whiteSpace:"pre-wrap",children:b}),m&&jsxRuntimeExports.jsxs(Text,{mt:1,fontSize:"sm",children:[jsxRuntimeExports.jsx("b",{children:"Correccin:"})," ",m]}),g&&jsxRuntimeExports.jsxs(Text,{mt:1,fontSize:"sm",opacity:.9,children:[" ",g]})]}),!!D?.length&&jsxRuntimeExports.jsxs(Box,{mb:3,children:[jsxRuntimeExports.jsxs(Text,{fontSize:"sm",opacity:.8,children:["Useful ",pn]}),jsxRuntimeExports.jsx(Wrap,{spacing:2,children:D.slice(0,8).map((wn,V)=>jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Tag,{colorScheme:"teal",variant:"subtle",maxW:"100%",children:wn})},V))})]}),jsxRuntimeExports.jsxs(Box,{mb:4,children:[jsxRuntimeExports.jsx(Text,{fontSize:"xs",opacity:.8,children:"Pronunciation / Grammar / Vocab / Fluency"}),jsxRuntimeExports.jsx(Progress,{value:yn,size:"sm",colorScheme:"teal",rounded:"sm"})]}),jsxRuntimeExports.jsxs(Stack,{direction:["column","row"],spacing:2,children:[jsxRuntimeExports.jsxs(Button,{size:"md",onClick:()=>o?.(fn),isDisabled:!fn,flex:"1",children:["Try again (",pn,")"]}),jsxRuntimeExports.jsx(Button,{size:"md",variant:"outline",onClick:()=>a?.(R),isDisabled:!R,flex:"1",children:"Next goal"})]})]})]})]})}function newToLegacyTurn(n){if(!n)return null;if(n.lang==="es")return{es:n.text||"",en:n.trans_en||"",align:Array.isArray(n.pairs)?n.pairs.map(o=>({es:o?.lhs||"",en:o?.rhs||""})):[]};const e=n.trans_es||"",s=n.trans_en||"";return!e&&!s?null:{es:e||"",en:s||"",align:[]}}function buildLegacyFromNew(n){const e=[];return(n||[]).forEach(s=>{const o=newToLegacyTurn(s);o&&e.push(o)}),e}const isoNow=()=>{try{return new Date().toISOString()}catch{return String(Date.now())}};function VoiceChat({auth:n,onSwitchedAccount:e,activeNpub:s="",activeNsec:o=""}){const a=useToast(),c=useDisclosure(),u=useDisclosure(),h=useDisclosure(),m={es:"Pide algo con cortesa.",en:"Make a polite request."},g="Like a rude, sarcastic, mean-spirited toxica.",[_,b]=reactExports.useState("idle"),[T,A]=reactExports.useState("neutral"),[R,w]=reactExports.useState(0),[D,fn]=reactExports.useState(2e3),[yn,pn]=reactExports.useState("beginner"),[wn,V]=reactExports.useState("en"),[bn,wt]=reactExports.useState("Leda"),[jt,ln]=reactExports.useState(g),[vn,dn]=reactExports.useState("nah"),[mn,zt]=reactExports.useState([]),[$n,Sn]=reactExports.useState(null),[En,Cn]=reactExports.useState(0),[On,Fn]=reactExports.useState(0),[An,Vn]=reactExports.useState(m),[Bn,Ln]=reactExports.useState(!0),[Xn,er]=reactExports.useState(s||""),[rr,cr]=reactExports.useState(o||""),[ar,pr]=reactExports.useState(""),[_r,jr]=reactExports.useState(!1),Sr=reactExports.useRef(null),Tr=reactExports.useRef([]),sr=reactExports.useRef(null),Ar=reactExports.useRef(null),qr=reactExports.useRef(null),Vr=reactExports.useRef(null),ui=reactExports.useRef(null),si=reactExports.useRef("");reactExports.useEffect(()=>{er(s||"")},[s]),reactExports.useEffect(()=>{cr(o||"")},[o]),reactExports.useEffect(()=>{enableIndexedDbPersistence(database).catch(()=>{})},[]),reactExports.useEffect(()=>{const Zn=(Xn||"").trim();if(!Zn)return;const or=collection(database,"users",Zn,"turns"),ur=query(or,orderBy("createdAtClient","asc"),limit(50)),fr=onSnapshot(ur,Fr=>{const vr=Fr.docs.map(Mr=>{const Pr=Mr.data()||{};return{id:Mr.id,lang:Pr.lang||"es",text:Pr.text||"",trans_en:Pr.trans_en||"",trans_es:Pr.trans_es||"",pairs:Array.isArray(Pr.pairs)?Pr.pairs:[],audioKey:Pr.audioKey||null,createdAtClient:Pr.createdAtClient||0}});zt(vr)},Fr=>{console.error("turns snapshot error:",Fr?.message||Fr)});return()=>fr()},[Xn]),reactExports.useEffect(()=>{const Zn=(Xn||"").trim();if(!Zn)return;let or=!1;return(async()=>{try{const ur=doc(database,"users",Zn);let fr=await getDoc(ur);if(!fr.exists())try{fr=await getDocFromCache(ur)}catch{}const Fr=fr.exists()?fr.data():null,vr=Fr?.progress||{};if(or)return;pn(vr.level||"beginner"),V(vr.supportLang==="bilingual"||vr.supportLang==="es"?vr.supportLang:"en"),wt(vr.voice||"Leda"),ln(vr.voicePersona||g),dn(vr.targetLang==="nah"?"nah":"es"),Cn(Number.isFinite(Fr?.xp)?Fr.xp:Number.isFinite(vr.xp)?vr.xp:0),Fn(Number.isFinite(Fr?.streak)?Fr.streak:Number.isFinite(vr.streak)?vr.streak:0),Vn(vr.challenge?.es&&vr.challenge?.en?vr.challenge:{...m}),Ln(typeof vr.showTranslations=="boolean"?vr.showTranslations:!0)}catch(ur){console.error("load profile failed:",ur)}})(),()=>{or=!0}},[Xn]);async function ni(Zn={}){const or=(Xn||"").trim()||(typeof window<"u"?localStorage.getItem("local_npub"):"");if(or)try{await setDoc(doc(database,"users",or),{local_npub:or,updatedAt:isoNow(),xp:Zn.xp??En,streak:Zn.streak??On,lastGoal:(Zn.challenge??An)?.en||null,progress:{level:Zn.level??yn,supportLang:Zn.supportLang??wn,voice:Zn.voice??bn,voicePersona:Zn.voicePersona??jt,targetLang:Zn.targetLang??vn,xp:Zn.xp??En,streak:Zn.streak??On,challenge:Zn.challenge??An,showTranslations:Zn.showTranslations??Bn}},{merge:!0})}catch(ur){console.error("save profile failed:",ur)}}reactExports.useEffect(()=>{ni({})},[yn,wn,bn,jt,Bn,vn]),reactExports.useEffect(()=>()=>{try{Vr.current&&clearTimeout(Vr.current),Ar.current&&Ar.current.state!=="closed"&&Ar.current.close().catch(()=>{}),Ar.current=null,sr.current?.pause?.(),pi()}catch{}},[]);function pi(){const Zn=Sr.current?.stream;Zn&&Zn.getTracks().forEach(or=>or.stop())}async function ii(Zn,or="Copied"){try{await navigator.clipboard.writeText(Zn||""),a({title:or,status:"success",duration:1400})}catch(ur){a({title:"Copy failed",description:String(ur?.message||ur),status:"error"})}}async function di(){const Zn=(ar||"").trim();if(!Zn){a({title:"Paste your nsec first",status:"warning"});return}if(!Zn.startsWith("nsec")){a({title:"Invalid key",description:"Must start with nsec",status:"error"});return}jr(!0);try{if(typeof n!="function")throw new Error("auth(nsec) is not available.");const ur=(await n(Zn))?.user?.npub||localStorage.getItem("local_npub");if(!ur?.startsWith("npub"))throw new Error("Could not derive npub from the secret key.");await setDoc(doc(database,"users",ur),{local_npub:ur,createdAt:isoNow()},{merge:!0}),localStorage.setItem("local_npub",ur),localStorage.setItem("local_nsec",Zn),er(ur),cr(Zn),pr(""),h.onClose?.(),a({title:"Switched account",status:"success"}),typeof e=="function"&&await Promise.resolve(e(ur))}catch(or){console.error("switchAccount error:",or),a({title:"Switch failed",description:or?.message||String(or),status:"error"})}finally{jr(!1)}}async function Zi(){try{let Zn=function(){Mr.getByteTimeDomainData(Pr);let vi=0;for(let ki=0;ki<Pr.length;ki++){const oi=(Pr[ki]-128)/128;vi+=oi*oi}const Ai=Math.sqrt(vi/Pr.length);w(Ai);const Ji=performance.now();if(Ai<Rr){if(ui.current==null)ui.current=Ji;else if(Ji-ui.current>=D){try{Sr.current?.stop()}catch{}return}}else ui.current=null;Vr.current=setTimeout(Zn,1e3/Si)};if(!navigator.mediaDevices?.getUserMedia){a({title:"Mic not available",description:"getUserMedia not supported.",status:"error"});return}try{sr.current?.pause?.(),sr.current=null}catch{}const or=await navigator.mediaDevices.getUserMedia({audio:!0}),ur=pickRecorderMime();if(!ur){a({title:"Recording not supported",description:"No compatible audio format.",status:"error"});return}const fr=new MediaRecorder(or,{mimeType:ur});Tr.current=[],fr.ondataavailable=vi=>vi.data&&vi.data.size>0&&Tr.current.push(vi.data),fr.onstop=gn,fr.start(),Sr.current=fr;const Fr=new(window.AudioContext||window.webkitAudioContext),vr=Fr.createMediaStreamSource(or),Mr=Fr.createAnalyser();Mr.fftSize=2048,vr.connect(Mr),Ar.current=Fr,qr.current=Mr,ui.current=null,b("listening"),A("encourage");const Pr=new Uint8Array(Mr.fftSize),Rr=.02,Si=60;Zn()}catch(Zn){console.error(Zn),a({title:"Microphone error",description:String(Zn),status:"error"})}}function Ei(){try{Sr.current?.stop()}catch{}}function Ur(Zn,or){const ur=(or?.pronunciation??0)+(or?.grammar??0)+(or?.vocab??0)+(or?.fluency??0),fr=ur<=4,Fr=ur<=8,vr=[{es:"Presntate y di de dnde eres.",en:"Introduce yourself and say where youre from."},{es:"Haz una peticin corts con 'me gustara'.",en:"Make a polite request using 'me gustara'."},{es:"Aade cantidad y cortesa.",en:"Add quantity plus courtesy."},{es:"Pregunta por detalles (tamao/sabor).",en:"Ask for details (size/flavor)."},{es:"Propn una hora para quedar.",en:"Propose a time to meet."},{es:"Cuenta lo que hiciste ayer (pretrito).",en:"Say what you did yesterday (preterite)."}];return fr?vr[0]:Fr?vr[2]:vr[Math.floor(Math.random()*vr.length)]}async function gn(){try{b("thinking"),A("neutral");try{Vr.current&&(clearTimeout(Vr.current),Vr.current=null),Ar.current&&Ar.current.state!=="closed"&&await Ar.current.close().catch(()=>{}),Ar.current=null}catch{}pi();const Zn=Tr.current.length>1?new Blob(Tr.current,{type:Sr.current?.mimeType||"audio/webm"}):Tr.current[0];if(!Zn){a({title:"No audio captured",status:"warning"}),b("idle");return}const{b64:or,mime:ur}=await safeTranscodeToWavOrPassThrough(Zn),fr=buildLegacyFromNew(mn).slice(-3);console.log("talkturn",TALKTURN_URL);const Fr=await fetch(TALKTURN_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audioBase64:or,mime:ur,history:fr,level:yn,supportLang:wn,challenge:An,redo:si.current,voice:bn,voicePersona:jt,targetLang:vn})});if(!Fr.ok){let Er="";try{Er=JSON.stringify(await Fr.json())}catch{}throw new Error(`HTTP ${Fr.status}${Er?" "+Er:""}`)}const vr=await Fr.json(),Mr=vr?.assistant?.text??vr?.assistant_es??"",Pr=vr?.assistant?.lang??(vr?.assistant_es?"es":vn),Rr=vr?.coach||{},Si=Rr?.translation_en||"",vi=Rr?.translation_es||"";let Ai=[];Pr==="nah"?wn==="es"?Ai=(Rr?.alignment?.nah_es||[]).map($r=>({lhs:$r?.t||"",rhs:$r?.es||""})):Ai=(Rr?.alignment?.nah_en||[]).map($r=>({lhs:$r?.t||"",rhs:$r?.en||""})):Array.isArray(Rr?.alignment)?Ai=Rr.alignment.map(Er=>({lhs:Er?.es||"",rhs:Er?.en||""})):Ai=(Rr?.alignment?.es_en||[]).map($r=>({lhs:$r?.es||"",rhs:$r?.en||""}));const Ji=vr?.audioBase64||null;let ki=null;if(Ji){const Er=b64ToUint8(Ji),$r=pcm16ToWav(Er,24e3,1);ki=await sha256Hex(`${Mr}||${bn}||${Pr}`),await saveClipBlob(ki,$r);const ei=URL.createObjectURL($r);try{sr.current?.pause?.()}catch{}const mi=new Audio(ei);sr.current=mi,b("speaking"),A("happy"),mi.onended=()=>{URL.revokeObjectURL(ei),sr.current=null,b("idle"),A("neutral")},await mi.play().catch(()=>{const is=()=>{mi.play().catch(()=>{}),window.removeEventListener("pointerdown",is)};window.addEventListener("pointerdown",is)})}else b("idle"),A("neutral");if(Mr){const Er=(Xn||"").trim()||localStorage.getItem("local_npub")||"";if(Er){const $r=collection(database,"users",Er,"turns");await addDoc($r,{lang:Pr,text:Mr,trans_en:Si,trans_es:vi,pairs:Ai,audioKey:ki||null,createdAt:serverTimestamp(),createdAtClient:Date.now()})}}let oi=An;if(Rr&&Object.keys(Rr).length){Sn(Rr);let Er=Rr.next_goal;(!Er?.es||!Er?.en)&&(Er=Ur(An,Rr.scores)),oi=Rr.goal_completed?Er:{es:Rr[`redo_${vn}`]&&vn==="nah"?"Intntalo otra vez, siguiendo la pista de la coach.":Rr.redo_es||"Intntalo otra vez en espaol.",en:Rr.goal_completed?Er.en:"Try that again."},Vn(oi);const ei=10+((Rr.scores?.pronunciation??0)+(Rr.scores?.grammar??0)+(Rr.scores?.vocab??0)+(Rr.scores?.fluency??0))+(Rr.goal_completed?5:0),mi=(En??0)+ei,is=(On??0)+1;Cn(mi),Fn(is),await ni({xp:mi,streak:is,challenge:oi})}else Sn(null),oi=Ur(An,null),Vn(oi),await ni({challenge:oi});si.current=""}catch(Zn){console.error(Zn),b("idle"),A("neutral"),a({title:"Conversation failed",description:String(Zn?.message||Zn),status:"error"})}finally{Tr.current=[],Sr.current=null}}async function P(Zn){if(Zn){si.current=Zn;try{const or=await fetch(TTS_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:Zn,voice:bn})});if(!or.ok){let Pr="";try{Pr=JSON.stringify(await or.json())}catch{}throw new Error(`HTTP ${or.status}${Pr?" "+Pr:""}`)}const{audioBase64:ur}=await or.json();if(!ur)return;const fr=b64ToUint8(ur),Fr=pcm16ToWav(fr,24e3,1),vr=URL.createObjectURL(Fr);try{sr.current?.pause?.()}catch{}const Mr=new Audio(vr);sr.current=Mr,b("speaking"),A("encourage"),Mr.onended=()=>{URL.revokeObjectURL(vr),sr.current=null,b("idle"),A("neutral")},await Mr.play().catch(()=>{const Pr=()=>{Mr.play().catch(()=>{}),window.removeEventListener("pointerdown",Pr)};window.addEventListener("pointerdown",Pr)})}catch(or){console.error(or),a({title:"Redo failed",description:String(or),status:"error"})}}}function C(Zn){!Zn?.es||!Zn?.en||(Vn(Zn),ni({challenge:Zn}),u.onClose())}const xn=Math.min(100,En%100),kn=yn==="beginner"?"Beginner":yn==="intermediate"?"Intermediate":"Advanced",Hn=yn==="beginner"?"green":yn==="intermediate"?"orange":"purple",Qn=vn==="nah"?"No Sabo  Nhuatl Learning Coach":"No Sabo  Spanish Learning Coach",hr=wn==="es"?"es":"en";return jsxRuntimeExports.jsxs(Box,{minH:"100vh",bg:"gray.900",color:"gray.100",position:"relative",pb:"120px",maxW:"100%",style:{overflowX:"hidden"},children:[jsxRuntimeExports.jsxs(Stack,{direction:["column","row"],px:4,pt:4,pb:2,spacing:[2,4],align:["stretch","center"],justify:"space-between",children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Text,{fontSize:"lg",fontWeight:"bold",noOfLines:1,children:Qn}),jsxRuntimeExports.jsxs(Wrap,{spacing:2,mt:1,children:[jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Badge,{colorScheme:Hn,variant:"subtle",children:kn})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Badge,{colorScheme:"teal",variant:"subtle",children:["XP ",En]})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Badge,{colorScheme:"pink",variant:"subtle",children:[On,""]})})]})]}),jsxRuntimeExports.jsxs(HStack,{children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Account",icon:jsxRuntimeExports.jsx(CiUser,{size:20}),size:"md",onClick:h.onOpen,mr:2}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"Settings",icon:jsxRuntimeExports.jsx(SettingsIcon,{}),size:"md",onClick:c.onOpen})]})]}),jsxRuntimeExports.jsxs(VStack,{align:"stretch",spacing:3,px:4,children:[jsxRuntimeExports.jsx(RobotBuddyPro,{state:_,loudness:_==="listening"?R:0,mood:T,variant:"abstract"}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"lg",border:"1px solid rgba(255,255,255,0.06)",maxW:"100%",children:[jsxRuntimeExports.jsxs(Stack,{direction:["column","row"],justify:"space-between",align:["stretch","start"],children:[jsxRuntimeExports.jsxs(Text,{fontWeight:"semibold",fontSize:"md",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere",children:[" ",An.en]}),jsxRuntimeExports.jsxs(Badge,{colorScheme:"teal",whiteSpace:"nowrap",alignSelf:["flex-start","center"],children:["ES: ",An.es]})]}),jsxRuntimeExports.jsxs(Wrap,{mt:2,spacing:2,children:[jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:u.onOpen,colorScheme:"whiteAlpha.600",children:"Coach"})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"ghost",onClick:()=>Ln(Zn=>!Zn),colorScheme:"whiteAlpha.600",children:Bn?hr==="es"?"Hide Spanish":"Hide English":hr==="es"?"Show Spanish":"Show English"})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"ghost",onClick:()=>{const Zn=Ur(An,$n?.scores);Vn(Zn),ni({challenge:Zn})},children:"New goal"})}),(()=>{const Zn=$n?.[`redo_${vn}`]||$n?.redo_es||null;return Zn&&jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Button,{size:"sm",onClick:()=>P(Zn),children:"Redo tip"})})})()]})]})]}),jsxRuntimeExports.jsx(VStack,{align:"stretch",spacing:3,px:4,mt:3,children:mn.map(Zn=>{const or=Zn.text||"",fr=(Zn.lang||"es")==="nah"?"Nhuatl":"Spanish",Fr=(hr==="es"?Zn.trans_es:Zn.trans_en)||"",vr=hr==="es"?"Espaol":"English",Mr=Array.isArray(Zn.pairs)?Zn.pairs:[],Pr=!!Zn.audioKey;return jsxRuntimeExports.jsx(AlignedBubble,{primaryLabel:fr,secondaryLabel:vr,primaryText:or,secondaryText:Fr,pairs:Mr,showSecondary:Bn,canReplay:Pr,onReplay:async()=>{if(!Zn.audioKey){a({title:"No audio cached",description:"This turn doesnt have saved audio.",status:"info",duration:2e3});return}const Rr=await loadClipBlob(Zn.audioKey);if(!Rr){a({title:"Audio not found",description:"Say something again to re-cache this line.",status:"info",duration:2e3});return}try{sr.current?.pause?.()}catch{}const Si=URL.createObjectURL(Rr),vi=new Audio(Si);sr.current=vi,b("speaking"),A("happy"),vi.onended=()=>{URL.revokeObjectURL(Si),sr.current=null,b("idle"),A("neutral")},await vi.play().catch(()=>{})}},Zn.id)})}),jsxRuntimeExports.jsx(Center,{position:"fixed",bottom:"22px",left:"0",right:"0",zIndex:30,px:4,children:jsxRuntimeExports.jsxs(HStack,{spacing:3,w:"100%",maxW:"560px",justify:"center",children:[jsxRuntimeExports.jsx(Box,{bg:"gray.800",px:3,py:2,rounded:"lg",border:"1px solid rgba(255,255,255,0.06)",display:["none","flex"],children:jsxRuntimeExports.jsxs(Stat,{minW:"120px",children:[jsxRuntimeExports.jsx(StatLabel,{fontSize:"xs",children:"Progress"}),jsxRuntimeExports.jsxs(StatNumber,{fontSize:"md",children:[100-xn," XP to level"]}),jsxRuntimeExports.jsx(Progress,{mt:1,value:xn,size:"xs",colorScheme:"teal",rounded:"sm"})]})}),_!=="listening"?jsxRuntimeExports.jsx(Button,{onClick:Zi,size:"lg",height:"64px",px:"8",rounded:"full",colorScheme:"teal",boxShadow:"0 10px 30px rgba(0,0,0,0.35)",children:" Talk"}):jsxRuntimeExports.jsx(Button,{onClick:Ei,size:"lg",height:"64px",px:"8",rounded:"full",colorScheme:"red",boxShadow:"0 10px 30px rgba(0,0,0,0.35)",children:" Stop"})]})}),jsxRuntimeExports.jsxs(Drawer,{isOpen:c.isOpen,placement:"bottom",onClose:c.onClose,children:[jsxRuntimeExports.jsx(ModalOverlay,{bg:"blackAlpha.600"}),jsxRuntimeExports.jsxs(DrawerContent,{bg:"gray.900",color:"gray.100",borderTopRadius:"24px",children:[jsxRuntimeExports.jsx(ModalHeader,{pb:2,children:"Settings"}),jsxRuntimeExports.jsx(ModalBody,{pb:6,children:jsxRuntimeExports.jsxs(VStack,{align:"stretch",spacing:3,children:[jsxRuntimeExports.jsxs(Wrap,{spacing:2,children:[jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:yn,onChange:Zn=>pn(Zn.target.value),bg:"gray.800",size:"md",w:"auto",children:[jsxRuntimeExports.jsx("option",{value:"beginner",children:"Beginner"}),jsxRuntimeExports.jsx("option",{value:"intermediate",children:"Intermediate"}),jsxRuntimeExports.jsx("option",{value:"advanced",children:"Advanced"})]})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:wn,onChange:Zn=>V(Zn.target.value),bg:"gray.800",size:"md",w:"auto",children:[jsxRuntimeExports.jsx("option",{value:"en",children:"Support: English"}),jsxRuntimeExports.jsx("option",{value:"bilingual",children:"Support: Bilingual"}),jsxRuntimeExports.jsx("option",{value:"es",children:"Support: Spanish"})]})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:bn,onChange:Zn=>wt(Zn.target.value),bg:"gray.800",size:"md",w:"auto",children:[jsxRuntimeExports.jsx("option",{value:"Leda",children:"Leda"}),jsxRuntimeExports.jsx("option",{value:"Puck",children:"Puck"}),jsxRuntimeExports.jsx("option",{value:"Kore",children:"Kore"}),jsxRuntimeExports.jsx("option",{value:"Breeze",children:"Breeze"}),jsxRuntimeExports.jsx("option",{value:"Solemn",children:"Solemn"})]})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:vn,onChange:Zn=>dn(Zn.target.value),bg:"gray.800",size:"md",w:"auto",title:"Practice language",children:[jsxRuntimeExports.jsx("option",{value:"nah",children:"Practice: Nhuatl"}),jsxRuntimeExports.jsx("option",{value:"es",children:"Practice: Spanish"})]})})]}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsxs(HStack,{justify:"space-between",mb:2,children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",children:"Auto-stop after pause"}),jsxRuntimeExports.jsxs(Text,{fontSize:"sm",opacity:.8,children:[D," ms"]})]}),jsxRuntimeExports.jsxs(Slider,{"aria-label":"pause-slider",min:400,max:3e3,step:100,value:D,onChange:fn,children:[jsxRuntimeExports.jsx(SliderTrack,{children:jsxRuntimeExports.jsx(SliderFilledTrack,{})}),jsxRuntimeExports.jsx(SliderThumb,{})]})]}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",mb:2,children:"Voice personality"}),jsxRuntimeExports.jsx(Input,{value:jt,onChange:Zn=>ln(Zn.target.value),bg:"gray.700",placeholder:`e.g., ${g}`}),jsxRuntimeExports.jsx(Text,{fontSize:"xs",opacity:.7,mt:1,children:"Styles the assistant reply (light sarcasm OK; no bullying)."})]}),jsxRuntimeExports.jsxs(HStack,{bg:"gray.800",p:3,rounded:"md",justify:"space-between",children:[jsxRuntimeExports.jsxs(Text,{fontSize:"sm",mr:2,children:["Show ",hr==="es"?"Spanish":"English"," ","translation"]}),jsxRuntimeExports.jsx(Switch,{isChecked:Bn,onChange:Zn=>Ln(Zn.target.checked)})]})]})})]})]}),jsxRuntimeExports.jsxs(Drawer,{isOpen:h.isOpen,placement:"bottom",onClose:h.onClose,children:[jsxRuntimeExports.jsx(ModalOverlay,{bg:"blackAlpha.600"}),jsxRuntimeExports.jsxs(DrawerContent,{bg:"gray.900",color:"gray.100",borderTopRadius:"24px",children:[jsxRuntimeExports.jsx(ModalHeader,{pb:2,children:"Account"}),jsxRuntimeExports.jsx(ModalBody,{pb:6,children:jsxRuntimeExports.jsxs(VStack,{align:"stretch",spacing:3,children:[jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",mb:1,children:"Your ID (npub)"}),jsxRuntimeExports.jsxs(InputGroup,{children:[jsxRuntimeExports.jsx(Input,{value:Xn||"",readOnly:!0,bg:"gray.700",placeholder:"Not set"}),jsxRuntimeExports.jsx(InputRightElement,{width:"4.5rem",children:jsxRuntimeExports.jsx(Button,{h:"1.75rem",size:"sm",onClick:()=>ii(Xn,"ID copied"),isDisabled:!Xn,children:"Copy"})})]})]}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",mb:1,children:"Secret key (nsec)"}),jsxRuntimeExports.jsxs(InputGroup,{children:[jsxRuntimeExports.jsx(Input,{type:"password",value:rr?"":"",readOnly:!0,bg:"gray.700",placeholder:"Not stored"}),jsxRuntimeExports.jsx(InputRightElement,{width:"6rem",children:jsxRuntimeExports.jsx(Button,{h:"1.75rem",size:"sm",colorScheme:"orange",onClick:()=>ii(rr,"Secret copied"),isDisabled:!rr,children:"Copy"})})]}),jsxRuntimeExports.jsx(Text,{fontSize:"xs",opacity:.75,mt:1,children:"We never display your secretonly copy from local storage."})]}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",mb:2,children:"Switch account (paste nsec)"}),jsxRuntimeExports.jsx(Input,{value:ar,onChange:Zn=>pr(Zn.target.value),bg:"gray.700",placeholder:"nsec1..."}),jsxRuntimeExports.jsx(HStack,{mt:2,justify:"flex-end",children:jsxRuntimeExports.jsx(Button,{isLoading:_r,loadingText:"Switching",onClick:di,colorScheme:"teal",children:"Switch"})}),jsxRuntimeExports.jsx(Text,{fontSize:"xs",opacity:.75,mt:1,children:"If the account doesnt exist, well create it in your users collection."})]})]})})]})]}),jsxRuntimeExports.jsx(CoachPanel,{isOpen:u.isOpen,onClose:u.onClose,coach:$n,onRedo:P,onAcceptNext:C,targetLang:vn})]})}var buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=h,base64Js.toByteArray=g,base64Js.fromByteArray=T;for(var n=[],e=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)n[a]=o[a],e[o.charCodeAt(a)]=a;e[45]=62,e[95]=63;function u(A){var R=A.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=A.indexOf("=");w===-1&&(w=R);var D=w===R?0:4-w%4;return[w,D]}function h(A){var R=u(A),w=R[0],D=R[1];return(w+D)*3/4-D}function m(A,R,w){return(R+w)*3/4-w}function g(A){var R,w=u(A),D=w[0],fn=w[1],yn=new s(m(A,D,fn)),pn=0,wn=fn>0?D-4:D,V;for(V=0;V<wn;V+=4)R=e[A.charCodeAt(V)]<<18|e[A.charCodeAt(V+1)]<<12|e[A.charCodeAt(V+2)]<<6|e[A.charCodeAt(V+3)],yn[pn++]=R>>16&255,yn[pn++]=R>>8&255,yn[pn++]=R&255;return fn===2&&(R=e[A.charCodeAt(V)]<<2|e[A.charCodeAt(V+1)]>>4,yn[pn++]=R&255),fn===1&&(R=e[A.charCodeAt(V)]<<10|e[A.charCodeAt(V+1)]<<4|e[A.charCodeAt(V+2)]>>2,yn[pn++]=R>>8&255,yn[pn++]=R&255),yn}function _(A){return n[A>>18&63]+n[A>>12&63]+n[A>>6&63]+n[A&63]}function b(A,R,w){for(var D,fn=[],yn=R;yn<w;yn+=3)D=(A[yn]<<16&16711680)+(A[yn+1]<<8&65280)+(A[yn+2]&255),fn.push(_(D));return fn.join("")}function T(A){for(var R,w=A.length,D=w%3,fn=[],yn=16383,pn=0,wn=w-D;pn<wn;pn+=yn)fn.push(b(A,pn,pn+yn>wn?wn:pn+yn));return D===1?(R=A[w-1],fn.push(n[R>>2]+n[R<<4&63]+"==")):D===2&&(R=(A[w-2]<<8)+A[w-1],fn.push(n[R>>10]+n[R>>4&63]+n[R<<2&63]+"=")),fn.join("")}return base64Js}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(n,e,s,o,a){var c,u,h=a*8-o-1,m=(1<<h)-1,g=m>>1,_=-7,b=s?a-1:0,T=s?-1:1,A=n[e+b];for(b+=T,c=A&(1<<-_)-1,A>>=-_,_+=h;_>0;c=c*256+n[e+b],b+=T,_-=8);for(u=c&(1<<-_)-1,c>>=-_,_+=o;_>0;u=u*256+n[e+b],b+=T,_-=8);if(c===0)c=1-g;else{if(c===m)return u?NaN:(A?-1:1)*(1/0);u=u+Math.pow(2,o),c=c-g}return(A?-1:1)*u*Math.pow(2,c-o)},ieee754.write=function(n,e,s,o,a,c){var u,h,m,g=c*8-a-1,_=(1<<g)-1,b=_>>1,T=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=o?0:c-1,R=o?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,u=_):(u=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-u))<1&&(u--,m*=2),u+b>=1?e+=T/m:e+=T*Math.pow(2,1-b),e*m>=2&&(u++,m/=2),u+b>=_?(h=0,u=_):u+b>=1?(h=(e*m-1)*Math.pow(2,a),u=u+b):(h=e*Math.pow(2,b-1)*Math.pow(2,a),u=0));a>=8;n[s+A]=h&255,A+=R,h/=256,a-=8);for(u=u<<a|h,g+=a;g>0;n[s+A]=u&255,A+=R,u/=256,g-=8);n[s+A-R]|=w*128}),ieee754}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(n){const e=requireBase64Js(),s=requireIeee754(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=h,n.SlowBuffer=yn,n.INSPECT_MAX_BYTES=50;const a=2147483647;n.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=c(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const gn=new Uint8Array(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,Uint8Array.prototype),Object.setPrototypeOf(gn,P),gn.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function u(gn){if(gn>a)throw new RangeError('The value "'+gn+'" is invalid for option "size"');const P=new Uint8Array(gn);return Object.setPrototypeOf(P,h.prototype),P}function h(gn,P,C){if(typeof gn=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(gn)}return m(gn,P,C)}h.poolSize=8192;function m(gn,P,C){if(typeof gn=="string")return T(gn,P);if(ArrayBuffer.isView(gn))return R(gn);if(gn==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof gn);if(ii(gn,ArrayBuffer)||gn&&ii(gn.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ii(gn,SharedArrayBuffer)||gn&&ii(gn.buffer,SharedArrayBuffer)))return w(gn,P,C);if(typeof gn=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const xn=gn.valueOf&&gn.valueOf();if(xn!=null&&xn!==gn)return h.from(xn,P,C);const kn=D(gn);if(kn)return kn;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof gn[Symbol.toPrimitive]=="function")return h.from(gn[Symbol.toPrimitive]("string"),P,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof gn)}h.from=function(gn,P,C){return m(gn,P,C)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function g(gn){if(typeof gn!="number")throw new TypeError('"size" argument must be of type number');if(gn<0)throw new RangeError('The value "'+gn+'" is invalid for option "size"')}function _(gn,P,C){return g(gn),gn<=0?u(gn):P!==void 0?typeof C=="string"?u(gn).fill(P,C):u(gn).fill(P):u(gn)}h.alloc=function(gn,P,C){return _(gn,P,C)};function b(gn){return g(gn),u(gn<0?0:fn(gn)|0)}h.allocUnsafe=function(gn){return b(gn)},h.allocUnsafeSlow=function(gn){return b(gn)};function T(gn,P){if((typeof P!="string"||P==="")&&(P="utf8"),!h.isEncoding(P))throw new TypeError("Unknown encoding: "+P);const C=pn(gn,P)|0;let xn=u(C);const kn=xn.write(gn,P);return kn!==C&&(xn=xn.slice(0,kn)),xn}function A(gn){const P=gn.length<0?0:fn(gn.length)|0,C=u(P);for(let xn=0;xn<P;xn+=1)C[xn]=gn[xn]&255;return C}function R(gn){if(ii(gn,Uint8Array)){const P=new Uint8Array(gn);return w(P.buffer,P.byteOffset,P.byteLength)}return A(gn)}function w(gn,P,C){if(P<0||gn.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(gn.byteLength<P+(C||0))throw new RangeError('"length" is outside of buffer bounds');let xn;return P===void 0&&C===void 0?xn=new Uint8Array(gn):C===void 0?xn=new Uint8Array(gn,P):xn=new Uint8Array(gn,P,C),Object.setPrototypeOf(xn,h.prototype),xn}function D(gn){if(h.isBuffer(gn)){const P=fn(gn.length)|0,C=u(P);return C.length===0||gn.copy(C,0,0,P),C}if(gn.length!==void 0)return typeof gn.length!="number"||di(gn.length)?u(0):A(gn);if(gn.type==="Buffer"&&Array.isArray(gn.data))return A(gn.data)}function fn(gn){if(gn>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return gn|0}function yn(gn){return+gn!=gn&&(gn=0),h.alloc(+gn)}h.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==h.prototype},h.compare=function(P,C){if(ii(P,Uint8Array)&&(P=h.from(P,P.offset,P.byteLength)),ii(C,Uint8Array)&&(C=h.from(C,C.offset,C.byteLength)),!h.isBuffer(P)||!h.isBuffer(C))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===C)return 0;let xn=P.length,kn=C.length;for(let Hn=0,Qn=Math.min(xn,kn);Hn<Qn;++Hn)if(P[Hn]!==C[Hn]){xn=P[Hn],kn=C[Hn];break}return xn<kn?-1:kn<xn?1:0},h.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(P,C){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return h.alloc(0);let xn;if(C===void 0)for(C=0,xn=0;xn<P.length;++xn)C+=P[xn].length;const kn=h.allocUnsafe(C);let Hn=0;for(xn=0;xn<P.length;++xn){let Qn=P[xn];if(ii(Qn,Uint8Array))Hn+Qn.length>kn.length?(h.isBuffer(Qn)||(Qn=h.from(Qn)),Qn.copy(kn,Hn)):Uint8Array.prototype.set.call(kn,Qn,Hn);else if(h.isBuffer(Qn))Qn.copy(kn,Hn);else throw new TypeError('"list" argument must be an Array of Buffers');Hn+=Qn.length}return kn};function pn(gn,P){if(h.isBuffer(gn))return gn.length;if(ArrayBuffer.isView(gn)||ii(gn,ArrayBuffer))return gn.byteLength;if(typeof gn!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof gn);const C=gn.length,xn=arguments.length>2&&arguments[2]===!0;if(!xn&&C===0)return 0;let kn=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return Vr(gn).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C*2;case"hex":return C>>>1;case"base64":return ni(gn).length;default:if(kn)return xn?-1:Vr(gn).length;P=(""+P).toLowerCase(),kn=!0}}h.byteLength=pn;function wn(gn,P,C){let xn=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((C===void 0||C>this.length)&&(C=this.length),C<=0)||(C>>>=0,P>>>=0,C<=P))return"";for(gn||(gn="utf8");;)switch(gn){case"hex":return Fn(this,P,C);case"utf8":case"utf-8":return $n(this,P,C);case"ascii":return Cn(this,P,C);case"latin1":case"binary":return On(this,P,C);case"base64":return zt(this,P,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return An(this,P,C);default:if(xn)throw new TypeError("Unknown encoding: "+gn);gn=(gn+"").toLowerCase(),xn=!0}}h.prototype._isBuffer=!0;function V(gn,P,C){const xn=gn[P];gn[P]=gn[C],gn[C]=xn}h.prototype.swap16=function(){const P=this.length;if(P%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let C=0;C<P;C+=2)V(this,C,C+1);return this},h.prototype.swap32=function(){const P=this.length;if(P%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let C=0;C<P;C+=4)V(this,C,C+3),V(this,C+1,C+2);return this},h.prototype.swap64=function(){const P=this.length;if(P%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let C=0;C<P;C+=8)V(this,C,C+7),V(this,C+1,C+6),V(this,C+2,C+5),V(this,C+3,C+4);return this},h.prototype.toString=function(){const P=this.length;return P===0?"":arguments.length===0?$n(this,0,P):wn.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(P){if(!h.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P?!0:h.compare(this,P)===0},h.prototype.inspect=function(){let P="";const C=n.INSPECT_MAX_BYTES;return P=this.toString("hex",0,C).replace(/(.{2})/g,"$1 ").trim(),this.length>C&&(P+=" ... "),"<Buffer "+P+">"},o&&(h.prototype[o]=h.prototype.inspect),h.prototype.compare=function(P,C,xn,kn,Hn){if(ii(P,Uint8Array)&&(P=h.from(P,P.offset,P.byteLength)),!h.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(C===void 0&&(C=0),xn===void 0&&(xn=P?P.length:0),kn===void 0&&(kn=0),Hn===void 0&&(Hn=this.length),C<0||xn>P.length||kn<0||Hn>this.length)throw new RangeError("out of range index");if(kn>=Hn&&C>=xn)return 0;if(kn>=Hn)return-1;if(C>=xn)return 1;if(C>>>=0,xn>>>=0,kn>>>=0,Hn>>>=0,this===P)return 0;let Qn=Hn-kn,hr=xn-C;const Zn=Math.min(Qn,hr),or=this.slice(kn,Hn),ur=P.slice(C,xn);for(let fr=0;fr<Zn;++fr)if(or[fr]!==ur[fr]){Qn=or[fr],hr=ur[fr];break}return Qn<hr?-1:hr<Qn?1:0};function bn(gn,P,C,xn,kn){if(gn.length===0)return-1;if(typeof C=="string"?(xn=C,C=0):C>2147483647?C=2147483647:C<-2147483648&&(C=-2147483648),C=+C,di(C)&&(C=kn?0:gn.length-1),C<0&&(C=gn.length+C),C>=gn.length){if(kn)return-1;C=gn.length-1}else if(C<0)if(kn)C=0;else return-1;if(typeof P=="string"&&(P=h.from(P,xn)),h.isBuffer(P))return P.length===0?-1:wt(gn,P,C,xn,kn);if(typeof P=="number")return P=P&255,typeof Uint8Array.prototype.indexOf=="function"?kn?Uint8Array.prototype.indexOf.call(gn,P,C):Uint8Array.prototype.lastIndexOf.call(gn,P,C):wt(gn,[P],C,xn,kn);throw new TypeError("val must be string, number or Buffer")}function wt(gn,P,C,xn,kn){let Hn=1,Qn=gn.length,hr=P.length;if(xn!==void 0&&(xn=String(xn).toLowerCase(),xn==="ucs2"||xn==="ucs-2"||xn==="utf16le"||xn==="utf-16le")){if(gn.length<2||P.length<2)return-1;Hn=2,Qn/=2,hr/=2,C/=2}function Zn(ur,fr){return Hn===1?ur[fr]:ur.readUInt16BE(fr*Hn)}let or;if(kn){let ur=-1;for(or=C;or<Qn;or++)if(Zn(gn,or)===Zn(P,ur===-1?0:or-ur)){if(ur===-1&&(ur=or),or-ur+1===hr)return ur*Hn}else ur!==-1&&(or-=or-ur),ur=-1}else for(C+hr>Qn&&(C=Qn-hr),or=C;or>=0;or--){let ur=!0;for(let fr=0;fr<hr;fr++)if(Zn(gn,or+fr)!==Zn(P,fr)){ur=!1;break}if(ur)return or}return-1}h.prototype.includes=function(P,C,xn){return this.indexOf(P,C,xn)!==-1},h.prototype.indexOf=function(P,C,xn){return bn(this,P,C,xn,!0)},h.prototype.lastIndexOf=function(P,C,xn){return bn(this,P,C,xn,!1)};function jt(gn,P,C,xn){C=Number(C)||0;const kn=gn.length-C;xn?(xn=Number(xn),xn>kn&&(xn=kn)):xn=kn;const Hn=P.length;xn>Hn/2&&(xn=Hn/2);let Qn;for(Qn=0;Qn<xn;++Qn){const hr=parseInt(P.substr(Qn*2,2),16);if(di(hr))return Qn;gn[C+Qn]=hr}return Qn}function ln(gn,P,C,xn){return pi(Vr(P,gn.length-C),gn,C,xn)}function vn(gn,P,C,xn){return pi(ui(P),gn,C,xn)}function dn(gn,P,C,xn){return pi(ni(P),gn,C,xn)}function mn(gn,P,C,xn){return pi(si(P,gn.length-C),gn,C,xn)}h.prototype.write=function(P,C,xn,kn){if(C===void 0)kn="utf8",xn=this.length,C=0;else if(xn===void 0&&typeof C=="string")kn=C,xn=this.length,C=0;else if(isFinite(C))C=C>>>0,isFinite(xn)?(xn=xn>>>0,kn===void 0&&(kn="utf8")):(kn=xn,xn=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Hn=this.length-C;if((xn===void 0||xn>Hn)&&(xn=Hn),P.length>0&&(xn<0||C<0)||C>this.length)throw new RangeError("Attempt to write outside buffer bounds");kn||(kn="utf8");let Qn=!1;for(;;)switch(kn){case"hex":return jt(this,P,C,xn);case"utf8":case"utf-8":return ln(this,P,C,xn);case"ascii":case"latin1":case"binary":return vn(this,P,C,xn);case"base64":return dn(this,P,C,xn);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mn(this,P,C,xn);default:if(Qn)throw new TypeError("Unknown encoding: "+kn);kn=(""+kn).toLowerCase(),Qn=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function zt(gn,P,C){return P===0&&C===gn.length?e.fromByteArray(gn):e.fromByteArray(gn.slice(P,C))}function $n(gn,P,C){C=Math.min(gn.length,C);const xn=[];let kn=P;for(;kn<C;){const Hn=gn[kn];let Qn=null,hr=Hn>239?4:Hn>223?3:Hn>191?2:1;if(kn+hr<=C){let Zn,or,ur,fr;switch(hr){case 1:Hn<128&&(Qn=Hn);break;case 2:Zn=gn[kn+1],(Zn&192)===128&&(fr=(Hn&31)<<6|Zn&63,fr>127&&(Qn=fr));break;case 3:Zn=gn[kn+1],or=gn[kn+2],(Zn&192)===128&&(or&192)===128&&(fr=(Hn&15)<<12|(Zn&63)<<6|or&63,fr>2047&&(fr<55296||fr>57343)&&(Qn=fr));break;case 4:Zn=gn[kn+1],or=gn[kn+2],ur=gn[kn+3],(Zn&192)===128&&(or&192)===128&&(ur&192)===128&&(fr=(Hn&15)<<18|(Zn&63)<<12|(or&63)<<6|ur&63,fr>65535&&fr<1114112&&(Qn=fr))}}Qn===null?(Qn=65533,hr=1):Qn>65535&&(Qn-=65536,xn.push(Qn>>>10&1023|55296),Qn=56320|Qn&1023),xn.push(Qn),kn+=hr}return En(xn)}const Sn=4096;function En(gn){const P=gn.length;if(P<=Sn)return String.fromCharCode.apply(String,gn);let C="",xn=0;for(;xn<P;)C+=String.fromCharCode.apply(String,gn.slice(xn,xn+=Sn));return C}function Cn(gn,P,C){let xn="";C=Math.min(gn.length,C);for(let kn=P;kn<C;++kn)xn+=String.fromCharCode(gn[kn]&127);return xn}function On(gn,P,C){let xn="";C=Math.min(gn.length,C);for(let kn=P;kn<C;++kn)xn+=String.fromCharCode(gn[kn]);return xn}function Fn(gn,P,C){const xn=gn.length;(!P||P<0)&&(P=0),(!C||C<0||C>xn)&&(C=xn);let kn="";for(let Hn=P;Hn<C;++Hn)kn+=Zi[gn[Hn]];return kn}function An(gn,P,C){const xn=gn.slice(P,C);let kn="";for(let Hn=0;Hn<xn.length-1;Hn+=2)kn+=String.fromCharCode(xn[Hn]+xn[Hn+1]*256);return kn}h.prototype.slice=function(P,C){const xn=this.length;P=~~P,C=C===void 0?xn:~~C,P<0?(P+=xn,P<0&&(P=0)):P>xn&&(P=xn),C<0?(C+=xn,C<0&&(C=0)):C>xn&&(C=xn),C<P&&(C=P);const kn=this.subarray(P,C);return Object.setPrototypeOf(kn,h.prototype),kn};function Vn(gn,P,C){if(gn%1!==0||gn<0)throw new RangeError("offset is not uint");if(gn+P>C)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(P,C,xn){P=P>>>0,C=C>>>0,xn||Vn(P,C,this.length);let kn=this[P],Hn=1,Qn=0;for(;++Qn<C&&(Hn*=256);)kn+=this[P+Qn]*Hn;return kn},h.prototype.readUintBE=h.prototype.readUIntBE=function(P,C,xn){P=P>>>0,C=C>>>0,xn||Vn(P,C,this.length);let kn=this[P+--C],Hn=1;for(;C>0&&(Hn*=256);)kn+=this[P+--C]*Hn;return kn},h.prototype.readUint8=h.prototype.readUInt8=function(P,C){return P=P>>>0,C||Vn(P,1,this.length),this[P]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(P,C){return P=P>>>0,C||Vn(P,2,this.length),this[P]|this[P+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(P,C){return P=P>>>0,C||Vn(P,2,this.length),this[P]<<8|this[P+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(P,C){return P=P>>>0,C||Vn(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+this[P+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(P,C){return P=P>>>0,C||Vn(P,4,this.length),this[P]*16777216+(this[P+1]<<16|this[P+2]<<8|this[P+3])},h.prototype.readBigUInt64LE=Ei(function(P){P=P>>>0,Tr(P,"offset");const C=this[P],xn=this[P+7];(C===void 0||xn===void 0)&&sr(P,this.length-8);const kn=C+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24,Hn=this[++P]+this[++P]*2**8+this[++P]*2**16+xn*2**24;return BigInt(kn)+(BigInt(Hn)<<BigInt(32))}),h.prototype.readBigUInt64BE=Ei(function(P){P=P>>>0,Tr(P,"offset");const C=this[P],xn=this[P+7];(C===void 0||xn===void 0)&&sr(P,this.length-8);const kn=C*2**24+this[++P]*2**16+this[++P]*2**8+this[++P],Hn=this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+xn;return(BigInt(kn)<<BigInt(32))+BigInt(Hn)}),h.prototype.readIntLE=function(P,C,xn){P=P>>>0,C=C>>>0,xn||Vn(P,C,this.length);let kn=this[P],Hn=1,Qn=0;for(;++Qn<C&&(Hn*=256);)kn+=this[P+Qn]*Hn;return Hn*=128,kn>=Hn&&(kn-=Math.pow(2,8*C)),kn},h.prototype.readIntBE=function(P,C,xn){P=P>>>0,C=C>>>0,xn||Vn(P,C,this.length);let kn=C,Hn=1,Qn=this[P+--kn];for(;kn>0&&(Hn*=256);)Qn+=this[P+--kn]*Hn;return Hn*=128,Qn>=Hn&&(Qn-=Math.pow(2,8*C)),Qn},h.prototype.readInt8=function(P,C){return P=P>>>0,C||Vn(P,1,this.length),this[P]&128?(255-this[P]+1)*-1:this[P]},h.prototype.readInt16LE=function(P,C){P=P>>>0,C||Vn(P,2,this.length);const xn=this[P]|this[P+1]<<8;return xn&32768?xn|4294901760:xn},h.prototype.readInt16BE=function(P,C){P=P>>>0,C||Vn(P,2,this.length);const xn=this[P+1]|this[P]<<8;return xn&32768?xn|4294901760:xn},h.prototype.readInt32LE=function(P,C){return P=P>>>0,C||Vn(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},h.prototype.readInt32BE=function(P,C){return P=P>>>0,C||Vn(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},h.prototype.readBigInt64LE=Ei(function(P){P=P>>>0,Tr(P,"offset");const C=this[P],xn=this[P+7];(C===void 0||xn===void 0)&&sr(P,this.length-8);const kn=this[P+4]+this[P+5]*2**8+this[P+6]*2**16+(xn<<24);return(BigInt(kn)<<BigInt(32))+BigInt(C+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24)}),h.prototype.readBigInt64BE=Ei(function(P){P=P>>>0,Tr(P,"offset");const C=this[P],xn=this[P+7];(C===void 0||xn===void 0)&&sr(P,this.length-8);const kn=(C<<24)+this[++P]*2**16+this[++P]*2**8+this[++P];return(BigInt(kn)<<BigInt(32))+BigInt(this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+xn)}),h.prototype.readFloatLE=function(P,C){return P=P>>>0,C||Vn(P,4,this.length),s.read(this,P,!0,23,4)},h.prototype.readFloatBE=function(P,C){return P=P>>>0,C||Vn(P,4,this.length),s.read(this,P,!1,23,4)},h.prototype.readDoubleLE=function(P,C){return P=P>>>0,C||Vn(P,8,this.length),s.read(this,P,!0,52,8)},h.prototype.readDoubleBE=function(P,C){return P=P>>>0,C||Vn(P,8,this.length),s.read(this,P,!1,52,8)};function Bn(gn,P,C,xn,kn,Hn){if(!h.isBuffer(gn))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>kn||P<Hn)throw new RangeError('"value" argument is out of bounds');if(C+xn>gn.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(P,C,xn,kn){if(P=+P,C=C>>>0,xn=xn>>>0,!kn){const hr=Math.pow(2,8*xn)-1;Bn(this,P,C,xn,hr,0)}let Hn=1,Qn=0;for(this[C]=P&255;++Qn<xn&&(Hn*=256);)this[C+Qn]=P/Hn&255;return C+xn},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(P,C,xn,kn){if(P=+P,C=C>>>0,xn=xn>>>0,!kn){const hr=Math.pow(2,8*xn)-1;Bn(this,P,C,xn,hr,0)}let Hn=xn-1,Qn=1;for(this[C+Hn]=P&255;--Hn>=0&&(Qn*=256);)this[C+Hn]=P/Qn&255;return C+xn},h.prototype.writeUint8=h.prototype.writeUInt8=function(P,C,xn){return P=+P,C=C>>>0,xn||Bn(this,P,C,1,255,0),this[C]=P&255,C+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(P,C,xn){return P=+P,C=C>>>0,xn||Bn(this,P,C,2,65535,0),this[C]=P&255,this[C+1]=P>>>8,C+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(P,C,xn){return P=+P,C=C>>>0,xn||Bn(this,P,C,2,65535,0),this[C]=P>>>8,this[C+1]=P&255,C+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(P,C,xn){return P=+P,C=C>>>0,xn||Bn(this,P,C,4,4294967295,0),this[C+3]=P>>>24,this[C+2]=P>>>16,this[C+1]=P>>>8,this[C]=P&255,C+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(P,C,xn){return P=+P,C=C>>>0,xn||Bn(this,P,C,4,4294967295,0),this[C]=P>>>24,this[C+1]=P>>>16,this[C+2]=P>>>8,this[C+3]=P&255,C+4};function Ln(gn,P,C,xn,kn){Sr(P,xn,kn,gn,C,7);let Hn=Number(P&BigInt(4294967295));gn[C++]=Hn,Hn=Hn>>8,gn[C++]=Hn,Hn=Hn>>8,gn[C++]=Hn,Hn=Hn>>8,gn[C++]=Hn;let Qn=Number(P>>BigInt(32)&BigInt(4294967295));return gn[C++]=Qn,Qn=Qn>>8,gn[C++]=Qn,Qn=Qn>>8,gn[C++]=Qn,Qn=Qn>>8,gn[C++]=Qn,C}function Xn(gn,P,C,xn,kn){Sr(P,xn,kn,gn,C,7);let Hn=Number(P&BigInt(4294967295));gn[C+7]=Hn,Hn=Hn>>8,gn[C+6]=Hn,Hn=Hn>>8,gn[C+5]=Hn,Hn=Hn>>8,gn[C+4]=Hn;let Qn=Number(P>>BigInt(32)&BigInt(4294967295));return gn[C+3]=Qn,Qn=Qn>>8,gn[C+2]=Qn,Qn=Qn>>8,gn[C+1]=Qn,Qn=Qn>>8,gn[C]=Qn,C+8}h.prototype.writeBigUInt64LE=Ei(function(P,C=0){return Ln(this,P,C,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Ei(function(P,C=0){return Xn(this,P,C,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(P,C,xn,kn){if(P=+P,C=C>>>0,!kn){const Zn=Math.pow(2,8*xn-1);Bn(this,P,C,xn,Zn-1,-Zn)}let Hn=0,Qn=1,hr=0;for(this[C]=P&255;++Hn<xn&&(Qn*=256);)P<0&&hr===0&&this[C+Hn-1]!==0&&(hr=1),this[C+Hn]=(P/Qn>>0)-hr&255;return C+xn},h.prototype.writeIntBE=function(P,C,xn,kn){if(P=+P,C=C>>>0,!kn){const Zn=Math.pow(2,8*xn-1);Bn(this,P,C,xn,Zn-1,-Zn)}let Hn=xn-1,Qn=1,hr=0;for(this[C+Hn]=P&255;--Hn>=0&&(Qn*=256);)P<0&&hr===0&&this[C+Hn+1]!==0&&(hr=1),this[C+Hn]=(P/Qn>>0)-hr&255;return C+xn},h.prototype.writeInt8=function(P,C,xn){return P=+P,C=C>>>0,xn||Bn(this,P,C,1,127,-128),P<0&&(P=255+P+1),this[C]=P&255,C+1},h.prototype.writeInt16LE=function(P,C,xn){return P=+P,C=C>>>0,xn||Bn(this,P,C,2,32767,-32768),this[C]=P&255,this[C+1]=P>>>8,C+2},h.prototype.writeInt16BE=function(P,C,xn){return P=+P,C=C>>>0,xn||Bn(this,P,C,2,32767,-32768),this[C]=P>>>8,this[C+1]=P&255,C+2},h.prototype.writeInt32LE=function(P,C,xn){return P=+P,C=C>>>0,xn||Bn(this,P,C,4,2147483647,-2147483648),this[C]=P&255,this[C+1]=P>>>8,this[C+2]=P>>>16,this[C+3]=P>>>24,C+4},h.prototype.writeInt32BE=function(P,C,xn){return P=+P,C=C>>>0,xn||Bn(this,P,C,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[C]=P>>>24,this[C+1]=P>>>16,this[C+2]=P>>>8,this[C+3]=P&255,C+4},h.prototype.writeBigInt64LE=Ei(function(P,C=0){return Ln(this,P,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Ei(function(P,C=0){return Xn(this,P,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function er(gn,P,C,xn,kn,Hn){if(C+xn>gn.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("Index out of range")}function rr(gn,P,C,xn,kn){return P=+P,C=C>>>0,kn||er(gn,P,C,4),s.write(gn,P,C,xn,23,4),C+4}h.prototype.writeFloatLE=function(P,C,xn){return rr(this,P,C,!0,xn)},h.prototype.writeFloatBE=function(P,C,xn){return rr(this,P,C,!1,xn)};function cr(gn,P,C,xn,kn){return P=+P,C=C>>>0,kn||er(gn,P,C,8),s.write(gn,P,C,xn,52,8),C+8}h.prototype.writeDoubleLE=function(P,C,xn){return cr(this,P,C,!0,xn)},h.prototype.writeDoubleBE=function(P,C,xn){return cr(this,P,C,!1,xn)},h.prototype.copy=function(P,C,xn,kn){if(!h.isBuffer(P))throw new TypeError("argument should be a Buffer");if(xn||(xn=0),!kn&&kn!==0&&(kn=this.length),C>=P.length&&(C=P.length),C||(C=0),kn>0&&kn<xn&&(kn=xn),kn===xn||P.length===0||this.length===0)return 0;if(C<0)throw new RangeError("targetStart out of bounds");if(xn<0||xn>=this.length)throw new RangeError("Index out of range");if(kn<0)throw new RangeError("sourceEnd out of bounds");kn>this.length&&(kn=this.length),P.length-C<kn-xn&&(kn=P.length-C+xn);const Hn=kn-xn;return this===P&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(C,xn,kn):Uint8Array.prototype.set.call(P,this.subarray(xn,kn),C),Hn},h.prototype.fill=function(P,C,xn,kn){if(typeof P=="string"){if(typeof C=="string"?(kn=C,C=0,xn=this.length):typeof xn=="string"&&(kn=xn,xn=this.length),kn!==void 0&&typeof kn!="string")throw new TypeError("encoding must be a string");if(typeof kn=="string"&&!h.isEncoding(kn))throw new TypeError("Unknown encoding: "+kn);if(P.length===1){const Qn=P.charCodeAt(0);(kn==="utf8"&&Qn<128||kn==="latin1")&&(P=Qn)}}else typeof P=="number"?P=P&255:typeof P=="boolean"&&(P=Number(P));if(C<0||this.length<C||this.length<xn)throw new RangeError("Out of range index");if(xn<=C)return this;C=C>>>0,xn=xn===void 0?this.length:xn>>>0,P||(P=0);let Hn;if(typeof P=="number")for(Hn=C;Hn<xn;++Hn)this[Hn]=P;else{const Qn=h.isBuffer(P)?P:h.from(P,kn),hr=Qn.length;if(hr===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(Hn=0;Hn<xn-C;++Hn)this[Hn+C]=Qn[Hn%hr]}return this};const ar={};function pr(gn,P,C){ar[gn]=class extends C{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${gn}]`,this.stack,delete this.name}get code(){return gn}set code(kn){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:kn,writable:!0})}toString(){return`${this.name} [${gn}]: ${this.message}`}}}pr("ERR_BUFFER_OUT_OF_BOUNDS",function(gn){return gn?`${gn} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pr("ERR_INVALID_ARG_TYPE",function(gn,P){return`The "${gn}" argument must be of type number. Received type ${typeof P}`},TypeError),pr("ERR_OUT_OF_RANGE",function(gn,P,C){let xn=`The value of "${gn}" is out of range.`,kn=C;return Number.isInteger(C)&&Math.abs(C)>2**32?kn=_r(String(C)):typeof C=="bigint"&&(kn=String(C),(C>BigInt(2)**BigInt(32)||C<-(BigInt(2)**BigInt(32)))&&(kn=_r(kn)),kn+="n"),xn+=` It must be ${P}. Received ${kn}`,xn},RangeError);function _r(gn){let P="",C=gn.length;const xn=gn[0]==="-"?1:0;for(;C>=xn+4;C-=3)P=`_${gn.slice(C-3,C)}${P}`;return`${gn.slice(0,C)}${P}`}function jr(gn,P,C){Tr(P,"offset"),(gn[P]===void 0||gn[P+C]===void 0)&&sr(P,gn.length-(C+1))}function Sr(gn,P,C,xn,kn,Hn){if(gn>C||gn<P){const Qn=typeof P=="bigint"?"n":"";let hr;throw P===0||P===BigInt(0)?hr=`>= 0${Qn} and < 2${Qn} ** ${(Hn+1)*8}${Qn}`:hr=`>= -(2${Qn} ** ${(Hn+1)*8-1}${Qn}) and < 2 ** ${(Hn+1)*8-1}${Qn}`,new ar.ERR_OUT_OF_RANGE("value",hr,gn)}jr(xn,kn,Hn)}function Tr(gn,P){if(typeof gn!="number")throw new ar.ERR_INVALID_ARG_TYPE(P,"number",gn)}function sr(gn,P,C){throw Math.floor(gn)!==gn?(Tr(gn,C),new ar.ERR_OUT_OF_RANGE("offset","an integer",gn)):P<0?new ar.ERR_BUFFER_OUT_OF_BOUNDS:new ar.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${P}`,gn)}const Ar=/[^+/0-9A-Za-z-_]/g;function qr(gn){if(gn=gn.split("=")[0],gn=gn.trim().replace(Ar,""),gn.length<2)return"";for(;gn.length%4!==0;)gn=gn+"=";return gn}function Vr(gn,P){P=P||1/0;let C;const xn=gn.length;let kn=null;const Hn=[];for(let Qn=0;Qn<xn;++Qn){if(C=gn.charCodeAt(Qn),C>55295&&C<57344){if(!kn){if(C>56319){(P-=3)>-1&&Hn.push(239,191,189);continue}else if(Qn+1===xn){(P-=3)>-1&&Hn.push(239,191,189);continue}kn=C;continue}if(C<56320){(P-=3)>-1&&Hn.push(239,191,189),kn=C;continue}C=(kn-55296<<10|C-56320)+65536}else kn&&(P-=3)>-1&&Hn.push(239,191,189);if(kn=null,C<128){if((P-=1)<0)break;Hn.push(C)}else if(C<2048){if((P-=2)<0)break;Hn.push(C>>6|192,C&63|128)}else if(C<65536){if((P-=3)<0)break;Hn.push(C>>12|224,C>>6&63|128,C&63|128)}else if(C<1114112){if((P-=4)<0)break;Hn.push(C>>18|240,C>>12&63|128,C>>6&63|128,C&63|128)}else throw new Error("Invalid code point")}return Hn}function ui(gn){const P=[];for(let C=0;C<gn.length;++C)P.push(gn.charCodeAt(C)&255);return P}function si(gn,P){let C,xn,kn;const Hn=[];for(let Qn=0;Qn<gn.length&&!((P-=2)<0);++Qn)C=gn.charCodeAt(Qn),xn=C>>8,kn=C%256,Hn.push(kn),Hn.push(xn);return Hn}function ni(gn){return e.toByteArray(qr(gn))}function pi(gn,P,C,xn){let kn;for(kn=0;kn<xn&&!(kn+C>=P.length||kn>=gn.length);++kn)P[kn+C]=gn[kn];return kn}function ii(gn,P){return gn instanceof P||gn!=null&&gn.constructor!=null&&gn.constructor.name!=null&&gn.constructor.name===P.name}function di(gn){return gn!==gn}const Zi=(function(){const gn="0123456789abcdef",P=new Array(256);for(let C=0;C<16;++C){const xn=C*16;for(let kn=0;kn<16;++kn)P[xn+kn]=gn[C]+gn[kn]}return P})();function Ei(gn){return typeof BigInt>"u"?Ur:gn}function Ur(){throw new Error("BigInt not supported")}})(buffer)),buffer}var bufferExports=requireBuffer(),dist$1={},hasRequiredDist$1;function requireDist$1(){if(hasRequiredDist$1)return dist$1;hasRequiredDist$1=1,Object.defineProperty(dist$1,"__esModule",{value:!0}),dist$1.bech32m=dist$1.bech32=void 0;const n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={};for(let g=0;g<n.length;g++){const _=n.charAt(g);e[_]=g}function s(g){const _=g>>25;return(g&33554431)<<5^-(_>>0&1)&996825010^-(_>>1&1)&642813549^-(_>>2&1)&513874426^-(_>>3&1)&1027748829^-(_>>4&1)&705979059}function o(g){let _=1;for(let b=0;b<g.length;++b){const T=g.charCodeAt(b);if(T<33||T>126)return"Invalid prefix ("+g+")";_=s(_)^T>>5}_=s(_);for(let b=0;b<g.length;++b){const T=g.charCodeAt(b);_=s(_)^T&31}return _}function a(g,_,b,T){let A=0,R=0;const w=(1<<b)-1,D=[];for(let fn=0;fn<g.length;++fn)for(A=A<<_|g[fn],R+=_;R>=b;)R-=b,D.push(A>>R&w);if(T)R>0&&D.push(A<<b-R&w);else{if(R>=_)return"Excess padding";if(A<<b-R&w)return"Non-zero padding"}return D}function c(g){return a(g,8,5,!0)}function u(g){const _=a(g,5,8,!1);if(Array.isArray(_))return _}function h(g){const _=a(g,5,8,!1);if(Array.isArray(_))return _;throw new Error(_)}function m(g){let _;g==="bech32"?_=1:_=734539939;function b(w,D,fn){if(fn=fn||90,w.length+7+D.length>fn)throw new TypeError("Exceeds length limit");w=w.toLowerCase();let yn=o(w);if(typeof yn=="string")throw new Error(yn);let pn=w+"1";for(let wn=0;wn<D.length;++wn){const V=D[wn];if(V>>5!==0)throw new Error("Non 5-bit word");yn=s(yn)^V,pn+=n.charAt(V)}for(let wn=0;wn<6;++wn)yn=s(yn);yn^=_;for(let wn=0;wn<6;++wn){const V=yn>>(5-wn)*5&31;pn+=n.charAt(V)}return pn}function T(w,D){if(D=D||90,w.length<8)return w+" too short";if(w.length>D)return"Exceeds length limit";const fn=w.toLowerCase(),yn=w.toUpperCase();if(w!==fn&&w!==yn)return"Mixed-case string "+w;w=fn;const pn=w.lastIndexOf("1");if(pn===-1)return"No separator character for "+w;if(pn===0)return"Missing prefix for "+w;const wn=w.slice(0,pn),V=w.slice(pn+1);if(V.length<6)return"Data too short";let bn=o(wn);if(typeof bn=="string")return bn;const wt=[];for(let jt=0;jt<V.length;++jt){const ln=V.charAt(jt),vn=e[ln];if(vn===void 0)return"Unknown character "+ln;bn=s(bn)^vn,!(jt+6>=V.length)&&wt.push(vn)}return bn!==_?"Invalid checksum for "+w:{prefix:wn,words:wt}}function A(w,D){const fn=T(w,D);if(typeof fn=="object")return fn}function R(w,D){const fn=T(w,D);if(typeof fn=="object")return fn;throw new Error(fn)}return{decodeUnsafe:A,decode:R,encode:b,toWords:c,fromWordsUnsafe:u,fromWords:h}}return dist$1.bech32=m("bech32"),dist$1.bech32m=m("bech32m"),dist$1}var distExports$1=requireDist$1(),lib$1={},types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0})),types}var ee={},taskCollection$1={},taskCollection={},utils$1={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1,Object.defineProperty(utils$1,"__esModule",{value:!0}),utils$1._fast_remove_single=void 0;function n(e,s){s!==-1&&(s===0?e.shift():s===e.length-1?e.length=e.length-1:e.splice(s,1))}return utils$1._fast_remove_single=n,utils$1}var bakeCollection={},hasRequiredBakeCollection;function requireBakeCollection(){return hasRequiredBakeCollection||(hasRequiredBakeCollection=1,(function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=(function(){});var FORLOOP_FALLBACK=1500;function generateArgsDefCode(n){var e="";if(n===0)return e;for(var s=0;s<n-1;++s)e+="arg"+String(s)+", ";return e+="arg"+String(n-1),e}function generateBodyPartsCode(n,e){for(var s="",o="",a=0;a<e;++a)s+="var f".concat(a," = collection[").concat(a,`];
`),o+="f".concat(a,"(").concat(n,`)
`);return{funcDefCode:s,funcCallCode:o}}function generateBodyPartsVariadicCode(n){for(var e="",s="",o=0;o<n;++o)e+="var f".concat(o," = collection[").concat(o,`];
`),s+="f".concat(o,`.apply(undefined, arguments)
`);return{funcDefCode:e,funcCallCode:s}}function bakeCollection(collection,fixedArgsNum){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function(`).concat(argsDefCode,`) {
                `).concat(funcCallCode,`
            });
        })`)}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);collection.length%10===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 10) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                        collection[i+3](`).concat(argsDefCode,`);
                        collection[i+4](`).concat(argsDefCode,`);
                        collection[i+5](`).concat(argsDefCode,`);
                        collection[i+6](`).concat(argsDefCode,`);
                        collection[i+7](`).concat(argsDefCode,`);
                        collection[i+8](`).concat(argsDefCode,`);
                        collection[i+9](`).concat(argsDefCode,`);
                    }
                });
            })`):collection.length%4===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 4) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                        collection[i+3](`).concat(argsDefCode,`);
                    }
                });
            })`):collection.length%3===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 3) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                    }
                });
            })`):funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; ++i) {
                        collection[i](`).concat(argsDefCode,`);
                    }
                });
            })`)}{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollection=bakeCollection;function bakeCollectionAwait(collection,fixedArgsNum){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function(`).concat(argsDefCode,`) {
                return Promise.all([ `).concat(funcCallCode,` ]);
            });
        })`)}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=`(function(collection) {
            return (function(`.concat(argsDefCode,`) {
                var promises = Array(collection.length);
                for (var i = 0; i < collection.length; ++i) {
                    promises[i] = collection[i](`).concat(argsDefCode,`);
                }
                return Promise.all(promises);
            });
        })`)}{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollectionAwait=bakeCollectionAwait;function bakeCollectionVariadic(collection){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function() {
                `).concat(funcCallCode,`
            });
        })`)}else funcFactoryCode=`(function(collection) {
            return (function() {
                for (var i = 0; i < collection.length; ++i) {
                    collection[i].apply(undefined, arguments);
                }
            });
        })`;{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollectionVariadic=bakeCollectionVariadic})(bakeCollection)),bakeCollection}var hasRequiredTaskCollection$1;function requireTaskCollection$1(){if(hasRequiredTaskCollection$1)return taskCollection;hasRequiredTaskCollection$1=1;var n=taskCollection&&taskCollection.__spreadArray||function(pn,wn,V){if(V||arguments.length===2)for(var bn=0,wt=wn.length,jt;bn<wt;bn++)(jt||!(bn in wn))&&(jt||(jt=Array.prototype.slice.call(wn,0,bn)),jt[bn]=wn[bn]);return pn.concat(jt||Array.prototype.slice.call(wn))};Object.defineProperty(taskCollection,"__esModule",{value:!0}),taskCollection.TaskCollection=void 0;var e=requireUtils$1(),s=requireBakeCollection();function o(pn,wn){var V=this.length;if(V>1)if(wn){var bn;(bn=this._tasks).push.apply(bn,arguments),this.length+=arguments.length}else this._tasks.push(pn),this.length++;else if(wn){if(V===1){var wt=Array(1+arguments.length);wt.push(wt),wt.push.apply(wt,arguments),this._tasks=wt}else{var wt=Array(arguments.length);wt.push.apply(wt,arguments),this._tasks=wt}this.length+=arguments.length}else V===1?this._tasks=[this._tasks,pn]:this._tasks=pn,this.length++}function a(pn,wn){var V=this.length;if(V>1)if(wn){var bn;(bn=this._tasks).push.apply(bn,arguments),this.length+=arguments.length}else this._tasks.push(pn),this.length++;else if(wn){if(V===1){var wt=Array(1+arguments.length);wt.push(wt),wt.push.apply(wt,arguments),this._tasks=wt}else{var wt=Array(arguments.length);wt.push.apply(wt,arguments),this._tasks=wt}this.length+=arguments.length}else V===1?this._tasks=[this._tasks,pn]:this._tasks=pn,this.length++;this.firstEmitBuildStrategy?this.call=b:this.rebuild()}function c(pn){this.length!==0&&(this.length===1?this._tasks===pn&&(this.length=0):((0,e._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(pn)),this._tasks.length===1?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function u(pn){if(this.length!==0){if(this.length===1)if(this._tasks===pn&&(this.length=0),this.firstEmitBuildStrategy){this.call=s.BAKED_EMPTY_FUNC;return}else{this.rebuild();return}else(0,e._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(pn)),this._tasks.length===1?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length;this.firstEmitBuildStrategy?this.call=b:this.rebuild()}}function h(pn){for(var wn,V=[],bn=1;bn<arguments.length;bn++)V[bn-1]=arguments[bn];this.length===0?(this._tasks=V,this.length=1):this.length===1?(V.unshift(this._tasks),this._tasks=V,this.length=this._tasks.length):((wn=this._tasks).splice.apply(wn,n([pn,0],V,!1)),this.length=this._tasks.length)}function m(pn){for(var wn,V=[],bn=1;bn<arguments.length;bn++)V[bn-1]=arguments[bn];this.length===0?(this._tasks=V,this.length=1):this.length===1?(V.unshift(this._tasks),this._tasks=V,this.length=this._tasks.length):((wn=this._tasks).splice.apply(wn,n([pn,0],V,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=b:this.rebuild()}function g(){this.length===0?this.call=s.BAKED_EMPTY_FUNC:this.length===1?this.call=this._tasks:this.call=(0,s.bakeCollection)(this._tasks,this.argsNum)}function _(){this.length===0?this.call=s.BAKED_EMPTY_FUNC:this.length===1?this.call=this._tasks:this.call=(0,s.bakeCollectionAwait)(this._tasks,this.argsNum)}function b(){this.rebuild(),this.call.apply(void 0,arguments)}var T=(function(){function pn(wn,V,bn,wt){V===void 0&&(V=!0),bn===void 0&&(bn=null),wt===void 0&&(wt=!1),this.awaitTasks=wt,this.call=s.BAKED_EMPTY_FUNC,this.argsNum=wn,this.firstEmitBuildStrategy=!0,wt?this.rebuild=_.bind(this):this.rebuild=g.bind(this),this.setAutoRebuild(V),bn?typeof bn=="function"?(this._tasks=bn,this.length=1):(this._tasks=bn,this.length=bn.length):(this._tasks=null,this.length=0),V&&this.rebuild()}return pn})();taskCollection.TaskCollection=T;function A(){this._tasks=null,this.length=0,this.call=s.BAKED_EMPTY_FUNC}function R(){this._tasks=null,this.length=0,this.call=s.BAKED_EMPTY_FUNC}function w(pn){this.argsNum<pn&&(this.argsNum=pn,this.firstEmitBuildStrategy?this.call=b:this.rebuild())}function D(pn){pn?(this.push=a.bind(this),this.insert=m.bind(this),this.removeLast=u.bind(this)):(this.push=o.bind(this),this.insert=h.bind(this),this.removeLast=c.bind(this))}function fn(){return this.length===0?[]:this.length===1?[this._tasks]:this._tasks}function yn(pn){pn.length===0?(this.length=0,this.call=s.BAKED_EMPTY_FUNC):pn.length===1?(this.length=1,this.call=pn[0],this._tasks=pn[0]):(this.length=pn.length,this._tasks=pn,this.firstEmitBuildStrategy?this.call=b:this.rebuild())}return T.prototype.fastClear=A,T.prototype.clear=R,T.prototype.growArgsNum=w,T.prototype.setAutoRebuild=D,T.prototype.tasksAsArray=fn,T.prototype.setTasks=yn,taskCollection}var hasRequiredTaskCollection;function requireTaskCollection(){return hasRequiredTaskCollection||(hasRequiredTaskCollection=1,(function(n){var e=taskCollection$1&&taskCollection$1.__createBinding||(Object.create?(function(o,a,c,u){u===void 0&&(u=c);var h=Object.getOwnPropertyDescriptor(a,c);(!h||("get"in h?!a.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,u,h)}):(function(o,a,c,u){u===void 0&&(u=c),o[u]=a[c]})),s=taskCollection$1&&taskCollection$1.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)};Object.defineProperty(n,"__esModule",{value:!0}),s(requireTaskCollection$1(),n)})(taskCollection$1)),taskCollection$1}var utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1,Object.defineProperty(utils,"__esModule",{value:!0}),utils.nullObj=void 0;function n(){var e={};return e.__proto__=null,e}return utils.nullObj=n,utils}var hasRequiredEe;function requireEe(){if(hasRequiredEe)return ee;hasRequiredEe=1;var n=ee&&ee.__spreadArray||function(V,bn,wt){if(wt||arguments.length===2)for(var jt=0,ln=bn.length,vn;jt<ln;jt++)(vn||!(jt in bn))&&(vn||(vn=Array.prototype.slice.call(bn,0,jt)),vn[jt]=bn[jt]);return V.concat(vn||Array.prototype.slice.call(bn))};Object.defineProperty(ee,"__esModule",{value:!0}),ee.EventEmitter=void 0;var e=requireTaskCollection(),s=requireUtils$1(),o=requireUtils();function a(V,bn,wt,jt,ln,vn){var dn=this.events[V];if(dn){if(dn.length===0)return!1;if(dn.argsNum<6)dn.call(bn,wt,jt,ln,vn);else{for(var mn=new Array(dn.argsNum),zt=0,$n=mn.length;zt<$n;++zt)mn[zt]=arguments[zt+1];dn.call.apply(void 0,mn)}return!0}return!1}function c(V,bn,wt,jt,ln,vn){var dn=this.events[V],mn;if(dn!==void 0){if(dn.length===0)return!1;if(dn.argsNum<6)dn.call(bn,wt,jt,ln,vn);else{mn=new Array(dn.argsNum);for(var zt=0,$n=mn.length;zt<$n;++zt)mn[zt]=arguments[zt+1];dn.call.apply(void 0,mn)}}var Sn=this.onceEvents[V];if(Sn){if(typeof Sn=="function")if(this.onceEvents[V]=void 0,arguments.length<6)Sn(bn,wt,jt,ln,vn);else{if(mn===void 0){mn=new Array(arguments.length-1);for(var zt=0,$n=mn.length;zt<$n;++zt)mn[zt]=arguments[zt+1]}Sn.apply(void 0,mn)}else{var En=Sn;if(this.onceEvents[V]=void 0,arguments.length<6)for(var zt=0;zt<En.length;++zt)En[zt](bn,wt,jt,ln,vn);else{if(mn===void 0){mn=new Array(arguments.length-1);for(var zt=0,$n=mn.length;zt<$n;++zt)mn[zt]=arguments[zt+1]}for(var zt=0;zt<En.length;++zt)En[zt].apply(void 0,mn)}}return!0}return dn!==void 0}var u=(function(){function V(){this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(V.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),V})();ee.EventEmitter=u;function h(V,bn){switch(this.emit===a&&(this.emit=c),typeof this.onceEvents[V]){case"undefined":this.onceEvents[V]=bn,typeof V=="symbol"&&this._symbolKeys.add(V);break;case"function":this.onceEvents[V]=[this.onceEvents[V],bn];break;case"object":this.onceEvents[V].push(bn)}return this}function m(V,bn,wt){if(wt===void 0&&(wt=bn.length),typeof bn!="function")throw new TypeError("The listener must be a function");var jt=this.events[V];return jt?(jt.push(bn),jt.growArgsNum(wt),this.maxListeners!==1/0&&this.maxListeners<=jt.length&&console.warn('Maximum event listeners for "'.concat(String(V),'" event!'))):(this.events[V]=new e.TaskCollection(wt,!0,bn,!1),typeof V=="symbol"&&this._symbolKeys.add(V)),this}function g(V,bn){var wt=this.events[V];wt&&wt.removeLast(bn);var jt=this.onceEvents[V];return jt&&(typeof jt=="function"?this.onceEvents[V]=void 0:typeof jt=="object"&&(jt.length===1&&jt[0]===bn?this.onceEvents[V]=void 0:(0,s._fast_remove_single)(jt,jt.lastIndexOf(bn)))),this}function _(V,bn,wt,jt){wt===void 0&&(wt=this),jt===void 0&&(jt=bn.length),this.boundFuncs||(this.boundFuncs=new Map);var ln=bn.bind(wt);return this.boundFuncs.set(bn,ln),this.addListener(V,ln,jt)}function b(V,bn){var wt,jt,ln=(wt=this.boundFuncs)===null||wt===void 0?void 0:wt.get(bn);return(jt=this.boundFuncs)===null||jt===void 0||jt.delete(bn),this.removeListener(V,ln)}function T(V){return this.events[V]&&!!this.events[V].length}function A(V,bn,wt){if(wt===void 0&&(wt=bn.length),typeof bn!="function")throw new TypeError("The listener must be a function");var jt=this.events[V];return!jt||!(jt instanceof e.TaskCollection)?(jt=this.events[V]=new e.TaskCollection(wt,!0,bn,!1),typeof V=="symbol"&&this._symbolKeys.add(V)):(jt.insert(0,bn),jt.growArgsNum(wt),this.maxListeners!==1/0&&this.maxListeners<=jt.length&&console.warn('Maximum event listeners for "'.concat(String(V),'" event!'))),this}function R(V,bn){this.emit===a&&(this.emit=c);var wt=this.onceEvents[V];return wt?typeof wt!="object"?(this.onceEvents[V]=[bn,wt],typeof V=="symbol"&&this._symbolKeys.add(V)):(wt.unshift(bn),this.maxListeners!==1/0&&this.maxListeners<=wt.length&&console.warn('Maximum event listeners for "'.concat(String(V),'" once event!'))):(this.onceEvents[V]=[bn],typeof V=="symbol"&&this._symbolKeys.add(V)),this}function w(V){return V===void 0?(this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set):(this.events[V]=void 0,this.onceEvents[V]=void 0,typeof V=="symbol"&&this._symbolKeys.delete(V)),this}function D(V){return this.maxListeners=V,this}function fn(){return this.maxListeners}function yn(V){return this.emit===a?this.events[V]?this.events[V].tasksAsArray().slice():[]:this.events[V]&&this.onceEvents[V]?n(n([],this.events[V].tasksAsArray(),!0),typeof this.onceEvents[V]=="function"?[this.onceEvents[V]]:this.onceEvents[V],!0):this.events[V]?this.events[V].tasksAsArray():this.onceEvents[V]?typeof this.onceEvents[V]=="function"?[this.onceEvents[V]]:this.onceEvents[V]:[]}function pn(){var V=this;if(this.emit===a){var bn=Object.keys(this.events);return n(n([],bn,!0),Array.from(this._symbolKeys),!0).filter(function(jt){return jt in V.events&&V.events[jt]&&V.events[jt].length})}else{var bn=Object.keys(this.events).filter(function(ln){return V.events[ln]&&V.events[ln].length}),wt=Object.keys(this.onceEvents).filter(function(ln){return V.onceEvents[ln]&&V.onceEvents[ln].length});return n(n(n([],bn,!0),wt,!0),Array.from(this._symbolKeys).filter(function(ln){return ln in V.events&&V.events[ln]&&V.events[ln].length||ln in V.onceEvents&&V.onceEvents[ln]&&V.onceEvents[ln].length}),!0)}}function wn(V){return this.emit===a?this.events[V]&&this.events[V].length||0:(this.events[V]&&this.events[V].length||0)+(this.onceEvents[V]&&this.onceEvents[V].length||0)}return u.prototype.emit=a,u.prototype.on=m,u.prototype.once=h,u.prototype.addListener=m,u.prototype.removeListener=g,u.prototype.addListenerBound=_,u.prototype.removeListenerBound=b,u.prototype.hasListeners=T,u.prototype.prependListener=A,u.prototype.prependOnceListener=R,u.prototype.off=g,u.prototype.removeAllListeners=w,u.prototype.setMaxListeners=D,u.prototype.getMaxListeners=fn,u.prototype.listeners=yn,u.prototype.eventNames=pn,u.prototype.listenerCount=wn,ee}var hasRequiredLib$1;function requireLib$1(){return hasRequiredLib$1||(hasRequiredLib$1=1,(function(n){var e=lib$1&&lib$1.__createBinding||(Object.create?(function(o,a,c,u){u===void 0&&(u=c);var h=Object.getOwnPropertyDescriptor(a,c);(!h||("get"in h?!a.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,u,h)}):(function(o,a,c,u){u===void 0&&(u=c),o[u]=a[c]})),s=lib$1&&lib$1.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)};Object.defineProperty(n,"__esModule",{value:!0}),s(requireTypes(),n),s(requireEe(),n)})(lib$1)),lib$1}var libExports=requireLib$1(),browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var n=1e3,e=n*60,s=e*60,o=s*24,a=o*7,c=o*365.25;ms=function(_,b){b=b||{};var T=typeof _;if(T==="string"&&_.length>0)return u(_);if(T==="number"&&isFinite(_))return b.long?m(_):h(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))};function u(_){if(_=String(_),!(_.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(_);if(b){var T=parseFloat(b[1]),A=(b[2]||"ms").toLowerCase();switch(A){case"years":case"year":case"yrs":case"yr":case"y":return T*c;case"weeks":case"week":case"w":return T*a;case"days":case"day":case"d":return T*o;case"hours":case"hour":case"hrs":case"hr":case"h":return T*s;case"minutes":case"minute":case"mins":case"min":case"m":return T*e;case"seconds":case"second":case"secs":case"sec":case"s":return T*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return T;default:return}}}}function h(_){var b=Math.abs(_);return b>=o?Math.round(_/o)+"d":b>=s?Math.round(_/s)+"h":b>=e?Math.round(_/e)+"m":b>=n?Math.round(_/n)+"s":_+"ms"}function m(_){var b=Math.abs(_);return b>=o?g(_,b,o,"day"):b>=s?g(_,b,s,"hour"):b>=e?g(_,b,e,"minute"):b>=n?g(_,b,n,"second"):_+" ms"}function g(_,b,T,A){var R=b>=T*1.5;return Math.round(_/T)+" "+A+(R?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function n(e){o.debug=o,o.default=o,o.coerce=g,o.disable=h,o.enable=c,o.enabled=m,o.humanize=requireMs(),o.destroy=_,Object.keys(e).forEach(b=>{o[b]=e[b]}),o.names=[],o.skips=[],o.formatters={};function s(b){let T=0;for(let A=0;A<b.length;A++)T=(T<<5)-T+b.charCodeAt(A),T|=0;return o.colors[Math.abs(T)%o.colors.length]}o.selectColor=s;function o(b){let T,A=null,R,w;function D(...fn){if(!D.enabled)return;const yn=D,pn=Number(new Date),wn=pn-(T||pn);yn.diff=wn,yn.prev=T,yn.curr=pn,T=pn,fn[0]=o.coerce(fn[0]),typeof fn[0]!="string"&&fn.unshift("%O");let V=0;fn[0]=fn[0].replace(/%([a-zA-Z%])/g,(wt,jt)=>{if(wt==="%%")return"%";V++;const ln=o.formatters[jt];if(typeof ln=="function"){const vn=fn[V];wt=ln.call(yn,vn),fn.splice(V,1),V--}return wt}),o.formatArgs.call(yn,fn),(yn.log||o.log).apply(yn,fn)}return D.namespace=b,D.useColors=o.useColors(),D.color=o.selectColor(b),D.extend=a,D.destroy=o.destroy,Object.defineProperty(D,"enabled",{enumerable:!0,configurable:!1,get:()=>A!==null?A:(R!==o.namespaces&&(R=o.namespaces,w=o.enabled(b)),w),set:fn=>{A=fn}}),typeof o.init=="function"&&o.init(D),D}function a(b,T){const A=o(this.namespace+(typeof T>"u"?":":T)+b);return A.log=this.log,A}function c(b){o.save(b),o.namespaces=b,o.names=[],o.skips=[];const T=(typeof b=="string"?b:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const A of T)A[0]==="-"?o.skips.push(A.slice(1)):o.names.push(A)}function u(b,T){let A=0,R=0,w=-1,D=0;for(;A<b.length;)if(R<T.length&&(T[R]===b[A]||T[R]==="*"))T[R]==="*"?(w=R,D=A,R++):(A++,R++);else if(w!==-1)R=w+1,D++,A=D;else return!1;for(;R<T.length&&T[R]==="*";)R++;return R===T.length}function h(){const b=[...o.names,...o.skips.map(T=>"-"+T)].join(",");return o.enable(""),b}function m(b){for(const T of o.skips)if(u(b,T))return!1;for(const T of o.names)if(u(b,T))return!0;return!1}function g(b){return b instanceof Error?b.stack||b.message:b}function _(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}return common=n,common}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(n,e){var s={};e.formatArgs=a,e.save=c,e.load=u,e.useColors=o,e.storage=h(),e.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let g;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(g=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(g[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const _="color: "+this.color;g.splice(1,0,_,"color: inherit");let b=0,T=0;g[0].replace(/%[a-zA-Z%]/g,A=>{A!=="%%"&&(b++,A==="%c"&&(T=b))}),g.splice(T,0,_)}e.log=console.debug||console.log||(()=>{});function c(g){try{g?e.storage.setItem("debug",g):e.storage.removeItem("debug")}catch{}}function u(){let g;try{g=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!g&&typeof process<"u"&&"env"in process&&(g=s.DEBUG),g}function h(){try{return localStorage}catch{}}n.exports=requireCommon()(e);const{formatters:m}=n.exports;m.j=function(g){try{return JSON.stringify(g)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}}})(browser,browser.exports)),browser.exports}var browserExports=requireBrowser();const createDebug5=getDefaultExportFromCjs(browserExports);function number$2(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function bytes$2(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function hash$1(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$2(n.outputLen),number$2(n.blockLen)}function exists$1(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function output$1(n,e){bytes$2(n);const s=e.outputLen;if(n.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const crypto$3=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$2=n=>n instanceof Uint8Array,createView$2=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),rotr$2=(n,e)=>n<<32-e|n>>>e,isLE$2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$2)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$3(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function toBytes$2(n){if(typeof n=="string"&&(n=utf8ToBytes$3(n)),!u8a$2(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function concatBytes$3(...n){const e=new Uint8Array(n.reduce((o,a)=>o+a.length,0));let s=0;return n.forEach(o=>{if(!u8a$2(o))throw new Error("Uint8Array expected");e.set(o,s),s+=o.length}),e}let Hash$2=class{clone(){return this._cloneInto()}};function wrapConstructor$1(n){const e=o=>n().update(toBytes$2(o)).digest(),s=n();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>n(),e}function randomBytes$2(n=32){if(crypto$3&&typeof crypto$3.getRandomValues=="function")return crypto$3.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64$2(n,e,s,o){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,s,o);const a=BigInt(32),c=BigInt(4294967295),u=Number(s>>a&c),h=Number(s&c),m=o?4:0,g=o?0:4;n.setUint32(e+m,u,o),n.setUint32(e+g,h,o)}let SHA2$1=class extends Hash$2{constructor(e,s,o,a){super(),this.blockLen=e,this.outputLen=s,this.padOffset=o,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView$2(this.buffer)}update(e){exists$1(this);const{view:s,buffer:o,blockLen:a}=this;e=toBytes$2(e);const c=e.length;for(let u=0;u<c;){const h=Math.min(a-this.pos,c-u);if(h===a){const m=createView$2(e);for(;a<=c-u;u+=a)this.process(m,u);continue}o.set(e.subarray(u,u+h),this.pos),this.pos+=h,u+=h,this.pos===a&&(this.process(s,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists$1(this),output$1(e,this),this.finished=!0;const{buffer:s,view:o,blockLen:a,isLE:c}=this;let{pos:u}=this;s[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>a-u&&(this.process(o,0),u=0);for(let b=u;b<a;b++)s[b]=0;setBigUint64$2(o,a-8,BigInt(this.length*8),c),this.process(o,0);const h=createView$2(e),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=m/4,_=this.get();if(g>_.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<g;b++)h.setUint32(4*b,_[b],c)}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const o=e.slice(0,s);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:s,buffer:o,length:a,finished:c,destroyed:u,pos:h}=this;return e.length=a,e.pos=h,e.finished=c,e.destroyed=u,a%s&&e.buffer.set(o),e}};const Chi$2=(n,e,s)=>n&e^~n&s,Maj$2=(n,e,s)=>n&e^n&s^e&s,SHA256_K$2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$2=new Uint32Array(64);let SHA256$2=class extends SHA2$1{constructor(){super(64,32,8,!1),this.A=IV$1[0]|0,this.B=IV$1[1]|0,this.C=IV$1[2]|0,this.D=IV$1[3]|0,this.E=IV$1[4]|0,this.F=IV$1[5]|0,this.G=IV$1[6]|0,this.H=IV$1[7]|0}get(){const{A:e,B:s,C:o,D:a,E:c,F:u,G:h,H:m}=this;return[e,s,o,a,c,u,h,m]}set(e,s,o,a,c,u,h,m){this.A=e|0,this.B=s|0,this.C=o|0,this.D=a|0,this.E=c|0,this.F=u|0,this.G=h|0,this.H=m|0}process(e,s){for(let b=0;b<16;b++,s+=4)SHA256_W$2[b]=e.getUint32(s,!1);for(let b=16;b<64;b++){const T=SHA256_W$2[b-15],A=SHA256_W$2[b-2],R=rotr$2(T,7)^rotr$2(T,18)^T>>>3,w=rotr$2(A,17)^rotr$2(A,19)^A>>>10;SHA256_W$2[b]=w+SHA256_W$2[b-7]+R+SHA256_W$2[b-16]|0}let{A:o,B:a,C:c,D:u,E:h,F:m,G:g,H:_}=this;for(let b=0;b<64;b++){const T=rotr$2(h,6)^rotr$2(h,11)^rotr$2(h,25),A=_+T+Chi$2(h,m,g)+SHA256_K$2[b]+SHA256_W$2[b]|0,w=(rotr$2(o,2)^rotr$2(o,13)^rotr$2(o,22))+Maj$2(o,a,c)|0;_=g,g=m,m=h,h=u+A|0,u=c,c=a,a=o,o=A+w|0}o=o+this.A|0,a=a+this.B|0,c=c+this.C|0,u=u+this.D|0,h=h+this.E|0,m=m+this.F|0,g=g+this.G|0,_=_+this.H|0,this.set(o,a,c,u,h,m,g,_)}roundClean(){SHA256_W$2.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const sha256$3=wrapConstructor$1(()=>new SHA256$2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$9=BigInt(0),_1n$9=BigInt(1),_2n$5=BigInt(2),u8a$1=n=>n instanceof Uint8Array,hexes$2=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$2(n){if(!u8a$1(n))throw new Error("Uint8Array expected");let e="";for(let s=0;s<n.length;s++)e+=hexes$2[n[s]];return e}function numberToHexUnpadded$1(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function hexToNumber$1(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function hexToBytes$2(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(e/2);for(let o=0;o<s.length;o++){const a=o*2,c=n.slice(a,a+2),u=Number.parseInt(c,16);if(Number.isNaN(u)||u<0)throw new Error("Invalid byte sequence");s[o]=u}return s}function bytesToNumberBE$1(n){return hexToNumber$1(bytesToHex$2(n))}function bytesToNumberLE$1(n){if(!u8a$1(n))throw new Error("Uint8Array expected");return hexToNumber$1(bytesToHex$2(Uint8Array.from(n).reverse()))}function numberToBytesBE$1(n,e){return hexToBytes$2(n.toString(16).padStart(e*2,"0"))}function numberToBytesLE$1(n,e){return numberToBytesBE$1(n,e).reverse()}function numberToVarBytesBE(n){return hexToBytes$2(numberToHexUnpadded$1(n))}function ensureBytes$1(n,e,s){let o;if(typeof e=="string")try{o=hexToBytes$2(e)}catch(c){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${c}`)}else if(u8a$1(e))o=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const a=o.length;if(typeof s=="number"&&a!==s)throw new Error(`${n} expected ${s} bytes, got ${a}`);return o}function concatBytes$2(...n){const e=new Uint8Array(n.reduce((o,a)=>o+a.length,0));let s=0;return n.forEach(o=>{if(!u8a$1(o))throw new Error("Uint8Array expected");e.set(o,s),s+=o.length}),e}function equalBytes$1(n,e){if(n.length!==e.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!==e[s])return!1;return!0}function utf8ToBytes$2(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function bitLen$1(n){let e;for(e=0;n>_0n$9;n>>=_1n$9,e+=1);return e}function bitGet(n,e){return n>>BigInt(e)&_1n$9}const bitSet=(n,e,s)=>n|(s?_1n$9:_0n$9)<<BigInt(e),bitMask$1=n=>(_2n$5<<BigInt(n-1))-_1n$9,u8n=n=>new Uint8Array(n),u8fr=n=>Uint8Array.from(n);function createHmacDrbg$1(n,e,s){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof s!="function")throw new Error("hmacFn must be a function");let o=u8n(n),a=u8n(n),c=0;const u=()=>{o.fill(1),a.fill(0),c=0},h=(...b)=>s(a,o,...b),m=(b=u8n())=>{a=h(u8fr([0]),b),o=h(),b.length!==0&&(a=h(u8fr([1]),b),o=h())},g=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const T=[];for(;b<e;){o=h();const A=o.slice();T.push(A),b+=o.length}return concatBytes$2(...T)};return(b,T)=>{u(),m(b);let A;for(;!(A=T(g()));)m();return u(),A}}const validatorFns={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function validateObject(n,e,s={}){const o=(a,c,u)=>{const h=validatorFns[c];if(typeof h!="function")throw new Error(`Invalid validator "${c}", expected function`);const m=n[a];if(!(u&&m===void 0)&&!h(m,n))throw new Error(`Invalid param ${String(a)}=${m} (${typeof m}), expected ${c}`)};for(const[a,c]of Object.entries(e))o(a,c,!1);for(const[a,c]of Object.entries(s))o(a,c,!0);return n}const ut=Object.freeze(Object.defineProperty({__proto__:null,bitGet,bitLen:bitLen$1,bitMask:bitMask$1,bitSet,bytesToHex:bytesToHex$2,bytesToNumberBE:bytesToNumberBE$1,bytesToNumberLE:bytesToNumberLE$1,concatBytes:concatBytes$2,createHmacDrbg:createHmacDrbg$1,ensureBytes:ensureBytes$1,equalBytes:equalBytes$1,hexToBytes:hexToBytes$2,hexToNumber:hexToNumber$1,numberToBytesBE:numberToBytesBE$1,numberToBytesLE:numberToBytesLE$1,numberToHexUnpadded:numberToHexUnpadded$1,numberToVarBytesBE,utf8ToBytes:utf8ToBytes$2,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$8=BigInt(0),_1n$8=BigInt(1),_2n$4=BigInt(2),_3n$3=BigInt(3),_4n$2=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod$1(n,e){const s=n%e;return s>=_0n$8?s:e+s}function pow(n,e,s){if(s<=_0n$8||e<_0n$8)throw new Error("Expected power/modulo > 0");if(s===_1n$8)return _0n$8;let o=_1n$8;for(;e>_0n$8;)e&_1n$8&&(o=o*n%s),n=n*n%s,e>>=_1n$8;return o}function pow2$1(n,e,s){let o=n;for(;e-- >_0n$8;)o*=o,o%=s;return o}function invert$1(n,e){if(n===_0n$8||e<=_0n$8)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let s=mod$1(n,e),o=e,a=_0n$8,c=_1n$8;for(;s!==_0n$8;){const h=o/s,m=o%s,g=a-c*h;o=s,s=m,a=c,c=g}if(o!==_1n$8)throw new Error("invert: does not exist");return mod$1(a,e)}function tonelliShanks$1(n){const e=(n-_1n$8)/_2n$4;let s,o,a;for(s=n-_1n$8,o=0;s%_2n$4===_0n$8;s/=_2n$4,o++);for(a=_2n$4;a<n&&pow(a,e,n)!==n-_1n$8;a++);if(o===1){const u=(n+_1n$8)/_4n$2;return function(m,g){const _=m.pow(g,u);if(!m.eql(m.sqr(_),g))throw new Error("Cannot find square root");return _}}const c=(s+_1n$8)/_2n$4;return function(h,m){if(h.pow(m,e)===h.neg(h.ONE))throw new Error("Cannot find square root");let g=o,_=h.pow(h.mul(h.ONE,a),s),b=h.pow(m,c),T=h.pow(m,s);for(;!h.eql(T,h.ONE);){if(h.eql(T,h.ZERO))return h.ZERO;let A=1;for(let w=h.sqr(T);A<g&&!h.eql(w,h.ONE);A++)w=h.sqr(w);const R=h.pow(_,_1n$8<<BigInt(g-A-1));_=h.sqr(R),b=h.mul(b,R),T=h.mul(T,_),g=A}return b}}function FpSqrt$1(n){if(n%_4n$2===_3n$3){const e=(n+_1n$8)/_4n$2;return function(o,a){const c=o.pow(a,e);if(!o.eql(o.sqr(c),a))throw new Error("Cannot find square root");return c}}if(n%_8n$1===_5n$1){const e=(n-_5n$1)/_8n$1;return function(o,a){const c=o.mul(a,_2n$4),u=o.pow(c,e),h=o.mul(a,u),m=o.mul(o.mul(h,_2n$4),u),g=o.mul(h,o.sub(m,o.ONE));if(!o.eql(o.sqr(g),a))throw new Error("Cannot find square root");return g}}return tonelliShanks$1(n)}const FIELD_FIELDS$1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$1(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},s=FIELD_FIELDS$1.reduce((o,a)=>(o[a]="function",o),e);return validateObject(n,s)}function FpPow$1(n,e,s){if(s<_0n$8)throw new Error("Expected power > 0");if(s===_0n$8)return n.ONE;if(s===_1n$8)return e;let o=n.ONE,a=e;for(;s>_0n$8;)s&_1n$8&&(o=n.mul(o,a)),a=n.sqr(a),s>>=_1n$8;return o}function FpInvertBatch$1(n,e){const s=new Array(e.length),o=e.reduce((c,u,h)=>n.is0(u)?c:(s[h]=c,n.mul(c,u)),n.ONE),a=n.inv(o);return e.reduceRight((c,u,h)=>n.is0(u)?c:(s[h]=n.mul(c,s[h]),n.mul(c,u)),a),s}function nLength$1(n,e){const s=e!==void 0?e:n.toString(2).length,o=Math.ceil(s/8);return{nBitLength:s,nByteLength:o}}function Field$1(n,e,s=!1,o={}){if(n<=_0n$8)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:a,nByteLength:c}=nLength$1(n,e);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=FpSqrt$1(n),h=Object.freeze({ORDER:n,BITS:a,BYTES:c,MASK:bitMask$1(a),ZERO:_0n$8,ONE:_1n$8,create:m=>mod$1(m,n),isValid:m=>{if(typeof m!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof m}`);return _0n$8<=m&&m<n},is0:m=>m===_0n$8,isOdd:m=>(m&_1n$8)===_1n$8,neg:m=>mod$1(-m,n),eql:(m,g)=>m===g,sqr:m=>mod$1(m*m,n),add:(m,g)=>mod$1(m+g,n),sub:(m,g)=>mod$1(m-g,n),mul:(m,g)=>mod$1(m*g,n),pow:(m,g)=>FpPow$1(h,m,g),div:(m,g)=>mod$1(m*invert$1(g,n),n),sqrN:m=>m*m,addN:(m,g)=>m+g,subN:(m,g)=>m-g,mulN:(m,g)=>m*g,inv:m=>invert$1(m,n),sqrt:o.sqrt||(m=>u(h,m)),invertBatch:m=>FpInvertBatch$1(h,m),cmov:(m,g,_)=>_?g:m,toBytes:m=>s?numberToBytesLE$1(m,c):numberToBytesBE$1(m,c),fromBytes:m=>{if(m.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${m.length}`);return s?bytesToNumberLE$1(m):bytesToNumberBE$1(m)}});return Object.freeze(h)}function getFieldBytesLength$1(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function getMinHashLength$1(n){const e=getFieldBytesLength$1(n);return e+Math.ceil(e/2)}function mapHashToField$1(n,e,s=!1){const o=n.length,a=getFieldBytesLength$1(e),c=getMinHashLength$1(e);if(o<16||o<c||o>1024)throw new Error(`expected ${c}-1024 bytes of input, got ${o}`);const u=s?bytesToNumberBE$1(n):bytesToNumberLE$1(n),h=mod$1(u,e-_1n$8)+_1n$8;return s?numberToBytesLE$1(h,a):numberToBytesBE$1(h,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$7=BigInt(0),_1n$7=BigInt(1);function wNAF$1(n,e){const s=(a,c)=>{const u=c.negate();return a?u:c},o=a=>{const c=Math.ceil(e/a)+1,u=2**(a-1);return{windows:c,windowSize:u}};return{constTimeNegate:s,unsafeLadder(a,c){let u=n.ZERO,h=a;for(;c>_0n$7;)c&_1n$7&&(u=u.add(h)),h=h.double(),c>>=_1n$7;return u},precomputeWindow(a,c){const{windows:u,windowSize:h}=o(c),m=[];let g=a,_=g;for(let b=0;b<u;b++){_=g,m.push(_);for(let T=1;T<h;T++)_=_.add(g),m.push(_);g=_.double()}return m},wNAF(a,c,u){const{windows:h,windowSize:m}=o(a);let g=n.ZERO,_=n.BASE;const b=BigInt(2**a-1),T=2**a,A=BigInt(a);for(let R=0;R<h;R++){const w=R*m;let D=Number(u&b);u>>=A,D>m&&(D-=T,u+=_1n$7);const fn=w,yn=w+Math.abs(D)-1,pn=R%2!==0,wn=D<0;D===0?_=_.add(s(pn,c[fn])):g=g.add(s(wn,c[yn]))}return{p:g,f:_}},wNAFCached(a,c,u,h){const m=a._WINDOW_SIZE||1;let g=c.get(a);return g||(g=this.precomputeWindow(a,m),m!==1&&c.set(a,h(g))),this.wNAF(m,g,u)}}}function validateBasic(n){return validateField$1(n.Fp),validateObject(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength$1(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(n){const e=validateBasic(n);validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:s,Fp:o,a}=e;if(s){if(!o.eql(a,o.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof s!="object"||typeof s.beta!="bigint"||typeof s.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER$1={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=DER$1;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const s=n[1],o=n.subarray(2,s+2);if(!s||o.length!==s)throw new e("Invalid signature integer: wrong length");if(o[0]&128)throw new e("Invalid signature integer: negative");if(o[0]===0&&!(o[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:b2n(o),l:n.subarray(s+2)}},toSig(n){const{Err:e}=DER$1,s=typeof n=="string"?h2b(n):n;if(!(s instanceof Uint8Array))throw new Error("ui8a expected");let o=s.length;if(o<2||s[0]!=48)throw new e("Invalid signature tag");if(s[1]!==o-2)throw new e("Invalid signature: incorrect length");const{d:a,l:c}=DER$1._parseInt(s.subarray(2)),{d:u,l:h}=DER$1._parseInt(c);if(h.length)throw new e("Invalid signature: left bytes after parsing");return{r:a,s:u}},hexFromSig(n){const e=g=>Number.parseInt(g[0],16)&8?"00"+g:g,s=g=>{const _=g.toString(16);return _.length&1?`0${_}`:_},o=e(s(n.s)),a=e(s(n.r)),c=o.length/2,u=a.length/2,h=s(c),m=s(u);return`30${s(u+c+4)}02${m}${a}02${h}${o}`}},_0n$6=BigInt(0),_1n$6=BigInt(1);BigInt(2);const _3n$2=BigInt(3);BigInt(4);function weierstrassPoints(n){const e=validatePointOpts(n),{Fp:s}=e,o=e.toBytes||((R,w,D)=>{const fn=w.toAffine();return concatBytes$2(Uint8Array.from([4]),s.toBytes(fn.x),s.toBytes(fn.y))}),a=e.fromBytes||(R=>{const w=R.subarray(1),D=s.fromBytes(w.subarray(0,s.BYTES)),fn=s.fromBytes(w.subarray(s.BYTES,2*s.BYTES));return{x:D,y:fn}});function c(R){const{a:w,b:D}=e,fn=s.sqr(R),yn=s.mul(fn,R);return s.add(s.add(yn,s.mul(R,w)),D)}if(!s.eql(s.sqr(e.Gy),c(e.Gx)))throw new Error("bad generator point: equation left != right");function u(R){return typeof R=="bigint"&&_0n$6<R&&R<e.n}function h(R){if(!u(R))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function m(R){const{allowedPrivateKeyLengths:w,nByteLength:D,wrapPrivateKey:fn,n:yn}=e;if(w&&typeof R!="bigint"){if(R instanceof Uint8Array&&(R=bytesToHex$2(R)),typeof R!="string"||!w.includes(R.length))throw new Error("Invalid key");R=R.padStart(D*2,"0")}let pn;try{pn=typeof R=="bigint"?R:bytesToNumberBE$1(ensureBytes$1("private key",R,D))}catch{throw new Error(`private key must be ${D} bytes, hex or bigint, not ${typeof R}`)}return fn&&(pn=mod$1(pn,yn)),h(pn),pn}const g=new Map;function _(R){if(!(R instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(w,D,fn){if(this.px=w,this.py=D,this.pz=fn,w==null||!s.isValid(w))throw new Error("x required");if(D==null||!s.isValid(D))throw new Error("y required");if(fn==null||!s.isValid(fn))throw new Error("z required")}static fromAffine(w){const{x:D,y:fn}=w||{};if(!w||!s.isValid(D)||!s.isValid(fn))throw new Error("invalid affine point");if(w instanceof b)throw new Error("projective point not allowed");const yn=pn=>s.eql(pn,s.ZERO);return yn(D)&&yn(fn)?b.ZERO:new b(D,fn,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const D=s.invertBatch(w.map(fn=>fn.pz));return w.map((fn,yn)=>fn.toAffine(D[yn])).map(b.fromAffine)}static fromHex(w){const D=b.fromAffine(a(ensureBytes$1("pointHex",w)));return D.assertValidity(),D}static fromPrivateKey(w){return b.BASE.multiply(m(w))}_setWindowSize(w){this._WINDOW_SIZE=w,g.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!s.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:w,y:D}=this.toAffine();if(!s.isValid(w)||!s.isValid(D))throw new Error("bad point: x or y not FE");const fn=s.sqr(D),yn=c(w);if(!s.eql(fn,yn))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(s.isOdd)return!s.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){_(w);const{px:D,py:fn,pz:yn}=this,{px:pn,py:wn,pz:V}=w,bn=s.eql(s.mul(D,V),s.mul(pn,yn)),wt=s.eql(s.mul(fn,V),s.mul(wn,yn));return bn&&wt}negate(){return new b(this.px,s.neg(this.py),this.pz)}double(){const{a:w,b:D}=e,fn=s.mul(D,_3n$2),{px:yn,py:pn,pz:wn}=this;let V=s.ZERO,bn=s.ZERO,wt=s.ZERO,jt=s.mul(yn,yn),ln=s.mul(pn,pn),vn=s.mul(wn,wn),dn=s.mul(yn,pn);return dn=s.add(dn,dn),wt=s.mul(yn,wn),wt=s.add(wt,wt),V=s.mul(w,wt),bn=s.mul(fn,vn),bn=s.add(V,bn),V=s.sub(ln,bn),bn=s.add(ln,bn),bn=s.mul(V,bn),V=s.mul(dn,V),wt=s.mul(fn,wt),vn=s.mul(w,vn),dn=s.sub(jt,vn),dn=s.mul(w,dn),dn=s.add(dn,wt),wt=s.add(jt,jt),jt=s.add(wt,jt),jt=s.add(jt,vn),jt=s.mul(jt,dn),bn=s.add(bn,jt),vn=s.mul(pn,wn),vn=s.add(vn,vn),jt=s.mul(vn,dn),V=s.sub(V,jt),wt=s.mul(vn,ln),wt=s.add(wt,wt),wt=s.add(wt,wt),new b(V,bn,wt)}add(w){_(w);const{px:D,py:fn,pz:yn}=this,{px:pn,py:wn,pz:V}=w;let bn=s.ZERO,wt=s.ZERO,jt=s.ZERO;const ln=e.a,vn=s.mul(e.b,_3n$2);let dn=s.mul(D,pn),mn=s.mul(fn,wn),zt=s.mul(yn,V),$n=s.add(D,fn),Sn=s.add(pn,wn);$n=s.mul($n,Sn),Sn=s.add(dn,mn),$n=s.sub($n,Sn),Sn=s.add(D,yn);let En=s.add(pn,V);return Sn=s.mul(Sn,En),En=s.add(dn,zt),Sn=s.sub(Sn,En),En=s.add(fn,yn),bn=s.add(wn,V),En=s.mul(En,bn),bn=s.add(mn,zt),En=s.sub(En,bn),jt=s.mul(ln,Sn),bn=s.mul(vn,zt),jt=s.add(bn,jt),bn=s.sub(mn,jt),jt=s.add(mn,jt),wt=s.mul(bn,jt),mn=s.add(dn,dn),mn=s.add(mn,dn),zt=s.mul(ln,zt),Sn=s.mul(vn,Sn),mn=s.add(mn,zt),zt=s.sub(dn,zt),zt=s.mul(ln,zt),Sn=s.add(Sn,zt),dn=s.mul(mn,Sn),wt=s.add(wt,dn),dn=s.mul(En,Sn),bn=s.mul($n,bn),bn=s.sub(bn,dn),dn=s.mul($n,mn),jt=s.mul(En,jt),jt=s.add(jt,dn),new b(bn,wt,jt)}subtract(w){return this.add(w.negate())}is0(){return this.equals(b.ZERO)}wNAF(w){return A.wNAFCached(this,g,w,D=>{const fn=s.invertBatch(D.map(yn=>yn.pz));return D.map((yn,pn)=>yn.toAffine(fn[pn])).map(b.fromAffine)})}multiplyUnsafe(w){const D=b.ZERO;if(w===_0n$6)return D;if(h(w),w===_1n$6)return this;const{endo:fn}=e;if(!fn)return A.unsafeLadder(this,w);let{k1neg:yn,k1:pn,k2neg:wn,k2:V}=fn.splitScalar(w),bn=D,wt=D,jt=this;for(;pn>_0n$6||V>_0n$6;)pn&_1n$6&&(bn=bn.add(jt)),V&_1n$6&&(wt=wt.add(jt)),jt=jt.double(),pn>>=_1n$6,V>>=_1n$6;return yn&&(bn=bn.negate()),wn&&(wt=wt.negate()),wt=new b(s.mul(wt.px,fn.beta),wt.py,wt.pz),bn.add(wt)}multiply(w){h(w);let D=w,fn,yn;const{endo:pn}=e;if(pn){const{k1neg:wn,k1:V,k2neg:bn,k2:wt}=pn.splitScalar(D);let{p:jt,f:ln}=this.wNAF(V),{p:vn,f:dn}=this.wNAF(wt);jt=A.constTimeNegate(wn,jt),vn=A.constTimeNegate(bn,vn),vn=new b(s.mul(vn.px,pn.beta),vn.py,vn.pz),fn=jt.add(vn),yn=ln.add(dn)}else{const{p:wn,f:V}=this.wNAF(D);fn=wn,yn=V}return b.normalizeZ([fn,yn])[0]}multiplyAndAddUnsafe(w,D,fn){const yn=b.BASE,pn=(V,bn)=>bn===_0n$6||bn===_1n$6||!V.equals(yn)?V.multiplyUnsafe(bn):V.multiply(bn),wn=pn(this,D).add(pn(w,fn));return wn.is0()?void 0:wn}toAffine(w){const{px:D,py:fn,pz:yn}=this,pn=this.is0();w==null&&(w=pn?s.ONE:s.inv(yn));const wn=s.mul(D,w),V=s.mul(fn,w),bn=s.mul(yn,w);if(pn)return{x:s.ZERO,y:s.ZERO};if(!s.eql(bn,s.ONE))throw new Error("invZ was invalid");return{x:wn,y:V}}isTorsionFree(){const{h:w,isTorsionFree:D}=e;if(w===_1n$6)return!0;if(D)return D(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:D}=e;return w===_1n$6?this:D?D(b,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return this.assertValidity(),o(b,this,w)}toHex(w=!0){return bytesToHex$2(this.toRawBytes(w))}}b.BASE=new b(e.Gx,e.Gy,s.ONE),b.ZERO=new b(s.ZERO,s.ONE,s.ZERO);const T=e.nBitLength,A=wNAF$1(b,e.endo?Math.ceil(T/2):T);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:m,weierstrassEquation:c,isWithinCurveOrder:u}}function validateOpts(n){const e=validateBasic(n);return validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function weierstrass$1(n){const e=validateOpts(n),{Fp:s,n:o}=e,a=s.BYTES+1,c=2*s.BYTES+1;function u(Sn){return _0n$6<Sn&&Sn<s.ORDER}function h(Sn){return mod$1(Sn,o)}function m(Sn){return invert$1(Sn,o)}const{ProjectivePoint:g,normPrivateKeyToScalar:_,weierstrassEquation:b,isWithinCurveOrder:T}=weierstrassPoints({...e,toBytes(Sn,En,Cn){const On=En.toAffine(),Fn=s.toBytes(On.x),An=concatBytes$2;return Cn?An(Uint8Array.from([En.hasEvenY()?2:3]),Fn):An(Uint8Array.from([4]),Fn,s.toBytes(On.y))},fromBytes(Sn){const En=Sn.length,Cn=Sn[0],On=Sn.subarray(1);if(En===a&&(Cn===2||Cn===3)){const Fn=bytesToNumberBE$1(On);if(!u(Fn))throw new Error("Point is not on curve");const An=b(Fn);let Vn=s.sqrt(An);const Bn=(Vn&_1n$6)===_1n$6;return(Cn&1)===1!==Bn&&(Vn=s.neg(Vn)),{x:Fn,y:Vn}}else if(En===c&&Cn===4){const Fn=s.fromBytes(On.subarray(0,s.BYTES)),An=s.fromBytes(On.subarray(s.BYTES,2*s.BYTES));return{x:Fn,y:An}}else throw new Error(`Point of length ${En} was invalid. Expected ${a} compressed bytes or ${c} uncompressed bytes`)}}),A=Sn=>bytesToHex$2(numberToBytesBE$1(Sn,e.nByteLength));function R(Sn){const En=o>>_1n$6;return Sn>En}function w(Sn){return R(Sn)?h(-Sn):Sn}const D=(Sn,En,Cn)=>bytesToNumberBE$1(Sn.slice(En,Cn));class fn{constructor(En,Cn,On){this.r=En,this.s=Cn,this.recovery=On,this.assertValidity()}static fromCompact(En){const Cn=e.nByteLength;return En=ensureBytes$1("compactSignature",En,Cn*2),new fn(D(En,0,Cn),D(En,Cn,2*Cn))}static fromDER(En){const{r:Cn,s:On}=DER$1.toSig(ensureBytes$1("DER",En));return new fn(Cn,On)}assertValidity(){if(!T(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!T(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(En){return new fn(this.r,this.s,En)}recoverPublicKey(En){const{r:Cn,s:On,recovery:Fn}=this,An=wt(ensureBytes$1("msgHash",En));if(Fn==null||![0,1,2,3].includes(Fn))throw new Error("recovery id invalid");const Vn=Fn===2||Fn===3?Cn+e.n:Cn;if(Vn>=s.ORDER)throw new Error("recovery id 2 or 3 invalid");const Bn=(Fn&1)===0?"02":"03",Ln=g.fromHex(Bn+A(Vn)),Xn=m(Vn),er=h(-An*Xn),rr=h(On*Xn),cr=g.BASE.multiplyAndAddUnsafe(Ln,er,rr);if(!cr)throw new Error("point at infinify");return cr.assertValidity(),cr}hasHighS(){return R(this.s)}normalizeS(){return this.hasHighS()?new fn(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes$2(this.toDERHex())}toDERHex(){return DER$1.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes$2(this.toCompactHex())}toCompactHex(){return A(this.r)+A(this.s)}}const yn={isValidPrivateKey(Sn){try{return _(Sn),!0}catch{return!1}},normPrivateKeyToScalar:_,randomPrivateKey:()=>{const Sn=getMinHashLength$1(e.n);return mapHashToField$1(e.randomBytes(Sn),e.n)},precompute(Sn=8,En=g.BASE){return En._setWindowSize(Sn),En.multiply(BigInt(3)),En}};function pn(Sn,En=!0){return g.fromPrivateKey(Sn).toRawBytes(En)}function wn(Sn){const En=Sn instanceof Uint8Array,Cn=typeof Sn=="string",On=(En||Cn)&&Sn.length;return En?On===a||On===c:Cn?On===2*a||On===2*c:Sn instanceof g}function V(Sn,En,Cn=!0){if(wn(Sn))throw new Error("first arg must be private key");if(!wn(En))throw new Error("second arg must be public key");return g.fromHex(En).multiply(_(Sn)).toRawBytes(Cn)}const bn=e.bits2int||function(Sn){const En=bytesToNumberBE$1(Sn),Cn=Sn.length*8-e.nBitLength;return Cn>0?En>>BigInt(Cn):En},wt=e.bits2int_modN||function(Sn){return h(bn(Sn))},jt=bitMask$1(e.nBitLength);function ln(Sn){if(typeof Sn!="bigint")throw new Error("bigint expected");if(!(_0n$6<=Sn&&Sn<jt))throw new Error(`bigint expected < 2^${e.nBitLength}`);return numberToBytesBE$1(Sn,e.nByteLength)}function vn(Sn,En,Cn=dn){if(["recovered","canonical"].some(pr=>pr in Cn))throw new Error("sign() legacy options not supported");const{hash:On,randomBytes:Fn}=e;let{lowS:An,prehash:Vn,extraEntropy:Bn}=Cn;An==null&&(An=!0),Sn=ensureBytes$1("msgHash",Sn),Vn&&(Sn=ensureBytes$1("prehashed msgHash",On(Sn)));const Ln=wt(Sn),Xn=_(En),er=[ln(Xn),ln(Ln)];if(Bn!=null){const pr=Bn===!0?Fn(s.BYTES):Bn;er.push(ensureBytes$1("extraEntropy",pr))}const rr=concatBytes$2(...er),cr=Ln;function ar(pr){const _r=bn(pr);if(!T(_r))return;const jr=m(_r),Sr=g.BASE.multiply(_r).toAffine(),Tr=h(Sr.x);if(Tr===_0n$6)return;const sr=h(jr*h(cr+Tr*Xn));if(sr===_0n$6)return;let Ar=(Sr.x===Tr?0:2)|Number(Sr.y&_1n$6),qr=sr;return An&&R(sr)&&(qr=w(sr),Ar^=1),new fn(Tr,qr,Ar)}return{seed:rr,k2sig:ar}}const dn={lowS:e.lowS,prehash:!1},mn={lowS:e.lowS,prehash:!1};function zt(Sn,En,Cn=dn){const{seed:On,k2sig:Fn}=vn(Sn,En,Cn),An=e;return createHmacDrbg$1(An.hash.outputLen,An.nByteLength,An.hmac)(On,Fn)}g.BASE._setWindowSize(8);function $n(Sn,En,Cn,On=mn){const Fn=Sn;if(En=ensureBytes$1("msgHash",En),Cn=ensureBytes$1("publicKey",Cn),"strict"in On)throw new Error("options.strict was renamed to lowS");const{lowS:An,prehash:Vn}=On;let Bn,Ln;try{if(typeof Fn=="string"||Fn instanceof Uint8Array)try{Bn=fn.fromDER(Fn)}catch(Sr){if(!(Sr instanceof DER$1.Err))throw Sr;Bn=fn.fromCompact(Fn)}else if(typeof Fn=="object"&&typeof Fn.r=="bigint"&&typeof Fn.s=="bigint"){const{r:Sr,s:Tr}=Fn;Bn=new fn(Sr,Tr)}else throw new Error("PARSE");Ln=g.fromHex(Cn)}catch(Sr){if(Sr.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(An&&Bn.hasHighS())return!1;Vn&&(En=e.hash(En));const{r:Xn,s:er}=Bn,rr=wt(En),cr=m(er),ar=h(rr*cr),pr=h(Xn*cr),_r=g.BASE.multiplyAndAddUnsafe(Ln,ar,pr)?.toAffine();return _r?h(_r.x)===Xn:!1}return{CURVE:e,getPublicKey:pn,getSharedSecret:V,sign:zt,verify:$n,ProjectivePoint:g,Signature:fn,utils:yn}}let HMAC$2=class extends Hash$2{constructor(e,s){super(),this.finished=!1,this.destroyed=!1,hash$1(e);const o=toBytes$2(s);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,c=new Uint8Array(a);c.set(o.length>a?e.create().update(o).digest():o);for(let u=0;u<c.length;u++)c[u]^=54;this.iHash.update(c),this.oHash=e.create();for(let u=0;u<c.length;u++)c[u]^=106;this.oHash.update(c),c.fill(0)}update(e){return exists$1(this),this.iHash.update(e),this}digestInto(e){exists$1(this),bytes$2(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:o,finished:a,destroyed:c,blockLen:u,outputLen:h}=this;return e=e,e.finished=a,e.destroyed=c,e.blockLen=u,e.outputLen=h,e.oHash=s._cloneInto(e.oHash),e.iHash=o._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$2=(n,e,s)=>new HMAC$2(n,e).update(s).digest();hmac$2.create=(n,e)=>new HMAC$2(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(n){return{hash:n,hmac:(e,...s)=>hmac$2(n,e,concatBytes$3(...s)),randomBytes:randomBytes$2}}function createCurve$1(n,e){const s=o=>weierstrass$1({...n,...getHash(o)});return Object.freeze({...s(e),create:s})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$5=BigInt(1),_2n$3=BigInt(2),divNearest$1=(n,e)=>(n+e/_2n$3)/e;function sqrtMod$1(n){const e=secp256k1P,s=BigInt(3),o=BigInt(6),a=BigInt(11),c=BigInt(22),u=BigInt(23),h=BigInt(44),m=BigInt(88),g=n*n*n%e,_=g*g*n%e,b=pow2$1(_,s,e)*_%e,T=pow2$1(b,s,e)*_%e,A=pow2$1(T,_2n$3,e)*g%e,R=pow2$1(A,a,e)*A%e,w=pow2$1(R,c,e)*R%e,D=pow2$1(w,h,e)*w%e,fn=pow2$1(D,m,e)*D%e,yn=pow2$1(fn,h,e)*w%e,pn=pow2$1(yn,s,e)*_%e,wn=pow2$1(pn,u,e)*R%e,V=pow2$1(wn,o,e)*g%e,bn=pow2$1(V,_2n$3,e);if(!Fp.eql(Fp.sqr(bn),n))throw new Error("Cannot find square root");return bn}const Fp=Field$1(secp256k1P,void 0,void 0,{sqrt:sqrtMod$1}),secp256k1$1=createCurve$1({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=secp256k1N,s=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-_1n$5*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=s,u=BigInt("0x100000000000000000000000000000000"),h=divNearest$1(c*n,e),m=divNearest$1(-o*n,e);let g=mod$1(n-h*s-m*a,e),_=mod$1(-h*o-m*c,e);const b=g>u,T=_>u;if(b&&(g=e-g),T&&(_=e-_),g>u||_>u)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:b,k1:g,k2neg:T,k2:_}}}},sha256$3),_0n$5=BigInt(0),fe=n=>typeof n=="bigint"&&_0n$5<n&&n<secp256k1P,ge=n=>typeof n=="bigint"&&_0n$5<n&&n<secp256k1N,TAGGED_HASH_PREFIXES$1={};function taggedHash$1(n,...e){let s=TAGGED_HASH_PREFIXES$1[n];if(s===void 0){const o=sha256$3(Uint8Array.from(n,a=>a.charCodeAt(0)));s=concatBytes$2(o,o),TAGGED_HASH_PREFIXES$1[n]=s}return sha256$3(concatBytes$2(s,...e))}const pointToBytes$1=n=>n.toRawBytes(!0).slice(1),numTo32b=n=>numberToBytesBE$1(n,32),modP=n=>mod$1(n,secp256k1P),modN=n=>mod$1(n,secp256k1N),Point=secp256k1$1.ProjectivePoint,GmulAdd=(n,e,s)=>Point.BASE.multiplyAndAddUnsafe(n,e,s);function schnorrGetExtPubKey$1(n){let e=secp256k1$1.utils.normPrivateKeyToScalar(n),s=Point.fromPrivateKey(e);return{scalar:s.hasEvenY()?e:modN(-e),bytes:pointToBytes$1(s)}}function lift_x$1(n){if(!fe(n))throw new Error("bad x: need 0 < x < p");const e=modP(n*n),s=modP(e*n+BigInt(7));let o=sqrtMod$1(s);o%_2n$3!==_0n$5&&(o=modP(-o));const a=new Point(n,o,_1n$5);return a.assertValidity(),a}function challenge$1(...n){return modN(bytesToNumberBE$1(taggedHash$1("BIP0340/challenge",...n)))}function schnorrGetPublicKey$1(n){return schnorrGetExtPubKey$1(n).bytes}function schnorrSign$1(n,e,s=randomBytes$2(32)){const o=ensureBytes$1("message",n),{bytes:a,scalar:c}=schnorrGetExtPubKey$1(e),u=ensureBytes$1("auxRand",s,32),h=numTo32b(c^bytesToNumberBE$1(taggedHash$1("BIP0340/aux",u))),m=taggedHash$1("BIP0340/nonce",h,a,o),g=modN(bytesToNumberBE$1(m));if(g===_0n$5)throw new Error("sign failed: k is zero");const{bytes:_,scalar:b}=schnorrGetExtPubKey$1(g),T=challenge$1(_,a,o),A=new Uint8Array(64);if(A.set(_,0),A.set(numTo32b(modN(b+T*c)),32),!schnorrVerify$1(A,o,a))throw new Error("sign: Invalid signature produced");return A}function schnorrVerify$1(n,e,s){const o=ensureBytes$1("signature",n,64),a=ensureBytes$1("message",e),c=ensureBytes$1("publicKey",s,32);try{const u=lift_x$1(bytesToNumberBE$1(c)),h=bytesToNumberBE$1(o.subarray(0,32));if(!fe(h))return!1;const m=bytesToNumberBE$1(o.subarray(32,64));if(!ge(m))return!1;const g=challenge$1(numTo32b(h),pointToBytes$1(u),a),_=GmulAdd(u,m,modN(-g));return!(!_||!_.hasEvenY()||_.toAffine().x!==h)}catch{return!1}}const schnorr$1={getPublicKey:schnorrGetPublicKey$1,sign:schnorrSign$1,verify:schnorrVerify$1,utils:{randomPrivateKey:secp256k1$1.utils.randomPrivateKey,lift_x:lift_x$1,pointToBytes:pointToBytes$1,numberToBytesBE:numberToBytesBE$1,bytesToNumberBE:bytesToNumberBE$1,taggedHash:taggedHash$1,mod:mod$1}},crypto$2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a=n=>n instanceof Uint8Array,createView$1=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),rotr$1=(n,e)=>n<<32-e|n>>>e,isLE$1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$1)throw new Error("Non little-endian hardware is not supported");const hexes$1=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$1(n){if(!u8a(n))throw new Error("Uint8Array expected");let e="";for(let s=0;s<n.length;s++)e+=hexes$1[n[s]];return e}function hexToBytes$1(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(e/2);for(let o=0;o<s.length;o++){const a=o*2,c=n.slice(a,a+2),u=Number.parseInt(c,16);if(Number.isNaN(u)||u<0)throw new Error("Invalid byte sequence");s[o]=u}return s}function utf8ToBytes$1(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function toBytes$1(n){if(typeof n=="string"&&(n=utf8ToBytes$1(n)),!u8a(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function concatBytes$1(...n){const e=new Uint8Array(n.reduce((o,a)=>o+a.length,0));let s=0;return n.forEach(o=>{if(!u8a(o))throw new Error("Uint8Array expected");e.set(o,s),s+=o.length}),e}let Hash$1=class{clone(){return this._cloneInto()}};function wrapConstructor(n){const e=o=>n().update(toBytes$1(o)).digest(),s=n();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>n(),e}function randomBytes$1(n=32){if(crypto$2&&typeof crypto$2.getRandomValues=="function")return crypto$2.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function number$1(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function bool$1(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}function bytes$1(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function hash(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$1(n.outputLen),number$1(n.blockLen)}function exists(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function output(n,e){bytes$1(n);const s=e.outputLen;if(n.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const assert={number:number$1,bool:bool$1,bytes:bytes$1,hash,exists,output};function setBigUint64$1(n,e,s,o){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,s,o);const a=BigInt(32),c=BigInt(4294967295),u=Number(s>>a&c),h=Number(s&c),m=o?4:0,g=o?0:4;n.setUint32(e+m,u,o),n.setUint32(e+g,h,o)}class SHA2 extends Hash$1{constructor(e,s,o,a){super(),this.blockLen=e,this.outputLen=s,this.padOffset=o,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView$1(this.buffer)}update(e){assert.exists(this);const{view:s,buffer:o,blockLen:a}=this;e=toBytes$1(e);const c=e.length;for(let u=0;u<c;){const h=Math.min(a-this.pos,c-u);if(h===a){const m=createView$1(e);for(;a<=c-u;u+=a)this.process(m,u);continue}o.set(e.subarray(u,u+h),this.pos),this.pos+=h,u+=h,this.pos===a&&(this.process(s,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){assert.exists(this),assert.output(e,this),this.finished=!0;const{buffer:s,view:o,blockLen:a,isLE:c}=this;let{pos:u}=this;s[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>a-u&&(this.process(o,0),u=0);for(let b=u;b<a;b++)s[b]=0;setBigUint64$1(o,a-8,BigInt(this.length*8),c),this.process(o,0);const h=createView$1(e),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=m/4,_=this.get();if(g>_.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<g;b++)h.setUint32(4*b,_[b],c)}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const o=e.slice(0,s);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:s,buffer:o,length:a,finished:c,destroyed:u,pos:h}=this;return e.length=a,e.pos=h,e.finished=c,e.destroyed=u,a%s&&e.buffer.set(o),e}}const Chi$1=(n,e,s)=>n&e^~n&s,Maj$1=(n,e,s)=>n&e^n&s^e&s,SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);let SHA256$1=class extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:e,B:s,C:o,D:a,E:c,F:u,G:h,H:m}=this;return[e,s,o,a,c,u,h,m]}set(e,s,o,a,c,u,h,m){this.A=e|0,this.B=s|0,this.C=o|0,this.D=a|0,this.E=c|0,this.F=u|0,this.G=h|0,this.H=m|0}process(e,s){for(let b=0;b<16;b++,s+=4)SHA256_W$1[b]=e.getUint32(s,!1);for(let b=16;b<64;b++){const T=SHA256_W$1[b-15],A=SHA256_W$1[b-2],R=rotr$1(T,7)^rotr$1(T,18)^T>>>3,w=rotr$1(A,17)^rotr$1(A,19)^A>>>10;SHA256_W$1[b]=w+SHA256_W$1[b-7]+R+SHA256_W$1[b-16]|0}let{A:o,B:a,C:c,D:u,E:h,F:m,G:g,H:_}=this;for(let b=0;b<64;b++){const T=rotr$1(h,6)^rotr$1(h,11)^rotr$1(h,25),A=_+T+Chi$1(h,m,g)+SHA256_K$1[b]+SHA256_W$1[b]|0,w=(rotr$1(o,2)^rotr$1(o,13)^rotr$1(o,22))+Maj$1(o,a,c)|0;_=g,g=m,m=h,h=u+A|0,u=c,c=a,a=o,o=A+w|0}o=o+this.A|0,a=a+this.B|0,c=c+this.C|0,u=u+this.D|0,h=h+this.E|0,m=m+this.F|0,g=g+this.G|0,_=_+this.H|0,this.set(o,a,c,u,h,m,g,_)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};class SHA224 extends SHA256$1{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const sha256$2=wrapConstructor(()=>new SHA256$1);wrapConstructor(()=>new SHA224);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function assertNumber(n){if(!Number.isSafeInteger(n))throw new Error(`Wrong integer: ${n}`)}function chain(...n){const e=(a,c)=>u=>a(c(u)),s=Array.from(n).reverse().reduce((a,c)=>a?e(a,c.encode):c.encode,void 0),o=n.reduce((a,c)=>a?e(a,c.decode):c.decode,void 0);return{encode:s,decode:o}}function alphabet(n){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(s=>{if(assertNumber(s),s<0||s>=n.length)throw new Error(`Digit index outside alphabet: ${s} (alphabet: ${n.length})`);return n[s]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(s=>{if(typeof s!="string")throw new Error(`alphabet.decode: not string element=${s}`);const o=n.indexOf(s);if(o===-1)throw new Error(`Unknown letter: "${s}". Allowed: ${n}`);return o})}}}function join(n=""){if(typeof n!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let s of e)if(typeof s!="string")throw new Error(`join.encode: non-string input=${s}`);return e.join(n)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(n)}}}function padding(n,e="="){if(assertNumber(n),typeof e!="string")throw new Error("padding chr should be string");return{encode(s){if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of s)if(typeof o!="string")throw new Error(`padding.encode: non-string input=${o}`);for(;s.length*n%8;)s.push(e);return s},decode(s){if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("padding.encode input should be array of strings");for(let a of s)if(typeof a!="string")throw new Error(`padding.decode: non-string input=${a}`);let o=s.length;if(o*n%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;o>0&&s[o-1]===e;o--)if(!((o-1)*n%8))throw new Error("Invalid padding: string has too much padding");return s.slice(0,o)}}}function normalize$1(n){if(typeof n!="function")throw new Error("normalize fn should be function");return{encode:e=>e,decode:e=>n(e)}}function convertRadix(n,e,s){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(s<2)throw new Error(`convertRadix: wrong to=${s}, base cannot be less than 2`);if(!Array.isArray(n))throw new Error("convertRadix: data should be array");if(!n.length)return[];let o=0;const a=[],c=Array.from(n);for(c.forEach(u=>{if(assertNumber(u),u<0||u>=e)throw new Error(`Wrong integer: ${u}`)});;){let u=0,h=!0;for(let m=o;m<c.length;m++){const g=c[m],_=e*u+g;if(!Number.isSafeInteger(_)||e*u/e!==u||_-g!==e*u)throw new Error("convertRadix: carry overflow");if(u=_%s,c[m]=Math.floor(_/s),!Number.isSafeInteger(c[m])||c[m]*s+u!==_)throw new Error("convertRadix: carry overflow");if(h)c[m]?h=!1:o=m;else continue}if(a.push(u),h)break}for(let u=0;u<n.length-1&&n[u]===0;u++)a.push(0);return a.reverse()}const gcd=(n,e)=>e?gcd(e,n%e):n,radix2carry=(n,e)=>n+(e-gcd(n,e));function convertRadix2(n,e,s,o){if(!Array.isArray(n))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(s<=0||s>32)throw new Error(`convertRadix2: wrong to=${s}`);if(radix2carry(e,s)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${s} carryBits=${radix2carry(e,s)}`);let a=0,c=0;const u=2**s-1,h=[];for(const m of n){if(assertNumber(m),m>=2**e)throw new Error(`convertRadix2: invalid data word=${m} from=${e}`);if(a=a<<e|m,c+e>32)throw new Error(`convertRadix2: carry overflow pos=${c} from=${e}`);for(c+=e;c>=s;c-=s)h.push((a>>c-s&u)>>>0);a&=2**c-1}if(a=a<<s-c&u,!o&&c>=e)throw new Error("Excess padding");if(!o&&a)throw new Error(`Non-zero padding: ${a}`);return o&&c>0&&h.push(a>>>0),h}function radix(n){return assertNumber(n),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(e),2**8,n)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(e,n,2**8))}}}function radix2(n,e=!1){if(assertNumber(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,n)>32||radix2carry(n,8)>32)throw new Error("radix2: carry overflow");return{encode:s=>{if(!(s instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(s),8,n,!e)},decode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2(s,n,8,e))}}}function unsafeWrapper(n){if(typeof n!="function")throw new Error("unsafeWrapper fn should be function");return function(...e){try{return n.apply(null,e)}catch{}}}const base16=chain(radix2(4),alphabet("0123456789ABCDEF"),join("")),base32=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join(""));chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join(""));chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize$1(n=>n.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const base64=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join("")),base64url=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join("")),genBase58=n=>chain(radix(58),alphabet(n),join("")),base58=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const XMR_BLOCK_LEN=[0,2,3,5,6,7,9,10,11],base58xmr={encode(n){let e="";for(let s=0;s<n.length;s+=8){const o=n.subarray(s,s+8);e+=base58.encode(o).padStart(XMR_BLOCK_LEN[o.length],"1")}return e},decode(n){let e=[];for(let s=0;s<n.length;s+=11){const o=n.slice(s,s+11),a=XMR_BLOCK_LEN.indexOf(o.length),c=base58.decode(o);for(let u=0;u<c.length-a;u++)if(c[u]!==0)throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(c.slice(c.length-a)))}return Uint8Array.from(e)}},BECH_ALPHABET=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join("")),POLYMOD_GENERATORS=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(n){const e=n>>25;let s=(n&33554431)<<5;for(let o=0;o<POLYMOD_GENERATORS.length;o++)(e>>o&1)===1&&(s^=POLYMOD_GENERATORS[o]);return s}function bechChecksum(n,e,s=1){const o=n.length;let a=1;for(let c=0;c<o;c++){const u=n.charCodeAt(c);if(u<33||u>126)throw new Error(`Invalid prefix (${n})`);a=bech32Polymod(a)^u>>5}a=bech32Polymod(a);for(let c=0;c<o;c++)a=bech32Polymod(a)^n.charCodeAt(c)&31;for(let c of e)a=bech32Polymod(a)^c;for(let c=0;c<6;c++)a=bech32Polymod(a);return a^=s,BECH_ALPHABET.encode(convertRadix2([a%2**30],30,5,!1))}function genBech32(n){const e=n==="bech32"?1:734539939,s=radix2(5),o=s.decode,a=s.encode,c=unsafeWrapper(o);function u(_,b,T=90){if(typeof _!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof _}`);if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof b}`);const A=_.length+7+b.length;if(T!==!1&&A>T)throw new TypeError(`Length ${A} exceeds limit ${T}`);return _=_.toLowerCase(),`${_}1${BECH_ALPHABET.encode(b)}${bechChecksum(_,b,e)}`}function h(_,b=90){if(typeof _!="string")throw new Error(`bech32.decode input should be string, not ${typeof _}`);if(_.length<8||b!==!1&&_.length>b)throw new TypeError(`Wrong string length: ${_.length} (${_}). Expected (8..${b})`);const T=_.toLowerCase();if(_!==T&&_!==_.toUpperCase())throw new Error("String must be lowercase or uppercase");_=T;const A=_.lastIndexOf("1");if(A===0||A===-1)throw new Error('Letter "1" must be present between prefix and data only');const R=_.slice(0,A),w=_.slice(A+1);if(w.length<6)throw new Error("Data must be at least 6 characters long");const D=BECH_ALPHABET.decode(w).slice(0,-6),fn=bechChecksum(R,D,e);if(!w.endsWith(fn))throw new Error(`Invalid checksum in ${_}: expected "${fn}"`);return{prefix:R,words:D}}const m=unsafeWrapper(h);function g(_){const{prefix:b,words:T}=h(_,!1);return{prefix:b,words:T,bytes:o(T)}}return{encode:u,decode:h,decodeToBytes:g,decodeUnsafe:m,fromWords:o,fromWordsUnsafe:c,toWords:a}}const bech32=genBech32("bech32");genBech32("bech32m");const utf8={encode:n=>new TextDecoder().decode(n),decode:n=>new TextEncoder().encode(n)},hex=chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize$1(n=>{if(typeof n!="string"||n.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof n} with length ${n.length}`);return n.toLowerCase()})),CODERS={utf8,hex,base16,base32,base64,base64url,base58,base58xmr};`${Object.keys(CODERS).join(", ")}`;function number(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function bool(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function isBytes$1(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function bytes(n,...e){if(!isBytes$1(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${n.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const u32=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function checkOpts(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function equalBytes(n,e){if(n.length!==e.length)return!1;let s=0;for(let o=0;o<n.length;o++)s|=n[o]^e[o];return s===0}const wrapCipher=(n,e)=>(Object.assign(e,n),e),BLOCK_SIZE=16,POLY=283;function mul2(n){return n<<1^POLY&-(n>>7)}function mul(n,e){let s=0;for(;e>0;e>>=1)s^=n&-(e&1),n=mul2(n);return s}const sbox=(()=>{let n=new Uint8Array(256);for(let s=0,o=1;s<256;s++,o^=mul2(o))n[s]=o;const e=new Uint8Array(256);e[0]=99;for(let s=0;s<255;s++){let o=n[255-s];o|=o<<8,e[n[s]]=(o^o>>4^o>>5^o>>6^o>>7^99)&255}return e})(),invSbox=sbox.map((n,e)=>sbox.indexOf(e)),rotr32_8=n=>n<<24|n>>>8,rotl32_8=n=>n<<8|n>>>24;function genTtable(n,e){if(n.length!==256)throw new Error("Wrong sbox length");const s=new Uint32Array(256).map((g,_)=>e(n[_])),o=s.map(rotl32_8),a=o.map(rotl32_8),c=a.map(rotl32_8),u=new Uint32Array(256*256),h=new Uint32Array(256*256),m=new Uint16Array(256*256);for(let g=0;g<256;g++)for(let _=0;_<256;_++){const b=g*256+_;u[b]=s[g]^o[_],h[b]=a[g]^c[_],m[b]=n[g]<<8|n[_]}return{sbox:n,sbox2:m,T0:s,T1:o,T2:a,T3:c,T01:u,T23:h}}const tableEncoding=genTtable(sbox,n=>mul(n,3)<<24|n<<16|n<<8|mul(n,2)),tableDecoding=genTtable(invSbox,n=>mul(n,11)<<24|mul(n,13)<<16|mul(n,9)<<8|mul(n,14)),xPowers=(()=>{const n=new Uint8Array(16);for(let e=0,s=1;e<16;e++,s=mul2(s))n[e]=s;return n})();function expandKeyLE(n){bytes(n);const e=n.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:s}=tableEncoding,o=u32(n),a=o.length,c=h=>applySbox(s,h,h,h,h),u=new Uint32Array(e+28);u.set(o);for(let h=a;h<u.length;h++){let m=u[h-1];h%a===0?m=c(rotr32_8(m))^xPowers[h/a-1]:a>6&&h%a===4&&(m=c(m)),u[h]=u[h-a]^m}return u}function expandKeyDecLE(n){const e=expandKeyLE(n),s=e.slice(),o=e.length,{sbox2:a}=tableEncoding,{T0:c,T1:u,T2:h,T3:m}=tableDecoding;for(let g=0;g<o;g+=4)for(let _=0;_<4;_++)s[g+_]=e[o-g-4+_];e.fill(0);for(let g=4;g<o-4;g++){const _=s[g],b=applySbox(a,_,_,_,_);s[g]=c[b&255]^u[b>>>8&255]^h[b>>>16&255]^m[b>>>24]}return s}function apply0123(n,e,s,o,a,c){return n[s<<8&65280|o>>>8&255]^e[a>>>8&65280|c>>>24&255]}function applySbox(n,e,s,o,a){return n[e&255|s&65280]|n[o>>>16&255|a>>>16&65280]<<16}function encrypt$2(n,e,s,o,a){const{sbox2:c,T01:u,T23:h}=tableEncoding;let m=0;e^=n[m++],s^=n[m++],o^=n[m++],a^=n[m++];const g=n.length/4-2;for(let R=0;R<g;R++){const w=n[m++]^apply0123(u,h,e,s,o,a),D=n[m++]^apply0123(u,h,s,o,a,e),fn=n[m++]^apply0123(u,h,o,a,e,s),yn=n[m++]^apply0123(u,h,a,e,s,o);e=w,s=D,o=fn,a=yn}const _=n[m++]^applySbox(c,e,s,o,a),b=n[m++]^applySbox(c,s,o,a,e),T=n[m++]^applySbox(c,o,a,e,s),A=n[m++]^applySbox(c,a,e,s,o);return{s0:_,s1:b,s2:T,s3:A}}function decrypt$2(n,e,s,o,a){const{sbox2:c,T01:u,T23:h}=tableDecoding;let m=0;e^=n[m++],s^=n[m++],o^=n[m++],a^=n[m++];const g=n.length/4-2;for(let R=0;R<g;R++){const w=n[m++]^apply0123(u,h,e,a,o,s),D=n[m++]^apply0123(u,h,s,e,a,o),fn=n[m++]^apply0123(u,h,o,s,e,a),yn=n[m++]^apply0123(u,h,a,o,s,e);e=w,s=D,o=fn,a=yn}const _=n[m++]^applySbox(c,e,a,o,s),b=n[m++]^applySbox(c,s,e,a,o),T=n[m++]^applySbox(c,o,s,e,a),A=n[m++]^applySbox(c,a,o,s,e);return{s0:_,s1:b,s2:T,s3:A}}function getDst(n,e){if(!e)return new Uint8Array(n);if(bytes(e),e.length<n)throw new Error(`aes: wrong destination length, expected at least ${n}, got: ${e.length}`);return e}function validateBlockDecrypt(n){if(bytes(n),n.length%BLOCK_SIZE!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${BLOCK_SIZE}`)}function validateBlockEncrypt(n,e,s){let o=n.length;const a=o%BLOCK_SIZE;if(!e&&a!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const c=u32(n);if(e){let m=BLOCK_SIZE-a;m||(m=BLOCK_SIZE),o=o+m}const u=getDst(o,s),h=u32(u);return{b:c,o:h,out:u}}function validatePCKS(n,e){if(!e)return n;const s=n.length;if(!s)throw new Error("aes/pcks5: empty ciphertext not allowed");const o=n[s-1];if(o<=0||o>16)throw new Error(`aes/pcks5: wrong padding byte: ${o}`);const a=n.subarray(0,-o);for(let c=0;c<o;c++)if(n[s-c-1]!==o)throw new Error("aes/pcks5: wrong padding");return a}function padPCKS(n){const e=new Uint8Array(16),s=u32(e);e.set(n);const o=BLOCK_SIZE-n.length;for(let a=BLOCK_SIZE-o;a<BLOCK_SIZE;a++)e[a]=o;return s}const cbc=wrapCipher({blockSize:16,nonceLength:16},function n(e,s,o={}){bytes(e),bytes(s,16);const a=!o.disablePadding;return{encrypt:(c,u)=>{const h=expandKeyLE(e),{b:m,o:g,out:_}=validateBlockEncrypt(c,a,u),b=u32(s);let T=b[0],A=b[1],R=b[2],w=b[3],D=0;for(;D+4<=m.length;)T^=m[D+0],A^=m[D+1],R^=m[D+2],w^=m[D+3],{s0:T,s1:A,s2:R,s3:w}=encrypt$2(h,T,A,R,w),g[D++]=T,g[D++]=A,g[D++]=R,g[D++]=w;if(a){const fn=padPCKS(c.subarray(D*4));T^=fn[0],A^=fn[1],R^=fn[2],w^=fn[3],{s0:T,s1:A,s2:R,s3:w}=encrypt$2(h,T,A,R,w),g[D++]=T,g[D++]=A,g[D++]=R,g[D++]=w}return h.fill(0),_},decrypt:(c,u)=>{validateBlockDecrypt(c);const h=expandKeyDecLE(e),m=u32(s),g=getDst(c.length,u),_=u32(c),b=u32(g);let T=m[0],A=m[1],R=m[2],w=m[3];for(let D=0;D+4<=_.length;){const fn=T,yn=A,pn=R,wn=w;T=_[D+0],A=_[D+1],R=_[D+2],w=_[D+3];const{s0:V,s1:bn,s2:wt,s3:jt}=decrypt$2(h,T,A,R,w);b[D++]=V^fn,b[D++]=bn^yn,b[D++]=wt^pn,b[D++]=jt^wn}return h.fill(0),validatePCKS(g,a)}}}),_utf8ToBytes=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),sigma16=_utf8ToBytes("expand 16-byte k"),sigma32=_utf8ToBytes("expand 32-byte k"),sigma16_32=u32(sigma16),sigma32_32=u32(sigma32);sigma32_32.slice();function rotl(n,e){return n<<e|n>>>32-e}function isAligned32(n){return n.byteOffset%4===0}const BLOCK_LEN=64,BLOCK_LEN32=16,MAX_COUNTER=2**32-1,U32_EMPTY=new Uint32Array;function runCipher(n,e,s,o,a,c,u,h){const m=a.length,g=new Uint8Array(BLOCK_LEN),_=u32(g),b=isAligned32(a)&&isAligned32(c),T=b?u32(a):U32_EMPTY,A=b?u32(c):U32_EMPTY;for(let R=0;R<m;u++){if(n(e,s,o,_,u,h),u>=MAX_COUNTER)throw new Error("arx: counter overflow");const w=Math.min(BLOCK_LEN,m-R);if(b&&w===BLOCK_LEN){const D=R/4;if(R%4!==0)throw new Error("arx: invalid block position");for(let fn=0,yn;fn<BLOCK_LEN32;fn++)yn=D+fn,A[yn]=T[yn]^_[fn];R+=BLOCK_LEN;continue}for(let D=0,fn;D<w;D++)fn=R+D,c[fn]=a[fn]^g[D];R+=w}}function createCipher(n,e){const{allowShortKeys:s,extendNonceFn:o,counterLength:a,counterRight:c,rounds:u}=checkOpts({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return number(a),number(u),bool(c),bool(s),(h,m,g,_,b=0)=>{bytes(h),bytes(m),bytes(g);const T=g.length;if(_||(_=new Uint8Array(T)),bytes(_),number(b),b<0||b>=MAX_COUNTER)throw new Error("arx: counter overflow");if(_.length<T)throw new Error(`arx: output (${_.length}) is shorter than data (${T})`);const A=[];let R=h.length,w,D;if(R===32)w=h.slice(),A.push(w),D=sigma32_32;else if(R===16&&s)w=new Uint8Array(32),w.set(h),w.set(h,16),D=sigma16_32,A.push(w);else throw new Error(`arx: invalid 32-byte key, got length=${R}`);isAligned32(m)||(m=m.slice(),A.push(m));const fn=u32(w);if(o){if(m.length!==24)throw new Error("arx: extended nonce must be 24 bytes");o(D,fn,u32(m.subarray(0,16)),fn),m=m.subarray(16)}const yn=16-a;if(yn!==m.length)throw new Error(`arx: nonce must be ${yn} or 16 bytes`);if(yn!==12){const wn=new Uint8Array(12);wn.set(m,c?0:12-m.length),m=wn,A.push(m)}const pn=u32(m);for(runCipher(n,D,fn,pn,g,_,b,u);A.length>0;)A.pop().fill(0);return _}}function chachaCore(n,e,s,o,a,c=20){let u=n[0],h=n[1],m=n[2],g=n[3],_=e[0],b=e[1],T=e[2],A=e[3],R=e[4],w=e[5],D=e[6],fn=e[7],yn=a,pn=s[0],wn=s[1],V=s[2],bn=u,wt=h,jt=m,ln=g,vn=_,dn=b,mn=T,zt=A,$n=R,Sn=w,En=D,Cn=fn,On=yn,Fn=pn,An=wn,Vn=V;for(let Ln=0;Ln<c;Ln+=2)bn=bn+vn|0,On=rotl(On^bn,16),$n=$n+On|0,vn=rotl(vn^$n,12),bn=bn+vn|0,On=rotl(On^bn,8),$n=$n+On|0,vn=rotl(vn^$n,7),wt=wt+dn|0,Fn=rotl(Fn^wt,16),Sn=Sn+Fn|0,dn=rotl(dn^Sn,12),wt=wt+dn|0,Fn=rotl(Fn^wt,8),Sn=Sn+Fn|0,dn=rotl(dn^Sn,7),jt=jt+mn|0,An=rotl(An^jt,16),En=En+An|0,mn=rotl(mn^En,12),jt=jt+mn|0,An=rotl(An^jt,8),En=En+An|0,mn=rotl(mn^En,7),ln=ln+zt|0,Vn=rotl(Vn^ln,16),Cn=Cn+Vn|0,zt=rotl(zt^Cn,12),ln=ln+zt|0,Vn=rotl(Vn^ln,8),Cn=Cn+Vn|0,zt=rotl(zt^Cn,7),bn=bn+dn|0,Vn=rotl(Vn^bn,16),En=En+Vn|0,dn=rotl(dn^En,12),bn=bn+dn|0,Vn=rotl(Vn^bn,8),En=En+Vn|0,dn=rotl(dn^En,7),wt=wt+mn|0,On=rotl(On^wt,16),Cn=Cn+On|0,mn=rotl(mn^Cn,12),wt=wt+mn|0,On=rotl(On^wt,8),Cn=Cn+On|0,mn=rotl(mn^Cn,7),jt=jt+zt|0,Fn=rotl(Fn^jt,16),$n=$n+Fn|0,zt=rotl(zt^$n,12),jt=jt+zt|0,Fn=rotl(Fn^jt,8),$n=$n+Fn|0,zt=rotl(zt^$n,7),ln=ln+vn|0,An=rotl(An^ln,16),Sn=Sn+An|0,vn=rotl(vn^Sn,12),ln=ln+vn|0,An=rotl(An^ln,8),Sn=Sn+An|0,vn=rotl(vn^Sn,7);let Bn=0;o[Bn++]=u+bn|0,o[Bn++]=h+wt|0,o[Bn++]=m+jt|0,o[Bn++]=g+ln|0,o[Bn++]=_+vn|0,o[Bn++]=b+dn|0,o[Bn++]=T+mn|0,o[Bn++]=A+zt|0,o[Bn++]=R+$n|0,o[Bn++]=w+Sn|0,o[Bn++]=D+En|0,o[Bn++]=fn+Cn|0,o[Bn++]=yn+On|0,o[Bn++]=pn+Fn|0,o[Bn++]=wn+An|0,o[Bn++]=V+Vn|0}const chacha20=createCipher(chachaCore,{counterRight:!1,counterLength:4,allowShortKeys:!1});let HMAC$1=class extends Hash$1{constructor(e,s){super(),this.finished=!1,this.destroyed=!1,assert.hash(e);const o=toBytes$1(s);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,c=new Uint8Array(a);c.set(o.length>a?e.create().update(o).digest():o);for(let u=0;u<c.length;u++)c[u]^=54;this.iHash.update(c),this.oHash=e.create();for(let u=0;u<c.length;u++)c[u]^=106;this.oHash.update(c),c.fill(0)}update(e){return assert.exists(this),this.iHash.update(e),this}digestInto(e){assert.exists(this),assert.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:o,finished:a,destroyed:c,blockLen:u,outputLen:h}=this;return e=e,e.finished=a,e.destroyed=c,e.blockLen=u,e.outputLen=h,e.oHash=s._cloneInto(e.oHash),e.iHash=o._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$1=(n,e,s)=>new HMAC$1(n,e).update(s).digest();hmac$1.create=(n,e)=>new HMAC$1(n,e);function extract(n,e,s){return assert.hash(n),hmac$1(n,toBytes$1(s),toBytes$1(e))}const HKDF_COUNTER=new Uint8Array([0]),EMPTY_BUFFER=new Uint8Array;function expand(n,e,s,o=32){if(assert.hash(n),assert.number(o),o>255*n.outputLen)throw new Error("Length should be <= 255*HashLen");const a=Math.ceil(o/n.outputLen);s===void 0&&(s=EMPTY_BUFFER);const c=new Uint8Array(a*n.outputLen),u=hmac$1.create(n,e),h=u._cloneInto(),m=new Uint8Array(u.outputLen);for(let g=0;g<a;g++)HKDF_COUNTER[0]=g+1,h.update(g===0?EMPTY_BUFFER:m).update(s).update(HKDF_COUNTER).digestInto(m),c.set(m,n.outputLen*g),u._cloneInto(h);return u.destroy(),h.destroy(),m.fill(0),HKDF_COUNTER.fill(0),c.slice(0,o)}var __defProp=Object.defineProperty,__export=(n,e)=>{for(var s in e)__defProp(n,s,{get:e[s],enumerable:!0})},verifiedSymbol=Symbol("verified"),isRecord=n=>n instanceof Object;function validateEvent(n){if(!isRecord(n)||typeof n.kind!="number"||typeof n.content!="string"||typeof n.created_at!="number"||typeof n.pubkey!="string"||!n.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(n.tags))return!1;for(let e=0;e<n.tags.length;e++){let s=n.tags[e];if(!Array.isArray(s))return!1;for(let o=0;o<s.length;o++)if(typeof s[o]!="string")return!1}return!0}var utils_exports={};__export(utils_exports,{Queue:()=>Queue$1,QueueNode:()=>QueueNode,binarySearch:()=>binarySearch,bytesToHex:()=>bytesToHex$1,hexToBytes:()=>hexToBytes$1,insertEventIntoAscendingList:()=>insertEventIntoAscendingList,insertEventIntoDescendingList:()=>insertEventIntoDescendingList,normalizeURL:()=>normalizeURL,utf8Decoder:()=>utf8Decoder,utf8Encoder:()=>utf8Encoder});var utf8Decoder=new TextDecoder("utf-8"),utf8Encoder=new TextEncoder;function normalizeURL(n){try{n.indexOf("://")===-1&&(n="wss://"+n);let e=new URL(n);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),(e.port==="80"&&e.protocol==="ws:"||e.port==="443"&&e.protocol==="wss:")&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}catch{throw new Error(`Invalid URL: ${n}`)}}function insertEventIntoDescendingList(n,e){const[s,o]=binarySearch(n,a=>e.id===a.id?0:e.created_at===a.created_at?-1:a.created_at-e.created_at);return o||n.splice(s,0,e),n}function insertEventIntoAscendingList(n,e){const[s,o]=binarySearch(n,a=>e.id===a.id?0:e.created_at===a.created_at?-1:e.created_at-a.created_at);return o||n.splice(s,0,e),n}function binarySearch(n,e){let s=0,o=n.length-1;for(;s<=o;){const a=Math.floor((s+o)/2),c=e(n[a]);if(c===0)return[a,!0];c<0?o=a-1:s=a+1}return[s,!1]}var QueueNode=class{value;next=null;prev=null;constructor(n){this.value=n}},Queue$1=class{first;last;constructor(){this.first=null,this.last=null}enqueue(e){const s=new QueueNode(e);return this.last?this.last===this.first?(this.last=s,this.last.prev=this.first,this.first.next=s):(s.prev=this.last,this.last.next=s,this.last=s):(this.first=s,this.last=s),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const s=this.first;return this.first=null,this.last=null,s.value}const e=this.first;return this.first=e.next,this.first&&(this.first.prev=null),e.value}},JS=class{generateSecretKey(){return schnorr$1.utils.randomPrivateKey()}getPublicKey(n){return bytesToHex$1(schnorr$1.getPublicKey(n))}finalizeEvent(n,e){const s=n;return s.pubkey=bytesToHex$1(schnorr$1.getPublicKey(e)),s.id=getEventHash$1(s),s.sig=bytesToHex$1(schnorr$1.sign(getEventHash$1(s),e)),s[verifiedSymbol]=!0,s}verifyEvent(n){if(typeof n[verifiedSymbol]=="boolean")return n[verifiedSymbol];const e=getEventHash$1(n);if(e!==n.id)return n[verifiedSymbol]=!1,!1;try{const s=schnorr$1.verify(n.sig,e,n.pubkey);return n[verifiedSymbol]=s,s}catch{return n[verifiedSymbol]=!1,!1}}};function serializeEvent(n){if(!validateEvent(n))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,n.pubkey,n.created_at,n.kind,n.tags,n.content])}function getEventHash$1(n){let e=sha256$2(utf8Encoder.encode(serializeEvent(n)));return bytesToHex$1(e)}var i=new JS,generateSecretKey=i.generateSecretKey,getPublicKey=i.getPublicKey,finalizeEvent=i.finalizeEvent,verifyEvent=i.verifyEvent,kinds_exports={};__export(kinds_exports,{Application:()=>Application,BadgeAward:()=>BadgeAward,BadgeDefinition:()=>BadgeDefinition,BlockedRelaysList:()=>BlockedRelaysList,BookmarkList:()=>BookmarkList,Bookmarksets:()=>Bookmarksets,Calendar:()=>Calendar,CalendarEventRSVP:()=>CalendarEventRSVP,ChannelCreation:()=>ChannelCreation,ChannelHideMessage:()=>ChannelHideMessage,ChannelMessage:()=>ChannelMessage,ChannelMetadata:()=>ChannelMetadata,ChannelMuteUser:()=>ChannelMuteUser,ClassifiedListing:()=>ClassifiedListing,ClientAuth:()=>ClientAuth,CommunitiesList:()=>CommunitiesList,CommunityDefinition:()=>CommunityDefinition,CommunityPostApproval:()=>CommunityPostApproval,Contacts:()=>Contacts,CreateOrUpdateProduct:()=>CreateOrUpdateProduct,CreateOrUpdateStall:()=>CreateOrUpdateStall,Curationsets:()=>Curationsets,Date:()=>Date2,DirectMessageRelaysList:()=>DirectMessageRelaysList,DraftClassifiedListing:()=>DraftClassifiedListing,DraftLong:()=>DraftLong,Emojisets:()=>Emojisets,EncryptedDirectMessage:()=>EncryptedDirectMessage,EventDeletion:()=>EventDeletion,FileMetadata:()=>FileMetadata,FileServerPreference:()=>FileServerPreference,Followsets:()=>Followsets,GenericRepost:()=>GenericRepost,Genericlists:()=>Genericlists,GiftWrap:()=>GiftWrap,HTTPAuth:()=>HTTPAuth,Handlerinformation:()=>Handlerinformation,Handlerrecommendation:()=>Handlerrecommendation,Highlights:()=>Highlights,InterestsList:()=>InterestsList,Interestsets:()=>Interestsets,JobFeedback:()=>JobFeedback,JobRequest:()=>JobRequest,JobResult:()=>JobResult,Label:()=>Label,LightningPubRPC:()=>LightningPubRPC,LiveChatMessage:()=>LiveChatMessage,LiveEvent:()=>LiveEvent,LongFormArticle:()=>LongFormArticle,Metadata:()=>Metadata,Mutelist:()=>Mutelist,NWCWalletInfo:()=>NWCWalletInfo,NWCWalletRequest:()=>NWCWalletRequest,NWCWalletResponse:()=>NWCWalletResponse,NostrConnect:()=>NostrConnect,OpenTimestamps:()=>OpenTimestamps,Pinlist:()=>Pinlist,PrivateDirectMessage:()=>PrivateDirectMessage,ProblemTracker:()=>ProblemTracker,ProfileBadges:()=>ProfileBadges,PublicChatsList:()=>PublicChatsList,Reaction:()=>Reaction,RecommendRelay:()=>RecommendRelay,RelayList:()=>RelayList,Relaysets:()=>Relaysets,Report:()=>Report,Reporting:()=>Reporting,Repost:()=>Repost,Seal:()=>Seal,SearchRelaysList:()=>SearchRelaysList,ShortTextNote:()=>ShortTextNote,Time:()=>Time,UserEmojiList:()=>UserEmojiList,UserStatuses:()=>UserStatuses,Zap:()=>Zap,ZapGoal:()=>ZapGoal,ZapRequest:()=>ZapRequest,classifyKind:()=>classifyKind,isAddressableKind:()=>isAddressableKind,isEphemeralKind:()=>isEphemeralKind,isKind:()=>isKind,isRegularKind:()=>isRegularKind,isReplaceableKind:()=>isReplaceableKind});function isRegularKind(n){return 1e3<=n&&n<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(n)}function isReplaceableKind(n){return[0,3].includes(n)||1e4<=n&&n<2e4}function isEphemeralKind(n){return 2e4<=n&&n<3e4}function isAddressableKind(n){return 3e4<=n&&n<4e4}function classifyKind(n){return isRegularKind(n)?"regular":isReplaceableKind(n)?"replaceable":isEphemeralKind(n)?"ephemeral":isAddressableKind(n)?"parameterized":"unknown"}function isKind(n,e){const s=e instanceof Array?e:[e];return validateEvent(n)&&s.includes(n.kind)||!1}var Metadata=0,ShortTextNote=1,RecommendRelay=2,Contacts=3,EncryptedDirectMessage=4,EventDeletion=5,Repost=6,Reaction=7,BadgeAward=8,Seal=13,PrivateDirectMessage=14,GenericRepost=16,ChannelCreation=40,ChannelMetadata=41,ChannelMessage=42,ChannelHideMessage=43,ChannelMuteUser=44,OpenTimestamps=1040,GiftWrap=1059,FileMetadata=1063,LiveChatMessage=1311,ProblemTracker=1971,Report=1984,Reporting=1984,Label=1985,CommunityPostApproval=4550,JobRequest=5999,JobResult=6999,JobFeedback=7e3,ZapGoal=9041,ZapRequest=9734,Zap=9735,Highlights=9802,Mutelist=1e4,Pinlist=10001,RelayList=10002,BookmarkList=10003,CommunitiesList=10004,PublicChatsList=10005,BlockedRelaysList=10006,SearchRelaysList=10007,InterestsList=10015,UserEmojiList=10030,DirectMessageRelaysList=10050,FileServerPreference=10096,NWCWalletInfo=13194,LightningPubRPC=21e3,ClientAuth=22242,NWCWalletRequest=23194,NWCWalletResponse=23195,NostrConnect=24133,HTTPAuth=27235,Followsets=3e4,Genericlists=30001,Relaysets=30002,Bookmarksets=30003,Curationsets=30004,ProfileBadges=30008,BadgeDefinition=30009,Interestsets=30015,CreateOrUpdateStall=30017,CreateOrUpdateProduct=30018,LongFormArticle=30023,DraftLong=30024,Emojisets=30030,Application=30078,LiveEvent=30311,UserStatuses=30315,ClassifiedListing=30402,DraftClassifiedListing=30403,Date2=31922,Time=31923,Calendar=31924,CalendarEventRSVP=31925,Handlerrecommendation=31989,Handlerinformation=31990,CommunityDefinition=34550;function matchFilter(n,e){if(n.ids&&n.ids.indexOf(e.id)===-1||n.kinds&&n.kinds.indexOf(e.kind)===-1||n.authors&&n.authors.indexOf(e.pubkey)===-1)return!1;for(let s in n)if(s[0]==="#"){let o=s.slice(1),a=n[`#${o}`];if(a&&!e.tags.find(([c,u])=>c===s.slice(1)&&a.indexOf(u)!==-1))return!1}return!(n.since&&e.created_at<n.since||n.until&&e.created_at>n.until)}function matchFilters(n,e){for(let s=0;s<n.length;s++)if(matchFilter(n[s],e))return!0;return!1}var fakejson_exports={};__export(fakejson_exports,{getHex64:()=>getHex64,getInt:()=>getInt,getSubscriptionId:()=>getSubscriptionId,matchEventId:()=>matchEventId,matchEventKind:()=>matchEventKind,matchEventPubkey:()=>matchEventPubkey});function getHex64(n,e){let s=e.length+3,o=n.indexOf(`"${e}":`)+s,a=n.slice(o).indexOf('"')+o+1;return n.slice(a,a+64)}function getInt(n,e){let s=e.length,o=n.indexOf(`"${e}":`)+s+3,a=n.slice(o),c=Math.min(a.indexOf(","),a.indexOf("}"));return parseInt(a.slice(0,c),10)}function getSubscriptionId(n){let e=n.slice(0,22).indexOf('"EVENT"');if(e===-1)return null;let s=n.slice(e+7+1).indexOf('"');if(s===-1)return null;let o=e+7+1+s,a=n.slice(o+1,80).indexOf('"');if(a===-1)return null;let c=o+1+a;return n.slice(o+1,c)}function matchEventId(n,e){return e===getHex64(n,"id")}function matchEventPubkey(n,e){return e===getHex64(n,"pubkey")}function matchEventKind(n,e){return e===getInt(n,"kind")}var nip42_exports={};__export(nip42_exports,{makeAuthEvent:()=>makeAuthEvent});function makeAuthEvent(n,e){return{kind:ClientAuth,created_at:Math.floor(Date.now()/1e3),tags:[["relay",n],["challenge",e]],content:""}}var _WebSocket;try{_WebSocket=WebSocket}catch{}var _WebSocket2;try{_WebSocket2=WebSocket}catch{}var nip19_exports={};__export(nip19_exports,{BECH32_REGEX:()=>BECH32_REGEX$1,Bech32MaxSize:()=>Bech32MaxSize,NostrTypeGuard:()=>NostrTypeGuard,decode:()=>decode,decodeNostrURI:()=>decodeNostrURI,encodeBytes:()=>encodeBytes,naddrEncode:()=>naddrEncode,neventEncode:()=>neventEncode,noteEncode:()=>noteEncode,nprofileEncode:()=>nprofileEncode,npubEncode:()=>npubEncode,nsecEncode:()=>nsecEncode});var NostrTypeGuard={isNProfile:n=>/^nprofile1[a-z\d]+$/.test(n||""),isNEvent:n=>/^nevent1[a-z\d]+$/.test(n||""),isNAddr:n=>/^naddr1[a-z\d]+$/.test(n||""),isNSec:n=>/^nsec1[a-z\d]{58}$/.test(n||""),isNPub:n=>/^npub1[a-z\d]{58}$/.test(n||""),isNote:n=>/^note1[a-z\d]+$/.test(n||""),isNcryptsec:n=>/^ncryptsec1[a-z\d]+$/.test(n||"")},Bech32MaxSize=5e3,BECH32_REGEX$1=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function integerToUint8Array(n){const e=new Uint8Array(4);return e[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=n&255,e}function decodeNostrURI(n){try{return n.startsWith("nostr:")&&(n=n.substring(6)),decode(n)}catch{return{type:"invalid",data:null}}}function decode(n){let{prefix:e,words:s}=bech32.decode(n,Bech32MaxSize),o=new Uint8Array(bech32.fromWords(s));switch(e){case"nprofile":{let a=parseTLV(o);if(!a[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(a[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:bytesToHex$1(a[0][0]),relays:a[1]?a[1].map(c=>utf8Decoder.decode(c)):[]}}}case"nevent":{let a=parseTLV(o);if(!a[0]?.[0])throw new Error("missing TLV 0 for nevent");if(a[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(a[2]&&a[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(a[3]&&a[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:bytesToHex$1(a[0][0]),relays:a[1]?a[1].map(c=>utf8Decoder.decode(c)):[],author:a[2]?.[0]?bytesToHex$1(a[2][0]):void 0,kind:a[3]?.[0]?parseInt(bytesToHex$1(a[3][0]),16):void 0}}}case"naddr":{let a=parseTLV(o);if(!a[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!a[2]?.[0])throw new Error("missing TLV 2 for naddr");if(a[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!a[3]?.[0])throw new Error("missing TLV 3 for naddr");if(a[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:utf8Decoder.decode(a[0][0]),pubkey:bytesToHex$1(a[2][0]),kind:parseInt(bytesToHex$1(a[3][0]),16),relays:a[1]?a[1].map(c=>utf8Decoder.decode(c)):[]}}}case"nsec":return{type:e,data:o};case"npub":case"note":return{type:e,data:bytesToHex$1(o)};default:throw new Error(`unknown prefix ${e}`)}}function parseTLV(n){let e={},s=n;for(;s.length>0;){let o=s[0],a=s[1],c=s.slice(2,2+a);if(s=s.slice(2+a),c.length<a)throw new Error(`not enough data to read on TLV ${o}`);e[o]=e[o]||[],e[o].push(c)}return e}function nsecEncode(n){return encodeBytes("nsec",n)}function npubEncode(n){return encodeBytes("npub",hexToBytes$1(n))}function noteEncode(n){return encodeBytes("note",hexToBytes$1(n))}function encodeBech32(n,e){let s=bech32.toWords(e);return bech32.encode(n,s,Bech32MaxSize)}function encodeBytes(n,e){return encodeBech32(n,e)}function nprofileEncode(n){let e=encodeTLV({0:[hexToBytes$1(n.pubkey)],1:(n.relays||[]).map(s=>utf8Encoder.encode(s))});return encodeBech32("nprofile",e)}function neventEncode(n){let e;n.kind!==void 0&&(e=integerToUint8Array(n.kind));let s=encodeTLV({0:[hexToBytes$1(n.id)],1:(n.relays||[]).map(o=>utf8Encoder.encode(o)),2:n.author?[hexToBytes$1(n.author)]:[],3:e?[new Uint8Array(e)]:[]});return encodeBech32("nevent",s)}function naddrEncode(n){let e=new ArrayBuffer(4);new DataView(e).setUint32(0,n.kind,!1);let s=encodeTLV({0:[utf8Encoder.encode(n.identifier)],1:(n.relays||[]).map(o=>utf8Encoder.encode(o)),2:[hexToBytes$1(n.pubkey)],3:[new Uint8Array(e)]});return encodeBech32("naddr",s)}function encodeTLV(n){let e=[];return Object.entries(n).reverse().forEach(([s,o])=>{o.forEach(a=>{let c=new Uint8Array(a.length+2);c.set([parseInt(s)],0),c.set([a.length],1),c.set(a,2),e.push(c)})}),concatBytes$1(...e)}var nip04_exports={};__export(nip04_exports,{decrypt:()=>decrypt$1,encrypt:()=>encrypt$1});function encrypt$1(n,e,s){const o=n instanceof Uint8Array?bytesToHex$1(n):n,a=secp256k1$1.getSharedSecret(o,"02"+e),c=getNormalizedX(a);let u=Uint8Array.from(randomBytes$1(16)),h=utf8Encoder.encode(s),m=cbc(c,u).encrypt(h),g=base64.encode(new Uint8Array(m)),_=base64.encode(new Uint8Array(u.buffer));return`${g}?iv=${_}`}function decrypt$1(n,e,s){const o=n instanceof Uint8Array?bytesToHex$1(n):n;let[a,c]=s.split("?iv="),u=secp256k1$1.getSharedSecret(o,"02"+e),h=getNormalizedX(u),m=base64.decode(c),g=base64.decode(a),_=cbc(h,m).decrypt(g);return utf8Decoder.decode(_)}function getNormalizedX(n){return n.slice(1,33)}var nip05_exports={};__export(nip05_exports,{NIP05_REGEX:()=>NIP05_REGEX$1,isNip05:()=>isNip05,isValid:()=>isValid,queryProfile:()=>queryProfile,searchDomain:()=>searchDomain,useFetchImplementation:()=>useFetchImplementation});var NIP05_REGEX$1=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,isNip05=n=>NIP05_REGEX$1.test(n||""),_fetch;try{_fetch=fetch}catch(n){}function useFetchImplementation(n){_fetch=n}async function searchDomain(n,e=""){try{const s=`https://${n}/.well-known/nostr.json?name=${e}`,o=await _fetch(s,{redirect:"manual"});if(o.status!==200)throw Error("Wrong response code");return(await o.json()).names}catch{return{}}}async function queryProfile(n){const e=n.match(NIP05_REGEX$1);if(!e)return null;const[,s="_",o]=e;try{const a=`https://${o}/.well-known/nostr.json?name=${s}`,c=await _fetch(a,{redirect:"manual"});if(c.status!==200)throw Error("Wrong response code");const u=await c.json(),h=u.names[s];return h?{pubkey:h,relays:u.relays?.[h]}:null}catch{return null}}async function isValid(n,e){const s=await queryProfile(e);return s?s.pubkey===n:!1}var nip10_exports={};__export(nip10_exports,{parse:()=>parse});function parse(n){const e={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let s,o;for(let a=n.tags.length-1;a>=0;a--){const c=n.tags[a];if(c[0]==="e"&&c[1]){const[u,h,m,g,_]=c,b={id:h,relays:m?[m]:[],author:_};if(g==="root"){e.root=b;continue}if(g==="reply"){e.reply=b;continue}if(g==="mention"){e.mentions.push(b);continue}s?o=b:s=b,e.mentions.push(b);continue}if(c[0]==="q"&&c[1]){const[u,h,m]=c;e.quotes.push({id:h,relays:m?[m]:[]})}if(c[0]==="p"&&c[1]){e.profiles.push({pubkey:c[1],relays:c[2]?[c[2]]:[]});continue}}return e.root||(e.root=o||s||e.reply),e.reply||(e.reply=s||e.root),[e.reply,e.root].forEach(a=>{if(!a)return;let c=e.mentions.indexOf(a);if(c!==-1&&e.mentions.splice(c,1),a.author){let u=e.profiles.find(h=>h.pubkey===a.author);u&&u.relays&&(a.relays||(a.relays=[]),u.relays.forEach(h=>{a.relays?.indexOf(h)===-1&&a.relays.push(h)}),u.relays=a.relays)}}),e.mentions.forEach(a=>{if(a.author){let c=e.profiles.find(u=>u.pubkey===a.author);c&&c.relays&&(a.relays||(a.relays=[]),c.relays.forEach(u=>{a.relays.indexOf(u)===-1&&a.relays.push(u)}),c.relays=a.relays)}}),e}var nip11_exports={};__export(nip11_exports,{fetchRelayInformation:()=>fetchRelayInformation,useFetchImplementation:()=>useFetchImplementation2});var _fetch2;try{_fetch2=fetch}catch{}function useFetchImplementation2(n){_fetch2=n}async function fetchRelayInformation(n){return await(await fetch(n.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var nip13_exports={};__export(nip13_exports,{fastEventHash:()=>fastEventHash,getPow:()=>getPow,minePow:()=>minePow});function getPow(n){let e=0;for(let s=0;s<64;s+=8){const o=parseInt(n.substring(s,s+8),16);if(o===0)e+=32;else{e+=Math.clz32(o);break}}return e}function minePow(n,e){let s=0;const o=n,a=["nonce",s.toString(),e.toString()];for(o.tags.push(a);;){const c=Math.floor(new Date().getTime()/1e3);if(c!==o.created_at&&(s=0,o.created_at=c),a[1]=(++s).toString(),o.id=fastEventHash(o),getPow(o.id)>=e)break}return o}function fastEventHash(n){return bytesToHex$1(sha256$2(utf8Encoder.encode(JSON.stringify([0,n.pubkey,n.created_at,n.kind,n.tags,n.content]))))}var nip17_exports={};__export(nip17_exports,{unwrapEvent:()=>unwrapEvent2,unwrapManyEvents:()=>unwrapManyEvents2,wrapEvent:()=>wrapEvent2,wrapManyEvents:()=>wrapManyEvents2});var nip59_exports={};__export(nip59_exports,{createRumor:()=>createRumor,createSeal:()=>createSeal,createWrap:()=>createWrap,unwrapEvent:()=>unwrapEvent,unwrapManyEvents:()=>unwrapManyEvents,wrapEvent:()=>wrapEvent$1,wrapManyEvents:()=>wrapManyEvents});var nip44_exports={};__export(nip44_exports,{decrypt:()=>decrypt2,encrypt:()=>encrypt2,getConversationKey:()=>getConversationKey,v2:()=>v2});var minPlaintextSize=1,maxPlaintextSize=65535;function getConversationKey(n,e){const s=secp256k1$1.getSharedSecret(n,"02"+e).subarray(1,33);return extract(sha256$2,s,"nip44-v2")}function getMessageKeys(n,e){const s=expand(sha256$2,n,e,76);return{chacha_key:s.subarray(0,32),chacha_nonce:s.subarray(32,44),hmac_key:s.subarray(44,76)}}function calcPaddedLen(n){if(!Number.isSafeInteger(n)||n<1)throw new Error("expected positive integer");if(n<=32)return 32;const e=1<<Math.floor(Math.log2(n-1))+1,s=e<=256?32:e/8;return s*(Math.floor((n-1)/s)+1)}function writeU16BE(n){if(!Number.isSafeInteger(n)||n<minPlaintextSize||n>maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const e=new Uint8Array(2);return new DataView(e.buffer).setUint16(0,n,!1),e}function pad(n){const e=utf8Encoder.encode(n),s=e.length,o=writeU16BE(s),a=new Uint8Array(calcPaddedLen(s)-s);return concatBytes$1(o,e,a)}function unpad(n){const e=new DataView(n.buffer).getUint16(0),s=n.subarray(2,2+e);if(e<minPlaintextSize||e>maxPlaintextSize||s.length!==e||n.length!==2+calcPaddedLen(e))throw new Error("invalid padding");return utf8Decoder.decode(s)}function hmacAad(n,e,s){if(s.length!==32)throw new Error("AAD associated data must be 32 bytes");const o=concatBytes$1(s,e);return hmac$1(sha256$2,n,o)}function decodePayload(n){if(typeof n!="string")throw new Error("payload must be a valid string");const e=n.length;if(e<132||e>87472)throw new Error("invalid payload length: "+e);if(n[0]==="#")throw new Error("unknown encryption version");let s;try{s=base64.decode(n)}catch(c){throw new Error("invalid base64: "+c.message)}const o=s.length;if(o<99||o>65603)throw new Error("invalid data length: "+o);const a=s[0];if(a!==2)throw new Error("unknown encryption version "+a);return{nonce:s.subarray(1,33),ciphertext:s.subarray(33,-32),mac:s.subarray(-32)}}function encrypt2(n,e,s=randomBytes$1(32)){const{chacha_key:o,chacha_nonce:a,hmac_key:c}=getMessageKeys(e,s),u=pad(n),h=chacha20(o,a,u),m=hmacAad(c,h,s);return base64.encode(concatBytes$1(new Uint8Array([2]),s,h,m))}function decrypt2(n,e){const{nonce:s,ciphertext:o,mac:a}=decodePayload(n),{chacha_key:c,chacha_nonce:u,hmac_key:h}=getMessageKeys(e,s),m=hmacAad(h,o,s);if(!equalBytes(m,a))throw new Error("invalid MAC");const g=chacha20(c,u,o);return unpad(g)}var v2={utils:{getConversationKey,calcPaddedLen},encrypt:encrypt2,decrypt:decrypt2},TWO_DAYS=2880*60,now=()=>Math.round(Date.now()/1e3),randomNow=()=>Math.round(now()-Math.random()*TWO_DAYS),nip44ConversationKey=(n,e)=>getConversationKey(n,e),nip44Encrypt=(n,e,s)=>encrypt2(JSON.stringify(n),nip44ConversationKey(e,s)),nip44Decrypt=(n,e)=>JSON.parse(decrypt2(n.content,nip44ConversationKey(e,n.pubkey)));function createRumor(n,e){const s={created_at:now(),content:"",tags:[],...n,pubkey:getPublicKey(e)};return s.id=getEventHash$1(s),s}function createSeal(n,e,s){return finalizeEvent({kind:Seal,content:nip44Encrypt(n,e,s),created_at:randomNow(),tags:[]},e)}function createWrap(n,e){const s=generateSecretKey();return finalizeEvent({kind:GiftWrap,content:nip44Encrypt(n,s,e),created_at:randomNow(),tags:[["p",e]]},s)}function wrapEvent$1(n,e,s){const o=createRumor(n,e),a=createSeal(o,e,s);return createWrap(a,s)}function wrapManyEvents(n,e,s){if(!s||s.length===0)throw new Error("At least one recipient is required.");const o=getPublicKey(e),a=[wrapEvent$1(n,e,o)];return s.forEach(c=>{a.push(wrapEvent$1(n,e,c))}),a}function unwrapEvent(n,e){const s=nip44Decrypt(n,e);return nip44Decrypt(s,e)}function unwrapManyEvents(n,e){let s=[];return n.forEach(o=>{s.push(unwrapEvent(o,e))}),s.sort((o,a)=>o.created_at-a.created_at),s}function createEvent(n,e,s,o){const a={created_at:Math.ceil(Date.now()/1e3),kind:PrivateDirectMessage,tags:[],content:e};return(Array.isArray(n)?n:[n]).forEach(({publicKey:u,relayUrl:h})=>{a.tags.push(h?["p",u,h]:["p",u])}),o&&a.tags.push(["e",o.eventId,o.relayUrl||"","reply"]),s&&a.tags.push(["subject",s]),a}function wrapEvent2(n,e,s,o,a){const c=createEvent(e,s,o,a);return wrapEvent$1(c,n,e.publicKey)}function wrapManyEvents2(n,e,s,o,a){if(!e||e.length===0)throw new Error("At least one recipient is required.");return[{publicKey:getPublicKey(n)},...e].map(u=>wrapEvent2(n,u,s,o,a))}var unwrapEvent2=unwrapEvent,unwrapManyEvents2=unwrapManyEvents,nip18_exports={};__export(nip18_exports,{finishRepostEvent:()=>finishRepostEvent,getRepostedEvent:()=>getRepostedEvent,getRepostedEventPointer:()=>getRepostedEventPointer});function finishRepostEvent(n,e,s,o){let a;const c=[...n.tags??[],["e",e.id,s],["p",e.pubkey]];return e.kind===ShortTextNote?a=Repost:(a=GenericRepost,c.push(["k",String(e.kind)])),finalizeEvent({kind:a,tags:c,content:n.content===""||e.tags?.find(u=>u[0]==="-")?"":JSON.stringify(e),created_at:n.created_at},o)}function getRepostedEventPointer(n){if(![Repost,GenericRepost].includes(n.kind))return;let e,s;for(let o=n.tags.length-1;o>=0&&(e===void 0||s===void 0);o--){const a=n.tags[o];a.length>=2&&(a[0]==="e"&&e===void 0?e=a:a[0]==="p"&&s===void 0&&(s=a))}if(e!==void 0)return{id:e[1],relays:[e[2],s?.[2]].filter(o=>typeof o=="string"),author:s?.[1]}}function getRepostedEvent(n,{skipVerification:e}={}){const s=getRepostedEventPointer(n);if(s===void 0||n.content==="")return;let o;try{o=JSON.parse(n.content)}catch{return}if(o.id===s.id&&!(!e&&!verifyEvent(o)))return o}var nip21_exports={};__export(nip21_exports,{NOSTR_URI_REGEX:()=>NOSTR_URI_REGEX,parse:()=>parse2,test:()=>test});var NOSTR_URI_REGEX=new RegExp(`nostr:(${BECH32_REGEX$1.source})`);function test(n){return typeof n=="string"&&new RegExp(`^${NOSTR_URI_REGEX.source}$`).test(n)}function parse2(n){const e=n.match(new RegExp(`^${NOSTR_URI_REGEX.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${n}`);return{uri:e[0],value:e[1],decoded:decode(e[1])}}var nip25_exports={};__export(nip25_exports,{finishReactionEvent:()=>finishReactionEvent,getReactedEventPointer:()=>getReactedEventPointer});function finishReactionEvent(n,e,s){const o=e.tags.filter(a=>a.length>=2&&(a[0]==="e"||a[0]==="p"));return finalizeEvent({...n,kind:Reaction,tags:[...n.tags??[],...o,["e",e.id],["p",e.pubkey]],content:n.content??"+"},s)}function getReactedEventPointer(n){if(n.kind!==Reaction)return;let e,s;for(let o=n.tags.length-1;o>=0&&(e===void 0||s===void 0);o--){const a=n.tags[o];a.length>=2&&(a[0]==="e"&&e===void 0?e=a:a[0]==="p"&&s===void 0&&(s=a))}if(!(e===void 0||s===void 0))return{id:e[1],relays:[e[2],s[2]].filter(o=>o!==void 0),author:s[1]}}var nip27_exports={};__export(nip27_exports,{parse:()=>parse3});var noCharacter=/\W/m,noURLCharacter=/\W |\W$|$|,| /m;function*parse3(n){const e=n.length;let s=0,o=0;for(;o<e;){let a=n.indexOf(":",o);if(a===-1)break;if(n.substring(a-5,a)==="nostr"){const c=n.substring(a+60).match(noCharacter),u=c?a+60+c.index:e;try{let h,{data:m,type:g}=decode(n.substring(a+1,u));switch(g){case"npub":h={pubkey:m};break;case"nsec":case"note":o=u+1;continue;default:h=m}s!==a-5&&(yield{type:"text",text:n.substring(s,a-5)}),yield{type:"reference",pointer:h},o=u,s=o;continue}catch{o=a+1;continue}}else if(n.substring(a-5,a)==="https"||n.substring(a-4,a)==="http"){const c=n.substring(a+4).match(noURLCharacter),u=c?a+4+c.index:e,h=n[a-1]==="s"?5:4;try{let m=new URL(n.substring(a-h,u));if(m.hostname.indexOf(".")===-1)throw new Error("invalid url");if(s!==a-h&&(yield{type:"text",text:n.substring(s,a-h)}),m.pathname.endsWith(".png")||m.pathname.endsWith(".jpg")||m.pathname.endsWith(".jpeg")||m.pathname.endsWith(".gif")||m.pathname.endsWith(".webp")){yield{type:"image",url:m.toString()},o=u,s=o;continue}if(m.pathname.endsWith(".mp4")||m.pathname.endsWith(".avi")||m.pathname.endsWith(".webm")||m.pathname.endsWith(".mkv")){yield{type:"video",url:m.toString()},o=u,s=o;continue}if(m.pathname.endsWith(".mp3")||m.pathname.endsWith(".aac")||m.pathname.endsWith(".ogg")||m.pathname.endsWith(".opus")){yield{type:"audio",url:m.toString()},o=u,s=o;continue}yield{type:"url",url:m.toString()},o=u,s=o;continue}catch{o=u+1;continue}}else if(n.substring(a-3,a)==="wss"||n.substring(a-2,a)==="ws"){const c=n.substring(a+4).match(noURLCharacter),u=c?a+4+c.index:e,h=n[a-1]==="s"?3:2;try{let m=new URL(n.substring(a-h,u));if(m.hostname.indexOf(".")===-1)throw new Error("invalid ws url");s!==a-h&&(yield{type:"text",text:n.substring(s,a-h)}),yield{type:"relay",url:m.toString()},o=u,s=o;continue}catch{o=u+1;continue}}else{o=a+1;continue}}s!==e&&(yield{type:"text",text:n.substring(s)})}var nip28_exports={};__export(nip28_exports,{channelCreateEvent:()=>channelCreateEvent,channelHideMessageEvent:()=>channelHideMessageEvent,channelMessageEvent:()=>channelMessageEvent,channelMetadataEvent:()=>channelMetadataEvent,channelMuteUserEvent:()=>channelMuteUserEvent});var channelCreateEvent=(n,e)=>{let s;if(typeof n.content=="object")s=JSON.stringify(n.content);else if(typeof n.content=="string")s=n.content;else return;return finalizeEvent({kind:ChannelCreation,tags:[...n.tags??[]],content:s,created_at:n.created_at},e)},channelMetadataEvent=(n,e)=>{let s;if(typeof n.content=="object")s=JSON.stringify(n.content);else if(typeof n.content=="string")s=n.content;else return;return finalizeEvent({kind:ChannelMetadata,tags:[["e",n.channel_create_event_id],...n.tags??[]],content:s,created_at:n.created_at},e)},channelMessageEvent=(n,e)=>{const s=[["e",n.channel_create_event_id,n.relay_url,"root"]];return n.reply_to_channel_message_event_id&&s.push(["e",n.reply_to_channel_message_event_id,n.relay_url,"reply"]),finalizeEvent({kind:ChannelMessage,tags:[...s,...n.tags??[]],content:n.content,created_at:n.created_at},e)},channelHideMessageEvent=(n,e)=>{let s;if(typeof n.content=="object")s=JSON.stringify(n.content);else if(typeof n.content=="string")s=n.content;else return;return finalizeEvent({kind:ChannelHideMessage,tags:[["e",n.channel_message_event_id],...n.tags??[]],content:s,created_at:n.created_at},e)},channelMuteUserEvent=(n,e)=>{let s;if(typeof n.content=="object")s=JSON.stringify(n.content);else if(typeof n.content=="string")s=n.content;else return;return finalizeEvent({kind:ChannelMuteUser,tags:[["p",n.pubkey_to_mute],...n.tags??[]],content:s,created_at:n.created_at},e)},nip30_exports={};__export(nip30_exports,{EMOJI_SHORTCODE_REGEX:()=>EMOJI_SHORTCODE_REGEX,matchAll:()=>matchAll,regex:()=>regex,replaceAll:()=>replaceAll});var EMOJI_SHORTCODE_REGEX=/:(\w+):/,regex=()=>new RegExp(`\\B${EMOJI_SHORTCODE_REGEX.source}\\B`,"g");function*matchAll(n){const e=n.matchAll(regex());for(const s of e)try{const[o,a]=s;yield{shortcode:o,name:a,start:s.index,end:s.index+o.length}}catch{}}function replaceAll(n,e){return n.replaceAll(regex(),(s,o)=>e({shortcode:s,name:o}))}var nip39_exports={};__export(nip39_exports,{useFetchImplementation:()=>useFetchImplementation3,validateGithub:()=>validateGithub});var _fetch3;try{_fetch3=fetch}catch{}function useFetchImplementation3(n){_fetch3=n}async function validateGithub(n,e,s){try{return await(await _fetch3(`https://gist.github.com/${e}/${s}/raw`)).text()===`Verifying that I control the following Nostr public key: ${n}`}catch{return!1}}var nip47_exports={};__export(nip47_exports,{makeNwcRequestEvent:()=>makeNwcRequestEvent,parseConnectionString:()=>parseConnectionString});function parseConnectionString(n){const{host:e,pathname:s,searchParams:o}=new URL(n),a=s||e,c=o.get("relay"),u=o.get("secret");if(!a||!c||!u)throw new Error("invalid connection string");return{pubkey:a,relay:c,secret:u}}async function makeNwcRequestEvent(n,e,s){const a=encrypt$1(e,n,JSON.stringify({method:"pay_invoice",params:{invoice:s}})),c={kind:NWCWalletRequest,created_at:Math.round(Date.now()/1e3),content:a,tags:[["p",n]]};return finalizeEvent(c,e)}var nip54_exports={};__export(nip54_exports,{normalizeIdentifier:()=>normalizeIdentifier});function normalizeIdentifier(n){return n=n.trim().toLowerCase(),n=n.normalize("NFKC"),Array.from(n).map(e=>new RegExp("\\p{Letter}","u").test(e)||new RegExp("\\p{Number}","u").test(e)?e:"-").join("")}var nip57_exports={};__export(nip57_exports,{getSatoshisAmountFromBolt11:()=>getSatoshisAmountFromBolt11,getZapEndpoint:()=>getZapEndpoint,makeZapReceipt:()=>makeZapReceipt,makeZapRequest:()=>makeZapRequest,useFetchImplementation:()=>useFetchImplementation4,validateZapRequest:()=>validateZapRequest});var _fetch4;try{_fetch4=fetch}catch{}function useFetchImplementation4(n){_fetch4=n}async function getZapEndpoint(n){try{let e="",{lud06:s,lud16:o}=JSON.parse(n.content);if(s){let{words:u}=bech32.decode(s,1e3),h=bech32.fromWords(u);e=utf8Decoder.decode(h)}else if(o){let[u,h]=o.split("@");e=new URL(`/.well-known/lnurlp/${u}`,`https://${h}`).toString()}else return null;let c=await(await _fetch4(e)).json();if(c.allowsNostr&&c.nostrPubkey)return c.callback}catch{}return null}function makeZapRequest(n){let e={kind:9734,created_at:Math.round(Date.now()/1e3),content:n.comment||"",tags:[["p","pubkey"in n?n.pubkey:n.event.pubkey],["amount",n.amount.toString()],["relays",...n.relays]]};if("event"in n){if(e.tags.push(["e",n.event.id]),isReplaceableKind(n.event.kind)){const s=["a",`${n.event.kind}:${n.event.pubkey}:`];e.tags.push(s)}else if(isAddressableKind(n.event.kind)){let s=n.event.tags.find(([a,c])=>a==="d"&&c);if(!s)throw new Error("d tag not found or is empty");const o=["a",`${n.event.kind}:${n.event.pubkey}:${s[1]}`];e.tags.push(o)}e.tags.push(["k",n.event.kind.toString()])}return e}function validateZapRequest(n){let e;try{e=JSON.parse(n)}catch{return"Invalid zap request JSON."}if(!validateEvent(e))return"Zap request is not a valid Nostr event.";if(!verifyEvent(e))return"Invalid signature on zap request.";let s=e.tags.find(([c,u])=>c==="p"&&u);if(!s)return"Zap request doesn't have a 'p' tag.";if(!s[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let o=e.tags.find(([c,u])=>c==="e"&&u);return o&&!o[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find(([c,u])=>c==="relays"&&u)?null:"Zap request doesn't have a 'relays' tag."}function makeZapReceipt({zapRequest:n,preimage:e,bolt11:s,paidAt:o}){let a=JSON.parse(n),c=a.tags.filter(([h])=>h==="e"||h==="p"||h==="a"),u={kind:9735,created_at:Math.round(o.getTime()/1e3),content:"",tags:[...c,["P",a.pubkey],["bolt11",s],["description",n]]};return e&&u.tags.push(["preimage",e]),u}function getSatoshisAmountFromBolt11(n){if(n.length<50)return 0;n=n.substring(0,50);const e=n.lastIndexOf("1");if(e===-1)return 0;const s=n.substring(0,e);if(!s.startsWith("lnbc"))return 0;const o=s.substring(4);if(o.length<1)return 0;const a=o[o.length-1],c=a.charCodeAt(0)-48,u=c>=0&&c<=9;let h=o.length-1;if(u&&h++,h<1)return 0;const m=parseInt(o.substring(0,h));switch(a){case"m":return m*1e5;case"u":return m*100;case"n":return m/10;case"p":return m/1e4;default:return m*1e8}}var nip98_exports={};__export(nip98_exports,{getToken:()=>getToken,hashPayload:()=>hashPayload,unpackEventFromToken:()=>unpackEventFromToken,validateEvent:()=>validateEvent2,validateEventKind:()=>validateEventKind,validateEventMethodTag:()=>validateEventMethodTag,validateEventPayloadTag:()=>validateEventPayloadTag,validateEventTimestamp:()=>validateEventTimestamp,validateEventUrlTag:()=>validateEventUrlTag,validateToken:()=>validateToken});var _authorizationScheme="Nostr ";async function getToken(n,e,s,o=!1,a){const c={kind:HTTPAuth,tags:[["u",n],["method",e]],created_at:Math.round(new Date().getTime()/1e3),content:""};a&&c.tags.push(["payload",hashPayload(a)]);const u=await s(c);return(o?_authorizationScheme:"")+base64.encode(utf8Encoder.encode(JSON.stringify(u)))}async function validateToken(n,e,s){const o=await unpackEventFromToken(n).catch(c=>{throw c});return await validateEvent2(o,e,s).catch(c=>{throw c})}async function unpackEventFromToken(n){if(!n)throw new Error("Missing token");n=n.replace(_authorizationScheme,"");const e=utf8Decoder.decode(base64.decode(n));if(!e||e.length===0||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}function validateEventTimestamp(n){return n.created_at?Math.round(new Date().getTime()/1e3)-n.created_at<60:!1}function validateEventKind(n){return n.kind===HTTPAuth}function validateEventUrlTag(n,e){const s=n.tags.find(o=>o[0]==="u");return s?s.length>0&&s[1]===e:!1}function validateEventMethodTag(n,e){const s=n.tags.find(o=>o[0]==="method");return s?s.length>0&&s[1].toLowerCase()===e.toLowerCase():!1}function hashPayload(n){const e=sha256$2(utf8Encoder.encode(JSON.stringify(n)));return bytesToHex$1(e)}function validateEventPayloadTag(n,e){const s=n.tags.find(a=>a[0]==="payload");if(!s)return!1;const o=hashPayload(e);return s.length>0&&s[1]===o}async function validateEvent2(n,e,s,o){if(!verifyEvent(n))throw new Error("Invalid nostr event, signature invalid");if(!validateEventKind(n))throw new Error("Invalid nostr event, kind invalid");if(!validateEventTimestamp(n))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!validateEventUrlTag(n,e))throw new Error("Invalid nostr event, url tag invalid");if(!validateEventMethodTag(n,s))throw new Error("Invalid nostr event, method tag invalid");if(o&&typeof o=="object"&&Object.keys(o).length>0&&!validateEventPayloadTag(n,o))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}const crypto$1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function anumber(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function abytes(n,...e){if(!isBytes(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function ahash(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");anumber(n.outputLen),anumber(n.blockLen)}function aexists(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function aoutput(n,e){abytes(n);const s=e.outputLen;if(n.length<s)throw new Error("digestInto() expects output buffer of length at least "+s)}function clean(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function createView(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function rotr(n,e){return n<<32-e|n>>>e}const hasHexBuiltin=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hexes=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function bytesToHex(n){if(abytes(n),hasHexBuiltin)return n.toHex();let e="";for(let s=0;s<n.length;s++)e+=hexes[n[s]];return e}const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(n){if(n>=asciis._0&&n<=asciis._9)return n-asciis._0;if(n>=asciis.A&&n<=asciis.F)return n-(asciis.A-10);if(n>=asciis.a&&n<=asciis.f)return n-(asciis.a-10)}function hexToBytes(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(hasHexBuiltin)return Uint8Array.fromHex(n);const e=n.length,s=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const o=new Uint8Array(s);for(let a=0,c=0;a<s;a++,c+=2){const u=asciiToBase16(n.charCodeAt(c)),h=asciiToBase16(n.charCodeAt(c+1));if(u===void 0||h===void 0){const m=n[c]+n[c+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+c)}o[a]=u*16+h}return o}function utf8ToBytes(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function toBytes(n){return typeof n=="string"&&(n=utf8ToBytes(n)),abytes(n),n}function concatBytes(...n){let e=0;for(let o=0;o<n.length;o++){const a=n[o];abytes(a),e+=a.length}const s=new Uint8Array(e);for(let o=0,a=0;o<n.length;o++){const c=n[o];s.set(c,a),a+=c.length}return s}class Hash{}function createHasher(n){const e=o=>n().update(toBytes(o)).digest(),s=n();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>n(),e}function randomBytes(n=32){if(crypto$1&&typeof crypto$1.getRandomValues=="function")return crypto$1.getRandomValues(new Uint8Array(n));if(crypto$1&&typeof crypto$1.randomBytes=="function")return Uint8Array.from(crypto$1.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64(n,e,s,o){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,s,o);const a=BigInt(32),c=BigInt(4294967295),u=Number(s>>a&c),h=Number(s&c),m=o?4:0,g=o?0:4;n.setUint32(e+m,u,o),n.setUint32(e+g,h,o)}function Chi(n,e,s){return n&e^~n&s}function Maj(n,e,s){return n&e^n&s^e&s}class HashMD extends Hash{constructor(e,s,o,a){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=s,this.padOffset=o,this.isLE=a,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){aexists(this),e=toBytes(e),abytes(e);const{view:s,buffer:o,blockLen:a}=this,c=e.length;for(let u=0;u<c;){const h=Math.min(a-this.pos,c-u);if(h===a){const m=createView(e);for(;a<=c-u;u+=a)this.process(m,u);continue}o.set(e.subarray(u,u+h),this.pos),this.pos+=h,u+=h,this.pos===a&&(this.process(s,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists(this),aoutput(e,this),this.finished=!0;const{buffer:s,view:o,blockLen:a,isLE:c}=this;let{pos:u}=this;s[u++]=128,clean(this.buffer.subarray(u)),this.padOffset>a-u&&(this.process(o,0),u=0);for(let b=u;b<a;b++)s[b]=0;setBigUint64(o,a-8,BigInt(this.length*8),c),this.process(o,0);const h=createView(e),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=m/4,_=this.get();if(g>_.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<g;b++)h.setUint32(4*b,_[b],c)}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const o=e.slice(0,s);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:s,buffer:o,length:a,finished:c,destroyed:u,pos:h}=this;return e.destroyed=u,e.finished=c,e.length=a,e.pos=h,a%s&&e.buffer.set(o),e}clone(){return this._cloneInto()}}const SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_K=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD{constructor(e=32){super(64,e,8,!1),this.A=SHA256_IV[0]|0,this.B=SHA256_IV[1]|0,this.C=SHA256_IV[2]|0,this.D=SHA256_IV[3]|0,this.E=SHA256_IV[4]|0,this.F=SHA256_IV[5]|0,this.G=SHA256_IV[6]|0,this.H=SHA256_IV[7]|0}get(){const{A:e,B:s,C:o,D:a,E:c,F:u,G:h,H:m}=this;return[e,s,o,a,c,u,h,m]}set(e,s,o,a,c,u,h,m){this.A=e|0,this.B=s|0,this.C=o|0,this.D=a|0,this.E=c|0,this.F=u|0,this.G=h|0,this.H=m|0}process(e,s){for(let b=0;b<16;b++,s+=4)SHA256_W[b]=e.getUint32(s,!1);for(let b=16;b<64;b++){const T=SHA256_W[b-15],A=SHA256_W[b-2],R=rotr(T,7)^rotr(T,18)^T>>>3,w=rotr(A,17)^rotr(A,19)^A>>>10;SHA256_W[b]=w+SHA256_W[b-7]+R+SHA256_W[b-16]|0}let{A:o,B:a,C:c,D:u,E:h,F:m,G:g,H:_}=this;for(let b=0;b<64;b++){const T=rotr(h,6)^rotr(h,11)^rotr(h,25),A=_+T+Chi(h,m,g)+SHA256_K[b]+SHA256_W[b]|0,w=(rotr(o,2)^rotr(o,13)^rotr(o,22))+Maj(o,a,c)|0;_=g,g=m,m=h,h=u+A|0,u=c,c=a,a=o,o=A+w|0}o=o+this.A|0,a=a+this.B|0,c=c+this.C|0,u=u+this.D|0,h=h+this.E|0,m=m+this.F|0,g=g+this.G|0,_=_+this.H|0,this.set(o,a,c,u,h,m,g,_)}roundClean(){clean(SHA256_W)}destroy(){this.set(0,0,0,0,0,0,0,0),clean(this.buffer)}}const sha256$1=createHasher(()=>new SHA256);class HMAC extends Hash{constructor(e,s){super(),this.finished=!1,this.destroyed=!1,ahash(e);const o=toBytes(s);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,c=new Uint8Array(a);c.set(o.length>a?e.create().update(o).digest():o);for(let u=0;u<c.length;u++)c[u]^=54;this.iHash.update(c),this.oHash=e.create();for(let u=0;u<c.length;u++)c[u]^=106;this.oHash.update(c),clean(c)}update(e){return aexists(this),this.iHash.update(e),this}digestInto(e){aexists(this),abytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:o,finished:a,destroyed:c,blockLen:u,outputLen:h}=this;return e=e,e.finished=a,e.destroyed=c,e.blockLen=u,e.outputLen=h,e.oHash=s._cloneInto(e.oHash),e.iHash=o._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(n,e,s)=>new HMAC(n,e).update(s).digest();hmac.create=(n,e)=>new HMAC(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$4=BigInt(1);function _abool2(n,e=""){if(typeof n!="boolean"){const s=e&&`"${e}"`;throw new Error(s+"expected boolean, got type="+typeof n)}return n}function _abytes2(n,e,s=""){const o=isBytes(n),a=n?.length,c=e!==void 0;if(!o||c&&a!==e){const u=s&&`"${s}" `,h=c?` of length ${e}`:"",m=o?`length=${a}`:`type=${typeof n}`;throw new Error(u+"expected Uint8Array"+h+", got "+m)}return n}function numberToHexUnpadded(n){const e=n.toString(16);return e.length&1?"0"+e:e}function hexToNumber(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?_0n$4:BigInt("0x"+n)}function bytesToNumberBE(n){return hexToNumber(bytesToHex(n))}function bytesToNumberLE(n){return abytes(n),hexToNumber(bytesToHex(Uint8Array.from(n).reverse()))}function numberToBytesBE(n,e){return hexToBytes(n.toString(16).padStart(e*2,"0"))}function numberToBytesLE(n,e){return numberToBytesBE(n,e).reverse()}function ensureBytes(n,e,s){let o;if(typeof e=="string")try{o=hexToBytes(e)}catch(c){throw new Error(n+" must be hex string or Uint8Array, cause: "+c)}else if(isBytes(e))o=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const a=o.length;if(typeof s=="number"&&a!==s)throw new Error(n+" of length "+s+" expected, got "+a);return o}const isPosBig=n=>typeof n=="bigint"&&_0n$4<=n;function inRange(n,e,s){return isPosBig(n)&&isPosBig(e)&&isPosBig(s)&&e<=n&&n<s}function aInRange(n,e,s,o){if(!inRange(e,s,o))throw new Error("expected valid "+n+": "+s+" <= n < "+o+", got "+e)}function bitLen(n){let e;for(e=0;n>_0n$4;n>>=_1n$4,e+=1);return e}const bitMask=n=>(_1n$4<<BigInt(n))-_1n$4;function createHmacDrbg(n,e,s){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof s!="function")throw new Error("hmacFn must be a function");const o=A=>new Uint8Array(A),a=A=>Uint8Array.of(A);let c=o(n),u=o(n),h=0;const m=()=>{c.fill(1),u.fill(0),h=0},g=(...A)=>s(u,c,...A),_=(A=o(0))=>{u=g(a(0),A),c=g(),A.length!==0&&(u=g(a(1),A),c=g())},b=()=>{if(h++>=1e3)throw new Error("drbg: tried 1000 values");let A=0;const R=[];for(;A<e;){c=g();const w=c.slice();R.push(w),A+=c.length}return concatBytes(...R)};return(A,R)=>{m(),_(A);let w;for(;!(w=R(b()));)_();return m(),w}}function _validateObject(n,e,s={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function o(a,c,u){const h=n[a];if(u&&h===void 0)return;const m=typeof h;if(m!==c||h===null)throw new Error(`param "${a}" is invalid: expected ${c}, got ${m}`)}Object.entries(e).forEach(([a,c])=>o(a,c,!1)),Object.entries(s).forEach(([a,c])=>o(a,c,!0))}function memoized(n){const e=new WeakMap;return(s,...o)=>{const a=e.get(s);if(a!==void 0)return a;const c=n(s,...o);return e.set(s,c),c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$3=BigInt(1),_2n$2=BigInt(2),_3n$1=BigInt(3),_4n$1=BigInt(4),_5n=BigInt(5),_7n=BigInt(7),_8n=BigInt(8),_9n=BigInt(9),_16n=BigInt(16);function mod(n,e){const s=n%e;return s>=_0n$3?s:e+s}function pow2(n,e,s){let o=n;for(;e-- >_0n$3;)o*=o,o%=s;return o}function invert(n,e){if(n===_0n$3)throw new Error("invert: expected non-zero number");if(e<=_0n$3)throw new Error("invert: expected positive modulus, got "+e);let s=mod(n,e),o=e,a=_0n$3,c=_1n$3;for(;s!==_0n$3;){const h=o/s,m=o%s,g=a-c*h;o=s,s=m,a=c,c=g}if(o!==_1n$3)throw new Error("invert: does not exist");return mod(a,e)}function assertIsSquare(n,e,s){if(!n.eql(n.sqr(e),s))throw new Error("Cannot find square root")}function sqrt3mod4(n,e){const s=(n.ORDER+_1n$3)/_4n$1,o=n.pow(e,s);return assertIsSquare(n,o,e),o}function sqrt5mod8(n,e){const s=(n.ORDER-_5n)/_8n,o=n.mul(e,_2n$2),a=n.pow(o,s),c=n.mul(e,a),u=n.mul(n.mul(c,_2n$2),a),h=n.mul(c,n.sub(u,n.ONE));return assertIsSquare(n,h,e),h}function sqrt9mod16(n){const e=Field(n),s=tonelliShanks(n),o=s(e,e.neg(e.ONE)),a=s(e,o),c=s(e,e.neg(o)),u=(n+_7n)/_16n;return(h,m)=>{let g=h.pow(m,u),_=h.mul(g,o);const b=h.mul(g,a),T=h.mul(g,c),A=h.eql(h.sqr(_),m),R=h.eql(h.sqr(b),m);g=h.cmov(g,_,A),_=h.cmov(T,b,R);const w=h.eql(h.sqr(_),m),D=h.cmov(g,_,w);return assertIsSquare(h,D,m),D}}function tonelliShanks(n){if(n<_3n$1)throw new Error("sqrt is not defined for small field");let e=n-_1n$3,s=0;for(;e%_2n$2===_0n$3;)e/=_2n$2,s++;let o=_2n$2;const a=Field(n);for(;FpLegendre(a,o)===1;)if(o++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(s===1)return sqrt3mod4;let c=a.pow(o,e);const u=(e+_1n$3)/_2n$2;return function(m,g){if(m.is0(g))return g;if(FpLegendre(m,g)!==1)throw new Error("Cannot find square root");let _=s,b=m.mul(m.ONE,c),T=m.pow(g,e),A=m.pow(g,u);for(;!m.eql(T,m.ONE);){if(m.is0(T))return m.ZERO;let R=1,w=m.sqr(T);for(;!m.eql(w,m.ONE);)if(R++,w=m.sqr(w),R===_)throw new Error("Cannot find square root");const D=_1n$3<<BigInt(_-R-1),fn=m.pow(b,D);_=R,b=m.sqr(fn),T=m.mul(T,b),A=m.mul(A,fn)}return A}}function FpSqrt(n){return n%_4n$1===_3n$1?sqrt3mod4:n%_8n===_5n?sqrt5mod8:n%_16n===_9n?sqrt9mod16(n):tonelliShanks(n)}const FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},s=FIELD_FIELDS.reduce((o,a)=>(o[a]="function",o),e);return _validateObject(n,s),n}function FpPow(n,e,s){if(s<_0n$3)throw new Error("invalid exponent, negatives unsupported");if(s===_0n$3)return n.ONE;if(s===_1n$3)return e;let o=n.ONE,a=e;for(;s>_0n$3;)s&_1n$3&&(o=n.mul(o,a)),a=n.sqr(a),s>>=_1n$3;return o}function FpInvertBatch(n,e,s=!1){const o=new Array(e.length).fill(s?n.ZERO:void 0),a=e.reduce((u,h,m)=>n.is0(h)?u:(o[m]=u,n.mul(u,h)),n.ONE),c=n.inv(a);return e.reduceRight((u,h,m)=>n.is0(h)?u:(o[m]=n.mul(u,o[m]),n.mul(u,h)),c),o}function FpLegendre(n,e){const s=(n.ORDER-_1n$3)/_2n$2,o=n.pow(e,s),a=n.eql(o,n.ONE),c=n.eql(o,n.ZERO),u=n.eql(o,n.neg(n.ONE));if(!a&&!c&&!u)throw new Error("invalid Legendre symbol result");return a?1:c?0:-1}function nLength(n,e){e!==void 0&&anumber(e);const s=e!==void 0?e:n.toString(2).length,o=Math.ceil(s/8);return{nBitLength:s,nByteLength:o}}function Field(n,e,s=!1,o={}){if(n<=_0n$3)throw new Error("invalid field: expected ORDER > 0, got "+n);let a,c,u=!1,h;if(typeof e=="object"&&e!=null){if(o.sqrt||s)throw new Error("cannot specify opts in two arguments");const T=e;T.BITS&&(a=T.BITS),T.sqrt&&(c=T.sqrt),typeof T.isLE=="boolean"&&(s=T.isLE),typeof T.modFromBytes=="boolean"&&(u=T.modFromBytes),h=T.allowedLengths}else typeof e=="number"&&(a=e),o.sqrt&&(c=o.sqrt);const{nBitLength:m,nByteLength:g}=nLength(n,a);if(g>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let _;const b=Object.freeze({ORDER:n,isLE:s,BITS:m,BYTES:g,MASK:bitMask(m),ZERO:_0n$3,ONE:_1n$3,allowedLengths:h,create:T=>mod(T,n),isValid:T=>{if(typeof T!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof T);return _0n$3<=T&&T<n},is0:T=>T===_0n$3,isValidNot0:T=>!b.is0(T)&&b.isValid(T),isOdd:T=>(T&_1n$3)===_1n$3,neg:T=>mod(-T,n),eql:(T,A)=>T===A,sqr:T=>mod(T*T,n),add:(T,A)=>mod(T+A,n),sub:(T,A)=>mod(T-A,n),mul:(T,A)=>mod(T*A,n),pow:(T,A)=>FpPow(b,T,A),div:(T,A)=>mod(T*invert(A,n),n),sqrN:T=>T*T,addN:(T,A)=>T+A,subN:(T,A)=>T-A,mulN:(T,A)=>T*A,inv:T=>invert(T,n),sqrt:c||(T=>(_||(_=FpSqrt(n)),_(b,T))),toBytes:T=>s?numberToBytesLE(T,g):numberToBytesBE(T,g),fromBytes:(T,A=!0)=>{if(h){if(!h.includes(T.length)||T.length>g)throw new Error("Field.fromBytes: expected "+h+" bytes, got "+T.length);const w=new Uint8Array(g);w.set(T,s?0:w.length-T.length),T=w}if(T.length!==g)throw new Error("Field.fromBytes: expected "+g+" bytes, got "+T.length);let R=s?bytesToNumberLE(T):bytesToNumberBE(T);if(u&&(R=mod(R,n)),!A&&!b.isValid(R))throw new Error("invalid field element: outside of range 0..ORDER");return R},invertBatch:T=>FpInvertBatch(b,T),cmov:(T,A,R)=>R?A:T});return Object.freeze(b)}function getFieldBytesLength(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function getMinHashLength(n){const e=getFieldBytesLength(n);return e+Math.ceil(e/2)}function mapHashToField(n,e,s=!1){const o=n.length,a=getFieldBytesLength(e),c=getMinHashLength(e);if(o<16||o<c||o>1024)throw new Error("expected "+c+"-1024 bytes of input, got "+o);const u=s?bytesToNumberLE(n):bytesToNumberBE(n),h=mod(u,e-_1n$3)+_1n$3;return s?numberToBytesLE(h,a):numberToBytesBE(h,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$2=BigInt(1);function negateCt(n,e){const s=e.negate();return n?s:e}function normalizeZ(n,e){const s=FpInvertBatch(n.Fp,e.map(o=>o.Z));return e.map((o,a)=>n.fromAffine(o.toAffine(s[a])))}function validateW(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function calcWOpts(n,e){validateW(n,e);const s=Math.ceil(e/n)+1,o=2**(n-1),a=2**n,c=bitMask(n),u=BigInt(n);return{windows:s,windowSize:o,mask:c,maxNumber:a,shiftBy:u}}function calcOffsets(n,e,s){const{windowSize:o,mask:a,maxNumber:c,shiftBy:u}=s;let h=Number(n&a),m=n>>u;h>o&&(h-=c,m+=_1n$2);const g=e*o,_=g+Math.abs(h)-1,b=h===0,T=h<0,A=e%2!==0;return{nextN:m,offset:_,isZero:b,isNeg:T,isNegF:A,offsetF:g}}function validateMSMPoints(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((s,o)=>{if(!(s instanceof e))throw new Error("invalid point at index "+o)})}function validateMSMScalars(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((s,o)=>{if(!e.isValid(s))throw new Error("invalid scalar at index "+o)})}const pointPrecomputes=new WeakMap,pointWindowSizes=new WeakMap;function getW(n){return pointWindowSizes.get(n)||1}function assert0(n){if(n!==_0n$2)throw new Error("invalid wNAF")}class wNAF{constructor(e,s){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=s}_unsafeLadder(e,s,o=this.ZERO){let a=e;for(;s>_0n$2;)s&_1n$2&&(o=o.add(a)),a=a.double(),s>>=_1n$2;return o}precomputeWindow(e,s){const{windows:o,windowSize:a}=calcWOpts(s,this.bits),c=[];let u=e,h=u;for(let m=0;m<o;m++){h=u,c.push(h);for(let g=1;g<a;g++)h=h.add(u),c.push(h);u=h.double()}return c}wNAF(e,s,o){if(!this.Fn.isValid(o))throw new Error("invalid scalar");let a=this.ZERO,c=this.BASE;const u=calcWOpts(e,this.bits);for(let h=0;h<u.windows;h++){const{nextN:m,offset:g,isZero:_,isNeg:b,isNegF:T,offsetF:A}=calcOffsets(o,h,u);o=m,_?c=c.add(negateCt(T,s[A])):a=a.add(negateCt(b,s[g]))}return assert0(o),{p:a,f:c}}wNAFUnsafe(e,s,o,a=this.ZERO){const c=calcWOpts(e,this.bits);for(let u=0;u<c.windows&&o!==_0n$2;u++){const{nextN:h,offset:m,isZero:g,isNeg:_}=calcOffsets(o,u,c);if(o=h,!g){const b=s[m];a=a.add(_?b.negate():b)}}return assert0(o),a}getPrecomputes(e,s,o){let a=pointPrecomputes.get(s);return a||(a=this.precomputeWindow(s,e),e!==1&&(typeof o=="function"&&(a=o(a)),pointPrecomputes.set(s,a))),a}cached(e,s,o){const a=getW(e);return this.wNAF(a,this.getPrecomputes(a,e,o),s)}unsafe(e,s,o,a){const c=getW(e);return c===1?this._unsafeLadder(e,s,a):this.wNAFUnsafe(c,this.getPrecomputes(c,e,o),s,a)}createCache(e,s){validateW(s,this.bits),pointWindowSizes.set(e,s),pointPrecomputes.delete(e)}hasCache(e){return getW(e)!==1}}function mulEndoUnsafe(n,e,s,o){let a=e,c=n.ZERO,u=n.ZERO;for(;s>_0n$2||o>_0n$2;)s&_1n$2&&(c=c.add(a)),o&_1n$2&&(u=u.add(a)),a=a.double(),s>>=_1n$2,o>>=_1n$2;return{p1:c,p2:u}}function pippenger(n,e,s,o){validateMSMPoints(s,n),validateMSMScalars(o,e);const a=s.length,c=o.length;if(a!==c)throw new Error("arrays of points and scalars must have equal length");const u=n.ZERO,h=bitLen(BigInt(a));let m=1;h>12?m=h-3:h>4?m=h-2:h>0&&(m=2);const g=bitMask(m),_=new Array(Number(g)+1).fill(u),b=Math.floor((e.BITS-1)/m)*m;let T=u;for(let A=b;A>=0;A-=m){_.fill(u);for(let w=0;w<c;w++){const D=o[w],fn=Number(D>>BigInt(A)&g);_[fn]=_[fn].add(s[w])}let R=u;for(let w=_.length-1,D=u;w>0;w--)D=D.add(_[w]),R=R.add(D);if(T=T.add(R),A!==0)for(let w=0;w<m;w++)T=T.double()}return T}function createField(n,e,s){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return validateField(e),e}else return Field(n,{isLE:s})}function _createCurveFields(n,e,s={},o){if(o===void 0&&(o=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const m of["p","n","h"]){const g=e[m];if(!(typeof g=="bigint"&&g>_0n$2))throw new Error(`CURVE.${m} must be positive bigint`)}const a=createField(e.p,s.Fp,o),c=createField(e.n,s.Fn,o),h=["Gx","Gy","a","b"];for(const m of h)if(!a.isValid(e[m]))throw new Error(`CURVE.${m} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:a,Fn:c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const divNearest=(n,e)=>(n+(n>=0?e:-e)/_2n$1)/e;function _splitEndoScalar(n,e,s){const[[o,a],[c,u]]=e,h=divNearest(u*n,s),m=divNearest(-a*n,s);let g=n-h*o-m*c,_=-h*a-m*u;const b=g<_0n$1,T=_<_0n$1;b&&(g=-g),T&&(_=-_);const A=bitMask(Math.ceil(bitLen(s)/2))+_1n$1;if(g<_0n$1||g>=A||_<_0n$1||_>=A)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:b,k1:g,k2neg:T,k2:_}}function validateSigFormat(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function validateSigOpts(n,e){const s={};for(let o of Object.keys(e))s[o]=n[o]===void 0?e[o]:n[o];return _abool2(s.lowS,"lowS"),_abool2(s.prehash,"prehash"),s.format!==void 0&&validateSigFormat(s.format),s}class DERErr extends Error{constructor(e=""){super(e)}}const DER={Err:DERErr,_tlv:{encode:(n,e)=>{const{Err:s}=DER;if(n<0||n>256)throw new s("tlv.encode: wrong tag");if(e.length&1)throw new s("tlv.encode: unpadded data");const o=e.length/2,a=numberToHexUnpadded(o);if(a.length/2&128)throw new s("tlv.encode: long form length too big");const c=o>127?numberToHexUnpadded(a.length/2|128):"";return numberToHexUnpadded(n)+c+a+e},decode(n,e){const{Err:s}=DER;let o=0;if(n<0||n>256)throw new s("tlv.encode: wrong tag");if(e.length<2||e[o++]!==n)throw new s("tlv.decode: wrong tlv");const a=e[o++],c=!!(a&128);let u=0;if(!c)u=a;else{const m=a&127;if(!m)throw new s("tlv.decode(long): indefinite length not supported");if(m>4)throw new s("tlv.decode(long): byte length is too big");const g=e.subarray(o,o+m);if(g.length!==m)throw new s("tlv.decode: length bytes not complete");if(g[0]===0)throw new s("tlv.decode(long): zero leftmost byte");for(const _ of g)u=u<<8|_;if(o+=m,u<128)throw new s("tlv.decode(long): not minimal encoding")}const h=e.subarray(o,o+u);if(h.length!==u)throw new s("tlv.decode: wrong value length");return{v:h,l:e.subarray(o+u)}}},_int:{encode(n){const{Err:e}=DER;if(n<_0n$1)throw new e("integer: negative integers are not allowed");let s=numberToHexUnpadded(n);if(Number.parseInt(s[0],16)&8&&(s="00"+s),s.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return s},decode(n){const{Err:e}=DER;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return bytesToNumberBE(n)}},toSig(n){const{Err:e,_int:s,_tlv:o}=DER,a=ensureBytes("signature",n),{v:c,l:u}=o.decode(48,a);if(u.length)throw new e("invalid signature: left bytes after parsing");const{v:h,l:m}=o.decode(2,c),{v:g,l:_}=o.decode(2,m);if(_.length)throw new e("invalid signature: left bytes after parsing");return{r:s.decode(h),s:s.decode(g)}},hexFromSig(n){const{_tlv:e,_int:s}=DER,o=e.encode(2,s.encode(n.r)),a=e.encode(2,s.encode(n.s)),c=o+a;return e.encode(48,c)}},_0n$1=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_3n=BigInt(3),_4n=BigInt(4);function _normFnElement(n,e){const{BYTES:s}=n;let o;if(typeof e=="bigint")o=e;else{let a=ensureBytes("private key",e);try{o=n.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${s}, got ${typeof e}`)}}if(!n.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}function weierstrassN(n,e={}){const s=_createCurveFields("weierstrass",n,e),{Fp:o,Fn:a}=s;let c=s.CURVE;const{h:u,n:h}=c;_validateObject(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:m}=e;if(m&&(!o.is0(c.a)||typeof m.beta!="bigint"||!Array.isArray(m.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const g=getWLengths(o,a);function _(){if(!o.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function b(mn,zt,$n){const{x:Sn,y:En}=zt.toAffine(),Cn=o.toBytes(Sn);if(_abool2($n,"isCompressed"),$n){_();const On=!o.isOdd(En);return concatBytes(pprefix(On),Cn)}else return concatBytes(Uint8Array.of(4),Cn,o.toBytes(En))}function T(mn){_abytes2(mn,void 0,"Point");const{publicKey:zt,publicKeyUncompressed:$n}=g,Sn=mn.length,En=mn[0],Cn=mn.subarray(1);if(Sn===zt&&(En===2||En===3)){const On=o.fromBytes(Cn);if(!o.isValid(On))throw new Error("bad point: is not on curve, wrong x");const Fn=w(On);let An;try{An=o.sqrt(Fn)}catch(Ln){const Xn=Ln instanceof Error?": "+Ln.message:"";throw new Error("bad point: is not on curve, sqrt error"+Xn)}_();const Vn=o.isOdd(An);return(En&1)===1!==Vn&&(An=o.neg(An)),{x:On,y:An}}else if(Sn===$n&&En===4){const On=o.BYTES,Fn=o.fromBytes(Cn.subarray(0,On)),An=o.fromBytes(Cn.subarray(On,On*2));if(!D(Fn,An))throw new Error("bad point: is not on curve");return{x:Fn,y:An}}else throw new Error(`bad point: got length ${Sn}, expected compressed=${zt} or uncompressed=${$n}`)}const A=e.toBytes||b,R=e.fromBytes||T;function w(mn){const zt=o.sqr(mn),$n=o.mul(zt,mn);return o.add(o.add($n,o.mul(mn,c.a)),c.b)}function D(mn,zt){const $n=o.sqr(zt),Sn=w(mn);return o.eql($n,Sn)}if(!D(c.Gx,c.Gy))throw new Error("bad curve params: generator point");const fn=o.mul(o.pow(c.a,_3n),_4n),yn=o.mul(o.sqr(c.b),BigInt(27));if(o.is0(o.add(fn,yn)))throw new Error("bad curve params: a or b");function pn(mn,zt,$n=!1){if(!o.isValid(zt)||$n&&o.is0(zt))throw new Error(`bad point coordinate ${mn}`);return zt}function wn(mn){if(!(mn instanceof ln))throw new Error("ProjectivePoint expected")}function V(mn){if(!m||!m.basises)throw new Error("no endo");return _splitEndoScalar(mn,m.basises,a.ORDER)}const bn=memoized((mn,zt)=>{const{X:$n,Y:Sn,Z:En}=mn;if(o.eql(En,o.ONE))return{x:$n,y:Sn};const Cn=mn.is0();zt==null&&(zt=Cn?o.ONE:o.inv(En));const On=o.mul($n,zt),Fn=o.mul(Sn,zt),An=o.mul(En,zt);if(Cn)return{x:o.ZERO,y:o.ZERO};if(!o.eql(An,o.ONE))throw new Error("invZ was invalid");return{x:On,y:Fn}}),wt=memoized(mn=>{if(mn.is0()){if(e.allowInfinityPoint&&!o.is0(mn.Y))return;throw new Error("bad point: ZERO")}const{x:zt,y:$n}=mn.toAffine();if(!o.isValid(zt)||!o.isValid($n))throw new Error("bad point: x or y not field elements");if(!D(zt,$n))throw new Error("bad point: equation left != right");if(!mn.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function jt(mn,zt,$n,Sn,En){return $n=new ln(o.mul($n.X,mn),$n.Y,$n.Z),zt=negateCt(Sn,zt),$n=negateCt(En,$n),zt.add($n)}class ln{constructor(zt,$n,Sn){this.X=pn("x",zt),this.Y=pn("y",$n,!0),this.Z=pn("z",Sn),Object.freeze(this)}static CURVE(){return c}static fromAffine(zt){const{x:$n,y:Sn}=zt||{};if(!zt||!o.isValid($n)||!o.isValid(Sn))throw new Error("invalid affine point");if(zt instanceof ln)throw new Error("projective point not allowed");return o.is0($n)&&o.is0(Sn)?ln.ZERO:new ln($n,Sn,o.ONE)}static fromBytes(zt){const $n=ln.fromAffine(R(_abytes2(zt,void 0,"point")));return $n.assertValidity(),$n}static fromHex(zt){return ln.fromBytes(ensureBytes("pointHex",zt))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(zt=8,$n=!0){return dn.createCache(this,zt),$n||this.multiply(_3n),this}assertValidity(){wt(this)}hasEvenY(){const{y:zt}=this.toAffine();if(!o.isOdd)throw new Error("Field doesn't support isOdd");return!o.isOdd(zt)}equals(zt){wn(zt);const{X:$n,Y:Sn,Z:En}=this,{X:Cn,Y:On,Z:Fn}=zt,An=o.eql(o.mul($n,Fn),o.mul(Cn,En)),Vn=o.eql(o.mul(Sn,Fn),o.mul(On,En));return An&&Vn}negate(){return new ln(this.X,o.neg(this.Y),this.Z)}double(){const{a:zt,b:$n}=c,Sn=o.mul($n,_3n),{X:En,Y:Cn,Z:On}=this;let Fn=o.ZERO,An=o.ZERO,Vn=o.ZERO,Bn=o.mul(En,En),Ln=o.mul(Cn,Cn),Xn=o.mul(On,On),er=o.mul(En,Cn);return er=o.add(er,er),Vn=o.mul(En,On),Vn=o.add(Vn,Vn),Fn=o.mul(zt,Vn),An=o.mul(Sn,Xn),An=o.add(Fn,An),Fn=o.sub(Ln,An),An=o.add(Ln,An),An=o.mul(Fn,An),Fn=o.mul(er,Fn),Vn=o.mul(Sn,Vn),Xn=o.mul(zt,Xn),er=o.sub(Bn,Xn),er=o.mul(zt,er),er=o.add(er,Vn),Vn=o.add(Bn,Bn),Bn=o.add(Vn,Bn),Bn=o.add(Bn,Xn),Bn=o.mul(Bn,er),An=o.add(An,Bn),Xn=o.mul(Cn,On),Xn=o.add(Xn,Xn),Bn=o.mul(Xn,er),Fn=o.sub(Fn,Bn),Vn=o.mul(Xn,Ln),Vn=o.add(Vn,Vn),Vn=o.add(Vn,Vn),new ln(Fn,An,Vn)}add(zt){wn(zt);const{X:$n,Y:Sn,Z:En}=this,{X:Cn,Y:On,Z:Fn}=zt;let An=o.ZERO,Vn=o.ZERO,Bn=o.ZERO;const Ln=c.a,Xn=o.mul(c.b,_3n);let er=o.mul($n,Cn),rr=o.mul(Sn,On),cr=o.mul(En,Fn),ar=o.add($n,Sn),pr=o.add(Cn,On);ar=o.mul(ar,pr),pr=o.add(er,rr),ar=o.sub(ar,pr),pr=o.add($n,En);let _r=o.add(Cn,Fn);return pr=o.mul(pr,_r),_r=o.add(er,cr),pr=o.sub(pr,_r),_r=o.add(Sn,En),An=o.add(On,Fn),_r=o.mul(_r,An),An=o.add(rr,cr),_r=o.sub(_r,An),Bn=o.mul(Ln,pr),An=o.mul(Xn,cr),Bn=o.add(An,Bn),An=o.sub(rr,Bn),Bn=o.add(rr,Bn),Vn=o.mul(An,Bn),rr=o.add(er,er),rr=o.add(rr,er),cr=o.mul(Ln,cr),pr=o.mul(Xn,pr),rr=o.add(rr,cr),cr=o.sub(er,cr),cr=o.mul(Ln,cr),pr=o.add(pr,cr),er=o.mul(rr,pr),Vn=o.add(Vn,er),er=o.mul(_r,pr),An=o.mul(ar,An),An=o.sub(An,er),er=o.mul(ar,rr),Bn=o.mul(_r,Bn),Bn=o.add(Bn,er),new ln(An,Vn,Bn)}subtract(zt){return this.add(zt.negate())}is0(){return this.equals(ln.ZERO)}multiply(zt){const{endo:$n}=e;if(!a.isValidNot0(zt))throw new Error("invalid scalar: out of range");let Sn,En;const Cn=On=>dn.cached(this,On,Fn=>normalizeZ(ln,Fn));if($n){const{k1neg:On,k1:Fn,k2neg:An,k2:Vn}=V(zt),{p:Bn,f:Ln}=Cn(Fn),{p:Xn,f:er}=Cn(Vn);En=Ln.add(er),Sn=jt($n.beta,Bn,Xn,On,An)}else{const{p:On,f:Fn}=Cn(zt);Sn=On,En=Fn}return normalizeZ(ln,[Sn,En])[0]}multiplyUnsafe(zt){const{endo:$n}=e,Sn=this;if(!a.isValid(zt))throw new Error("invalid scalar: out of range");if(zt===_0n$1||Sn.is0())return ln.ZERO;if(zt===_1n$1)return Sn;if(dn.hasCache(this))return this.multiply(zt);if($n){const{k1neg:En,k1:Cn,k2neg:On,k2:Fn}=V(zt),{p1:An,p2:Vn}=mulEndoUnsafe(ln,Sn,Cn,Fn);return jt($n.beta,An,Vn,En,On)}else return dn.unsafe(Sn,zt)}multiplyAndAddUnsafe(zt,$n,Sn){const En=this.multiplyUnsafe($n).add(zt.multiplyUnsafe(Sn));return En.is0()?void 0:En}toAffine(zt){return bn(this,zt)}isTorsionFree(){const{isTorsionFree:zt}=e;return u===_1n$1?!0:zt?zt(ln,this):dn.unsafe(this,h).is0()}clearCofactor(){const{clearCofactor:zt}=e;return u===_1n$1?this:zt?zt(ln,this):this.multiplyUnsafe(u)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}toBytes(zt=!0){return _abool2(zt,"isCompressed"),this.assertValidity(),A(ln,this,zt)}toHex(zt=!0){return bytesToHex(this.toBytes(zt))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(zt=!0){return this.toBytes(zt)}_setWindowSize(zt){this.precompute(zt)}static normalizeZ(zt){return normalizeZ(ln,zt)}static msm(zt,$n){return pippenger(ln,a,zt,$n)}static fromPrivateKey(zt){return ln.BASE.multiply(_normFnElement(a,zt))}}ln.BASE=new ln(c.Gx,c.Gy,o.ONE),ln.ZERO=new ln(o.ZERO,o.ONE,o.ZERO),ln.Fp=o,ln.Fn=a;const vn=a.BITS,dn=new wNAF(ln,e.endo?Math.ceil(vn/2):vn);return ln.BASE.precompute(8),ln}function pprefix(n){return Uint8Array.of(n?2:3)}function getWLengths(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function ecdh(n,e={}){const{Fn:s}=n,o=e.randomBytes||randomBytes,a=Object.assign(getWLengths(n.Fp,s),{seed:getMinHashLength(s.ORDER)});function c(A){try{return!!_normFnElement(s,A)}catch{return!1}}function u(A,R){const{publicKey:w,publicKeyUncompressed:D}=a;try{const fn=A.length;return R===!0&&fn!==w||R===!1&&fn!==D?!1:!!n.fromBytes(A)}catch{return!1}}function h(A=o(a.seed)){return mapHashToField(_abytes2(A,a.seed,"seed"),s.ORDER)}function m(A,R=!0){return n.BASE.multiply(_normFnElement(s,A)).toBytes(R)}function g(A){const R=h(A);return{secretKey:R,publicKey:m(R)}}function _(A){if(typeof A=="bigint")return!1;if(A instanceof n)return!0;const{secretKey:R,publicKey:w,publicKeyUncompressed:D}=a;if(s.allowedLengths||R===w)return;const fn=ensureBytes("key",A).length;return fn===w||fn===D}function b(A,R,w=!0){if(_(A)===!0)throw new Error("first arg must be private key");if(_(R)===!1)throw new Error("second arg must be public key");const D=_normFnElement(s,A);return n.fromHex(R).multiply(D).toBytes(w)}return Object.freeze({getPublicKey:m,getSharedSecret:b,keygen:g,Point:n,utils:{isValidSecretKey:c,isValidPublicKey:u,randomSecretKey:h,isValidPrivateKey:c,randomPrivateKey:h,normPrivateKeyToScalar:A=>_normFnElement(s,A),precompute(A=8,R=n.BASE){return R.precompute(A,!1)}},lengths:a})}function ecdsa(n,e,s={}){ahash(e),_validateObject(s,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const o=s.randomBytes||randomBytes,a=s.hmac||(($n,...Sn)=>hmac(e,$n,concatBytes(...Sn))),{Fp:c,Fn:u}=n,{ORDER:h,BITS:m}=u,{keygen:g,getPublicKey:_,getSharedSecret:b,utils:T,lengths:A}=ecdh(n,s),R={prehash:!1,lowS:typeof s.lowS=="boolean"?s.lowS:!1,format:void 0,extraEntropy:!1},w="compact";function D($n){const Sn=h>>_1n$1;return $n>Sn}function fn($n,Sn){if(!u.isValidNot0(Sn))throw new Error(`invalid signature ${$n}: out of range 1..Point.Fn.ORDER`);return Sn}function yn($n,Sn){validateSigFormat(Sn);const En=A.signature,Cn=Sn==="compact"?En:Sn==="recovered"?En+1:void 0;return _abytes2($n,Cn,`${Sn} signature`)}class pn{constructor(Sn,En,Cn){this.r=fn("r",Sn),this.s=fn("s",En),Cn!=null&&(this.recovery=Cn),Object.freeze(this)}static fromBytes(Sn,En=w){yn(Sn,En);let Cn;if(En==="der"){const{r:Vn,s:Bn}=DER.toSig(_abytes2(Sn));return new pn(Vn,Bn)}En==="recovered"&&(Cn=Sn[0],En="compact",Sn=Sn.subarray(1));const On=u.BYTES,Fn=Sn.subarray(0,On),An=Sn.subarray(On,On*2);return new pn(u.fromBytes(Fn),u.fromBytes(An),Cn)}static fromHex(Sn,En){return this.fromBytes(hexToBytes(Sn),En)}addRecoveryBit(Sn){return new pn(this.r,this.s,Sn)}recoverPublicKey(Sn){const En=c.ORDER,{r:Cn,s:On,recovery:Fn}=this;if(Fn==null||![0,1,2,3].includes(Fn))throw new Error("recovery id invalid");if(h*_2n$1<En&&Fn>1)throw new Error("recovery id is ambiguous for h>1 curve");const Vn=Fn===2||Fn===3?Cn+h:Cn;if(!c.isValid(Vn))throw new Error("recovery id 2 or 3 invalid");const Bn=c.toBytes(Vn),Ln=n.fromBytes(concatBytes(pprefix((Fn&1)===0),Bn)),Xn=u.inv(Vn),er=V(ensureBytes("msgHash",Sn)),rr=u.create(-er*Xn),cr=u.create(On*Xn),ar=n.BASE.multiplyUnsafe(rr).add(Ln.multiplyUnsafe(cr));if(ar.is0())throw new Error("point at infinify");return ar.assertValidity(),ar}hasHighS(){return D(this.s)}toBytes(Sn=w){if(validateSigFormat(Sn),Sn==="der")return hexToBytes(DER.hexFromSig(this));const En=u.toBytes(this.r),Cn=u.toBytes(this.s);if(Sn==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return concatBytes(Uint8Array.of(this.recovery),En,Cn)}return concatBytes(En,Cn)}toHex(Sn){return bytesToHex(this.toBytes(Sn))}assertValidity(){}static fromCompact(Sn){return pn.fromBytes(ensureBytes("sig",Sn),"compact")}static fromDER(Sn){return pn.fromBytes(ensureBytes("sig",Sn),"der")}normalizeS(){return this.hasHighS()?new pn(this.r,u.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return bytesToHex(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return bytesToHex(this.toBytes("compact"))}}const wn=s.bits2int||function(Sn){if(Sn.length>8192)throw new Error("input is too large");const En=bytesToNumberBE(Sn),Cn=Sn.length*8-m;return Cn>0?En>>BigInt(Cn):En},V=s.bits2int_modN||function(Sn){return u.create(wn(Sn))},bn=bitMask(m);function wt($n){return aInRange("num < 2^"+m,$n,_0n$1,bn),u.toBytes($n)}function jt($n,Sn){return _abytes2($n,void 0,"message"),Sn?_abytes2(e($n),void 0,"prehashed message"):$n}function ln($n,Sn,En){if(["recovered","canonical"].some(rr=>rr in En))throw new Error("sign() legacy options not supported");const{lowS:Cn,prehash:On,extraEntropy:Fn}=validateSigOpts(En,R);$n=jt($n,On);const An=V($n),Vn=_normFnElement(u,Sn),Bn=[wt(Vn),wt(An)];if(Fn!=null&&Fn!==!1){const rr=Fn===!0?o(A.secretKey):Fn;Bn.push(ensureBytes("extraEntropy",rr))}const Ln=concatBytes(...Bn),Xn=An;function er(rr){const cr=wn(rr);if(!u.isValidNot0(cr))return;const ar=u.inv(cr),pr=n.BASE.multiply(cr).toAffine(),_r=u.create(pr.x);if(_r===_0n$1)return;const jr=u.create(ar*u.create(Xn+_r*Vn));if(jr===_0n$1)return;let Sr=(pr.x===_r?0:2)|Number(pr.y&_1n$1),Tr=jr;return Cn&&D(jr)&&(Tr=u.neg(jr),Sr^=1),new pn(_r,Tr,Sr)}return{seed:Ln,k2sig:er}}function vn($n,Sn,En={}){$n=ensureBytes("message",$n);const{seed:Cn,k2sig:On}=ln($n,Sn,En);return createHmacDrbg(e.outputLen,u.BYTES,a)(Cn,On)}function dn($n){let Sn;const En=typeof $n=="string"||isBytes($n),Cn=!En&&$n!==null&&typeof $n=="object"&&typeof $n.r=="bigint"&&typeof $n.s=="bigint";if(!En&&!Cn)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(Cn)Sn=new pn($n.r,$n.s);else if(En){try{Sn=pn.fromBytes(ensureBytes("sig",$n),"der")}catch(On){if(!(On instanceof DER.Err))throw On}if(!Sn)try{Sn=pn.fromBytes(ensureBytes("sig",$n),"compact")}catch{return!1}}return Sn||!1}function mn($n,Sn,En,Cn={}){const{lowS:On,prehash:Fn,format:An}=validateSigOpts(Cn,R);if(En=ensureBytes("publicKey",En),Sn=jt(ensureBytes("message",Sn),Fn),"strict"in Cn)throw new Error("options.strict was renamed to lowS");const Vn=An===void 0?dn($n):pn.fromBytes(ensureBytes("sig",$n),An);if(Vn===!1)return!1;try{const Bn=n.fromBytes(En);if(On&&Vn.hasHighS())return!1;const{r:Ln,s:Xn}=Vn,er=V(Sn),rr=u.inv(Xn),cr=u.create(er*rr),ar=u.create(Ln*rr),pr=n.BASE.multiplyUnsafe(cr).add(Bn.multiplyUnsafe(ar));return pr.is0()?!1:u.create(pr.x)===Ln}catch{return!1}}function zt($n,Sn,En={}){const{prehash:Cn}=validateSigOpts(En,R);return Sn=jt(Sn,Cn),pn.fromBytes($n,"recovered").recoverPublicKey(Sn).toBytes()}return Object.freeze({keygen:g,getPublicKey:_,getSharedSecret:b,utils:T,lengths:A,Point:n,sign:vn,verify:mn,recoverPublicKey:zt,Signature:pn,hash:e})}function _weierstrass_legacy_opts_to_new(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},s=n.Fp;let o=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(u=>Math.ceil(u/2)))):void 0;const a=Field(e.n,{BITS:n.nBitLength,allowedLengths:o,modFromBytes:n.wrapPrivateKey}),c={Fp:s,Fn:a,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:c}}function _ecdsa_legacy_opts_to_new(n){const{CURVE:e,curveOpts:s}=_weierstrass_legacy_opts_to_new(n),o={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:s,hash:n.hash,ecdsaOpts:o}}function _ecdsa_new_output_to_legacy(n,e){const s=e.Point;return Object.assign({},e,{ProjectivePoint:s,CURVE:Object.assign({},n,nLength(s.Fn.ORDER,s.Fn.BITS))})}function weierstrass(n){const{CURVE:e,curveOpts:s,hash:o,ecdsaOpts:a}=_ecdsa_legacy_opts_to_new(n),c=weierstrassN(e,s),u=ecdsa(c,o,a);return _ecdsa_new_output_to_legacy(n,u)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function createCurve(n,e){const s=o=>weierstrass({...n,hash:o});return{...s(e),create:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1_CURVE={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},secp256k1_ENDO={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},_0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2);function sqrtMod(n){const e=secp256k1_CURVE.p,s=BigInt(3),o=BigInt(6),a=BigInt(11),c=BigInt(22),u=BigInt(23),h=BigInt(44),m=BigInt(88),g=n*n*n%e,_=g*g*n%e,b=pow2(_,s,e)*_%e,T=pow2(b,s,e)*_%e,A=pow2(T,_2n,e)*g%e,R=pow2(A,a,e)*A%e,w=pow2(R,c,e)*R%e,D=pow2(w,h,e)*w%e,fn=pow2(D,m,e)*D%e,yn=pow2(fn,h,e)*w%e,pn=pow2(yn,s,e)*_%e,wn=pow2(pn,u,e)*R%e,V=pow2(wn,o,e)*g%e,bn=pow2(V,_2n,e);if(!Fpk1.eql(Fpk1.sqr(bn),n))throw new Error("Cannot find square root");return bn}const Fpk1=Field(secp256k1_CURVE.p,{sqrt:sqrtMod}),secp256k1=createCurve({...secp256k1_CURVE,Fp:Fpk1,lowS:!0,endo:secp256k1_ENDO},sha256$1),TAGGED_HASH_PREFIXES={};function taggedHash(n,...e){let s=TAGGED_HASH_PREFIXES[n];if(s===void 0){const o=sha256$1(utf8ToBytes(n));s=concatBytes(o,o),TAGGED_HASH_PREFIXES[n]=s}return sha256$1(concatBytes(s,...e))}const pointToBytes=n=>n.toBytes(!0).slice(1),Pointk1=secp256k1.Point,hasEven=n=>n%_2n===_0n;function schnorrGetExtPubKey(n){const{Fn:e,BASE:s}=Pointk1,o=_normFnElement(e,n),a=s.multiply(o);return{scalar:hasEven(a.y)?o:e.neg(o),bytes:pointToBytes(a)}}function lift_x(n){const e=Fpk1;if(!e.isValidNot0(n))throw new Error("invalid x: Fail if x  p");const s=e.create(n*n),o=e.create(s*n+BigInt(7));let a=e.sqrt(o);hasEven(a)||(a=e.neg(a));const c=Pointk1.fromAffine({x:n,y:a});return c.assertValidity(),c}const num=bytesToNumberBE;function challenge(...n){return Pointk1.Fn.create(num(taggedHash("BIP0340/challenge",...n)))}function schnorrGetPublicKey(n){return schnorrGetExtPubKey(n).bytes}function schnorrSign(n,e,s=randomBytes(32)){const{Fn:o}=Pointk1,a=ensureBytes("message",n),{bytes:c,scalar:u}=schnorrGetExtPubKey(e),h=ensureBytes("auxRand",s,32),m=o.toBytes(u^num(taggedHash("BIP0340/aux",h))),g=taggedHash("BIP0340/nonce",m,c,a),{bytes:_,scalar:b}=schnorrGetExtPubKey(g),T=challenge(_,c,a),A=new Uint8Array(64);if(A.set(_,0),A.set(o.toBytes(o.create(b+T*u)),32),!schnorrVerify(A,a,c))throw new Error("sign: Invalid signature produced");return A}function schnorrVerify(n,e,s){const{Fn:o,BASE:a}=Pointk1,c=ensureBytes("signature",n,64),u=ensureBytes("message",e),h=ensureBytes("publicKey",s,32);try{const m=lift_x(num(h)),g=num(c.subarray(0,32));if(!inRange(g,_1n,secp256k1_CURVE.p))return!1;const _=num(c.subarray(32,64));if(!inRange(_,_1n,secp256k1_CURVE.n))return!1;const b=challenge(o.toBytes(g),pointToBytes(m),u),T=a.multiplyUnsafe(_).add(m.multiplyUnsafe(o.neg(b))),{x:A,y:R}=T.toAffine();return!(T.is0()||!hasEven(R)||A!==g)}catch{return!1}}const schnorr=(()=>{const s=(a=randomBytes(48))=>mapHashToField(a,secp256k1_CURVE.n);secp256k1.utils.randomSecretKey;function o(a){const c=s(a);return{secretKey:c,publicKey:schnorrGetPublicKey(c)}}return{keygen:o,getPublicKey:schnorrGetPublicKey,sign:schnorrSign,verify:schnorrVerify,Point:Pointk1,utils:{randomSecretKey:s,randomPrivateKey:s,taggedHash,lift_x,pointToBytes,numberToBytesBE,bytesToNumberBE,mod},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})(),sha256=sha256$1;var dist={},LRUCache={},LRUCacheNode={},hasRequiredLRUCacheNode;function requireLRUCacheNode(){if(hasRequiredLRUCacheNode)return LRUCacheNode;hasRequiredLRUCacheNode=1,Object.defineProperty(LRUCacheNode,"__esModule",{value:!0}),LRUCacheNode.LRUCacheNode=void 0;let n=class{constructor(s,o,a){const{entryExpirationTimeInMS:c=null,next:u=null,prev:h=null,onEntryEvicted:m,onEntryMarkedAsMostRecentlyUsed:g,clone:_,cloneFn:b}=a??{};if(typeof c=="number"&&(c<=0||Number.isNaN(c)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=_??!1,this.cloneFn=b??this.defaultClone,this.key=s,this.internalValue=this.clone?this.cloneFn(o):o,this.created=Date.now(),this.entryExpirationTimeInMS=c,this.next=u,this.prev=h,this.onEntryEvicted=m,this.onEntryMarkedAsMostRecentlyUsed=g}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return typeof this.entryExpirationTimeInMS=="number"&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){const{key:s,value:o,isExpired:a}=this;this.onEntryEvicted({key:s,value:o,isExpired:a})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){const{key:s,value:o}=this;this.onEntryMarkedAsMostRecentlyUsed({key:s,value:o})}}defaultClone(s){return typeof s=="boolean"||typeof s=="string"||typeof s=="number"?s:JSON.parse(JSON.stringify(s))}};return LRUCacheNode.LRUCacheNode=n,LRUCacheNode}var hasRequiredLRUCache;function requireLRUCache(){if(hasRequiredLRUCache)return LRUCache;hasRequiredLRUCache=1,Object.defineProperty(LRUCache,"__esModule",{value:!0}),LRUCache.LRUCache=void 0;const n=requireLRUCacheNode();let e=class{constructor(o){this.lookupTable=new Map,this.head=null,this.tail=null;const{maxSize:a=25,entryExpirationTimeInMS:c=null,onEntryEvicted:u,onEntryMarkedAsMostRecentlyUsed:h,cloneFn:m,clone:g}=o??{};if(Number.isNaN(a)||a<=0)throw new Error("maxSize must be greater than 0.");if(typeof c=="number"&&(c<=0||Number.isNaN(c)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=a,this.entryExpirationTimeInMS=c,this.onEntryEvicted=u,this.onEntryMarkedAsMostRecentlyUsed=h,this.clone=g,this.cloneFn=m}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(o){if(Number.isNaN(o)||o<=0)throw new Error("maxSize must be greater than 0.");this.maxSizeInternal=o,this.enforceSizeLimit()}set(o,a,c){const u=this.lookupTable.get(o);u&&this.removeNodeFromListAndLookupTable(u);const h=new n.LRUCacheNode(o,a,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...c});return this.setNodeAsHead(h),this.lookupTable.set(o,h),this.enforceSizeLimit(),this}get(o){const a=this.lookupTable.get(o);return a?a.isExpired?(this.removeNodeFromListAndLookupTable(a),null):(this.setNodeAsHead(a),a.value):null}peek(o){const a=this.lookupTable.get(o);return a?a.isExpired?(this.removeNodeFromListAndLookupTable(a),null):a.value:null}delete(o){const a=this.lookupTable.get(o);return a?this.removeNodeFromListAndLookupTable(a):!1}has(o){const a=this.lookupTable.get(o);return a?a.isExpired?(this.removeNodeFromListAndLookupTable(a),!1):!0:!1}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(o){let a=this.head;for(;a;){if(a.isExpired){const u=a.next;this.removeNodeFromListAndLookupTable(a),a=u;continue}const c=this.mapNodeToEntry(a);if(o(c))return this.setNodeAsHead(a),c;a=a.next}return null}forEach(o){let a=this.head,c=0;for(;a;){if(a.isExpired){const u=a.next;this.removeNodeFromListAndLookupTable(a),a=u;continue}o(a.value,a.key,c),a=a.next,c++}}*values(){let o=this.head;for(;o;){if(o.isExpired){const a=o.next;this.removeNodeFromListAndLookupTable(o),o=a;continue}yield o.value,o=o.next}}*keys(){let o=this.head;for(;o;){if(o.isExpired){const a=o.next;this.removeNodeFromListAndLookupTable(o),o=a;continue}yield o.key,o=o.next}}*entries(){let o=this.head;for(;o;){if(o.isExpired){const a=o.next;this.removeNodeFromListAndLookupTable(o),o=a;continue}yield this.mapNodeToEntry(o),o=o.next}}*[Symbol.iterator](){let o=this.head;for(;o;){if(o.isExpired){const a=o.next;this.removeNodeFromListAndLookupTable(o),o=a;continue}yield this.mapNodeToEntry(o),o=o.next}}enforceSizeLimit(){let o=this.tail;for(;o!==null&&this.size>this.maxSizeInternal;){const a=o.prev;this.removeNodeFromListAndLookupTable(o),o=a}}mapNodeToEntry({key:o,value:a}){return{key:o,value:a}}setNodeAsHead(o){this.removeNodeFromList(o),this.head?(o.next=this.head,this.head.prev=o,this.head=o):(this.head=o,this.tail=o),o.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(o){o.prev!==null&&(o.prev.next=o.next),o.next!==null&&(o.next.prev=o.prev),this.head===o&&(this.head=o.next),this.tail===o&&(this.tail=o.prev),o.next=null,o.prev=null}removeNodeFromListAndLookupTable(o){return o.invokeOnEvicted(),this.removeNodeFromList(o),this.lookupTable.delete(o.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;const o=[];for(const a of this.lookupTable.values())a.isExpired&&o.push(a);o.forEach(a=>this.removeNodeFromListAndLookupTable(a))}};return LRUCache.LRUCache=e,LRUCache}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(n){var e=dist&&dist.__createBinding||(Object.create?(function(o,a,c,u){u===void 0&&(u=c);var h=Object.getOwnPropertyDescriptor(a,c);(!h||("get"in h?!a.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,u,h)}):(function(o,a,c,u){u===void 0&&(u=c),o[u]=a[c]})),s=dist&&dist.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)};Object.defineProperty(n,"__esModule",{value:!0}),s(requireLRUCache(),n)})(dist)),dist}var distExports=requireDist(),lib={},hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(n){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(n,"__esModule",{value:!0}),n.bytes=n.stringToBytes=n.str=n.bytesToString=n.hex=n.utf8=n.bech32m=n.bech32=n.base58check=n.base58xmr=n.base58xrp=n.base58flickr=n.base58=n.base64url=n.base64=n.base32crockford=n.base32hex=n.base32=n.base16=n.utils=n.assertNumber=void 0;function e(dn){if(!Number.isSafeInteger(dn))throw new Error(`Wrong integer: ${dn}`)}n.assertNumber=e;function s(...dn){const mn=(Sn,En)=>Cn=>Sn(En(Cn)),zt=Array.from(dn).reverse().reduce((Sn,En)=>Sn?mn(Sn,En.encode):En.encode,void 0),$n=dn.reduce((Sn,En)=>Sn?mn(Sn,En.decode):En.decode,void 0);return{encode:zt,decode:$n}}function o(dn){return{encode:mn=>{if(!Array.isArray(mn)||mn.length&&typeof mn[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return mn.map(zt=>{if(e(zt),zt<0||zt>=dn.length)throw new Error(`Digit index outside alphabet: ${zt} (alphabet: ${dn.length})`);return dn[zt]})},decode:mn=>{if(!Array.isArray(mn)||mn.length&&typeof mn[0]!="string")throw new Error("alphabet.decode input should be array of strings");return mn.map(zt=>{if(typeof zt!="string")throw new Error(`alphabet.decode: not string element=${zt}`);const $n=dn.indexOf(zt);if($n===-1)throw new Error(`Unknown letter: "${zt}". Allowed: ${dn}`);return $n})}}}function a(dn=""){if(typeof dn!="string")throw new Error("join separator should be string");return{encode:mn=>{if(!Array.isArray(mn)||mn.length&&typeof mn[0]!="string")throw new Error("join.encode input should be array of strings");for(let zt of mn)if(typeof zt!="string")throw new Error(`join.encode: non-string input=${zt}`);return mn.join(dn)},decode:mn=>{if(typeof mn!="string")throw new Error("join.decode input should be string");return mn.split(dn)}}}function c(dn,mn="="){if(e(dn),typeof mn!="string")throw new Error("padding chr should be string");return{encode(zt){if(!Array.isArray(zt)||zt.length&&typeof zt[0]!="string")throw new Error("padding.encode input should be array of strings");for(let $n of zt)if(typeof $n!="string")throw new Error(`padding.encode: non-string input=${$n}`);for(;zt.length*dn%8;)zt.push(mn);return zt},decode(zt){if(!Array.isArray(zt)||zt.length&&typeof zt[0]!="string")throw new Error("padding.encode input should be array of strings");for(let Sn of zt)if(typeof Sn!="string")throw new Error(`padding.decode: non-string input=${Sn}`);let $n=zt.length;if($n*dn%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;$n>0&&zt[$n-1]===mn;$n--)if(!(($n-1)*dn%8))throw new Error("Invalid padding: string has too much padding");return zt.slice(0,$n)}}}function u(dn){if(typeof dn!="function")throw new Error("normalize fn should be function");return{encode:mn=>mn,decode:mn=>dn(mn)}}function h(dn,mn,zt){if(mn<2)throw new Error(`convertRadix: wrong from=${mn}, base cannot be less than 2`);if(zt<2)throw new Error(`convertRadix: wrong to=${zt}, base cannot be less than 2`);if(!Array.isArray(dn))throw new Error("convertRadix: data should be array");if(!dn.length)return[];let $n=0;const Sn=[],En=Array.from(dn);for(En.forEach(Cn=>{if(e(Cn),Cn<0||Cn>=mn)throw new Error(`Wrong integer: ${Cn}`)});;){let Cn=0,On=!0;for(let Fn=$n;Fn<En.length;Fn++){const An=En[Fn],Vn=mn*Cn+An;if(!Number.isSafeInteger(Vn)||mn*Cn/mn!==Cn||Vn-An!==mn*Cn)throw new Error("convertRadix: carry overflow");if(Cn=Vn%zt,En[Fn]=Math.floor(Vn/zt),!Number.isSafeInteger(En[Fn])||En[Fn]*zt+Cn!==Vn)throw new Error("convertRadix: carry overflow");if(On)En[Fn]?On=!1:$n=Fn;else continue}if(Sn.push(Cn),On)break}for(let Cn=0;Cn<dn.length-1&&dn[Cn]===0;Cn++)Sn.push(0);return Sn.reverse()}const m=(dn,mn)=>mn?m(mn,dn%mn):dn,g=(dn,mn)=>dn+(mn-m(dn,mn));function _(dn,mn,zt,$n){if(!Array.isArray(dn))throw new Error("convertRadix2: data should be array");if(mn<=0||mn>32)throw new Error(`convertRadix2: wrong from=${mn}`);if(zt<=0||zt>32)throw new Error(`convertRadix2: wrong to=${zt}`);if(g(mn,zt)>32)throw new Error(`convertRadix2: carry overflow from=${mn} to=${zt} carryBits=${g(mn,zt)}`);let Sn=0,En=0;const Cn=2**zt-1,On=[];for(const Fn of dn){if(e(Fn),Fn>=2**mn)throw new Error(`convertRadix2: invalid data word=${Fn} from=${mn}`);if(Sn=Sn<<mn|Fn,En+mn>32)throw new Error(`convertRadix2: carry overflow pos=${En} from=${mn}`);for(En+=mn;En>=zt;En-=zt)On.push((Sn>>En-zt&Cn)>>>0);Sn&=2**En-1}if(Sn=Sn<<zt-En&Cn,!$n&&En>=mn)throw new Error("Excess padding");if(!$n&&Sn)throw new Error(`Non-zero padding: ${Sn}`);return $n&&En>0&&On.push(Sn>>>0),On}function b(dn){return e(dn),{encode:mn=>{if(!(mn instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return h(Array.from(mn),2**8,dn)},decode:mn=>{if(!Array.isArray(mn)||mn.length&&typeof mn[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(h(mn,dn,2**8))}}}function T(dn,mn=!1){if(e(dn),dn<=0||dn>32)throw new Error("radix2: bits should be in (0..32]");if(g(8,dn)>32||g(dn,8)>32)throw new Error("radix2: carry overflow");return{encode:zt=>{if(!(zt instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return _(Array.from(zt),8,dn,!mn)},decode:zt=>{if(!Array.isArray(zt)||zt.length&&typeof zt[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(_(zt,dn,8,mn))}}}function A(dn){if(typeof dn!="function")throw new Error("unsafeWrapper fn should be function");return function(...mn){try{return dn.apply(null,mn)}catch{}}}function R(dn,mn){if(e(dn),typeof mn!="function")throw new Error("checksum fn should be function");return{encode(zt){if(!(zt instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const $n=mn(zt).slice(0,dn),Sn=new Uint8Array(zt.length+dn);return Sn.set(zt),Sn.set($n,zt.length),Sn},decode(zt){if(!(zt instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const $n=zt.slice(0,-dn),Sn=mn($n).slice(0,dn),En=zt.slice(-dn);for(let Cn=0;Cn<dn;Cn++)if(Sn[Cn]!==En[Cn])throw new Error("Invalid checksum");return $n}}}n.utils={alphabet:o,chain:s,checksum:R,radix:b,radix2:T,join:a,padding:c},n.base16=s(T(4),o("0123456789ABCDEF"),a("")),n.base32=s(T(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),c(5),a("")),n.base32hex=s(T(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),c(5),a("")),n.base32crockford=s(T(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),a(""),u(dn=>dn.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),n.base64=s(T(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),c(6),a("")),n.base64url=s(T(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),c(6),a(""));const w=dn=>s(b(58),o(dn),a(""));n.base58=w("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),n.base58flickr=w("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),n.base58xrp=w("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const D=[0,2,3,5,6,7,9,10,11];n.base58xmr={encode(dn){let mn="";for(let zt=0;zt<dn.length;zt+=8){const $n=dn.subarray(zt,zt+8);mn+=n.base58.encode($n).padStart(D[$n.length],"1")}return mn},decode(dn){let mn=[];for(let zt=0;zt<dn.length;zt+=11){const $n=dn.slice(zt,zt+11),Sn=D.indexOf($n.length),En=n.base58.decode($n);for(let Cn=0;Cn<En.length-Sn;Cn++)if(En[Cn]!==0)throw new Error("base58xmr: wrong padding");mn=mn.concat(Array.from(En.slice(En.length-Sn)))}return Uint8Array.from(mn)}};const fn=dn=>s(R(4,mn=>dn(dn(mn))),n.base58);n.base58check=fn;const yn=s(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),a("")),pn=[996825010,642813549,513874426,1027748829,705979059];function wn(dn){const mn=dn>>25;let zt=(dn&33554431)<<5;for(let $n=0;$n<pn.length;$n++)(mn>>$n&1)===1&&(zt^=pn[$n]);return zt}function V(dn,mn,zt=1){const $n=dn.length;let Sn=1;for(let En=0;En<$n;En++){const Cn=dn.charCodeAt(En);if(Cn<33||Cn>126)throw new Error(`Invalid prefix (${dn})`);Sn=wn(Sn)^Cn>>5}Sn=wn(Sn);for(let En=0;En<$n;En++)Sn=wn(Sn)^dn.charCodeAt(En)&31;for(let En of mn)Sn=wn(Sn)^En;for(let En=0;En<6;En++)Sn=wn(Sn);return Sn^=zt,yn.encode(_([Sn%2**30],30,5,!1))}function bn(dn){const mn=dn==="bech32"?1:734539939,zt=T(5),$n=zt.decode,Sn=zt.encode,En=A($n);function Cn(Vn,Bn,Ln=90){if(typeof Vn!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof Vn}`);if(!Array.isArray(Bn)||Bn.length&&typeof Bn[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof Bn}`);const Xn=Vn.length+7+Bn.length;if(Ln!==!1&&Xn>Ln)throw new TypeError(`Length ${Xn} exceeds limit ${Ln}`);return Vn=Vn.toLowerCase(),`${Vn}1${yn.encode(Bn)}${V(Vn,Bn,mn)}`}function On(Vn,Bn=90){if(typeof Vn!="string")throw new Error(`bech32.decode input should be string, not ${typeof Vn}`);if(Vn.length<8||Bn!==!1&&Vn.length>Bn)throw new TypeError(`Wrong string length: ${Vn.length} (${Vn}). Expected (8..${Bn})`);const Ln=Vn.toLowerCase();if(Vn!==Ln&&Vn!==Vn.toUpperCase())throw new Error("String must be lowercase or uppercase");Vn=Ln;const Xn=Vn.lastIndexOf("1");if(Xn===0||Xn===-1)throw new Error('Letter "1" must be present between prefix and data only');const er=Vn.slice(0,Xn),rr=Vn.slice(Xn+1);if(rr.length<6)throw new Error("Data must be at least 6 characters long");const cr=yn.decode(rr).slice(0,-6),ar=V(er,cr,mn);if(!rr.endsWith(ar))throw new Error(`Invalid checksum in ${Vn}: expected "${ar}"`);return{prefix:er,words:cr}}const Fn=A(On);function An(Vn){const{prefix:Bn,words:Ln}=On(Vn,!1);return{prefix:Bn,words:Ln,bytes:$n(Ln)}}return{encode:Cn,decode:On,decodeToBytes:An,decodeUnsafe:Fn,fromWords:$n,fromWordsUnsafe:En,toWords:Sn}}n.bech32=bn("bech32"),n.bech32m=bn("bech32m"),n.utf8={encode:dn=>new TextDecoder().decode(dn),decode:dn=>new TextEncoder().encode(dn)},n.hex=s(T(4),o("0123456789abcdef"),a(""),u(dn=>{if(typeof dn!="string"||dn.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof dn} with length ${dn.length}`);return dn.toLowerCase()}));const wt={utf8:n.utf8,hex:n.hex,base16:n.base16,base32:n.base32,base64:n.base64,base64url:n.base64url,base58:n.base58,base58xmr:n.base58xmr},jt=`Invalid encoding type. Available types: ${Object.keys(wt).join(", ")}`,ln=(dn,mn)=>{if(typeof dn!="string"||!wt.hasOwnProperty(dn))throw new TypeError(jt);if(!(mn instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return wt[dn].encode(mn)};n.bytesToString=ln,n.str=n.bytesToString;const vn=(dn,mn)=>{if(!wt.hasOwnProperty(dn))throw new TypeError(jt);if(typeof mn!="string")throw new TypeError("stringToBytes() expects string");return wt[dn].decode(mn)};n.stringToBytes=vn,n.bytes=n.stringToBytes})(lib)),lib}var bolt11,hasRequiredBolt11;function requireBolt11(){if(hasRequiredBolt11)return bolt11;hasRequiredBolt11=1;const{bech32:n,hex:e,utf8:s}=requireLib(),o={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},a={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},c={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},u={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},h={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},m=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],g={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},_=BigInt("2100000000000000000"),b=BigInt(1e11),T={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},A={};for(let V=0,bn=Object.keys(T);V<bn.length;V++){const wt=bn[V],jt=T[bn[V]].toString();A[jt]=wt}const R={1:V=>e.encode(n.fromWordsUnsafe(V)),16:V=>e.encode(n.fromWordsUnsafe(V)),13:V=>s.encode(n.fromWordsUnsafe(V)),19:V=>e.encode(n.fromWordsUnsafe(V)),23:V=>e.encode(n.fromWordsUnsafe(V)),27:V=>e.encode(n.fromWordsUnsafe(V)),6:D,24:D,3:fn,5:yn};function w(V){return bn=>({tagCode:parseInt(V),words:n.encode("unknown",bn,Number.MAX_SAFE_INTEGER)})}function D(V){return V.reverse().reduce((bn,wt,jt)=>bn+wt*Math.pow(32,jt),0)}function fn(V){const bn=[];let wt,jt,ln,vn,dn,mn=n.fromWordsUnsafe(V);for(;mn.length>0;)wt=e.encode(mn.slice(0,33)),jt=e.encode(mn.slice(33,41)),ln=parseInt(e.encode(mn.slice(41,45)),16),vn=parseInt(e.encode(mn.slice(45,49)),16),dn=parseInt(e.encode(mn.slice(49,51)),16),mn=mn.slice(51),bn.push({pubkey:wt,short_channel_id:jt,fee_base_msat:ln,fee_proportional_millionths:vn,cltv_expiry_delta:dn});return bn}function yn(V){const bn=V.slice().reverse().map(ln=>[!!(ln&1),!!(ln&2),!!(ln&4),!!(ln&8),!!(ln&16)]).reduce((ln,vn)=>ln.concat(vn),[]);for(;bn.length<m.length*2;)bn.push(!1);const wt={};m.forEach((ln,vn)=>{let dn;bn[vn*2]?dn="required":bn[vn*2+1]?dn="supported":dn="unsupported",wt[ln]=dn});const jt=bn.slice(m.length*2);return wt.extra_bits={start_bit:m.length*2,bits:jt,has_required:jt.reduce((ln,vn,dn)=>dn%2!==0?ln||!1:ln||vn,!1)},wt}function pn(V,bn){let wt,jt;if(V.slice(-1).match(/^[munp]$/))wt=V.slice(-1),jt=V.slice(0,-1);else{if(V.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");jt=V}if(!jt.match(/^\d+$/))throw new Error("Not a valid human readable amount");const ln=BigInt(jt),vn=wt?ln*b/g[wt]:ln*b;if(wt==="p"&&ln%BigInt(10)!==BigInt(0)||vn>_)throw new Error("Amount is outside of valid range");return bn?vn.toString():vn}function wn(V,bn){if(typeof V!="string")throw new Error("Lightning Payment Request must be string");if(V.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const wt=[],jt=n.decode(V,Number.MAX_SAFE_INTEGER);V=V.toLowerCase();const ln=jt.prefix;let vn=jt.words,dn=V.slice(ln.length+1),mn=vn.slice(-104);vn=vn.slice(0,-104);let zt=ln.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(zt&&!zt[2]&&(zt=ln.match(/^ln(\S+)$/)),!zt)throw new Error("Not a proper lightning payment request");wt.push({name:"lightning_network",letters:"ln"});const $n=zt[1];let Sn;if(bn){if(bn.bech32===void 0||bn.pubKeyHash===void 0||bn.scriptHash===void 0||!Array.isArray(bn.validWitnessVersions))throw new Error("Invalid network");Sn=bn}else switch($n){case o.bech32:Sn=o;break;case a.bech32:Sn=a;break;case c.bech32:Sn=c;break;case u.bech32:Sn=u;break;case h.bech32:Sn=h;break}if(!Sn||Sn.bech32!==$n)throw new Error("Unknown coin bech32 prefix");wt.push({name:"coin_network",letters:$n,value:Sn});const En=zt[2];let Cn;if(En){const er=zt[3];Cn=pn(En+er,!0),wt.push({name:"amount",letters:zt[2]+zt[3],value:Cn})}else Cn=null;wt.push({name:"separator",letters:"1"});const On=D(vn.slice(0,7));vn=vn.slice(7),wt.push({name:"timestamp",letters:dn.slice(0,7),value:On}),dn=dn.slice(7);let Fn,An,Vn,Bn;for(;vn.length>0;){const er=vn[0].toString();Fn=A[er]||"unknown_tag",An=R[er]||w(er),vn=vn.slice(1),Vn=D(vn.slice(0,2)),vn=vn.slice(2),Bn=vn.slice(0,Vn),vn=vn.slice(Vn),wt.push({name:Fn,tag:dn[0],letters:dn.slice(0,3+Vn),value:An(Bn)}),dn=dn.slice(3+Vn)}wt.push({name:"signature",letters:dn.slice(0,104),value:e.encode(n.fromWordsUnsafe(mn))}),dn=dn.slice(104),wt.push({name:"checksum",letters:dn});let Ln={paymentRequest:V,sections:wt,get expiry(){let er=wt.find(rr=>rr.name==="expiry");if(er)return Xn("timestamp")+er.value},get route_hints(){return wt.filter(er=>er.name==="route_hint").map(er=>er.value)}};for(let er in T)er!=="route_hint"&&Object.defineProperty(Ln,er,{get(){return Xn(er)}});return Ln;function Xn(er){let rr=wt.find(cr=>cr.name===er);return rr?rr.value:void 0}}return bolt11={decode:wn,hrpToMillisat:pn},bolt11}requireBolt11();var NDKKind=(n=>(n[n.Metadata=0]="Metadata",n[n.Text=1]="Text",n[n.RecommendRelay=2]="RecommendRelay",n[n.Contacts=3]="Contacts",n[n.EncryptedDirectMessage=4]="EncryptedDirectMessage",n[n.EventDeletion=5]="EventDeletion",n[n.Repost=6]="Repost",n[n.Reaction=7]="Reaction",n[n.BadgeAward=8]="BadgeAward",n[n.GroupChat=9]="GroupChat",n[n.GroupNote=11]="GroupNote",n[n.GroupReply=12]="GroupReply",n[n.GiftWrapSeal=13]="GiftWrapSeal",n[n.PrivateDirectMessage=14]="PrivateDirectMessage",n[n.Image=20]="Image",n[n.Video=21]="Video",n[n.ShortVideo=22]="ShortVideo",n[n.Story=23]="Story",n[n.Vanish=62]="Vanish",n[n.CashuWalletBackup=375]="CashuWalletBackup",n[n.GiftWrap=1059]="GiftWrap",n[n.GenericRepost=16]="GenericRepost",n[n.ChannelCreation=40]="ChannelCreation",n[n.ChannelMetadata=41]="ChannelMetadata",n[n.ChannelMessage=42]="ChannelMessage",n[n.ChannelHideMessage=43]="ChannelHideMessage",n[n.ChannelMuteUser=44]="ChannelMuteUser",n[n.WikiMergeRequest=818]="WikiMergeRequest",n[n.GenericReply=1111]="GenericReply",n[n.Media=1063]="Media",n[n.Report=1984]="Report",n[n.Label=1985]="Label",n[n.DVMReqTextExtraction=5e3]="DVMReqTextExtraction",n[n.DVMReqTextSummarization=5001]="DVMReqTextSummarization",n[n.DVMReqTextTranslation=5002]="DVMReqTextTranslation",n[n.DVMReqTextGeneration=5050]="DVMReqTextGeneration",n[n.DVMReqImageGeneration=5100]="DVMReqImageGeneration",n[n.DVMReqTextToSpeech=5250]="DVMReqTextToSpeech",n[n.DVMReqDiscoveryNostrContent=5300]="DVMReqDiscoveryNostrContent",n[n.DVMReqDiscoveryNostrPeople=5301]="DVMReqDiscoveryNostrPeople",n[n.DVMReqTimestamping=5900]="DVMReqTimestamping",n[n.DVMEventSchedule=5905]="DVMEventSchedule",n[n.DVMJobFeedback=7e3]="DVMJobFeedback",n[n.Subscribe=7001]="Subscribe",n[n.Unsubscribe=7002]="Unsubscribe",n[n.SubscriptionReceipt=7003]="SubscriptionReceipt",n[n.CashuReserve=7373]="CashuReserve",n[n.CashuQuote=7374]="CashuQuote",n[n.CashuToken=7375]="CashuToken",n[n.CashuWalletTx=7376]="CashuWalletTx",n[n.GroupAdminAddUser=9e3]="GroupAdminAddUser",n[n.GroupAdminRemoveUser=9001]="GroupAdminRemoveUser",n[n.GroupAdminEditMetadata=9002]="GroupAdminEditMetadata",n[n.GroupAdminEditStatus=9006]="GroupAdminEditStatus",n[n.GroupAdminCreateGroup=9007]="GroupAdminCreateGroup",n[n.GroupAdminRequestJoin=9021]="GroupAdminRequestJoin",n[n.MuteList=1e4]="MuteList",n[n.PinList=10001]="PinList",n[n.RelayList=10002]="RelayList",n[n.BookmarkList=10003]="BookmarkList",n[n.CommunityList=10004]="CommunityList",n[n.PublicChatList=10005]="PublicChatList",n[n.BlockRelayList=10006]="BlockRelayList",n[n.SearchRelayList=10007]="SearchRelayList",n[n.SimpleGroupList=10009]="SimpleGroupList",n[n.InterestList=10015]="InterestList",n[n.CashuMintList=10019]="CashuMintList",n[n.EmojiList=10030]="EmojiList",n[n.DirectMessageReceiveRelayList=10050]="DirectMessageReceiveRelayList",n[n.BlossomList=10063]="BlossomList",n[n.NostrWaletConnectInfo=13194]="NostrWaletConnectInfo",n[n.TierList=17e3]="TierList",n[n.CashuWallet=17375]="CashuWallet",n[n.FollowSet=3e4]="FollowSet",n[n.CategorizedPeopleList=3e4]="CategorizedPeopleList",n[n.CategorizedBookmarkList=30001]="CategorizedBookmarkList",n[n.RelaySet=30002]="RelaySet",n[n.CategorizedRelayList=30002]="CategorizedRelayList",n[n.BookmarkSet=30003]="BookmarkSet",n[n.CurationSet=30004]="CurationSet",n[n.ArticleCurationSet=30004]="ArticleCurationSet",n[n.VideoCurationSet=30005]="VideoCurationSet",n[n.ImageCurationSet=30006]="ImageCurationSet",n[n.InterestSet=30015]="InterestSet",n[n.InterestsList=30015]="InterestsList",n[n.EmojiSet=30030]="EmojiSet",n[n.ModularArticle=30040]="ModularArticle",n[n.ModularArticleItem=30041]="ModularArticleItem",n[n.Wiki=30818]="Wiki",n[n.Draft=31234]="Draft",n[n.SubscriptionTier=37001]="SubscriptionTier",n[n.EcashMintRecommendation=38e3]="EcashMintRecommendation",n[n.HighlightSet=39802]="HighlightSet",n[n.CategorizedHighlightList=39802]="CategorizedHighlightList",n[n.Nutzap=9321]="Nutzap",n[n.ZapRequest=9734]="ZapRequest",n[n.Zap=9735]="Zap",n[n.Highlight=9802]="Highlight",n[n.ClientAuth=22242]="ClientAuth",n[n.NostrWalletConnectReq=23194]="NostrWalletConnectReq",n[n.NostrWalletConnectRes=23195]="NostrWalletConnectRes",n[n.NostrConnect=24133]="NostrConnect",n[n.BlossomUpload=24242]="BlossomUpload",n[n.HttpAuth=27235]="HttpAuth",n[n.ProfileBadge=30008]="ProfileBadge",n[n.BadgeDefinition=30009]="BadgeDefinition",n[n.MarketStall=30017]="MarketStall",n[n.MarketProduct=30018]="MarketProduct",n[n.Article=30023]="Article",n[n.AppSpecificData=30078]="AppSpecificData",n[n.Classified=30402]="Classified",n[n.HorizontalVideo=34235]="HorizontalVideo",n[n.VerticalVideo=34236]="VerticalVideo",n[n.LegacyCashuWallet=37375]="LegacyCashuWallet",n[n.GroupMetadata=39e3]="GroupMetadata",n[n.GroupAdmins=39001]="GroupAdmins",n[n.GroupMembers=39002]="GroupMembers",n[n.AppRecommendation=31989]="AppRecommendation",n[n.AppHandler=31990]="AppHandler",n))(NDKKind||{});function getRelaysForSync(n,e,s="write"){if(!n.outboxTracker)return;const o=n.outboxTracker.data.get(e);if(o)return s==="write"?o.writeRelays:o.readRelays}async function getWriteRelaysFor(n,e,s="write"){if(n.outboxTracker)return n.outboxTracker.data.has(e)||await n.outboxTracker.trackUsers([e]),getRelaysForSync(n,e,s)}function getTopRelaysForAuthors(n,e){const s=new Map;return e.forEach(a=>{const c=getRelaysForSync(n,a);c&&c.forEach(u=>{const h=s.get(u)||0;s.set(u,h+1)})}),Array.from(s.entries()).sort((a,c)=>c[1]-a[1]).map(a=>a[0])}function getAllRelaysForAllPubkeys(n,e,s="read"){const o=new Map,a=new Set;return e.forEach(c=>{const u=getRelaysForSync(n,c,s);u&&u.size>0?(u.forEach(h=>{(o.get(h)||new Set).add(c)}),o.set(c,u)):a.add(c)}),{pubkeysToRelays:o,authorsMissingRelays:a}}function chooseRelayCombinationForPubkeys(n,e,s,{count:o,preferredRelays:a}={}){o??=2,a??=new Set;const c=n.pool,u=c.connectedRelays();u.forEach(T=>{a?.add(T.url)});const h=new Map,{pubkeysToRelays:m,authorsMissingRelays:g}=getAllRelaysForAllPubkeys(n,e,s),_=getTopRelaysForAuthors(n,e),b=(T,A)=>{const R=h.get(A)||[];R.push(T),h.set(A,R)};for(const[T,A]of m.entries()){let R=o;for(const w of u)A.has(w.url)&&(b(T,w.url),R--);for(const w of A)h.has(w)&&(b(T,w),R--);if(!(R<=0))for(const w of _){if(R<=0)break;A.has(w)&&(b(T,w),R--)}}for(const T of g)c.permanentAndConnectedRelays().forEach(A=>{const R=h.get(A.url)||[];R.push(T),h.set(A.url,R)});return h}function getRelaysForFilterWithAuthors(n,e,s=2){return chooseRelayCombinationForPubkeys(n,e,"write",{count:s})}function tryNormalizeRelayUrl(n){try{return normalizeRelayUrl(n)}catch{return}}function normalizeRelayUrl(n){let e=normalizeUrl(n,{stripAuthentication:!1,stripWWW:!1,stripHash:!0});return e.endsWith("/")||(e+="/"),e}function normalize(n){const e=new Set;for(const s of n)try{e.add(normalizeRelayUrl(s))}catch{}return Array.from(e)}var DATA_URL_DEFAULT_MIME_TYPE="text/plain",DATA_URL_DEFAULT_CHARSET="us-ascii",testParameter=(n,e)=>e.some(s=>s instanceof RegExp?s.test(n):s===n),supportedProtocols=new Set(["https:","http:","file:"]),hasCustomProtocol=n=>{try{const{protocol:e}=new URL(n);return e.endsWith(":")&&!e.includes(".")&&!supportedProtocols.has(e)}catch{return!1}},normalizeDataURL=(n,{stripHash:e})=>{const s=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(n);if(!s)throw new Error(`Invalid URL: ${n}`);const o=s.groups?.type??"",a=s.groups?.data??"";let c=s.groups?.hash??"";const u=o.split(";");c=e?"":c;let h=!1;u[u.length-1]==="base64"&&(u.pop(),h=!0);const m=u.shift()?.toLowerCase()??"",_=[...u.map(b=>{let[T,A=""]=b.split("=").map(R=>R.trim());return T==="charset"&&(A=A.toLowerCase(),A===DATA_URL_DEFAULT_CHARSET)?"":`${T}${A?`=${A}`:""}`}).filter(Boolean)];return h&&_.push("base64"),(_.length>0||m&&m!==DATA_URL_DEFAULT_MIME_TYPE)&&_.unshift(m),`data:${_.join(";")},${h?a.trim():a}${c?`#${c}`:""}`};function normalizeUrl(n,e={}){if(e={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...e},typeof e.defaultProtocol=="string"&&!e.defaultProtocol.endsWith(":")&&(e.defaultProtocol=`${e.defaultProtocol}:`),n=n.trim(),/^data:/i.test(n))return normalizeDataURL(n,e);if(hasCustomProtocol(n))return n;const s=n.startsWith("//");!s&&/^\.*\//.test(n)||(n=n.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));const a=new URL(n);if(a.hostname=a.hostname.toLowerCase(),e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&a.protocol==="https:"&&(a.protocol="http:"),e.forceHttps&&a.protocol==="http:"&&(a.protocol="https:"),e.stripAuthentication&&(a.username="",a.password=""),e.stripHash?a.hash="":e.stripTextFragment&&(a.hash=a.hash.replace(/#?:~:text.*?$/i,"")),a.pathname){const u=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let h=0,m="";for(;;){const _=u.exec(a.pathname);if(!_)break;const b=_[0],T=_.index,A=a.pathname.slice(h,T);m+=A.replace(/\/{2,}/g,"/"),m+=b,h=T+b.length}const g=a.pathname.slice(h,a.pathname.length);m+=g.replace(/\/{2,}/g,"/"),a.pathname=m}if(a.pathname)try{a.pathname=decodeURI(a.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let u=a.pathname.split("/");const h=u[u.length-1];testParameter(h,e.removeDirectoryIndex)&&(u=u.slice(0,-1),a.pathname=`${u.slice(1).join("/")}/`)}if(a.hostname&&(a.hostname=a.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(a.hostname)&&(a.hostname=a.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(const u of[...a.searchParams.keys()])testParameter(u,e.removeQueryParameters)&&a.searchParams.delete(u);if(!Array.isArray(e.keepQueryParameters)&&e.removeQueryParameters===!0&&(a.search=""),Array.isArray(e.keepQueryParameters)&&e.keepQueryParameters.length>0)for(const u of[...a.searchParams.keys()])testParameter(u,e.keepQueryParameters)||a.searchParams.delete(u);if(e.sortQueryParameters){a.searchParams.sort();try{a.search=decodeURIComponent(a.search)}catch{}}e.removeTrailingSlash&&(a.pathname=a.pathname.replace(/\/$/,"")),e.removeExplicitPort&&a.port&&(a.port="");const c=n;return n=a.toString(),!e.removeSingleSlash&&a.pathname==="/"&&!c.endsWith("/")&&a.hash===""&&(n=n.replace(/\/$/,"")),(e.removeTrailingSlash||a.pathname==="/")&&a.hash===""&&e.removeSingleSlash&&(n=n.replace(/\/$/,"")),s&&!e.normalizeProtocol&&(n=n.replace(/^http:\/\//,"//")),e.stripProtocol&&(n=n.replace(/^(?:https?:)?\/\//,"")),n}var MAX_RECONNECT_ATTEMPTS=5,FLAPPING_THRESHOLD_MS=1e3,NDKRelayConnectivity=class{ndkRelay;ws;_status;timeoutMs;connectedAt;_connectionStats={attempts:0,success:0,durations:[]};debug;netDebug;connectTimeout;reconnectTimeout;ndk;openSubs=new Map;openCountRequests=new Map;openEventPublishes=new Map;serial=0;baseEoseTimeout=4400;constructor(n,e){this.ndkRelay=n,this._status=1;const s=Math.floor(Math.random()*1e3);this.debug=this.ndkRelay.debug.extend(`connectivity${s}`),this.ndk=e}async connect(n,e=!0){if(this._status!==2&&this._status!==1||this.reconnectTimeout){this.debug("Relay requested to be connected but was in state %s or it had a reconnect timeout",this._status);return}this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),n??=this.timeoutMs,!this.timeoutMs&&n&&(this.timeoutMs=n),this.timeoutMs&&(this.connectTimeout=setTimeout(()=>this.onConnectionError(e),this.timeoutMs));try{this.updateConnectionStats.attempt(),this._status===1?this._status=4:this._status=2,this.ws=new WebSocket(this.ndkRelay.url),this.ws.onopen=this.onConnect.bind(this),this.ws.onclose=this.onDisconnect.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=this.onError.bind(this)}catch(s){throw this.debug(`Failed to connect to ${this.ndkRelay.url}`,s),this._status=1,e?this.handleReconnection():this.ndkRelay.emit("delayed-connect",2880*60*1e3),s}}disconnect(){this._status=0;try{this.ws?.close()}catch(n){this.debug("Failed to disconnect",n),this._status=1}}onConnectionError(n){this.debug(`Error connecting to ${this.ndkRelay.url}`,this.timeoutMs),n&&!this.reconnectTimeout&&this.handleReconnection()}onConnect(){this.netDebug?.("connected",this.ndkRelay),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.updateConnectionStats.connected(),this._status=5,this.ndkRelay.emit("connect"),this.ndkRelay.emit("ready")}onDisconnect(){this.netDebug?.("disconnected",this.ndkRelay),this.updateConnectionStats.disconnected(),this._status===5&&this.handleReconnection(),this._status=1,this.ndkRelay.emit("disconnect")}onMessage(n){this.netDebug?.(n.data,this.ndkRelay,"recv");try{const e=JSON.parse(n.data),[s,o,...a]=e;switch(s){case"EVENT":{const c=this.openSubs.get(o),u=e[2];if(!c){this.debug(`Received event for unknown subscription ${o}`);return}c.onevent(u);return}case"COUNT":{const c=e[2],u=this.openCountRequests.get(o);u&&(u.resolve(c.count),this.openCountRequests.delete(o));return}case"EOSE":{const c=this.openSubs.get(o);if(!c)return;c.oneose(o);return}case"OK":{const c=e[2],u=e[3],h=this.openEventPublishes.get(o),m=h?.pop();if(!h||!m){this.debug("Received OK for unknown event publish",o);return}c?m.resolve(u):m.reject(new Error(u)),h.length===0?this.openEventPublishes.delete(o):this.openEventPublishes.set(o,h);return}case"CLOSED":{const c=this.openSubs.get(o);if(!c)return;c.onclosed(e[2]);return}case"NOTICE":this.onNotice(e[1]);return;case"AUTH":{this.onAuthRequested(e[1]);return}}}catch(e){this.debug(`Error parsing message from ${this.ndkRelay.url}: ${e.message}`,e?.stack);return}}async onAuthRequested(n){const e=this.ndkRelay.authPolicy??this.ndk?.relayAuthDefaultPolicy;if(this.debug("Relay requested authentication",{havePolicy:!!e}),this._status===7){this.debug("Already authenticating, ignoring");return}if(this._status=6,e){if(this._status>=5){this._status=7;let s;try{s=await e(this.ndkRelay,n)}catch(o){this.debug("Authentication policy threw an error",o),s=!1}if(this.debug("Authentication policy returned",!!s),s instanceof NDKEvent||s===!0){s instanceof NDKEvent&&await this.auth(s);const o=async()=>{if(this._status>=5&&this._status<8){const a=new NDKEvent(this.ndk);a.kind=22242,a.tags=[["relay",this.ndkRelay.url],["challenge",n]],await a.sign(),this.auth(a).then(()=>{this._status=8,this.ndkRelay.emit("authed"),this.debug("Authentication successful")}).catch(c=>{this._status=6,this.ndkRelay.emit("auth:failed",c),this.debug("Authentication failed",c)})}else this.debug("Authentication failed, it changed status, status is %d",this._status)};s===!0&&(this.ndk?.signer?o().catch(a=>{console.error("Error authenticating",a)}):(this.debug("No signer available for authentication localhost"),this.ndk?.once("signer:ready",o))),this._status=5,this.ndkRelay.emit("authed")}}}else this.ndkRelay.emit("auth",n)}onError(n){this.debug(`WebSocket error on ${this.ndkRelay.url}:`,n)}get status(){return this._status}isAvailable(){return this._status===5}isFlapping(){const n=this._connectionStats.durations;if(n.length%3!==0)return!1;const s=n.reduce((u,h)=>u+h,0)/n.length,o=n.map(u=>(u-s)**2).reduce((u,h)=>u+h,0)/n.length;return Math.sqrt(o)<FLAPPING_THRESHOLD_MS}async onNotice(n){this.ndkRelay.emit("notice",n)}handleReconnection(n=0){if(this.reconnectTimeout)return;if(this.isFlapping()){this.ndkRelay.emit("flapping",this._connectionStats),this._status=3;return}const e=this.connectedAt?Math.max(0,6e4-(Date.now()-this.connectedAt)):5e3*(this._connectionStats.attempts+1);this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=void 0,this._status=2,this.connect().catch(s=>{n<MAX_RECONNECT_ATTEMPTS?setTimeout(()=>{this.handleReconnection(n+1)},1e3*(n+1)^4):this.debug("Reconnect failed")})},e),this.ndkRelay.emit("delayed-connect",e),this.debug("Reconnecting in",e),this._connectionStats.nextReconnectAt=Date.now()+e}async send(n){this._status>=5&&this.ws?.readyState===WebSocket.OPEN?(this.ws?.send(n),this.netDebug?.(n,this.ndkRelay,"send")):this.debug(`Not connected to ${this.ndkRelay.url} (%d), not sending message ${n}`,this._status)}async auth(n){const e=new Promise((s,o)=>{const a=this.openEventPublishes.get(n.id)??[];a.push({resolve:s,reject:o}),this.openEventPublishes.set(n.id,a)});return this.send(`["AUTH",${JSON.stringify(n.rawEvent())}]`),e}async publish(n){const e=new Promise((s,o)=>{const a=this.openEventPublishes.get(n.id)??[];a.length>0&&console.warn(`Duplicate event publishing detected, you are publishing event ${n.id} twice`),a.push({resolve:s,reject:o}),this.openEventPublishes.set(n.id,a)});return this.send(`["EVENT",${JSON.stringify(n)}]`),e}async count(n,e){this.serial++;const s=e?.id||`count:${this.serial}`,o=new Promise((a,c)=>{this.openCountRequests.set(s,{resolve:a,reject:c})});return this.send(`["COUNT","${s}",${JSON.stringify(n).substring(1)}`),o}close(n,e){this.send(`["CLOSE","${n}"]`);const s=this.openSubs.get(n);this.openSubs.delete(n),s&&s.onclose(e)}req(n){`${this.send(`["REQ","${n.subId}",${JSON.stringify(n.executeFilters).substring(1)}`)}`,this.openSubs.set(n.subId,n)}updateConnectionStats={connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++,this._connectionStats.connectedAt=Date.now()}};get connectionStats(){return this._connectionStats}get url(){return this.ndkRelay.url}get connected(){return this._status>=5&&this.ws?.readyState===WebSocket.OPEN}},NDKRelayPublisher=class{ndkRelay;debug;constructor(n){this.ndkRelay=n,this.debug=n.debug.extend("publisher")}async publish(n,e=2500){let s;const o=()=>new Promise((_,b)=>{try{this.publishEvent(n).then(T=>{this.ndkRelay.emit("published",n),n.emit("relay:published",this.ndkRelay),_(!0)}).catch(b)}catch(T){b(T)}}),a=new Promise((_,b)=>{s=setTimeout(()=>{s=void 0,b(new Error(`Timeout: ${e}ms`))},e)}),c=()=>{o().then(_=>u(_)).catch(_=>h(_))};let u,h;const m=_=>{throw this.ndkRelay.debug("Publish failed",_,n.id),this.ndkRelay.emit("publish:failed",n,_),n.emit("relay:publish:failed",this.ndkRelay,_),_},g=()=>{s&&clearTimeout(s),this.ndkRelay.removeListener("connect",c)};return this.ndkRelay.status>=5?Promise.race([o(),a]).catch(m).finally(g):(this.ndkRelay.status<=1?(console.warn("Relay is disconnected, trying to connect to publish an event",this.ndkRelay.url),this.ndkRelay.connect()):console.warn("Relay not connected, waiting for connection to publish an event",this.ndkRelay.url),Promise.race([new Promise((_,b)=>{u=_,h=b,this.ndkRelay.on("connect",c)}),a]).catch(m).finally(g))}async publishEvent(n){return this.ndkRelay.connectivity.publish(n.rawEvent())}};function filterFingerprint(n,e){const s=[];for(const a of n){const c=Object.entries(a||{}).map(([u,h])=>["since","until"].includes(u)?`${u}:${h}`:u).sort().join("-");s.push(c)}let o=e?"+":"";return o+=s.join("|"),o}function mergeFilters(n){const e=[],s={};return n.filter(o=>!!o.limit).forEach(o=>e.push(o)),n=n.filter(o=>!o.limit),n.length===0?e:(n.forEach(o=>{Object.entries(o).forEach(([a,c])=>{Array.isArray(c)?s[a]===void 0?s[a]=[...c]:s[a]=Array.from(new Set([...s[a],...c])):s[a]=c})}),[...e,s])}var NDKRelaySubscription=class{fingerprint;items=new Map;topSubManager;debug;status=0;onClose;relay;eosed=!1;executionTimer;fireTime;delayType;executeFilters;id=Math.random().toString(36).substring(7);constructor(n,e,s){this.relay=n,this.topSubManager=s,this.debug=n.debug.extend(`sub[${this.id}]`),this.fingerprint=e||Math.random().toString(36).substring(7)}_subId;get subId(){return this._subId?this._subId:(this._subId=this.fingerprint.slice(0,15),this._subId)}subIdParts=new Set;addSubIdPart(n){this.subIdParts.add(n)}addItem(n,e){if(this.debug("Adding item",{filters:e,internalId:n.internalId,status:this.status,fingerprint:this.fingerprint,id:this.subId,items:this.items,itemsSize:this.items.size}),!this.items.has(n.internalId))switch(n.on("close",this.removeItem.bind(this,n)),this.items.set(n.internalId,{subscription:n,filters:e}),this.status!==3&&n.subId&&(!this._subId||this._subId.length<48)&&(this.status===0||this.status===1)&&this.addSubIdPart(n.subId),this.status){case 0:this.evaluateExecutionPlan(n);break;case 3:break;case 1:this.evaluateExecutionPlan(n);break;case 4:throw this.debug("Subscription is closed, cannot add new items %o (%o)",n,e),new Error("Cannot add new items to a closed subscription")}}removeItem(n){if(this.items.delete(n.internalId),this.items.size===0){if(!this.eosed)return;this.close(),this.cleanup()}}close(){if(this.status===4)return;const n=this.status;if(this.status=4,n===3)try{this.relay.close(this.subId)}catch(e){this.debug("Error closing subscription",e,this)}else this.debug("Subscription wanted to close but it wasn't running, this is probably ok",{subId:this.subId,prevStatus:n,sub:this});this.cleanup()}cleanup(){this.executionTimer&&clearTimeout(this.executionTimer),this.relay.off("ready",this.executeOnRelayReady),this.relay.off("authed",this.reExecuteAfterAuth),this.onClose&&this.onClose(this)}evaluateExecutionPlan(n){if(!n.isGroupable()){this.status=1,this.execute();return}if(n.filters.find(o=>!!o.limit)&&(this.executeFilters=this.compileFilters(),this.executeFilters.length>=10)){this.status=1,this.execute();return}const e=n.groupableDelay,s=n.groupableDelayType;if(!e)throw new Error("Cannot group a subscription without a delay");if(this.status===0)this.schedule(e,s);else{const o=this.delayType,a=this.fireTime-Date.now();if(o==="at-least"&&s==="at-least")a<e&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(e,s));else if(o==="at-least"&&s==="at-most")a>e&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(e,s));else if(o==="at-most"&&s==="at-most")a>e&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(e,s));else if(o==="at-most"&&s==="at-least")a>e&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(e,s));else throw new Error(`Unknown delay type combination ${o} ${s}`)}}schedule(n,e){this.status=1;const s=Date.now();this.fireTime=s+n,this.delayType=e;const o=setTimeout(this.execute.bind(this),n);e==="at-least"&&(this.executionTimer=o)}executeOnRelayReady=()=>{if(this.status===2){if(this.items.size===0){this.debug("No items to execute; this relay was probably too slow to respond and the caller gave up",{status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size,id:this.id,subId:this.subId}),this.cleanup();return}this.debug("Executing on relay ready",{status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.status=1,this.execute()}};finalizeSubId(){this.subIdParts.size>0?this._subId=Array.from(this.subIdParts).join("-"):this._subId=this.fingerprint.slice(0,15),this._subId+=`-${Math.random().toString(36).substring(2,7)}`}reExecuteAfterAuth=(()=>{const n=this.subId;this.debug("Re-executing after auth",this.items.size),this.eosed?this.relay.close(this.subId):this.debug("We are abandoning an opened subscription, once it EOSE's, the handler will close it",{oldSubId:n}),this._subId=void 0,this.status=1,this.execute(),this.debug("Re-executed after auth %s  %s",n,this.subId)}).bind(this);execute(){if(this.status===1){if(!this.relay.connected){this.status=2,this.debug("Waiting for relay to be ready",{status:this.status,id:this.subId,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.relay.once("ready",this.executeOnRelayReady);return}this.relay.status<8&&this.relay.once("authed",this.reExecuteAfterAuth),this.status=3,this.finalizeSubId(),this.executeFilters=this.compileFilters(),this.relay.req(this)}}onstart(){}onevent(n){this.topSubManager.dispatchEvent(n,this.relay)}oneose(n){if(this.eosed=!0,n!==this.subId){this.debug("Received EOSE for an abandoned subscription",n,this.subId),this.relay.close(n);return}this.items.size===0&&this.close();for(const{subscription:e}of this.items.values())e.eoseReceived(this.relay),e.closeOnEose&&(this.debug("Removing item because of EOSE",{filters:e.filters,internalId:e.internalId,status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.removeItem(e))}onclose(n){this.status=4}onclosed(n){if(n)for(const{subscription:e}of this.items.values())e.closedReceived(this.relay,n)}compileFilters(){const n=[],e=Array.from(this.items.values()).map(o=>o.filters);if(!e[0])return this.debug(" No filters to merge",this.items),console.error("BUG: No filters to merge!",this.items),[];const s=e[0].length;for(let o=0;o<s;o++){const a=e.map(c=>c[o]);n.push(...mergeFilters(a))}return n}},NDKRelaySubscriptionManager=class{relay;subscriptions;generalSubManager;constructor(n,e){this.relay=n,this.subscriptions=new Map,this.generalSubManager=e}addSubscription(n,e){let s;if(!n.isGroupable())s=this.createSubscription(n,e);else{const o=filterFingerprint(e,n.closeOnEose);o&&(s=(this.subscriptions.get(o)||[]).find(c=>c.status<3)),s??=this.createSubscription(n,e,o)}s.addItem(n,e)}createSubscription(n,e,s){const o=new NDKRelaySubscription(this.relay,s||null,this.generalSubManager);o.onClose=this.onRelaySubscriptionClose.bind(this);const a=this.subscriptions.get(o.fingerprint)??[];return this.subscriptions.set(o.fingerprint,[...a,o]),o}onRelaySubscriptionClose(n){let e=this.subscriptions.get(n.fingerprint)??[];e?e.length===1?this.subscriptions.delete(n.fingerprint):(e=e.filter(s=>s.id!==n.id),this.subscriptions.set(n.fingerprint,e)):console.warn("Unexpectedly did not find a subscription with fingerprint",n.fingerprint)}},NDKRelay=class xm extends libExports.EventEmitter{url;scores;connectivity;subs;publisher;authPolicy;lowestValidationRatio;targetValidationRatio;validationRatioFn;validatedEventCount=0;nonValidatedEventCount=0;trusted=!1;complaining=!1;debug;static defaultValidationRatioUpdateFn=(e,s,o)=>{if(e.lowestValidationRatio===void 0||e.targetValidationRatio===void 0)return 1;let a=e.validationRatio;if(e.validationRatio>e.targetValidationRatio){const c=s/100;a=Math.max(e.lowestValidationRatio,e.validationRatio-c)}return a<e.validationRatio?a:e.validationRatio};constructor(e,s,o){super(),this.url=normalizeRelayUrl(e),this.scores=new Map,this.debug=createDebug5(`ndk:relay:${e}`),this.connectivity=new NDKRelayConnectivity(this,o),this.connectivity.netDebug=o?.netDebug,this.req=this.connectivity.req.bind(this.connectivity),this.close=this.connectivity.close.bind(this.connectivity),this.subs=new NDKRelaySubscriptionManager(this,o.subManager),this.publisher=new NDKRelayPublisher(this),this.authPolicy=s,this.targetValidationRatio=o?.initialValidationRatio,this.lowestValidationRatio=o?.lowestValidationRatio,this.validationRatioFn=(o?.validationRatioFn??xm.defaultValidationRatioUpdateFn).bind(this),this.updateValidationRatio(),o||console.trace("relay created without ndk")}updateValidationRatio(){if(this.validationRatioFn&&this.validatedEventCount>0){const e=this.validationRatioFn(this,this.validatedEventCount,this.nonValidatedEventCount);this.targetValidationRatio=e}setTimeout(()=>{this.updateValidationRatio()},3e4)}get status(){return this.connectivity.status}get connectionStats(){return this.connectivity.connectionStats}async connect(e,s=!0){return this.connectivity.connect(e,s)}disconnect(){this.status!==1&&this.connectivity.disconnect()}subscribe(e,s){this.subs.addSubscription(e,s)}async publish(e,s=2500){return this.publisher.publish(e,s)}referenceTags(){return[["r",this.url]]}addValidatedEvent(){this.validatedEventCount++}addNonValidatedEvent(){this.nonValidatedEventCount++}get validationRatio(){return this.nonValidatedEventCount===0?1:this.validatedEventCount/(this.validatedEventCount+this.nonValidatedEventCount)}shouldValidateEvent(){return this.trusted?!1:this.targetValidationRatio===void 0||this.targetValidationRatio>=1?!0:Math.random()<this.targetValidationRatio}get connected(){return this.connectivity.connected}req;close},NDKPublishError=class extends Error{errors;publishedToRelays;intendedRelaySet;constructor(n,e,s,o){super(n),this.errors=e,this.publishedToRelays=s,this.intendedRelaySet=o}get relayErrors(){const n=[];for(const[e,s]of this.errors)n.push(`${e.url}: ${s}`);return n.join(`
`)}},NDKRelaySet=class Sm{relays;debug;ndk;pool;constructor(e,s,o){this.relays=e,this.ndk=s,this.pool=o??s.pool,this.debug=s.debug.extend("relayset")}addRelay(e){this.relays.add(e)}get relayUrls(){return Array.from(this.relays).map(e=>e.url)}static fromRelayUrls(e,s,o=!0,a){if(a=a??s.pool,!a)throw new Error("No pool provided");const c=new Set;for(const u of e){const h=a.relays.get(normalizeRelayUrl(u));if(h)h.status<5&&o&&h.connect(),c.add(h);else{const m=new NDKRelay(normalizeRelayUrl(u),s?.relayAuthDefaultPolicy,s);a.useTemporaryRelay(m,void 0,`requested from fromRelayUrls ${e}`),c.add(m)}}return new Sm(new Set(c),s,a)}async publish(e,s,o=1){const a=new Set,c=new Map,u=e.isEphemeral();e.publishStatus="pending";const h=m=>{a.add(m)};e.on("relay:published",h);try{const m=Array.from(this.relays).map(g=>new Promise(_=>{const b=s?setTimeout(()=>{a.has(g)||(c.set(g,new Error(`Publish timeout after ${s}ms`)),_(!1))},s):null;g.publish(e,s).then(T=>{b&&clearTimeout(b),T?(a.add(g),_(!0)):_(!1)}).catch(T=>{b&&clearTimeout(b),u||c.set(g,T),_(!1)})}));if(await Promise.all(m),a.size<o){if(!u){const g=new NDKPublishError("Not enough relays received the event ("+a.size+" published, "+o+" required)",c,a,this);throw e.publishStatus="error",e.publishError=g,this.ndk?.emit("event:publish-failed",e,g,this.relayUrls),g}}else e.publishStatus="success",e.emit("published",{relaySet:this,publishedToRelays:a});return a}finally{e.off("relay:published",h)}}get size(){return this.relays.size}},d=createDebug5("ndk:outbox:calculate");async function calculateRelaySetFromEvent(n,e,s){const o=new Set,a=await getWriteRelaysFor(n,e.pubkey);a&&a.forEach(h=>{const m=n.pool?.getRelay(h);m&&o.add(m)});let c=e.tags.filter(h=>["a","e"].includes(h[0])).map(h=>h[2]).filter(h=>h?.startsWith("wss://")).filter(h=>{try{return new URL(h),!0}catch{return!1}}).map(h=>normalizeRelayUrl(h));c=Array.from(new Set(c)).slice(0,5),c.forEach(h=>{const m=n.pool?.getRelay(h,!0,!0);m&&(d("Adding relay hint %s",h),o.add(m))});const u=e.getMatchingTags("p").map(h=>h[1]);return u.length<5?Array.from(chooseRelayCombinationForPubkeys(n,u,"read",{preferredRelays:new Set(a)}).keys()).forEach(m=>{const g=n.pool?.getRelay(m,!1,!0);g&&(d("Adding p-tagged relay %s",m),o.add(g))}):d("Too many p-tags to consider %d",u.length),n.pool?.permanentAndConnectedRelays().forEach(h=>o.add(h)),s&&o.size<s&&n.explicitRelayUrls?.filter(m=>!Array.from(o).some(g=>g.url===m)).slice(0,s-o.size)?.forEach(m=>{const g=n.pool?.getRelay(m,!1,!0);g&&(d("Adding explicit relay %s",m),o.add(g))}),new NDKRelaySet(o,n)}function calculateRelaySetsFromFilter(n,e,s){const o=new Map,a=new Set;if(e.forEach(c=>{c.authors&&c.authors.forEach(u=>a.add(u))}),a.size>0){const c=getRelaysForFilterWithAuthors(n,Array.from(a));for(const u of c.keys())o.set(u,[]);for(const u of e)if(u.authors)for(const[h,m]of c.entries()){const g=u.authors.filter(_=>m.includes(_));o.set(h,[...o.get(h),{...u,authors:g}])}else for(const h of c.keys())o.set(h,[...o.get(h),u])}else n.explicitRelayUrls&&n.explicitRelayUrls.forEach(c=>{o.set(c,e)});return o.size===0&&s.permanentAndConnectedRelays().slice(0,5).forEach(c=>{o.set(c.url,e)}),o}function calculateRelaySetsFromFilters(n,e,s){return calculateRelaySetsFromFilter(n,e,s)}function mergeTags(n,e){const s=new Map,o=u=>u.join(","),a=(u,h)=>u.every((m,g)=>m===h[g]),c=u=>{for(const[h,m]of s)if(a(m,u)||a(u,m)){u.length>=m.length&&s.set(h,u);return}s.set(o(u),u)};return n.concat(e).forEach(c),Array.from(s.values())}var hashtagRegex=new RegExp(`(?<=\\s|^)(#[^\\s!@#$%^&*()=+./,[{\\]};:'"?><]+)`,"g");function generateHashtags(n){const e=n.match(hashtagRegex),s=new Set,o=new Set;if(e)for(const a of e)s.has(a.slice(1))||(o.add(a.slice(1)),s.add(a.slice(1)));return Array.from(o)}async function generateContentTags(n,e=[]){const s=/(@|nostr:)(npub|nprofile|note|nevent|naddr)[a-zA-Z0-9]+/g,o=[],a=u=>{e.find(h=>["q",u[0]].includes(h[0])&&h[1]===u[1])||e.push(u)};n=n.replace(s,u=>{try{const h=u.split(/(@|nostr:)/)[2],{type:m,data:g}=nip19_exports.decode(h);let _;switch(m){case"npub":_=["p",g];break;case"nprofile":_=["p",g.pubkey];break;case"note":o.push(new Promise(async b=>{a(["q",g,await maybeGetEventRelayUrl(h)]),b()}));break;case"nevent":o.push(new Promise(async b=>{const{id:T,author:A}=g;let{relays:R}=g;(!R||R.length===0)&&(R=[await maybeGetEventRelayUrl(h)]),a(["q",T,R[0]]),A&&a(["p",A]),b()}));break;case"naddr":o.push(new Promise(async b=>{const T=[g.kind,g.pubkey,g.identifier].join(":");let A=g.relays??[];A.length===0&&(A=[await maybeGetEventRelayUrl(h)]),a(["q",T,A[0]]),a(["p",g.pubkey]),b()}));break;default:return u}return _&&a(_),`nostr:${h}`}catch{return u}}),await Promise.all(o);const c=generateHashtags(n).map(u=>["t",u]);return e=mergeTags(e,c),{content:n,tags:e}}async function maybeGetEventRelayUrl(n){return""}async function encrypt(n,e,s="nip44"){let o;if(!this.ndk)throw new Error("No NDK instance found!");let a=e;if(a||(this.ndk.assertSigner(),a=this.ndk.signer),!a)throw new Error("no NDK signer");const c=n||(()=>{const u=this.getMatchingTags("p");if(u.length!==1)throw new Error("No recipient could be determined and no explicit recipient was provided");return this.ndk.getUser({pubkey:u[0][1]})})();if(s==="nip44"&&await isEncryptionEnabled(a,"nip44")&&(o=await a.encrypt(c,this.content,"nip44")),(!o||s==="nip04")&&await isEncryptionEnabled(a,"nip04")&&(o=await a.encrypt(c,this.content,"nip04")),!o)throw new Error("Failed to encrypt event.");this.content=o}async function decrypt(n,e,s){if(this.ndk?.cacheAdapter?.getDecryptedEvent){let h=null;if(typeof this.ndk.cacheAdapter.getDecryptedEvent=="function"&&(h=this.ndk.cacheAdapter.getDecryptedEvent(this.id)),h){this.content=h.content;return}}let o;if(!this.ndk)throw new Error("No NDK instance found!");let a=e;if(a||(this.ndk.assertSigner(),a=this.ndk.signer),!a)throw new Error("no NDK signer");const c=n||this.author;if(!c)throw new Error("No sender provided and no author available");const u=s||(this.content.match(/\\?iv=/)?"nip04":"nip44");if((u==="nip04"||this.kind===4)&&await isEncryptionEnabled(a,"nip04")&&this.content.search("\\?iv=")&&(o=await a.decrypt(c,this.content,"nip04")),!o&&u==="nip44"&&await isEncryptionEnabled(a,"nip44")&&(o=await a.decrypt(c,this.content,"nip44")),!o)throw new Error("Failed to decrypt event.");this.content=o,this.ndk?.cacheAdapter?.addDecryptedEvent&&this.ndk.cacheAdapter.addDecryptedEvent(this)}async function isEncryptionEnabled(n,e){return n.encryptionEnabled?e?!!await n.encryptionEnabled(e):!0:!1}function eventHasETagMarkers(n){for(const e of n.tags)if(e[0]==="e"&&(e[3]??"").length>0)return!0;return!1}function getRootTag(n,e){e??=n.tagType();const s=n.tags.find(isTagRootTag);if(!s){if(eventHasETagMarkers(n))return;const o=n.getMatchingTags(e);if(o.length<3)return o[0]}return s}var nip22RootTags=new Set(["A","E","I"]),nip22ReplyTags=new Set(["a","e","i"]);function getReplyTag(n,e){if(n.kind===1111){let a;for(const c of n.tags)if(nip22RootTags.has(c[0]))a=c;else if(nip22ReplyTags.has(c[0])){a=c;break}return a}e??=n.tagType();let s=!1,o;for(const a of n.tags)if(a[0]===e){if((a[3]??"").length>0&&(s=!0),s&&a[3]==="reply")return a;s&&a[3]==="root"&&(o=a),s||(o=a)}return o}function isTagRootTag(n){return n[0]==="E"||n[3]==="root"}async function fetchTaggedEvent(n,e){if(!this.ndk)throw new Error("NDK instance not found");const s=this.getMatchingTags(n,e);if(s.length===0)return;const[o,a,c]=s[0];let u=c!==""?this.ndk.pool.getRelay(c):void 0;return await this.ndk.fetchEvent(a,{},u)}async function fetchRootEvent(n){if(!this.ndk)throw new Error("NDK instance not found");const e=getRootTag(this);if(e)return this.ndk.fetchEventFromTag(e,this,n)}async function fetchReplyEvent(n){if(!this.ndk)throw new Error("NDK instance not found");const e=getReplyTag(this);if(e)return this.ndk.fetchEventFromTag(e,this,n)}function isReplaceable(){if(this.kind===void 0)throw new Error("Kind not set");return[0,3].includes(this.kind)||this.kind>=1e4&&this.kind<2e4||this.kind>=3e4&&this.kind<4e4}function isEphemeral(){if(this.kind===void 0)throw new Error("Kind not set");return this.kind>=2e4&&this.kind<3e4}function isParamReplaceable(){if(this.kind===void 0)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}var DEFAULT_RELAY_COUNT=2;function encode(n=DEFAULT_RELAY_COUNT){let e=[];return this.onRelays.length>0?e=this.onRelays.map(s=>s.url):this.relay&&(e=[this.relay.url]),e.length>n&&(e=e.slice(0,n)),this.isParamReplaceable()?nip19_exports.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag(),relays:e}):e.length>0?nip19_exports.neventEncode({id:this.tagId(),relays:e,author:this.pubkey}):nip19_exports.noteEncode(this.tagId())}async function repost(n=!0,e){if(!e&&n){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),e=this.ndk.signer}const s=new NDKEvent(this.ndk,{kind:getKind(this)});return this.isProtected||(s.content=JSON.stringify(this.rawEvent())),s.tag(this),this.kind!==1&&s.tags.push(["k",`${this.kind}`]),e&&await s.sign(e),n&&await s.publish(),s}function getKind(n){return n.kind===1?6:16}function serialize(n=!1,e=!1){const s=[0,this.pubkey,this.created_at,this.kind,this.tags,this.content];return n&&s.push(this.sig),e&&s.push(this.id),JSON.stringify(s)}function deserialize(n){const e=JSON.parse(n),s={pubkey:e[1],created_at:e[2],kind:e[3],tags:e[4],content:e[5]};if(e.length>=7){const o=e[6],a=e[7];o&&o.length===128?(s.sig=o,a&&a.length===64&&(s.id=a)):o&&o.length===64&&(s.id=o,a&&a.length===128&&(s.sig=a))}return s}var worker,processingQueue={};function signatureVerificationInit(n){worker=n,worker.onmessage=e=>{const[s,o]=e.data,a=processingQueue[s];if(!a){console.error("No record found for event",s);return}delete processingQueue[s];for(const c of a.resolves)c(o)}}async function verifySignatureAsync(n,e,s){const o=n.ndk,a=Date.now();let c;return o.signatureVerificationFunction?(console.log("[NDK-CORE] Using custom signature verification function async"),c=await o.signatureVerificationFunction(n),console.log("Custom signature verification result",n.id,{result:c})):(console.log("Using worker-based signature verification async"),c=await new Promise(u=>{const h=n.serialize();let m=!1;processingQueue[n.id]||(processingQueue[n.id]={event:n,resolves:[],relay:s},m=!0),processingQueue[n.id].resolves.push(u),m&&worker?.postMessage({serialized:h,id:n.id,sig:n.sig,pubkey:n.pubkey})})),o.signatureVerificationTimeMs+=Date.now()-a,c}var PUBKEY_REGEX=/^[a-f0-9]{64}$/;function validate(){if(typeof this.kind!="number"||typeof this.content!="string"||typeof this.created_at!="number"||typeof this.pubkey!="string"||!this.pubkey.match(PUBKEY_REGEX)||!Array.isArray(this.tags))return!1;for(let n=0;n<this.tags.length;n++){const e=this.tags[n];if(!Array.isArray(e))return!1;for(let s=0;s<e.length;s++)if(typeof e[s]=="object")return!1}return!0}var verifiedSignatures=new distExports.LRUCache({maxSize:1e3,entryExpirationTimeInMS:6e4});function verifySignature(n){if(typeof this.signatureVerified=="boolean")return this.signatureVerified;const e=verifiedSignatures.get(this.id);if(e!==null)return this.signatureVerified=!!e,this.signatureVerified;try{if(this.ndk?.asyncSigVerification)verifySignatureAsync(this,n,this.relay).then(s=>{n&&(this.signatureVerified=s,s&&verifiedSignatures.set(this.id,this.sig)),s||(this.relay?this.ndk?.reportInvalidSignature(this,this.relay):this.ndk?.reportInvalidSignature(this),verifiedSignatures.set(this.id,!1))}).catch(s=>{console.error("signature verification error",this.id,s)});else{const s=sha256(new TextEncoder().encode(this.serialize())),o=schnorr.verify(this.sig,s,this.pubkey);return o?verifiedSignatures.set(this.id,this.sig):verifiedSignatures.set(this.id,!1),this.signatureVerified=o,o}}catch{return this.signatureVerified=!1,!1}}function getEventHash(){return getEventHashFromSerializedEvent(this.serialize())}function getEventHashFromSerializedEvent(n){const e=sha256(new TextEncoder().encode(n));return bytesToHex(e)}var skipClientTagOnKinds=new Set([0,4,1059,13,3,9734,5]),NDKEvent=class Ia extends libExports.EventEmitter{ndk;created_at;content="";tags=[];kind;id="";sig;pubkey="";signatureVerified;_author=void 0;relay;get onRelays(){let e=[];return this.ndk?e=this.ndk.subManager.seenEvents.get(this.id)||[]:this.relay&&e.push(this.relay),e}publishStatus="success";publishError;constructor(e,s){super(),this.ndk=e,this.created_at=s?.created_at,this.content=s?.content||"",this.tags=s?.tags||[],this.id=s?.id||"",this.sig=s?.sig,this.pubkey=s?.pubkey||"",this.kind=s?.kind,s instanceof Ia&&(this.relay&&(this.relay=s.relay,this.ndk?.subManager.seenEvent(s.id,this.relay)),this.publishStatus=s.publishStatus,this.publishError=s.publishError)}static deserialize(e,s){return new Ia(e,deserialize(s))}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(e){this.pubkey=e.pubkey,this._author=e,this._author.ndk??=this.ndk}get author(){if(this._author)return this._author;if(!this.ndk)throw new Error("No NDK instance found");const e=this.ndk.getUser({pubkey:this.pubkey});return this._author=e,e}tagExternal(e,s,o){const a=["i"],c=["k"];switch(s){case"url":{const u=new URL(e);u.hash="",a.push(u.toString()),c.push(`${u.protocol}//${u.host}`);break}case"hashtag":a.push(`#${e.toLowerCase()}`),c.push("#");break;case"geohash":a.push(`geo:${e.toLowerCase()}`),c.push("geo");break;case"isbn":a.push(`isbn:${e.replace(/-/g,"")}`),c.push("isbn");break;case"podcast:guid":a.push(`podcast:guid:${e}`),c.push("podcast:guid");break;case"podcast:item:guid":a.push(`podcast:item:guid:${e}`),c.push("podcast:item:guid");break;case"podcast:publisher:guid":a.push(`podcast:publisher:guid:${e}`),c.push("podcast:publisher:guid");break;case"isan":a.push(`isan:${e.split("-").slice(0,4).join("-")}`),c.push("isan");break;case"doi":a.push(`doi:${e.toLowerCase()}`),c.push("doi");break;default:throw new Error(`Unsupported NIP-73 entity type: ${s}`)}o&&a.push(o),this.tags.push(a),this.tags.push(c)}tag(e,s,o,a){let c=[];if(e.fetchProfile!==void 0){a??="p";const h=[a,e.pubkey];s&&h.push("",s),c.push(h)}else if(e instanceof Ia){const h=e;o??=h?.pubkey===this.pubkey,c=h.referenceTags(s,o,a);for(const m of h.getMatchingTags("p"))m[1]!==this.pubkey&&(this.tags.find(g=>g[0]==="p"&&g[1]===m[1])||this.tags.push(["p",m[1]]))}else if(Array.isArray(e))c=[e];else throw new Error("Invalid argument",e);this.tags=mergeTags(this.tags,c)}async toNostrEvent(e){if(!e&&this.pubkey===""){const a=await this.ndk?.signer?.user();this.pubkey=a?.pubkey||""}this.created_at||(this.created_at=Math.floor(Date.now()/1e3));const{content:s,tags:o}=await this.generateTags();this.content=s||"",this.tags=o;try{this.id=this.getEventHash()}catch{}return this.rawEvent()}serialize=serialize.bind(this);getEventHash=getEventHash.bind(this);validate=validate.bind(this);verifySignature=verifySignature.bind(this);isReplaceable=isReplaceable.bind(this);isEphemeral=isEphemeral.bind(this);isDvm=()=>this.kind&&this.kind>=5e3&&this.kind<=7e3;isParamReplaceable=isParamReplaceable.bind(this);encode=encode.bind(this);encrypt=encrypt.bind(this);decrypt=decrypt.bind(this);getMatchingTags(e,s){const o=this.tags.filter(a=>a[0]===e);return s===void 0?o:o.filter(a=>a[3]===s)}hasTag(e,s){return this.tags.some(o=>o[0]===e&&(!s||o[3]===s))}tagValue(e,s){const o=this.getMatchingTags(e,s);if(o.length!==0)return o[0][1]}get alt(){return this.tagValue("alt")}set alt(e){this.removeTag("alt"),e&&this.tags.push(["alt",e])}get dTag(){return this.tagValue("d")}set dTag(e){this.removeTag("d"),e&&this.tags.push(["d",e])}removeTag(e,s){const o=Array.isArray(e)?e:[e];this.tags=this.tags.filter(a=>{const c=o.includes(a[0]),u=s?a[3]===s:!0;return!(c&&u)})}replaceTag(e){this.removeTag(e[0]),this.tags.push(e)}async sign(e){e?this.author=await e.user():(this.ndk?.assertSigner(),e=this.ndk?.signer);const s=await this.toNostrEvent();return this.sig=await e.sign(s),this.sig}async publishReplaceable(e,s,o){return this.id="",this.created_at=Math.floor(Date.now()/1e3),this.sig="",this.publish(e,s,o)}async publish(e,s,o){if(o||(o=1),this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");if((!e||e.size===0)&&(e=this.ndk.devWriteRelaySet||await calculateRelaySetFromEvent(this.ndk,this,o)),this.kind===5&&this.ndk.cacheAdapter?.deleteEventIds){const u=this.getMatchingTags("e").map(h=>h[1]);this.ndk.cacheAdapter.deleteEventIds(u)}const a=this.rawEvent();if(this.ndk.cacheAdapter?.addUnpublishedEvent&&shouldTrackUnpublishedEvent(this))try{this.ndk.cacheAdapter.addUnpublishedEvent(this,e.relayUrls)}catch(u){console.error("Error adding unpublished event to cache",u)}this.kind===5&&this.ndk.cacheAdapter?.deleteEventIds&&this.ndk.cacheAdapter.deleteEventIds(this.getMatchingTags("e").map(u=>u[1])),this.ndk.subManager.dispatchEvent(a,void 0,!0);const c=await e.publish(this,s,o);return c.forEach(u=>this.ndk?.subManager.seenEvent(this.id,u)),c}async generateTags(){let e=[];const s=await generateContentTags(this.content,this.tags),o=s.content;if(e=s.tags,this.kind&&this.isParamReplaceable()&&!this.getMatchingTags("d")[0]){const c=this.tagValue("title");let h=[...Array(c?6:16)].map(()=>Math.random().toString(36)[2]).join("");c&&c.length>0&&(h=`${c.replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"")}-${h}`),e.push(["d",h])}if(this.shouldAddClientTag){const a=["client",this.ndk?.clientName??""];this.ndk?.clientNip89&&a.push(this.ndk?.clientNip89),e.push(a)}else this.shouldStripClientTag&&(e=e.filter(a=>a[0]!=="client"));return{content:o||"",tags:e}}get shouldAddClientTag(){return!(!this.ndk?.clientName&&!this.ndk?.clientNip89||skipClientTagOnKinds.has(this.kind)||this.isEphemeral()||this.isReplaceable()&&!this.isParamReplaceable()||this.isDvm()||this.hasTag("client"))}get shouldStripClientTag(){return skipClientTagOnKinds.has(this.kind)}muted(){const e=this.ndk?.mutedIds.get(this.pubkey);if(e&&e==="p")return"author";const s=this.tagReference(),o=this.ndk?.mutedIds.get(s[1]);return o&&o===s[0]?"event":null}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.getMatchingTags("d")[0];return e?e[1]:""}throw new Error("Event is not a parameterized replaceable event")}deduplicationKey(){return this.kind===0||this.kind===3||this.kind&&this.kind>=1e4&&this.kind<2e4?`${this.kind}:${this.pubkey}`:this.tagId()}tagId(){return this.isParamReplaceable()?this.tagAddress():this.id}tagAddress(){if(this.isParamReplaceable()){const e=this.dTag??"";return`${this.kind}:${this.pubkey}:${e}`}if(this.isReplaceable())return`${this.kind}:${this.pubkey}:`;throw new Error("Event is not a replaceable event")}tagType(){return this.isParamReplaceable()?"a":"e"}tagReference(e){let s;return this.isParamReplaceable()?s=["a",this.tagAddress()]:s=["e",this.tagId()],this.relay?s.push(this.relay.url):s.push(""),s.push(e??""),this.isParamReplaceable()||s.push(this.pubkey),s}referenceTags(e,s,o){let a=[];return this.isParamReplaceable()?a=[[o??"a",this.tagAddress()],[o??"e",this.id]]:a=[[o??"e",this.id]],a=a.map(c=>(c[0]==="e"||e?c.push(this.relay?.url??""):this.relay?.url&&c.push(this.relay?.url),c)),a.forEach(c=>{c[0]==="e"?(c.push(e??""),c.push(this.pubkey)):e&&c.push(e)}),a=[...a,...this.getMatchingTags("h")],s||a.push(...this.author.referenceTags()),a}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}nip22Filter(){return this.isParamReplaceable()?{"#A":[this.tagId()]}:{"#E":[this.tagId()]}}async delete(e,s=!0){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const o=new Ia(this.ndk,{kind:5,content:e||""});return o.tag(this,void 0,!0),o.tags.push(["k",this.kind?.toString()]),s&&(this.emit("deleted"),await o.publish()),o}set isProtected(e){this.removeTag("-"),e&&this.tags.push(["-"])}get isProtected(){return this.hasTag("-")}fetchTaggedEvent=fetchTaggedEvent.bind(this);fetchRootEvent=fetchRootEvent.bind(this);fetchReplyEvent=fetchReplyEvent.bind(this);repost=repost.bind(this);async react(e,s=!0){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const o=new Ia(this.ndk,{kind:7,content:e});return o.tag(this),s&&await o.publish(),o}get isValid(){return this.validate()}get inspect(){return JSON.stringify(this.rawEvent(),null,4)}dump(){console.debug(JSON.stringify(this.rawEvent(),null,4)),console.debug("Event on relays:",this.onRelays.map(e=>e.url).join(", "))}reply(){const e=new Ia(this.ndk);if(this.kind===1)e.kind=1,this.hasTag("e")?e.tags=[...e.tags,...this.getMatchingTags("e"),...this.getMatchingTags("p"),...this.getMatchingTags("a"),...this.referenceTags("reply")]:e.tag(this,"root");else{e.kind=1111;const s=["A","E","I","P"],o=this.tags.filter(a=>s.includes(a[0]));if(o.length>0){const a=this.tagValue("K");e.tags.push(...o),a&&e.tags.push(["K",a]);const[c,u,h,...m]=this.tagReference(),g=[c,u,...m];e.tags.push(g)}else{const[a,c,u,h]=this.tagReference(),m=[a,c,h??""];a==="e"&&m.push(this.pubkey),e.tags.push(m);const g=[...m];g[0]=g[0].toUpperCase(),e.tags.push(g),e.tags.push(["K",this.kind?.toString()]),e.tags.push(["P",this.pubkey])}e.tags.push(["k",this.kind?.toString()]),e.tags.push(...this.getMatchingTags("p")),e.tags.push(["p",this.pubkey])}return e}},untrackedUnpublishedEvents=new Set([24133,13194,23194,23195]);function shouldTrackUnpublishedEvent(n){return!untrackedUnpublishedEvents.has(n.kind)}var NDKPool=class extends libExports.EventEmitter{_relays=new Map;status="idle";autoConnectRelays=new Set;poolBlacklistRelayUrls=new Set;debug;temporaryRelayTimers=new Map;flappingRelays=new Set;backoffTimes=new Map;ndk;get blacklistRelayUrls(){const n=new Set(this.ndk.blacklistRelayUrls);return this.poolBlacklistRelayUrls.forEach(e=>n.add(e)),n}constructor(n,e,s,{debug:o,name:a}={}){super(),this.debug=o??s.debug.extend("pool"),a&&(this._name=a),this.ndk=s,this.relayUrls=n,this.poolBlacklistRelayUrls=new Set(e),this.ndk.pools.push(this)}get relays(){return this._relays}set relayUrls(n){this._relays.clear();for(const e of n){const s=new NDKRelay(e,void 0,this.ndk);s.connectivity.netDebug=this.ndk.netDebug,this.addRelay(s)}}_name="unnamed";get name(){return this._name}set name(n){this._name=n,this.debug=this.debug.extend(n)}useTemporaryRelay(n,e=3e4,s){const o=this.relays.has(n.url);o||(this.addRelay(n),this.debug("Adding temporary relay %s for filters %o",n.url,s));const a=this.temporaryRelayTimers.get(n.url);if(a&&clearTimeout(a),!o||a){const c=setTimeout(()=>{this.ndk.explicitRelayUrls?.includes(n.url)||this.removeRelay(n.url)},e);this.temporaryRelayTimers.set(n.url,c)}}addRelay(n,e=!0){const s=this.relays.has(n.url),o=this.blacklistRelayUrls?.has(n.url),a=n.url.includes("/npub1");let c=!0;const u=n.url;if(s)return;if(o){this.debug(`Refusing to add relay ${u}: blacklisted`);return}if(a){this.debug(`Refusing to add relay ${u}: is a filter relay`);return}if(this.ndk.cacheAdapter?.getRelayStatus){const R=this.ndk.cacheAdapter.getRelayStatus(u);if(R?.dontConnectBefore){if(R.dontConnectBefore>Date.now()){const w=R.dontConnectBefore-Date.now();this.debug(`Refusing to add relay ${u}: delayed connect for ${w}ms`),setTimeout(()=>{this.addRelay(n,e)},w);return}c=!1}}const h=R=>this.emit("notice",n,R),m=()=>this.handleRelayConnect(u),g=()=>this.handleRelayReady(n),_=()=>this.emit("relay:disconnect",n),b=()=>this.handleFlapping(n),T=R=>this.emit("relay:auth",n,R),A=()=>this.emit("relay:authed",n);n.off("notice",h),n.off("connect",m),n.off("ready",g),n.off("disconnect",_),n.off("flapping",b),n.off("auth",T),n.off("authed",A),n.on("notice",h),n.on("connect",m),n.on("ready",g),n.on("disconnect",_),n.on("flapping",b),n.on("auth",T),n.on("authed",A),n.on("delayed-connect",R=>{this.ndk.cacheAdapter?.updateRelayStatus&&this.ndk.cacheAdapter.updateRelayStatus(n.url,{dontConnectBefore:Date.now()+R})}),this._relays.set(u,n),e&&this.autoConnectRelays.add(u),e&&this.status==="active"&&(this.emit("relay:connecting",n),n.connect(void 0,c).catch(R=>{this.debug(`Failed to connect to relay ${u}`,R)}))}removeRelay(n){const e=this.relays.get(n);if(e)return e.disconnect(),this.relays.delete(n),this.autoConnectRelays.delete(n),this.emit("relay:disconnect",e),!0;const s=this.temporaryRelayTimers.get(n);return s&&(clearTimeout(s),this.temporaryRelayTimers.delete(n)),!1}isRelayConnected(n){const e=normalizeRelayUrl(n),s=this.relays.get(e);return s?s.status===5:!1}getRelay(n,e=!0,s=!1,o){let a=this.relays.get(normalizeRelayUrl(n));return a||(a=new NDKRelay(n,void 0,this.ndk),a.connectivity.netDebug=this.ndk.netDebug,s?this.useTemporaryRelay(a,3e4,o):this.addRelay(a,e)),a}handleRelayConnect(n){const e=this.relays.get(n);if(!e){console.error("NDK BUG: relay not found in pool",{relayUrl:n});return}this.emit("relay:connect",e),this.stats().connected===this.relays.size&&this.emit("connect")}handleRelayReady(n){this.emit("relay:ready",n)}async connect(n){this.status="active",this.debug(`Connecting to ${this.relays.size} relays${n?`, timeout ${n}ms`:""}...`);const e=Array.from(this.autoConnectRelays.keys()).map(c=>this.relays.get(c)).filter(c=>!!c);for(const c of e)c.status!==5&&c.status!==4&&(this.emit("relay:connecting",c),c.connect().catch(u=>{this.debug(`Failed to connect to relay ${c.url}: ${u??"No reason specified"}`)}));const s=()=>e.every(c=>c.status===5),o=new Promise(c=>{if(s()){c();return}const u=[];for(const h of e){const m=()=>{if(s()){for(let g=0;g<e.length;g++)e[g].off("connect",u[g]);c()}};u.push(m),h.on("connect",m)}}),a=typeof n=="number"?new Promise(c=>setTimeout(c,n)):new Promise(()=>{});await Promise.race([o,a])}checkOnFlappingRelays(){const n=this.flappingRelays.size,e=this.relays.size;if(n/e>=.8)for(const s of this.flappingRelays)this.backoffTimes.set(s,0)}handleFlapping(n){this.debug(`Relay ${n.url} is flapping`);let e=this.backoffTimes.get(n.url)||5e3;e=e*2,this.backoffTimes.set(n.url,e),this.debug(`Backoff time for ${n.url} is ${e}ms`),setTimeout(()=>{this.debug(`Attempting to reconnect to ${n.url}`),this.emit("relay:connecting",n),n.connect(),this.checkOnFlappingRelays()},e),n.disconnect(),this.emit("flapping",n)}size(){return this.relays.size}stats(){const n={total:0,connected:0,disconnected:0,connecting:0};for(const e of this.relays.values())n.total++,e.status===5?n.connected++:e.status===1?n.disconnected++:e.status===4&&n.connecting++;return n}connectedRelays(){return Array.from(this.relays.values()).filter(n=>n.status>=5)}permanentAndConnectedRelays(){return Array.from(this.relays.values()).filter(n=>n.status>=5&&!this.temporaryRelayTimers.has(n.url))}urls(){return Array.from(this.relays.keys())}},NDKCashuMintList=class Am extends NDKEvent{static kind=10019;static kinds=[10019];_p2pk;constructor(e,s){super(e,s),this.kind??=10019}static from(e){return new Am(e.ndk,e)}set relays(e){this.tags=this.tags.filter(s=>s[0]!=="relay");for(const s of e)this.tags.push(["relay",s])}get relays(){const e=[];for(const s of this.tags)s[0]==="relay"&&e.push(s[1]);return e}set mints(e){this.tags=this.tags.filter(s=>s[0]!=="mint");for(const s of e)this.tags.push(["mint",s])}get mints(){const e=[];for(const s of this.tags)s[0]==="mint"&&e.push(s[1]);return Array.from(new Set(e))}get p2pk(){return this._p2pk?this._p2pk:(this._p2pk=this.tagValue("pubkey")??this.pubkey,this._p2pk)}set p2pk(e){this._p2pk=e,this.removeTag("pubkey"),e&&this.tags.push(["pubkey",e])}get relaySet(){return NDKRelaySet.fromRelayUrls(this.relays,this.ndk)}},NDKArticle=class Rm extends NDKEvent{static kind=30023;static kinds=[30023];constructor(e,s){super(e,s),this.kind??=30023}static from(e){return new Rm(e.ndk,e)}get title(){return this.tagValue("title")}set title(e){this.removeTag("title"),e&&this.tags.push(["title",e])}get image(){return this.tagValue("image")}set image(e){this.removeTag("image"),e&&this.tags.push(["image",e])}get summary(){return this.tagValue("summary")}set summary(e){this.removeTag("summary"),e&&this.tags.push(["summary",e])}get published_at(){const e=this.tagValue("published_at");if(e){let s=Number.parseInt(e);return s>1e12&&(s=Math.floor(s/1e3)),s}}set published_at(e){this.removeTag("published_at"),e!==void 0&&this.tags.push(["published_at",e.toString()])}async generateTags(){return super.generateTags(),this.published_at||(this.published_at=this.created_at),super.generateTags()}get url(){return this.tagValue("url")}set url(e){e?this.tags.push(["url",e]):this.removeTag("url")}};function proofsTotalBalance(n){return n.reduce((e,s)=>{if(s.amount<0)throw new Error("proof amount is negative");return e+s.amount},0)}var NDKCashuToken=class wm extends NDKEvent{_proofs=[];_mint;static kind=7375;static kinds=[7375];_deletes=[];original;constructor(e,s){super(e,s),this.kind??=7375}static async from(e){const s=new wm(e.ndk,e);s.original=e;try{await s.decrypt()}catch{s.content=s.original.content}try{const o=JSON.parse(s.content);if(s.proofs=o.proofs,s.mint=o.mint??s.tagValue("mint"),s.deletedTokens=o.del??[],!Array.isArray(s.proofs))return}catch{return}return s}get proofs(){return this._proofs}set proofs(e){const s=new Set;this._proofs=e.filter(o=>s.has(o.C)?(console.warn("Passed in proofs had duplicates, ignoring",o.C),!1):o.amount<0?(console.warn("Invalid proof with negative amount",o),!1):(s.add(o.C),!0)).map(this.cleanProof)}cleanProof(e){return{id:e.id,amount:e.amount,C:e.C,secret:e.secret}}async toNostrEvent(e){if(!this.ndk)throw new Error("no ndk");if(!this.ndk.signer)throw new Error("no signer");const s={proofs:this.proofs.map(this.cleanProof),mint:this.mint,del:this.deletedTokens??[]};this.content=JSON.stringify(s);const o=await this.ndk.signer.user();return await this.encrypt(o,void 0,"nip44"),super.toNostrEvent(e)}set mint(e){this._mint=e}get mint(){return this._mint}get deletedTokens(){return this._deletes}set deletedTokens(e){this._deletes=e}get amount(){return proofsTotalBalance(this.proofs)}async publish(e,s,o){return this.original?this.original.publish(e,s,o):super.publish(e,s,o)}},NDKHighlight=class Im extends NDKEvent{_article;static kind=9802;static kinds=[9802];constructor(e,s){super(e,s),this.kind??=9802}static from(e){return new Im(e.ndk,e)}get url(){return this.tagValue("r")}set context(e){e===void 0?this.tags=this.tags.filter(([s,o])=>s!=="context"):(this.tags=this.tags.filter(([s,o])=>s!=="context"),this.tags.push(["context",e]))}get context(){return this.tags.find(([e,s])=>e==="context")?.[1]??void 0}get article(){return this._article}set article(e){this._article=e,typeof e=="string"?this.tags.push(["r",e]):this.tag(e)}getArticleTag(){return this.getMatchingTags("a")[0]||this.getMatchingTags("e")[0]||this.getMatchingTags("r")[0]}async getArticle(){if(this._article!==void 0)return this._article;let e;const s=this.getArticleTag();if(s){switch(s[0]){case"a":{const[o,a,c]=s[1].split(":");e=nip19_exports.naddrEncode({kind:Number.parseInt(o),pubkey:a,identifier:c});break}case"e":e=nip19_exports.noteEncode(s[1]);break;case"r":this._article=s[1];break}if(e){let o=await this.ndk?.fetchEvent(e);o&&(o.kind===30023&&(o=NDKArticle.from(o)),this._article=o)}return this._article}}};function mapImetaTag(n){const e={};if(n.length===2){const o=n[1].split(" ");for(let a=0;a<o.length;a+=2){const c=o[a],u=o[a+1];c==="fallback"?(e.fallback||(e.fallback=[]),e.fallback.push(u)):e[c]=u}return e}const s=n.slice(1);for(const o of s){const a=o.split(" "),c=a[0],u=a.slice(1).join(" ");c==="fallback"?(e.fallback||(e.fallback=[]),e.fallback.push(u)):e[c]=u}return e}function imetaTagToTag(n){const e=["imeta"];for(const[s,o]of Object.entries(n))if(Array.isArray(o))for(const a of o)e.push(`${s} ${a}`);else o&&e.push(`${s} ${o}`);return e}var NDKImage=class Pm extends NDKEvent{static kind=20;static kinds=[20];_imetas;constructor(e,s){super(e,s),this.kind??=20}static from(e){return new Pm(e.ndk,e.rawEvent())}get isValid(){return this.imetas.length>0}get imetas(){return this._imetas?this._imetas:(this._imetas=this.tags.filter(e=>e[0]==="imeta").map(mapImetaTag).filter(e=>!!e.url),this._imetas)}set imetas(e){this._imetas=e,this.tags=this.tags.filter(s=>s[0]!=="imeta"),this.tags.push(...e.map(imetaTagToTag))}},NDKList=class Cm extends NDKEvent{_encryptedTags;static kinds=[10063,30001,10004,10050,10030,10015,10001,10002,10007,10006,10003];encryptedTagsLength;constructor(e,s){super(e,s),this.kind??=30001}static from(e){return new Cm(e.ndk,e)}get title(){const e=this.tagValue("title")||this.tagValue("name");return e||(this.kind===3?"Contacts":this.kind===1e4?"Mute":this.kind===10001?"Pinned Notes":this.kind===10002?"Relay Metadata":this.kind===10003?"Bookmarks":this.kind===10004?"Communities":this.kind===10005?"Public Chats":this.kind===10006?"Blocked Relays":this.kind===10007?"Search Relays":this.kind===10050?"Direct Message Receive Relays":this.kind===10015?"Interests":this.kind===10030?"Emojis":this.tagValue("d"))}set title(e){this.removeTag(["title","name"]),e&&this.tags.push(["title",e])}get name(){return this.title}set name(e){this.title=e}get description(){return this.tagValue("description")}set description(e){this.removeTag("description"),e&&this.tags.push(["description",e])}get image(){return this.tagValue("image")}set image(e){this.removeTag("image"),e&&this.tags.push(["image",e])}isEncryptedTagsCacheValid(){return!!(this._encryptedTags&&this.encryptedTagsLength===this.content.length)}async encryptedTags(e=!0){if(e&&this.isEncryptedTagsCacheValid())return this._encryptedTags;if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const s=await this.ndk.signer.user();try{if(this.content.length>0)try{const o=await this.ndk.signer.decrypt(s,this.content),a=JSON.parse(o);return a?.[0]?(this.encryptedTagsLength=this.content.length,this._encryptedTags=a):(this.encryptedTagsLength=this.content.length,this._encryptedTags=[])}catch{}}catch{}return[]}validateTag(e){return!0}getItems(e){return this.tags.filter(s=>s[0]===e)}get items(){return this.tags.filter(e=>!["d","L","l","title","name","description","published_at","summary","image","thumb","alt","expiration","subject","client"].includes(e[0]))}async addItem(e,s=void 0,o=!1,a="bottom"){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");let c;if(e instanceof NDKEvent)c=[e.tagReference(s)];else if(e instanceof NDKUser)c=e.referenceTags();else if(e instanceof NDKRelay)c=e.referenceTags();else if(Array.isArray(e))c=[e];else throw new Error("Invalid object type");if(s&&c[0].push(s),o){const u=await this.ndk.signer.user(),h=await this.encryptedTags();a==="top"?h.unshift(...c):h.push(...c),this._encryptedTags=h,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(h),await this.encrypt(u)}else a==="top"?this.tags.unshift(...c):this.tags.push(...c);this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItemByValue(e,s=!0){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const o=this.tags.findIndex(h=>h[1]===e);o>=0&&this.tags.splice(o,1);const a=await this.ndk.signer.user(),c=await this.encryptedTags(),u=c.findIndex(h=>h[1]===e);if(u>=0&&(c.splice(u,1),this._encryptedTags=c,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(c),await this.encrypt(a)),s)return this.publishReplaceable();this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItem(e,s){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");if(s){const o=await this.ndk.signer.user(),a=await this.encryptedTags();a.splice(e,1),this._encryptedTags=a,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(a),await this.encrypt(o)}else this.tags.splice(e,1);return this.created_at=Math.floor(Date.now()/1e3),this.emit("change"),this}has(e){return this.items.some(s=>s[1]===e)}filterForItems(){const e=new Set,s=new Map,o=[];for(const a of this.items)if(a[0]==="e"&&a[1])e.add(a[1]);else if(a[0]==="a"&&a[1]){const[c,u,h]=a[1].split(":");if(!c||!u)continue;const m=`${c}:${u}`,g=s.get(m)||[];g.push(h||""),s.set(m,g)}if(e.size>0&&o.push({ids:Array.from(e)}),s.size>0)for(const[a,c]of s.entries()){const[u,h]=a.split(":");o.push({kinds:[Number.parseInt(u)],authors:[h],"#d":c})}return o}},lists_default=NDKList,NDKNutzap=class cf extends NDKEvent{debug;_proofs=[];static kind=9321;static kinds=[cf.kind];constructor(e,s){super(e,s),this.kind??=9321,this.debug=e?.debug.extend("nutzap")??createDebug5("ndk:nutzap"),this.alt||(this.alt="This is a nutzap");try{const o=this.getMatchingTags("proof");o.length?this._proofs=o.map(a=>JSON.parse(a[1])):this._proofs=JSON.parse(this.content)}catch{return}}static from(e){const s=new cf(e.ndk,e);if(!(!s._proofs||!s._proofs.length))return s}set comment(e){this.content=e??""}get comment(){const e=this.tagValue("comment");return e||this.content}set proofs(e){this._proofs=e,this.tags=this.tags.filter(s=>s[0]!=="proof");for(const s of e)this.tags.push(["proof",JSON.stringify(s)])}get proofs(){return this._proofs}get rawP2pk(){const e=this.proofs[0];try{const s=JSON.parse(e.secret);let o;if(typeof s=="string"?(o=JSON.parse(s),this.debug("stringified payload",e.secret)):typeof s=="object"&&(o=s),Array.isArray(o)&&o[0]==="P2PK"&&o.length>1&&typeof o[1]=="object"&&o[1]!==null||typeof o=="object"&&o!==null&&typeof o[1]?.data=="string")return o[1].data}catch(s){this.debug("error parsing p2pk pubkey",s,this.proofs[0])}}get p2pk(){const e=this.rawP2pk;if(e)return e.startsWith("02")?e.slice(2):e}get mint(){return this.tagValue("u")}set mint(e){this.replaceTag(["u",e])}get unit(){let e=this.tagValue("unit")??"sat";return e?.startsWith("msat")&&(e="sat"),e}set unit(e){if(this.removeTag("unit"),e?.startsWith("msat"))throw new Error("msat is not allowed, use sat denomination instead");e&&this.tag(["unit",e])}get amount(){return this.proofs.reduce((s,o)=>s+o.amount,0)}sender=this.author;set target(e){this.tags=this.tags.filter(s=>s[0]!=="p"),e instanceof NDKEvent&&this.tags.push(e.tagReference())}set recipientPubkey(e){this.removeTag("p"),this.tag(["p",e])}get recipientPubkey(){return this.tagValue("p")}get recipient(){const e=this.recipientPubkey;return this.ndk?this.ndk.getUser({pubkey:e}):new NDKUser({pubkey:e})}async toNostrEvent(){this.unit==="msat"&&(this.unit="sat"),this.removeTag("amount"),this.tags.push(["amount",this.amount.toString()]);const e=await super.toNostrEvent();return e.content=this.comment,e}get isValid(){let e=0,s=0,o=0;for(const a of this.tags)a[0]==="e"&&e++,a[0]==="p"&&s++,a[0]==="u"&&o++;return s===1&&o===1&&e<=1&&this.proofs.length>0}},NDKSimpleGroupMemberList=class Vm extends NDKEvent{relaySet;memberSet=new Set;static kind=39002;static kinds=[39002];constructor(e,s){super(e,s),this.kind??=39002,this.memberSet=new Set(this.members)}static from(e){return new Vm(e.ndk,e)}get members(){return this.getMatchingTags("p").map(e=>e[1])}hasMember(e){return this.memberSet.has(e)}async publish(e,s,o){return e??=this.relaySet,super.publishReplaceable(e,s,o)}},NDKSimpleGroupMetadata=class km extends NDKEvent{static kind=39e3;static kinds=[39e3];constructor(e,s){super(e,s),this.kind??=39e3}static from(e){return new km(e.ndk,e)}get name(){return this.tagValue("name")}get picture(){return this.tagValue("picture")}get about(){return this.tagValue("about")}get scope(){if(this.getMatchingTags("public").length>0)return"public";if(this.getMatchingTags("public").length>0)return"private"}set scope(e){this.removeTag("public"),this.removeTag("private"),e==="public"?this.tags.push(["public",""]):e==="private"&&this.tags.push(["private",""])}get access(){if(this.getMatchingTags("open").length>0)return"open";if(this.getMatchingTags("closed").length>0)return"closed"}set access(e){this.removeTag("open"),this.removeTag("closed"),e==="open"?this.tags.push(["open",""]):e==="closed"&&this.tags.push(["closed",""])}};function strToPosition(n){const[e,s]=n.split(",").map(Number);return{x:e,y:s}}function strToDimension(n){const[e,s]=n.split("x").map(Number);return{width:e,height:s}}var NDKStorySticker=class Dm{static Text="text";static Pubkey="pubkey";static Event="event";static Prompt="prompt";static Countdown="countdown";type;value;position;dimension;properties;constructor(e){if(Array.isArray(e)){const s=e;if(s[0]!=="sticker"||s.length<5)throw new Error("Invalid sticker tag");this.type=s[1],this.value=s[2],this.position=strToPosition(s[3]),this.dimension=strToDimension(s[4]);const o={};for(let a=5;a<s.length;a++){const[c,...u]=s[a].split(" ");o[c]=u.join(" ")}Object.keys(o).length>0&&(this.properties=o)}else this.type=e,this.value=void 0,this.position={x:0,y:0},this.dimension={width:0,height:0}}static fromTag(e){try{return new Dm(e)}catch{return null}}get style(){return this.properties?.style}set style(e){e?this.properties={...this.properties,style:e}:delete this.properties?.style}get rotation(){return this.properties?.rot?Number.parseFloat(this.properties.rot):void 0}set rotation(e){e!==void 0?this.properties={...this.properties,rot:e.toString()}:delete this.properties?.rot}get isValid(){return this.hasValidDimensions()&&this.hasValidPosition()}hasValidDimensions=()=>typeof this.dimension.width=="number"&&typeof this.dimension.height=="number"&&!Number.isNaN(this.dimension.width)&&!Number.isNaN(this.dimension.height);hasValidPosition=()=>typeof this.position.x=="number"&&typeof this.position.y=="number"&&!Number.isNaN(this.position.x)&&!Number.isNaN(this.position.y);toTag(){if(!this.isValid){const o=[this.hasValidDimensions()?void 0:"dimensions is invalid",this.hasValidPosition()?void 0:"position is invalid"].filter(Boolean);throw new Error(`Invalid sticker: ${o.join(", ")}`)}let e;switch(this.type){case"event":e=this.value.tagId();break;case"pubkey":e=this.value.pubkey;break;default:e=this.value}const s=["sticker",this.type,e,coordinates(this.position),dimension(this.dimension)];if(this.properties)for(const[o,a]of Object.entries(this.properties))s.push(`${o} ${a}`);return s}},NDKStory=class $m extends NDKEvent{static kind=23;static kinds=[23];_imeta;_dimensions;constructor(e,s){if(super(e,s),this.kind??=23,s)for(const o of s.tags)switch(o[0]){case"imeta":this._imeta=mapImetaTag(o);break;case"dim":this.dimensions=strToDimension(o[1]);break}}static from(e){return new $m(e.ndk,e)}get isValid(){return!!this.imeta}get imeta(){return this._imeta}set imeta(e){this._imeta=e,this.tags=this.tags.filter(s=>s[0]!=="imeta"),e&&this.tags.push(imetaTagToTag(e))}get dimensions(){const e=this.tagValue("dim");if(e)return strToDimension(e)}set dimensions(e){this.removeTag("dim"),e&&this.tags.push(["dim",`${e.width}x${e.height}`])}get duration(){const e=this.tagValue("dur");if(e)return Number.parseInt(e)}set duration(e){this.removeTag("dur"),e!==void 0&&this.tags.push(["dur",e.toString()])}get stickers(){const e=[];for(const s of this.tags){if(s[0]!=="sticker"||s.length<5)continue;const o=NDKStorySticker.fromTag(s);o&&e.push(o)}return e}addSticker(e){let s;if(e instanceof NDKStorySticker)s=e;else{const o=["sticker",e.type,typeof e.value=="string"?e.value:"",coordinates(e.position),dimension(e.dimension)];if(e.properties)for(const[a,c]of Object.entries(e.properties))o.push(`${a} ${c}`);s=new NDKStorySticker(o),s.value=e.value}s.type==="pubkey"?this.tag(s.value):s.type==="event"&&this.tag(s.value),this.tags.push(s.toTag())}removeSticker(e){const s=this.stickers;if(e<0||e>=s.length)return;let o=0;for(let a=0;a<this.tags.length;a++)if(this.tags[a][0]==="sticker"){if(o===e){this.tags.splice(a,1);break}o++}}},coordinates=n=>`${n.x},${n.y}`,dimension=n=>`${n.width}x${n.height}`,possibleIntervalFrequencies=["daily","weekly","monthly","quarterly","yearly"];function newAmount(n,e,s){return["amount",n.toString(),e,s]}function parseTagToSubscriptionAmount(n){const e=Number.parseInt(n[1]);if(Number.isNaN(e)||e===void 0||e===null||e<=0)return;const s=n[2];if(s===void 0||s==="")return;const o=n[3];if(o!==void 0&&possibleIntervalFrequencies.includes(o))return{amount:e,currency:s,term:o}}var NDKSubscriptionTier=class Mm extends NDKArticle{static kind=37001;static kinds=[37001];constructor(e,s){const o=s?.kind??37001;super(e,s),this.kind=o}static from(e){return new Mm(e.ndk,e)}get perks(){return this.getMatchingTags("perk").map(e=>e[1]).filter(e=>e!==void 0)}addPerk(e){this.tags.push(["perk",e])}get amounts(){return this.getMatchingTags("amount").map(e=>parseTagToSubscriptionAmount(e)).filter(e=>e!==void 0)}addAmount(e,s,o){this.tags.push(newAmount(e,s,o))}set relayUrl(e){this.tags.push(["r",e])}get relayUrls(){return this.getMatchingTags("r").map(e=>e[1]).filter(e=>e!==void 0)}get verifierPubkey(){return this.tagValue("p")}set verifierPubkey(e){this.removeTag("p"),e&&this.tags.push(["p",e])}get isValid(){return this.title!==void 0&&this.amounts.length>0}},NDKVideo=class Nm extends NDKEvent{static kind=21;static kinds=[34235,34236,22,21];_imetas;static from(e){return new Nm(e.ndk,e.rawEvent())}get title(){return this.tagValue("title")}set title(e){this.removeTag("title"),e&&this.tags.push(["title",e])}get thumbnail(){let e;return this.imetas&&this.imetas.length>0&&(e=this.imetas[0].image?.[0]),e??this.tagValue("thumb")}get imetas(){return this._imetas?this._imetas:(this._imetas=this.tags.filter(e=>e[0]==="imeta").map(mapImetaTag),this._imetas)}set imetas(e){this._imetas=e,this.tags=this.tags.filter(s=>s[0]!=="imeta"),this.tags.push(...e.map(imetaTagToTag))}get url(){return this.imetas&&this.imetas.length>0?this.imetas[0].url:this.tagValue("url")}get published_at(){const e=this.tagValue("published_at");if(e)return Number.parseInt(e)}async generateTags(){if(super.generateTags(),!this.kind&&this.imetas?.[0]?.dim){const[e,s]=this.imetas[0].dim.split("x"),o=e&&s&&Number.parseInt(e)<Number.parseInt(s);this.duration&&this.duration<120&&o?this.kind=22:this.kind=21}return super.generateTags()}get duration(){const e=this.tagValue("duration");if(e)return Number.parseInt(e)}set duration(e){this.removeTag("duration"),e!==void 0&&this.tags.push(["duration",Math.floor(e).toString()])}},NDKWiki=class Bm extends NDKArticle{static kind=30818;static kinds=[30818];static from(e){return new Bm(e.ndk,e.rawEvent())}get isDefered(){return this.hasTag("a","defer")}get deferedId(){return this.tagValue("a","defer")}set defer(e){this.removeTag("a","defer"),this.tag(e,"defer")}},NDKBlossomList=class Om extends NDKEvent{static kinds=[10063];constructor(e,s){super(e,s),this.kind??=10063}static from(e){return new Om(e.ndk,e.rawEvent())}get servers(){return this.tags.filter(e=>e[0]==="server").map(e=>e[1])}set servers(e){this.tags=this.tags.filter(s=>s[0]!=="server");for(const s of e)this.tags.push(["server",s])}get default(){const e=this.servers;return e.length>0?e[0]:void 0}set default(e){if(!e)return;const o=this.servers.filter(a=>a!==e);this.servers=[e,...o]}addServer(e){if(!e)return;const s=this.servers;s.includes(e)||(this.servers=[...s,e])}removeServer(e){if(!e)return;const s=this.servers;this.servers=s.filter(o=>o!==e)}};function wrapEvent(n){const e=new Map;for(const o of[NDKImage,NDKVideo,NDKCashuMintList,NDKArticle,NDKHighlight,NDKWiki,NDKNutzap,NDKSimpleGroupMemberList,NDKSimpleGroupMetadata,NDKSubscriptionTier,NDKCashuToken,NDKList,NDKStory,NDKBlossomList])for(const a of o.kinds)e.set(a,o);const s=e.get(n.kind);return s?s.from(n):n}function queryFullyFilled(n){return!!(filterIncludesIds(n.filter)&&resultHasAllRequestedIds(n))}function filterIncludesIds(n){return!!n.ids}function resultHasAllRequestedIds(n){const e=n.filter.ids;return!!e&&e.length===n.eventFirstSeen.size}function filterFromId(n){let e;if(n.match(NIP33_A_REGEX)){const[s,o,a]=n.split(":"),c={authors:[o],kinds:[Number.parseInt(s)]};return a&&(c["#d"]=[a]),c}if(n.match(BECH32_REGEX))try{switch(e=nip19_exports.decode(n),e.type){case"nevent":{const s={ids:[e.data.id]};return e.data.author&&(s.authors=[e.data.author]),e.data.kind&&(s.kinds=[e.data.kind]),s}case"note":return{ids:[e.data]};case"naddr":{const s={authors:[e.data.pubkey],kinds:[e.data.kind]};return e.data.identifier&&(s["#d"]=[e.data.identifier]),s}}}catch(s){console.error("Error decoding",n,s)}return{ids:[n]}}function isNip33AValue(n){return n.match(NIP33_A_REGEX)!==null}var NIP33_A_REGEX=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/,BECH32_REGEX=/^n(event|ote|profile|pub|addr)1[\d\w]+$/;function relaysFromBech32(n,e){try{const s=nip19_exports.decode(n);if(["naddr","nevent"].includes(s?.type)){const o=s.data;if(o?.relays)return o.relays.map(a=>new NDKRelay(a,e.relayAuthDefaultPolicy,e))}}catch{}return[]}var defaultOpts={closeOnEose:!1,cacheUsage:"CACHE_FIRST",dontSaveToCache:!1,groupable:!0,groupableDelay:100,groupableDelayType:"at-most",cacheUnconstrainFilter:["limit","since","until"]},NDKSubscription=class extends libExports.EventEmitter{subId;filters;opts;pool;skipVerification=!1;skipValidation=!1;relayFilters;relaySet;ndk;debug;eventFirstSeen=new Map;eosesSeen=new Set;lastEventReceivedAt;mostRecentCacheEventTimestamp;internalId;closeOnEose;poolMonitor;skipOptimisticPublishEvent=!1;cacheUnconstrainFilter;constructor(n,e,s,o){super(),this.ndk=n,this.opts={...defaultOpts,...s||{}},this.pool=this.opts.pool||n.pool,this.filters=Array.isArray(e)?e:[e],this.subId=o||this.opts.subId,this.internalId=Math.random().toString(36).substring(7),this.debug=n.debug.extend(`subscription[${this.opts.subId??this.internalId}]`),this.opts.relaySet?this.relaySet=this.opts.relaySet:this.opts.relayUrls&&(this.relaySet=NDKRelaySet.fromRelayUrls(this.opts.relayUrls,this.ndk)),this.skipVerification=this.opts.skipVerification||!1,this.skipValidation=this.opts.skipValidation||!1,this.closeOnEose=this.opts.closeOnEose||!1,this.skipOptimisticPublishEvent=this.opts.skipOptimisticPublishEvent||!1,this.cacheUnconstrainFilter=this.opts.cacheUnconstrainFilter}relaysMissingEose(){return this.relayFilters?Array.from(this.relayFilters?.keys()).filter(e=>!this.eosesSeen.has(this.pool.getRelay(e,!1,!1))):[]}get filter(){return this.filters[0]}get groupableDelay(){if(this.isGroupable())return this.opts?.groupableDelay}get groupableDelayType(){return this.opts?.groupableDelayType||"at-most"}isGroupable(){return this.opts?.groupable||!1}shouldQueryCache(){return this.opts.addSinceFromCache?!0:this.opts?.cacheUsage==="ONLY_RELAY"?!1:(this.filters.some(e=>e.kinds?.some(s=>kindIsEphemeral(s))),!0)}shouldQueryRelays(){return this.opts?.cacheUsage!=="ONLY_CACHE"}shouldWaitForCache(){return this.opts.addSinceFromCache?!0:!!this.opts.closeOnEose&&!!this.ndk.cacheAdapter?.locking&&this.opts.cacheUsage!=="PARALLEL"}start(n=!0){let e;const s=a=>{if(n)for(const c of a)(!this.mostRecentCacheEventTimestamp||c.created_at>this.mostRecentCacheEventTimestamp)&&(this.mostRecentCacheEventTimestamp=c.created_at),this.eventReceived(c,void 0,!0,!1);else{e=[];for(const c of a){(!this.mostRecentCacheEventTimestamp||c.created_at>this.mostRecentCacheEventTimestamp)&&(this.mostRecentCacheEventTimestamp=c.created_at),c.ndk=this.ndk;const u=this.opts.wrap?wrapEvent(c):c;if(!u)break;if(u instanceof Promise){u.then(h=>{this.emitEvent(!1,h,void 0,!0,!1)});break}this.eventFirstSeen.set(u.id,Date.now()),e.push(u)}}},o=()=>{this.shouldQueryRelays()?(this.startWithRelays(),this.startPoolMonitor()):this.emit("eose",this)};return this.shouldQueryCache()?(e=this.startWithCache(),e instanceof Promise?this.shouldWaitForCache()?(e.then(a=>{if(s(a),queryFullyFilled(this)){this.emit("eose",this);return}o()}),null):(e.then(a=>{s(a)}),o(),null):(s(e),queryFullyFilled(this)?this.emit("eose",this):o(),e)):(o(),null)}startPoolMonitor(){this.debug.extend("pool-monitor"),this.poolMonitor=n=>{if(this.relayFilters?.has(n.url))return;calculateRelaySetsFromFilters(this.ndk,this.filters,this.pool).get(n.url)&&(this.relayFilters?.set(n.url,this.filters),n.subscribe(this,this.filters))},this.pool.on("relay:connect",this.poolMonitor)}onStopped;stop(){this.emit("close",this),this.poolMonitor&&this.pool.off("relay:connect",this.poolMonitor),this.onStopped?.()}hasAuthorsFilter(){return this.filters.some(n=>n.authors?.length)}startWithCache(){return this.ndk.cacheAdapter?.query?this.ndk.cacheAdapter.query(this):[]}startWithRelays(){let n=this.filters;if(this.opts.addSinceFromCache&&this.mostRecentCacheEventTimestamp){const e=this.mostRecentCacheEventTimestamp+1;n=n.map(s=>({...s,since:Math.max(s.since||0,e)}))}if(!this.relaySet||this.relaySet.relays.size===0)this.relayFilters=calculateRelaySetsFromFilters(this.ndk,n,this.pool);else{this.relayFilters=new Map;for(const e of this.relaySet.relays)this.relayFilters.set(e.url,n)}for(const[e,s]of this.relayFilters)this.pool.getRelay(e,!0,!0,s).subscribe(this,s)}eventReceived(n,e,s=!1,o=!1){const a=n.id,c=this.eventFirstSeen.has(a);let u;if(n instanceof NDKEvent&&(u=n),c){const h=Date.now()-(this.eventFirstSeen.get(a)||0);if(this.emit("event:dup",n,e,h,this,s,o),e){const m=verifiedSignatures.get(a);if(m&&typeof m=="string")if(n.sig===m)e.addValidatedEvent();else{const g=n instanceof NDKEvent?n:new NDKEvent(this.ndk,n);this.ndk.reportInvalidSignature(g,e)}}}else{if(u??=new NDKEvent(this.ndk,n),u.ndk=this.ndk,u.relay=e,!s&&!o){if(!this.skipValidation&&!u.isValid){this.debug("Event failed validation %s from relay %s",a,e?.url);return}if(e)if(e.shouldValidateEvent()&&!this.skipVerification){if(u.relay=e,!this.ndk.asyncSigVerification){if(!u.verifySignature(!0)){this.debug("Event failed signature validation",n),this.ndk.reportInvalidSignature(u,e);return}e.addValidatedEvent()}}else e.addNonValidatedEvent();this.ndk.cacheAdapter&&!this.opts.dontSaveToCache&&this.ndk.cacheAdapter.setEvent(u,this.filters,e)}(!o||this.skipOptimisticPublishEvent!==!0)&&(this.emitEvent(this.opts?.wrap??!1,u,e,s,o),this.eventFirstSeen.set(a,Date.now()))}this.lastEventReceivedAt=Date.now()}emitEvent(n,e,s,o,a){const c=n?wrapEvent(e):e;c instanceof Promise?c.then(u=>this.emitEvent(!1,u,s,o,a)):c&&this.emit("event",c,s,this,o,a)}closedReceived(n,e){this.emit("closed",n,e)}eoseTimeout;eosed=!1;eoseReceived(n){this.debug("EOSE received from %s",n.url),this.eosesSeen.add(n);let e=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0;const s=this.eosesSeen.size===this.relayFilters?.size,o=queryFullyFilled(this),a=c=>{this.debug("Performing EOSE: %s %d",c,this.eosed),!this.eosed&&(this.eoseTimeout&&clearTimeout(this.eoseTimeout),this.emit("eose",this),this.eosed=!0,this.opts?.closeOnEose&&this.stop())};if(o||s)a("query filled or seen all");else if(this.relayFilters){let c=1e3;const u=new Set(this.pool.connectedRelays().map(g=>g.url)),h=Array.from(this.relayFilters.keys()).filter(g=>u.has(g));if(h.length===0){this.debug("No connected relays, waiting for all relays to connect",Array.from(this.relayFilters.keys()).join(", "));return}const m=this.eosesSeen.size/h.length;if(this.debug("Percentage of relays that have sent EOSE",{subId:this.subId,percentageOfRelaysThatHaveSentEose:m,seen:this.eosesSeen.size,total:h.length}),this.eosesSeen.size>=2&&m>=.5){if(c=c*(1-m),c===0){a("time to wait was 0");return}this.eoseTimeout&&clearTimeout(this.eoseTimeout);const g=()=>{e=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0,e!==void 0&&e<20?this.eoseTimeout=setTimeout(g,c):a(`send eose timeout: ${c}`)};this.eoseTimeout=setTimeout(g,c)}}}},kindIsEphemeral=n=>n>=2e4&&n<3e4;async function follows(n,e,s=3){if(!this.ndk)throw new Error("NDK not set");const o=await this.ndk.fetchEvent({kinds:[s],authors:[this.pubkey]},n||{groupable:!1});if(o){const a=new Set;return o.tags.forEach(c=>{c[0]==="p"&&a.add(c[1])}),e&&this.ndk?.outboxTracker?.trackUsers(Array.from(a)),[...a].reduce((c,u)=>{const h=new NDKUser({pubkey:u});return h.ndk=this.ndk,c.add(h),c},new Set)}return new Set}var NIP05_REGEX=/^(?:([\w.+-]+)@)?([\w.-]+)$/;async function getNip05For(n,e,s=fetch,o={}){return await n.queuesNip05.add({id:e,func:async()=>{if(n.cacheAdapter?.loadNip05){const m=await n.cacheAdapter.loadNip05(e);if(m!=="missing"){if(m){const g=new NDKUser({pubkey:m.pubkey,relayUrls:m.relays,nip46Urls:m.nip46});return g.ndk=n,g}if(o.cache!=="no-cache")return null}}const a=e.match(NIP05_REGEX);if(!a)return null;const[c,u="_",h]=a;try{const m=await s(`https://${h}/.well-known/nostr.json?name=${u}`,o),{names:g,relays:_,nip46:b}=parseNIP05Result(await m.json()),T=g[u.toLowerCase()];let A=null;return T&&(A={pubkey:T,relays:_?.[T],nip46:b?.[T]}),n?.cacheAdapter?.saveNip05&&n.cacheAdapter.saveNip05(e,A),A}catch(m){return n?.cacheAdapter?.saveNip05&&n?.cacheAdapter.saveNip05(e,null),console.error("Failed to fetch NIP05 for",e,m),null}}})}function parseNIP05Result(n){const e={names:{}};for(const[s,o]of Object.entries(n.names))typeof s=="string"&&typeof o=="string"&&(e.names[s.toLowerCase()]=o);if(n.relays){e.relays={};for(const[s,o]of Object.entries(n.relays))typeof s=="string"&&Array.isArray(o)&&(e.relays[s]=o.filter(a=>typeof a=="string"))}if(n.nip46){e.nip46={};for(const[s,o]of Object.entries(n.nip46))typeof s=="string"&&Array.isArray(o)&&(e.nip46[s]=o.filter(a=>typeof a=="string"))}return e}function profileFromEvent(n){const e={};let s;try{s=JSON.parse(n.content)}catch(o){throw new Error(`Failed to parse profile event: ${o}`)}e.profileEvent=JSON.stringify(n.rawEvent());for(const o of Object.keys(s))switch(o){case"name":e.name=s.name;break;case"display_name":e.displayName=s.display_name;break;case"image":case"picture":e.picture=s.picture||s.image,e.image=e.picture;break;case"banner":e.banner=s.banner;break;case"bio":e.bio=s.bio;break;case"nip05":e.nip05=s.nip05;break;case"lud06":e.lud06=s.lud06;break;case"lud16":e.lud16=s.lud16;break;case"about":e.about=s.about;break;case"website":e.website=s.website;break;default:e[o]=s[o];break}return e.created_at=n.created_at,e}function serializeProfile(n){const e={};for(const[s,o]of Object.entries(n))switch(s){case"username":case"name":e.name=o;break;case"displayName":e.display_name=o;break;case"image":case"picture":e.picture=o;break;case"bio":case"about":e.about=o;break;default:e[s]=o;break}return JSON.stringify(e)}var NDKUser=class Lm{ndk;profile;profileEvent;_npub;_pubkey;relayUrls=[];nip46Urls=[];constructor(e){if(e.npub&&(this._npub=e.npub),e.hexpubkey&&(this._pubkey=e.hexpubkey),e.pubkey&&(this._pubkey=e.pubkey),e.relayUrls&&(this.relayUrls=e.relayUrls),e.nip46Urls&&(this.nip46Urls=e.nip46Urls),e.nprofile)try{const s=nip19_exports.decode(e.nprofile);s.type==="nprofile"&&(this._pubkey=s.data.pubkey,s.data.relays&&s.data.relays.length>0&&this.relayUrls.push(...s.data.relays))}catch(s){console.error("Failed to decode nprofile",s)}}get npub(){if(!this._npub){if(!this._pubkey)throw new Error("pubkey not set");this._npub=nip19_exports.npubEncode(this.pubkey)}return this._npub}get nprofile(){const e=this.profileEvent?.onRelays?.map(s=>s.url);return nip19_exports.nprofileEncode({pubkey:this.pubkey,relays:e})}set npub(e){this._npub=e}get pubkey(){if(!this._pubkey){if(!this._npub)throw new Error("npub not set");this._pubkey=nip19_exports.decode(this.npub).data}return this._pubkey}set pubkey(e){this._pubkey=e}filter(){return{"#p":[this.pubkey]}}async getZapInfo(e){if(!this.ndk)throw new Error("No NDK instance found");const s=async u=>{if(!e)return u;let h;const m=new Promise((g,_)=>{h=setTimeout(()=>_(new Error("Timeout")),e)});try{const g=await Promise.race([u,m]);return h&&clearTimeout(h),g}catch(g){if(g instanceof Error&&g.message==="Timeout")try{return await u}catch{return}return}},[o,a]=await Promise.all([s(this.fetchProfile()),s(this.ndk.fetchEvent({kinds:[10019],authors:[this.pubkey]}))]),c=new Map;if(a){const u=NDKCashuMintList.from(a);u.mints.length>0&&c.set("nip61",{mints:u.mints,relays:u.relays,p2pk:u.p2pk})}if(o){const{lud06:u,lud16:h}=o;c.set("nip57",{lud06:u,lud16:h})}return c}static async fromNip05(e,s,o=!1){if(!s)throw new Error("No NDK instance found");const a={};o&&(a.cache="no-cache");const c=await getNip05For(s,e,s?.httpFetch,a);if(c){const u=new Lm({pubkey:c.pubkey,relayUrls:c.relays,nip46Urls:c.nip46});return u.ndk=s,u}}async fetchProfile(e,s=!1){if(!this.ndk)throw new Error("NDK not set");let o=null;if(this.ndk.cacheAdapter&&(this.ndk.cacheAdapter.fetchProfile||this.ndk.cacheAdapter.fetchProfileSync)&&e?.cacheUsage!=="ONLY_RELAY"){let a=null;if(this.ndk.cacheAdapter.fetchProfileSync?a=this.ndk.cacheAdapter.fetchProfileSync(this.pubkey):this.ndk.cacheAdapter.fetchProfile&&(a=await this.ndk.cacheAdapter.fetchProfile(this.pubkey)),a)return this.profile=a,a}return e??={},e.cacheUsage??="ONLY_RELAY",e.closeOnEose??=!0,e.groupable??=!0,e.groupableDelay??=250,o||(o=await this.ndk.fetchEvent({kinds:[0],authors:[this.pubkey]},e)),o?(this.profile=profileFromEvent(o),s&&this.profile&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.saveProfile&&this.ndk.cacheAdapter.saveProfile(this.pubkey,this.profile),this.profile):null}follows=follows.bind(this);async followSet(e,s,o=3){const a=await this.follows(e,s,o);return new Set(Array.from(a).map(c=>c.pubkey))}tagReference(){return["p",this.pubkey]}referenceTags(e){const s=[["p",this.pubkey]];return e&&s[0].push("",e),s}async publish(){if(!this.ndk)throw new Error("No NDK instance found");if(!this.profile)throw new Error("No profile available");this.ndk.assertSigner(),await new NDKEvent(this.ndk,{kind:0,content:serializeProfile(this.profile)}).publish()}async follow(e,s,o=3){if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),s||(s=await this.follows(void 0,void 0,o)),s.has(e))return!1;s.add(e);const a=new NDKEvent(this.ndk,{kind:o});for(const c of s)a.tag(c);return await a.publish(),!0}async unfollow(e,s,o=3){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),s||(s=await this.follows(void 0,void 0,o));const a=new Set;let c=!1;for(const h of s)h.pubkey!==e.pubkey?a.add(h):c=!0;if(!c)return!1;const u=new NDKEvent(this.ndk,{kind:o});for(const h of a)u.tag(h);return await u.publish()}async validateNip05(e){if(!this.ndk)throw new Error("No NDK instance found");const s=await getNip05For(this.ndk,e);return s===null?null:s.pubkey===this.pubkey}},READ_MARKER="read",WRITE_MARKER="write",NDKRelayList=class Fm extends NDKEvent{constructor(e,s){super(e,s),this.kind??=10002}static from(e){return new Fm(e.ndk,e.rawEvent())}get readRelayUrls(){return this.tags.filter(e=>e[0]==="r"||e[0]==="relay").filter(e=>!e[2]||e[2]&&e[2]===READ_MARKER).map(e=>tryNormalizeRelayUrl(e[1])).filter(e=>!!e)}set readRelayUrls(e){for(const s of e)this.tags.push(["r",s,READ_MARKER])}get writeRelayUrls(){return this.tags.filter(e=>e[0]==="r"||e[0]==="relay").filter(e=>!e[2]||e[2]&&e[2]===WRITE_MARKER).map(e=>tryNormalizeRelayUrl(e[1])).filter(e=>!!e)}set writeRelayUrls(e){for(const s of e)this.tags.push(["r",s,WRITE_MARKER])}get bothRelayUrls(){return this.tags.filter(e=>e[0]==="r"||e[0]==="relay").filter(e=>!e[2]).map(e=>e[1])}set bothRelayUrls(e){for(const s of e)this.tags.push(["r",s])}get relays(){return this.tags.filter(e=>e[0]==="r"||e[0]==="relay").map(e=>e[1])}get relaySet(){if(!this.ndk)throw new Error("NDKRelayList has no NDK instance");return new NDKRelaySet(new Set(this.relays.map(e=>this.ndk?.pool.getRelay(e)).filter(e=>!!e)),this.ndk)}};function relayListFromKind3(n,e){try{const s=JSON.parse(e.content),o=new NDKRelayList(n),a=new Set,c=new Set;for(let[u,h]of Object.entries(s)){try{u=normalizeRelayUrl(u)}catch{continue}if(!h)a.add(u),c.add(u);else{const m=h;m.write&&c.add(u),m.read&&a.add(u)}}return o.readRelayUrls=Array.from(a),o.writeRelayUrls=Array.from(c),o}catch{}}var signerRegistry=new Map;function registerSigner(n,e){signerRegistry.set(n,e)}var NDKPrivateKeySigner=class uf{_user;_privateKey;_pubkey;constructor(e,s){if(typeof e=="string")if(e.startsWith("nsec1")){const{type:o,data:a}=nip19_exports.decode(e);if(o==="nsec")this._privateKey=a;else throw new Error("Invalid private key provided.")}else if(e.length===64)this._privateKey=hexToBytes(e);else throw new Error("Invalid private key provided.");else this._privateKey=e;this._pubkey=getPublicKey(this._privateKey),s&&(this._user=s.getUser({pubkey:this._pubkey})),this._user??=new NDKUser({pubkey:this._pubkey})}get privateKey(){if(!this._privateKey)throw new Error("Not ready");return bytesToHex(this._privateKey)}get pubkey(){if(!this._pubkey)throw new Error("Not ready");return this._pubkey}get nsec(){if(!this._privateKey)throw new Error("Not ready");return nip19_exports.nsecEncode(this._privateKey)}get npub(){if(!this._pubkey)throw new Error("Not ready");return nip19_exports.npubEncode(this._pubkey)}static generate(){const e=generateSecretKey();return new uf(e)}async blockUntilReady(){return this._user}async user(){return this._user}get userSync(){return this._user}async sign(e){if(!this._privateKey)throw Error("Attempted to sign without a private key");return finalizeEvent(e,this._privateKey).sig}async encryptionEnabled(e){const s=[];return(!e||e==="nip04")&&s.push("nip04"),(!e||e==="nip44")&&s.push("nip44"),s}async encrypt(e,s,o){if(!this._privateKey||!this.privateKey)throw Error("Attempted to encrypt without a private key");const a=e.pubkey;if(o==="nip44"){const c=nip44_exports.v2.utils.getConversationKey(this._privateKey,a);return await nip44_exports.v2.encrypt(s,c)}return await nip04_exports.encrypt(this._privateKey,a,s)}async decrypt(e,s,o){if(!this._privateKey||!this.privateKey)throw Error("Attempted to decrypt without a private key");const a=e.pubkey;if(o==="nip44"){const c=nip44_exports.v2.utils.getConversationKey(this._privateKey,a);return await nip44_exports.v2.decrypt(s,c)}return await nip04_exports.decrypt(this._privateKey,a,s)}toPayload(){if(!this._privateKey)throw new Error("Private key not available");const e={type:"private-key",payload:this.privateKey};return JSON.stringify(e)}static async fromPayload(e,s){const o=JSON.parse(e);if(o.type!=="private-key")throw new Error(`Invalid payload type: expected 'private-key', got ${o.type}`);if(!o.payload||typeof o.payload!="string")throw new Error("Invalid payload content for private-key signer");return new uf(o.payload,s)}};registerSigner("private-key",NDKPrivateKeySigner);function disconnect(n,e){return e??=createDebug5("ndk:relay:auth-policies:disconnect"),async s=>{e?.(`Relay ${s.url} requested authentication, disconnecting`),n.removeRelay(s.url)}}async function signAndAuth(n,e,s,o,a,c){try{await n.sign(s),a(n)}catch(u){o?.(`Failed to publish auth event to relay ${e.url}`,u),c(n)}}function signIn({ndk:n,signer:e,debug:s}={}){return s??=createDebug5("ndk:auth-policies:signIn"),async(o,a)=>{s?.(`Relay ${o.url} requested authentication, signing in`);const c=new NDKEvent(n);return c.kind=22242,c.tags=[["relay",o.url],["challenge",a]],e??=n?.signer,new Promise(async(u,h)=>{e?await signAndAuth(c,o,e,s,u,h):n?.once("signer:ready",async m=>{await signAndAuth(c,o,m,s,u,h)})})}}var NDKRelayAuthPolicies={disconnect,signIn},NDKNip07Signer=class jm{_userPromise;encryptionQueue=[];encryptionProcessing=!1;debug;waitTimeout;_pubkey;ndk;_user;constructor(e=1e3,s){this.debug=createDebug5("ndk:nip07"),this.waitTimeout=e,this.ndk=s}get pubkey(){if(!this._pubkey)throw new Error("Not ready");return this._pubkey}async blockUntilReady(){await this.waitForExtension();const e=await window.nostr?.getPublicKey();if(!e)throw new Error("User rejected access");this._pubkey=e;let s;return this.ndk?s=this.ndk.getUser({pubkey:e}):s=new NDKUser({pubkey:e}),this._user=s,s}async user(){return this._userPromise||(this._userPromise=this.blockUntilReady()),this._userPromise}get userSync(){if(!this._user)throw new Error("User not ready");return this._user}async sign(e){await this.waitForExtension();const s=await window.nostr?.signEvent(e);if(!s)throw new Error("Failed to sign event");return s.sig}async relays(e){await this.waitForExtension();const s=await window.nostr?.getRelays?.()||{},o=[];for(const a of Object.keys(s))s[a].read&&s[a].write&&o.push(a);return o.map(a=>new NDKRelay(a,e?.relayAuthDefaultPolicy,e))}async encryptionEnabled(e){const s=[];return(!e||e==="nip04")&&window.nostr?.nip04&&s.push("nip04"),(!e||e==="nip44")&&window.nostr?.nip44&&s.push("nip44"),s}async encrypt(e,s,o="nip04"){if(!await this.encryptionEnabled(o))throw new Error(`${o}encryption is not available from your browser extension`);await this.waitForExtension();const a=e.pubkey;return this.queueEncryption(o,"encrypt",a,s)}async decrypt(e,s,o="nip04"){if(!await this.encryptionEnabled(o))throw new Error(`${o}encryption is not available from your browser extension`);await this.waitForExtension();const a=e.pubkey;return this.queueEncryption(o,"decrypt",a,s)}async queueEncryption(e,s,o,a){return new Promise((c,u)=>{this.encryptionQueue.push({scheme:e,method:s,counterpartyHexpubkey:o,value:a,resolve:c,reject:u}),this.encryptionProcessing||this.processEncryptionQueue()})}async processEncryptionQueue(e,s=0){if(!e&&this.encryptionQueue.length===0){this.encryptionProcessing=!1;return}this.encryptionProcessing=!0;const o=e||this.encryptionQueue.shift();if(!o){this.encryptionProcessing=!1;return}const{scheme:a,method:c,counterpartyHexpubkey:u,value:h,resolve:m,reject:g}=o;this.debug("Processing encryption queue item",{method:c,counterpartyHexpubkey:u,value:h});try{const _=await window.nostr?.[a]?.[c](u,h);if(!_)throw new Error("Failed to encrypt/decrypt");m(_)}catch(_){const b=_ instanceof Error?_.message:String(_);if(b.includes("call already executing")&&s<5){this.debug("Retrying encryption queue item",{method:c,counterpartyHexpubkey:u,value:h,retries:s}),setTimeout(()=>{this.processEncryptionQueue(o,s+1)},50*s);return}g(_ instanceof Error?_:new Error(b))}this.processEncryptionQueue()}waitForExtension(){return new Promise((e,s)=>{if(window.nostr){e();return}let o;const a=setInterval(()=>{window.nostr&&(clearTimeout(o),clearInterval(a),e())},100);o=setTimeout(()=>{clearInterval(a),s(new Error("NIP-07 extension not available"))},this.waitTimeout)})}toPayload(){return JSON.stringify({type:"nip07",payload:""})}static async fromPayload(e,s){const o=JSON.parse(e);if(o.type!=="nip07")throw new Error(`Invalid payload type: expected 'nip07', got ${o.type}`);return new jm(void 0,s)}};registerSigner("nip07",NDKNip07Signer);var NDKNostrRpc=class extends libExports.EventEmitter{ndk;signer;relaySet;debug;encryptionType="nip04";pool;constructor(n,e,s,o){if(super(),this.ndk=n,this.signer=e,o){this.pool=new NDKPool(o,[],n,{debug:s.extend("rpc-pool"),name:"Nostr RPC"}),this.relaySet=new NDKRelaySet(new Set,n,this.pool);for(const a of o){const c=this.pool.getRelay(a,!1,!1);c.authPolicy=NDKRelayAuthPolicies.signIn({ndk:n,signer:e,debug:s}),this.relaySet.addRelay(c),c.connect()}}this.debug=s.extend("rpc")}subscribe(n){const e=this.ndk.subscribe(n,{closeOnEose:!1,groupable:!1,cacheUsage:"ONLY_RELAY",pool:this.pool,relaySet:this.relaySet},!1);return e.on("event",async s=>{console.log("Received event",s.rawEvent());try{const o=await this.parseEvent(s);o.method?(console.log("Received request",o),this.emit("request",o)):(console.log("Received response",o),this.emit(`response-${o.id}`,o),this.emit("response",o))}catch(o){this.debug("error parsing event",o,s.rawEvent())}}),new Promise(s=>{e.on("eose",()=>{this.debug("eosed"),s(e)}),e.start()})}async parseEvent(n){this.encryptionType==="nip44"&&n.content.includes("?iv=")?this.encryptionType="nip04":this.encryptionType==="nip04"&&!n.content.includes("?iv=")&&(this.encryptionType="nip44");const e=this.ndk.getUser({pubkey:n.pubkey});e.ndk=this.ndk;let s;try{s=await this.signer.decrypt(e,n.content,this.encryptionType)}catch{const _=this.encryptionType==="nip04"?"nip44":"nip04";s=await this.signer.decrypt(e,n.content,_),this.encryptionType=_}const o=JSON.parse(s),{id:a,method:c,params:u,result:h,error:m}=o;return c?{id:a,pubkey:n.pubkey,method:c,params:u,event:n}:{id:a,result:h,error:m,event:n}}async sendResponse(n,e,s,o=24133,a){const c={id:n,result:s};a&&(c.error=a);const u=await this.signer.user(),h=this.ndk.getUser({pubkey:e}),m=new NDKEvent(this.ndk,{kind:o,content:JSON.stringify(c),tags:[["p",e]],pubkey:u.pubkey});m.content=await this.signer.encrypt(h,m.content,this.encryptionType),await m.sign(this.signer),await m.publish(this.relaySet)}async sendRequest(n,e,s=[],o=24133,a){console.log("Sending request",e,s);const c=Math.random().toString(36).substring(7),u=await this.signer.user(),h=this.ndk.getUser({pubkey:n}),m={id:c,method:e,params:s},g=new Promise(()=>{const b=T=>{T.result==="auth_url"?(this.once(`response-${c}`,b),this.emit("authUrl",T.error)):a&&a(T)};this.once(`response-${c}`,b)});console.log("Sending request",m);const _=new NDKEvent(this.ndk,{kind:o,content:JSON.stringify(m),tags:[["p",n]],pubkey:u.pubkey});return _.content=await this.signer.encrypt(h,_.content,this.encryptionType),await _.sign(this.signer),await _.publish(this.relaySet),g}};async function ndkSignerFromPayload(n,e){let s;try{s=JSON.parse(n)}catch(a){console.error("Failed to parse signer payload string",n,a);return}if(!s||typeof s.type!="string"){console.error("Failed to parse signer payload string",n,new Error("Missing type field"));return}const o=signerRegistry.get(s.type);if(!o)throw new Error(`Unknown signer type: ${s.type}`);try{return await o.fromPayload(n,e)}catch(a){const c=a instanceof Error?a.message:String(a);throw new Error(`Failed to deserialize signer type ${s.type}: ${c}`)}}function nostrConnectGenerateSecret(){return Math.random().toString(36).substring(2,15)}function generateNostrConnectUri(n,e,s,o){const a={name:o?.name?encodeURIComponent(o.name):"",url:o?.url?encodeURIComponent(o.url):"",image:o?.image?encodeURIComponent(o.image):"",perms:o?.perms?encodeURIComponent(o.perms):""};let c=`nostrconnect://${n}?image=${a.image}&url=${a.url}&name=${a.name}&perms=${a.perms}&secret=${encodeURIComponent(e)}`;return s&&(c+=`&relay=${encodeURIComponent(s)}`),c}var NDKNip46Signer=class mu extends libExports.EventEmitter{ndk;_user;bunkerPubkey;userPubkey;get pubkey(){if(!this.userPubkey)throw new Error("Not ready");return this.userPubkey}secret;localSigner;nip05;rpc;debug;relayUrls;subscription;nostrConnectUri;nostrConnectSecret;constructor(e,s,o,a,c){super(),this.ndk=e,this.debug=e.debug.extend("nip46:signer"),this.relayUrls=a,o?typeof o=="string"?this.localSigner=new NDKPrivateKeySigner(o):this.localSigner=o:this.localSigner=NDKPrivateKeySigner.generate(),s===!1||(s?s.startsWith("bunker://")?this.bunkerFlowInit(s):this.nip05Init(s):this.nostrconnectFlowInit(c)),this.rpc=new NDKNostrRpc(this.ndk,this.localSigner,this.debug,this.relayUrls)}static bunker(e,s,o){return new mu(e,s,o)}static nostrconnect(e,s,o,a){return new mu(e,void 0,o,[s],a)}nostrconnectFlowInit(e){this.nostrConnectSecret=nostrConnectGenerateSecret();const s=this.localSigner.pubkey;this.nostrConnectUri=generateNostrConnectUri(s,this.nostrConnectSecret,this.relayUrls?.[0],e)}bunkerFlowInit(e){const s=new URL(e),o=s.hostname||s.pathname.replace(/^\/\//,""),a=s.searchParams.get("pubkey"),c=s.searchParams.getAll("relay"),u=s.searchParams.get("secret");this.bunkerPubkey=o,this.userPubkey=a,this.relayUrls=c,this.secret=u}nip05Init(e){this.nip05=e}async startListening(){if(this.subscription)return;const e=await this.localSigner.user();if(!e)throw new Error("Local signer not ready");this.subscription=await this.rpc.subscribe({kinds:[24133],"#p":[e.pubkey]})}async user(){return this._user?this._user:this.blockUntilReady()}get userSync(){if(!this._user)throw new Error("Remote user not ready synchronously");return this._user}async blockUntilReadyNostrConnect(){return new Promise((e,s)=>{const o=a=>{a.result===this.nostrConnectSecret&&(this._user=a.event.author,this.userPubkey=a.event.pubkey,this.bunkerPubkey=a.event.pubkey,this.rpc.off("response",o),e(this._user))};this.startListening(),this.rpc.on("response",o)})}async blockUntilReady(){if(!this.bunkerPubkey&&!this.nostrConnectSecret&&!this.nip05)throw new Error("Bunker pubkey not set");if(this.nostrConnectSecret)return this.blockUntilReadyNostrConnect();if(this.nip05&&!this.userPubkey){const e=await NDKUser.fromNip05(this.nip05,this.ndk);e&&(this._user=e,this.userPubkey=e.pubkey,this.relayUrls=e.nip46Urls,this.rpc=new NDKNostrRpc(this.ndk,this.localSigner,this.debug,this.relayUrls))}if(!this.bunkerPubkey&&this.userPubkey)this.bunkerPubkey=this.userPubkey;else if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");return await this.startListening(),this.rpc.on("authUrl",(...e)=>{this.emit("authUrl",...e)}),new Promise((e,s)=>{const o=[this.userPubkey??""];if(this.secret&&o.push(this.secret),!this.bunkerPubkey)throw new Error("Bunker pubkey not set");console.log("sending connect"),this.rpc.sendRequest(this.bunkerPubkey,"connect",o,24133,a=>{a.result==="ack"?this.getPublicKey().then(c=>{this.userPubkey=c,this._user=this.ndk.getUser({pubkey:c}),e(this._user)}):s(a.error)})})}stop(){this.subscription?.stop(),this.subscription=void 0}async getPublicKey(){return this.userPubkey?this.userPubkey:new Promise((e,s)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"get_public_key",[],24133,o=>{e(o.result)})})}async encryptionEnabled(e){return e?[e]:Promise.resolve(["nip04","nip44"])}async encrypt(e,s,o="nip04"){return this.encryption(e,s,o,"encrypt")}async decrypt(e,s,o="nip04"){return this.encryption(e,s,o,"decrypt")}async encryption(e,s,o,a){return new Promise((u,h)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,`${o}_${a}`,[e.pubkey,s],24133,m=>{m.error?h(m.error):u(m.result)})})}async sign(e){return new Promise((o,a)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"sign_event",[JSON.stringify(e)],24133,c=>{if(c.error)a(c.error);else{const u=JSON.parse(c.result);o(u.sig)}})})}async createAccount(e,s,o){await this.startListening();const a=[];return e&&a.push(e),s&&a.push(s),o&&a.push(o),new Promise((c,u)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"create_account",a,24133,h=>{if(h.error)u(h.error);else{const m=h.result;c(m)}})})}toPayload(){if(!this.bunkerPubkey||!this.userPubkey)throw new Error("NIP-46 signer is not fully initialized for serialization");const e={type:"nip46",payload:{bunkerPubkey:this.bunkerPubkey,userPubkey:this.userPubkey,relayUrls:this.relayUrls,secret:this.secret,localSignerPayload:this.localSigner.toPayload(),nip05:this.nip05||null}};return JSON.stringify(e)}static async fromPayload(e,s){if(console.log("from payload",e),!s)throw new Error("NDK instance is required to deserialize NIP-46 signer");const o=JSON.parse(e);if(o.type!=="nip46")throw new Error(`Invalid payload type: expected 'nip46', got ${o.type}`);const a=o.payload;if(!a||typeof a!="object"||!a.localSignerPayload)throw new Error("Invalid payload content for nip46 signer");const c=await ndkSignerFromPayload(a.localSignerPayload,s);if(!c)throw new Error("Failed to deserialize local signer for NIP-46");if(!(c instanceof NDKPrivateKeySigner))throw new Error("Local signer must be an instance of NDKPrivateKeySigner");let u;return console.log("restore payload",a),u=new mu(s,!1,c,a.relayUrls),u.userPubkey=a.userPubkey,u.bunkerPubkey=a.bunkerPubkey,u.relayUrls=a.relayUrls,u.secret=a.secret,a.userPubkey&&(u._user=new NDKUser({pubkey:a.userPubkey}),u._user&&(u._user.ndk=s)),u}};registerSigner("nip46",NDKNip46Signer);function dedup(n,e){return n.created_at>e.created_at?n:e}async function getRelayListForUser(n,e){return(await getRelayListForUsers([n],e)).get(n)}async function getRelayListForUsers(n,e,s=!1,o=1e3){const a=e.outboxPool||e.pool,c=new Set;for(const b of a.relays.values())c.add(b);const u=new Map,h=new Map,m=new NDKRelaySet(c,e);if(e.cacheAdapter?.locking&&!s){const b=await e.fetchEvents({kinds:[3,10002],authors:Array.from(new Set(n))},{cacheUsage:"ONLY_CACHE",subId:"ndk-relay-list-fetch"});for(const T of b)T.kind===10002&&u.set(T.pubkey,NDKRelayList.from(T));for(const T of b)if(T.kind===3){if(u.has(T.pubkey))continue;const A=relayListFromKind3(e,T);A&&h.set(T.pubkey,A)}n=n.filter(T=>!u.has(T)&&!h.has(T))}if(n.length===0)return u;const g=new Map,_=new Map;return new Promise(b=>{(async()=>{const A={closeOnEose:!0,pool:a,groupable:!0,subId:"ndk-relay-list-fetch",addSinceFromCache:!0,relaySet:m};m&&(A.relaySet=m),e.subscribe({kinds:[3,10002],authors:n},A,{onEvent:R=>{if(R.kind===10002){const w=g.get(R.pubkey);if(w&&w.created_at>R.created_at)return;g.set(R.pubkey,R)}else if(R.kind===3){const w=_.get(R.pubkey);if(w&&w.created_at>R.created_at)return;_.set(R.pubkey,R)}},onEose:()=>{for(const R of g.values())u.set(R.pubkey,NDKRelayList.from(R));for(const R of n){if(u.has(R))continue;const w=_.get(R);if(!w)continue;const D=relayListFromKind3(e,w);D&&u.set(R,D)}b(u)}}),setTimeout(()=>{b(u)},o)})()})}var OutboxItem=class{type;relayUrlScores;readRelays;writeRelays;constructor(n){this.type=n,this.relayUrlScores=new Map,this.readRelays=new Set,this.writeRelays=new Set}},OutboxTracker=class extends libExports.EventEmitter{data;ndk;debug;constructor(n){super(),this.ndk=n,this.debug=n.debug.extend("outbox-tracker"),this.data=new distExports.LRUCache({maxSize:1e5,entryExpirationTimeInMS:120*1e3})}async trackUsers(n,e=!1){const s=[];for(let o=0;o<n.length;o+=400){const c=n.slice(o,o+400).map(u=>getKeyFromItem(u)).filter(u=>!this.data.has(u));if(c.length!==0){for(const u of c)this.data.set(u,new OutboxItem("user"));s.push(new Promise(u=>{getRelayListForUsers(c,this.ndk,e).then(h=>{for(const[m,g]of h){let _=this.data.get(m);if(_??=new OutboxItem("user"),g){_.readRelays=new Set(normalize(g.readRelayUrls)),_.writeRelays=new Set(normalize(g.writeRelayUrls));for(const b of _.readRelays)this.ndk.pool.blacklistRelayUrls.has(b)&&_.readRelays.delete(b);for(const b of _.writeRelays)this.ndk.pool.blacklistRelayUrls.has(b)&&_.writeRelays.delete(b);this.data.set(m,_)}}}).finally(u)}))}}return Promise.all(s)}track(n,e,s=!0){const o=getKeyFromItem(n);e??=getTypeFromItem(n);let a=this.data.get(o);return a||(a=new OutboxItem(e),n instanceof NDKUser&&this.trackUsers([n])),a}};function getKeyFromItem(n){return n instanceof NDKUser?n.pubkey:n}function getTypeFromItem(n){return n instanceof NDKUser?"user":"kind"}function correctRelaySet(n,e){const s=e.connectedRelays();if(!Array.from(n.relays).some(a=>s.map(c=>c.url).includes(a.url)))for(const a of s)n.addRelay(a);if(s.length===0)for(const a of e.relays.values())n.addRelay(a);return n}var NDKSubscriptionManager=class{subscriptions;seenEvents=new Map;constructor(){this.subscriptions=new Map}add(n){this.subscriptions.set(n.internalId,n),n.onStopped,n.onStopped=()=>{this.subscriptions.delete(n.internalId)},n.on("close",()=>{this.subscriptions.delete(n.internalId)})}seenEvent(n,e){const s=this.seenEvents.get(n)||[];s.push(e),this.seenEvents.set(n,s)}dispatchEvent(n,e,s=!1){e&&this.seenEvent(n.id,e);const o=this.subscriptions.values(),a=[];for(const c of o)matchFilters(c.filters,n)&&a.push(c);for(const c of a)c.eventReceived(n,e,!1,s)}},debug7=createDebug5("ndk:active-user");async function getUserRelayList(n){if(!this.autoConnectUserRelays)return;const e=await getRelayListForUser(n.pubkey,this);if(e){for(const s of e.relays){let o=this.pool.relays.get(s);o||(o=new NDKRelay(s,this.relayAuthDefaultPolicy,this),this.pool.addRelay(o))}return e}}async function setActiveUser(n){const e=this.outboxPool||this.pool;e.connectedRelays.length>0?setActiveUserConnected.call(this,n):e.once("connect",()=>{setActiveUserConnected.call(this,n)})}async function setActiveUserConnected(n){const e=await getUserRelayList.call(this,n),s=[{kinds:[10006],authors:[n.pubkey]}];this.autoFetchUserMutelist&&s[0].kinds?.push(1e4);const o=new Map,a=e?e.relaySet:void 0;this.subscribe(s,{subId:"active-user-settings",closeOnEose:!0,relaySet:a},{onEvent:c=>{const u=o.get(c.kind);u&&u.created_at>=c.created_at||o.set(c.kind,c)},onEose:()=>{for(const c of o.values())processEvent.call(this,c)}})}async function processEvent(n){n.kind===10006?processBlockRelayList.call(this,n):n.kind===1e4&&processMuteList.call(this,n)}function processBlockRelayList(n){const e=lists_default.from(n);for(const s of e.items)this.pool.blacklistRelayUrls.add(s[0]);debug7("Added %d relays to relay blacklist",e.items.length)}function processMuteList(n){const e=lists_default.from(n);for(const s of e.items)this.mutedIds.set(s[1],s[0]);debug7("Added %d users to mute list",e.items.length)}function getEntity(n){try{const e=nip19_exports.decode(n);return e.type==="npub"?npub(this,e.data):e.type==="nprofile"?nprofile(this,e.data):e}catch{return null}}function npub(n,e){return n.getUser({pubkey:e})}function nprofile(n,e){const s=n.getUser({pubkey:e.pubkey});return e.relays&&(s.relayUrls=e.relays),s}function isValidHint(n){if(!n||n==="")return!1;try{return new URL(n),!0}catch{return!1}}async function fetchEventFromTag(n,e,s,o={type:"timeout"}){const a=this.debug.extend("fetch-event-from-tag"),[c,u,h]=n;s={},a("fetching event from tag",n,s,o);const m=getRelaysForSync(this,e.pubkey);if(m&&m.size>0){a("fetching event from author relays %o",Array.from(m));const w=NDKRelaySet.fromRelayUrls(Array.from(m),this),D=await this.fetchEvent(u,s,w);if(D)return D}else a("no author relays found for %s",e.pubkey,e);const g=calculateRelaySetsFromFilters(this,[{ids:[u]}],this.pool);a("fetching event without relay hint",g);const _=await this.fetchEvent(u,s);if(_)return _;if(h&&h!==""){const w=await this.fetchEvent(u,s,this.pool.getRelay(h,!0,!0,[{ids:[u]}]));if(w)return w}let b;const T=isValidHint(h)?this.pool.getRelay(h,!1,!0,[{ids:[u]}]):void 0,A=new Promise(w=>{this.fetchEvent(u,s,T).then(w)});if(!isValidHint(h)||o.type==="none")return A;const R=new Promise(async w=>{const D=o.relaySet,fn=o.timeout??1500,yn=new Promise(pn=>setTimeout(pn,fn));if(o.type==="timeout"&&await yn,b)w(b);else{a("fallback fetch triggered");const pn=await this.fetchEvent(u,s,D);w(pn)}});switch(o.type){case"timeout":return Promise.race([A,R]);case"eose":return b=await A,b||R}}var Queue=class{queue=[];maxConcurrency;processing=new Set;promises=new Map;constructor(n,e){this.maxConcurrency=e}add(n){if(this.promises.has(n.id))return this.promises.get(n.id);const e=new Promise((s,o)=>{this.queue.push({...n,func:()=>n.func().then(a=>(s(a),a),a=>{throw o(a),a})}),this.process()});return this.promises.set(n.id,e),e.finally(()=>{this.promises.delete(n.id),this.processing.delete(n.id),this.process()}),e}process(){if(this.processing.size>=this.maxConcurrency||this.queue.length===0)return;const n=this.queue.shift();!n||this.processing.has(n.id)||(this.processing.add(n.id),n.func())}clear(){this.queue=[]}clearProcessing(){this.processing.clear()}clearAll(){this.clear(),this.clearProcessing()}length(){return this.queue.length}},DEFAULT_OUTBOX_RELAYS=["wss://purplepag.es/","wss://nos.lol/"],DEFAULT_BLACKLISTED_RELAYS=["wss://brb.io/","wss://nostr.mutinywallet.com/"],NDK=class extends libExports.EventEmitter{_explicitRelayUrls;blacklistRelayUrls;pool;outboxPool;_signer;_activeUser;cacheAdapter;debug;devWriteRelaySet;outboxTracker;mutedIds;clientName;clientNip89;queuesZapConfig;queuesNip05;asyncSigVerification=!1;initialValidationRatio=1;lowestValidationRatio=.1;validationRatioFn;autoBlacklistInvalidRelays=!1;subManager;_signatureVerificationFunction;_signatureVerificationWorker;signatureVerificationTimeMs=0;publishingFailureHandled=!1;pools=[];relayAuthDefaultPolicy;httpFetch;netDebug;autoConnectUserRelays=!0;autoFetchUserMutelist=!0;walletConfig;constructor(n={}){super(),this.debug=n.debug||createDebug5("ndk"),this.netDebug=n.netDebug,this._explicitRelayUrls=n.explicitRelayUrls||[],this.blacklistRelayUrls=n.blacklistRelayUrls||DEFAULT_BLACKLISTED_RELAYS,this.subManager=new NDKSubscriptionManager,this.pool=new NDKPool(n.explicitRelayUrls||[],[],this),this.pool.name="Main",this.pool.on("relay:auth",async(e,s)=>{this.relayAuthDefaultPolicy&&await this.relayAuthDefaultPolicy(e,s)}),this.autoConnectUserRelays=n.autoConnectUserRelays??!0,this.autoFetchUserMutelist=n.autoFetchUserMutelist??!0,this.clientName=n.clientName,this.clientNip89=n.clientNip89,this.relayAuthDefaultPolicy=n.relayAuthDefaultPolicy,n.enableOutboxModel&&(this.outboxPool=new NDKPool(n.outboxRelayUrls||DEFAULT_OUTBOX_RELAYS,[],this,{debug:this.debug.extend("outbox-pool"),name:"Outbox Pool"}),this.outboxTracker=new OutboxTracker(this)),this.signer=n.signer,this.cacheAdapter=n.cacheAdapter,this.mutedIds=n.mutedIds||new Map,n.devWriteRelayUrls&&(this.devWriteRelaySet=NDKRelaySet.fromRelayUrls(n.devWriteRelayUrls,this)),this.queuesZapConfig=new Queue("zaps",3),this.queuesNip05=new Queue("nip05",10),n.signatureVerificationWorker&&(this.signatureVerificationWorker=n.signatureVerificationWorker),n.signatureVerificationFunction&&(this.signatureVerificationFunction=n.signatureVerificationFunction),this.initialValidationRatio=n.initialValidationRatio||1,this.lowestValidationRatio=n.lowestValidationRatio||.1,this.autoBlacklistInvalidRelays=n.autoBlacklistInvalidRelays||!1,this.validationRatioFn=n.validationRatioFn||this.defaultValidationRatioFn;try{this.httpFetch=fetch}catch{}}set explicitRelayUrls(n){this._explicitRelayUrls=n.map(normalizeRelayUrl),this.pool.relayUrls=n}get explicitRelayUrls(){return this._explicitRelayUrls||[]}set signatureVerificationWorker(n){this._signatureVerificationWorker=n,n?(signatureVerificationInit(n),this.asyncSigVerification=!0):this.asyncSigVerification=!1}set signatureVerificationFunction(n){this._signatureVerificationFunction=n,this.asyncSigVerification=!!n}get signatureVerificationFunction(){return this._signatureVerificationFunction}addExplicitRelay(n,e,s=!0){let o;return typeof n=="string"?o=new NDKRelay(n,e,this):o=n,this.pool.addRelay(o,s),this.explicitRelayUrls?.push(o.url),o}toJSON(){return{relayCount:this.pool.relays.size}.toString()}get activeUser(){return this._activeUser}set activeUser(n){const e=this._activeUser?.pubkey!==n?.pubkey;this._activeUser=n,n&&e?setActiveUser.call(this,n):n||(this.mutedIds=new Map)}get signer(){return this._signer}set signer(n){this._signer=n,n&&this.emit("signer:ready",n),n?.user().then(e=>{e.ndk=this,this.activeUser=e})}async connect(n){this._signer&&this.autoConnectUserRelays&&(this.debug("Attempting to connect to user relays specified by signer %o",await this._signer.relays?.(this)),this._signer.relays&&(await this._signer.relays(this)).forEach(o=>this.pool.addRelay(o)));const e=[this.pool.connect(n)];return this.outboxPool&&e.push(this.outboxPool.connect(n)),Promise.allSettled(e).then(()=>{})}reportInvalidSignature(n,e){this.debug(`Invalid signature detected for event ${n.id}${e?` from relay ${e.url}`:""}`),this.emit("event:invalid-sig",n,e),this.autoBlacklistInvalidRelays&&e&&this.blacklistRelay(e.url)}blacklistRelay(n){if(this.blacklistRelayUrls||(this.blacklistRelayUrls=[]),!this.blacklistRelayUrls.includes(n)){this.blacklistRelayUrls.push(n),this.debug(`Added relay to blacklist: ${n}`);const e=this.pool.getRelay(n,!1,!1);e&&(e.disconnect(),this.debug(`Disconnected from blacklisted relay: ${n}`))}}defaultValidationRatioFn(n,e,s){if(e<10)return this.initialValidationRatio;const o=Math.min(e/100,1),a=this.initialValidationRatio*(1-o)+this.lowestValidationRatio*o;return Math.max(a,this.lowestValidationRatio)}getUser(n){const e=new NDKUser(n);return e.ndk=this,e}async getUserFromNip05(n,e=!1){return NDKUser.fromNip05(n,this,e)}subscribe(n,e,s=!0,o=!0){let a=e?.relaySet,c=o;s instanceof NDKRelaySet?(console.warn("relaySet is deprecated, use opts.relaySet instead. This will be removed in version v2.14.0"),a=s,c=o):(typeof s=="boolean"||typeof s=="object")&&(c=s);const u=new NDKSubscription(this,n,{relaySet:a,...e});this.subManager.add(u);const h=u.pool;if(u.relaySet)for(const m of u.relaySet.relays)h.useTemporaryRelay(m,void 0,u.filters);if(this.outboxPool&&u.hasAuthorsFilter()){const m=u.filters.filter(g=>g.authors&&g.authors?.length>0).flatMap(g=>g.authors);this.outboxTracker?.trackUsers(m)}if(c){let m;typeof c=="object"&&(c.onEvent&&u.on("event",c.onEvent),c.onEose&&u.on("eose",c.onEose),c.onEvents&&(m=c.onEvents)),setTimeout(()=>{const g=u.start(!m);g&&g.length>0&&m&&m(g)},0)}return u}fetchEventFromTag=fetchEventFromTag.bind(this);fetchEventSync(n){if(!this.cacheAdapter)throw new Error("Cache adapter not set");let e;typeof n=="string"?e=[filterFromId(n)]:e=n;const s=new NDKSubscription(this,e),o=this.cacheAdapter.query(s);if(o instanceof Promise)throw new Error("Cache adapter is async");return o.map(a=>(a.ndk=this,a))}async fetchEvent(n,e,s){let o,a;if(s instanceof NDKRelay?a=new NDKRelaySet(new Set([s]),this):s instanceof NDKRelaySet&&(a=s),!s&&typeof n=="string"&&!isNip33AValue(n)){const c=relaysFromBech32(n,this);c.length>0&&(a=new NDKRelaySet(new Set(c),this),a=correctRelaySet(a,this.pool))}if(typeof n=="string"?o=[filterFromId(n)]:Array.isArray(n)?o=n:o=[n],o.length===0)throw new Error(`Invalid filter: ${JSON.stringify(n)}`);return new Promise(c=>{let u=null;const h={...e||{},closeOnEose:!0};a&&(h.relaySet=a);const m=this.subscribe(o,h,!1),g=setTimeout(()=>{m.stop(),c(u)},1e4);m.on("event",_=>{_.ndk=this,_.isReplaceable()?(!u||u.created_at<_.created_at)&&(u=_):(clearTimeout(g),c(_))}),m.on("eose",()=>{clearTimeout(g),c(u)}),m.start()})}async fetchEvents(n,e,s){return new Promise(o=>{const a=new Map,c={...e||{},closeOnEose:!0};s&&(c.relaySet=s);const u=this.subscribe(n,c,!1),h=m=>{let g;m instanceof NDKEvent?g=m:g=new NDKEvent(void 0,m);const _=g.deduplicationKey(),b=a.get(_);b&&(g=dedup(b,g)),g.ndk=this,a.set(_,g)};u.on("event",h),u.on("eose",()=>{o(new Set(a.values()))}),u.start()})}assertSigner(){if(!this.signer)throw this.emit("signer:required"),new Error("Signer required")}getEntity=getEntity.bind(this);set wallet(n){if(!n){this.walletConfig=void 0;return}this.walletConfig??={},this.walletConfig.lnPay=n?.lnPay?.bind(n),this.walletConfig.cashuPay=n?.cashuPay?.bind(n)}};createDebug5("ndk:zapper:ln");createDebug5("ndk:zapper");const ndk=new NDK({explicitRelayUrls:["wss://relay.damus.io","wss://relay.primal.net"]}),useDecentralizedIdentity=(n,e)=>{const[s,o]=reactExports.useState(!1),[a,c]=reactExports.useState(null),[u,h]=reactExports.useState(n||""),[m,g]=reactExports.useState(e||"");reactExports.useEffect(()=>{const wn=localStorage.getItem("local_npub"),V=localStorage.getItem("local_nsec");wn&&h(wn),V&&g(V),ndk.connect().then(()=>{o(!0)}).catch(bn=>{console.error("Error connecting to Nostr:",bn),c(bn.message)})},[]);const _=async(wn=null)=>{const V=NDKPrivateKeySigner.generate(),bn=V.privateKey,jt=(await V.user()).npub,ln=distExports$1.bech32.encode("nsec",distExports$1.bech32.toWords(bufferExports.Buffer.from(bn,"hex")));return g(ln),h(jt),localStorage.getItem("local_nsec")||(A(JSON.stringify({name:wn,about:"A student onboarded with Robots Building Education"}),0,jt),A("gm nostr! I've joined #LearnWithNostr from Tiktok by creating an account with https://robotsbuildingeducation.com so I can learn how to code with AI.",1,jt)),localStorage.setItem("local_nsec",ln),localStorage.setItem("local_npub",jt),localStorage.setItem("uniqueId",jt),{npub:jt,nsec:ln}},b=async(wn=null,V=null)=>{const wt="npub1mgt5c7qh6dm9rg57mrp89rqtzn64958nj5w9g2d2h9dng27hmp0sww7u2v",jt=V||localStorage.getItem("local_nsec")||m||void 0,ln=wn||localStorage.getItem("local_npub")||u||wt;try{const{words:vn}=distExports$1.bech32.decode(jt),dn=bufferExports.Buffer.from(distExports$1.bech32.fromWords(vn)).toString("hex"),{words:mn}=distExports$1.bech32.decode(ln),zt=bufferExports.Buffer.from(distExports$1.bech32.fromWords(mn)).toString("hex"),$n=new NDK({explicitRelayUrls:["wss://relay.damus.io","wss://relay.primal.net"]});return await $n.connect(),o(!0),{ndkInstance:$n,hexNpub:zt,signer:new NDKPrivateKeySigner(dn)}}catch(vn){return console.error("Error connecting to Nostr:",vn),c(vn.message),null}},T=async wn=>{try{const{words:V}=distExports$1.bech32.decode(wn),bn=bufferExports.Buffer.from(distExports$1.bech32.fromWords(V)).toString("hex"),wt=new NDKPrivateKeySigner(bn);await wt.blockUntilReady(),ndk.signer=wt;const jt=await wt.user();return h(jt.npub),g(wn),localStorage.setItem("local_npub",jt.npub),localStorage.setItem("local_nsec",wn),c(null),{user:jt,signer:wt}}catch(V){return console.error("Error logging in with keys:",V),c(V.message),null}},A=async(wn,V=NDKKind.Text,bn=null)=>{try{if(bn&&!await T(bn))return;if(!ndk.signer){c("No signer available. Please login first.");return}const wt=new NDKEvent(ndk,{kind:V,tags:[],content:wn,created_at:Math.floor(Date.now()/1e3)});await wt.sign(ndk.signer);const jt=await wt.publish();jt.size>0?console.log("Posted successfully to relays:",Array.from(jt)):console.warn("No relay acknowledged the event.")}catch(wt){console.error("Error posting content:",wt),c(wt.message)}},R=wn=>{const{words:V}=distExports$1.bech32.decode(wn);return bufferExports.Buffer.from(distExports$1.bech32.fromWords(V)).toString("hex")},w=async(wn,V=localStorage.getItem("local_npub"),bn=void 0)=>{if(!V){console.error("Awardee public key is required to award the badge.");return}if(!bn){console.error("Owner's private key is required to sign the badge award event.");return}const{words:wt}=distExports$1.bech32.decode(bn),jt=bufferExports.Buffer.from(distExports$1.bech32.fromWords(wt)).toString("hex");let ln=new NDKPrivateKeySigner(jt);const vn=new NDKEvent(ndk,{kind:NDKKind.BadgeAward,tags:[["a",`${NDKKind.BadgeDefinition}:${R("npub14vskcp90k6gwp6sxjs2jwwqpcmahg6wz3h5vzq0yn6crrsq0utts52axlt")}:${wn}`],["p",R(localStorage.getItem("local_npub"))]],created_at:Math.floor(Date.now()/1e3)});try{await vn.sign(ln)}catch(dn){console.error("Error signing badge event:",dn)}try{await vn.publish()}catch(dn){console.error("Error publishing badge event:",dn)}},D=async wn=>{try{const V=await b();if(!V)return[];const{ndkInstance:bn}=V;let wt=wn.split(":");const jt={kinds:[NDKKind.BadgeDefinition],authors:[wt[1]],"#d":[wt[2]],limit:1},ln=bn.subscribe(jt,{closeOnEose:!0}),vn=[];return ln.on("event",dn=>{const mn={content:dn.content,createdAt:dn.created_at,tags:dn.tags,badgeAddress:wn};vn.push(mn)}),await new Promise(dn=>ln.on("eose",dn)),vn}catch(V){return console.error("Error retrieving badges:",V),c(V.message),[]}};return{isConnected:s,errorMessage:a,nostrPubKey:u,nostrPrivKey:m,generateNostrKeys:_,postNostrContent:A,auth:T,assignExistingBadgeToNpub:w,getUserBadges:async(wn=localStorage.getItem("local_npub"))=>{try{const V=await b();if(!V)return[];const{ndkInstance:bn}=V,wt=R(wn),jt={kinds:[NDKKind.BadgeAward],"#p":[wt],limit:100},ln=bn.subscribe(jt,{closeOnEose:!0}),vn=[];ln.on("event",Sn=>{const En={content:Sn.content,createdAt:Sn.created_at,tags:Sn.tags};vn.push(En)}),await new Promise(Sn=>ln.on("eose",Sn));let mn=[...new Set(vn.flatMap(Sn=>Sn.tags.filter(En=>En[0]==="a"&&En[1]).map(En=>En[1])))].map(Sn=>D(Sn)),zt=await Promise.all(mn);const $n=[];return zt.forEach(Sn=>{Sn.forEach(En=>{let Cn="",On="";En.tags.forEach(Fn=>{Fn[0]==="name"&&(Cn=Fn[1]),Fn[0]==="image"&&(On=Fn[1])}),Cn&&On&&$n.push({name:Cn,image:On,badgeAddress:En.badgeAddress})})}),$n}catch(V){return console.error("Error retrieving badges:",V),[]}},getLastNotesByNpub:async(wn=localStorage.getItem("local_npub"))=>{try{const V=await b();if(!V)return[];const{ndkInstance:bn}=V,wt=R(wn),jt={kinds:[NDKKind.Text],authors:[wt],limit:5},ln=bn.subscribe(jt,{closeOnEose:!0}),vn=[];return ln.on("event",dn=>{vn.push({content:dn.content,createdAt:dn.created_at,tags:dn.tags,id:dn.id})}),await new Promise(dn=>ln.on("eose",dn)),vn}catch(V){return console.error("Error retrieving notes:",V),c(V.message),[]}},getGlobalNotesWithProfilesByHashtag:async(wn="LearnWithNostr")=>{try{const V=await b();if(!V)return[];const{ndkInstance:bn}=V,wt={kinds:[NDKKind.Text],"#t":[wn],limit:50},jt=bn.subscribe(wt,{closeOnEose:!0}),ln=[],vn=new Set;jt.on("event",Sn=>{ln.push({content:Sn.content,createdAt:Sn.created_at,tags:Sn.tags,id:Sn.id,pubkey:Sn.pubkey,npub:distExports$1.bech32.encode("npub",distExports$1.bech32.toWords(bufferExports.Buffer.from(Sn.pubkey,"hex"))),profile:null}),vn.add(Sn.pubkey)}),await new Promise(Sn=>jt.on("eose",Sn));const dn={kinds:[NDKKind.Metadata],authors:Array.from(vn)},mn=bn.subscribe(dn,{closeOnEose:!0}),zt=new Map;return mn.on("event",Sn=>{const En=JSON.parse(Sn.content);zt.set(Sn.pubkey,{name:En.name||"New Private User",about:En.about||"",picture:En.picture||""})}),await new Promise(Sn=>mn.on("eose",Sn)),ln.map(Sn=>(Sn.profile=zt.get(Sn.pubkey)||{name:"New Private User",about:"",picture:""},Sn))}catch(V){return console.error("Error fetching notes with profiles:",V),[]}}}},App=()=>{const[n,e]=reactExports.useState(!1),s=reactExports.useRef(!1),[o,a]=reactExports.useState(typeof window<"u"&&localStorage.getItem("local_npub")||""),[c,u]=reactExports.useState(typeof window<"u"&&localStorage.getItem("local_nsec")||""),{generateNostrKeys:h,auth:m}=useDecentralizedIdentity(localStorage.getItem("local_npub")??"",localStorage.getItem("local_nsec")??""),g=async b=>{if(!b)return null;try{const T=doc(database,"users",b),A=await getDoc(T);return A.exists()?{id:A.id,...A.data()}:null}catch(T){return console.error("loadUserObjectFromDB failed:",T),null}},_=async()=>{e(!0);try{let b=(localStorage.getItem("local_npub")||"").trim(),T=await g(b);T||(b=(await h()).npub,await setDoc(doc(database,"users",b),{local_npub:b,createdAt:new Date().toISOString()},{merge:!0}),T=await g(b)),a(b),u(localStorage.getItem("local_nsec")||"")}catch(b){console.error("connectDID error:",b)}finally{e(!1)}};return reactExports.useEffect(()=>{s.current||(s.current=!0,_())},[]),jsxRuntimeExports.jsx(VoiceChat,{auth:m,activeNpub:o,activeNsec:c,onSwitchedAccount:async()=>{await _(),a(localStorage.getItem("local_npub")||""),u(localStorage.getItem("local_nsec")||"")}})};clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(ChakraProvider,{children:jsxRuntimeExports.jsx(App,{})}));
